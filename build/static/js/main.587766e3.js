/*! For license information please see main.587766e3.js.LICENSE.txt */
(()=>{var e={9415:(e,t,n)=>{n(9186),n(4408);const r=n(9739);n(5786),n(1668),n(2147);e.exports.readAsText=function(e,t){try{const n=new FileReader;n.readAsText(e),n.onload=function(e){e.target&&e.target.result?t(null,e.target.result):t({message:"Dropped file could not be loaded"})},n.onerror=function(){t({message:"Dropped file was unreadable"})}}catch(n){t({message:"Dropped file was unreadable"})}},e.exports.readFile=function(e,t,n){const i=function(e,t){const n=e.name?e.name.toLowerCase():"";function r(e){return-1!==n.indexOf(e)}if("application/vnd.google-earth.kml+xml"===e.type||r(".kml"))return"kml";if(r(".gpx"))return"gpx";if(r(".geojson")||r(".json")||r(".topojson"))return"geojson";if("text/csv"===e.type||r(".csv")||r(".tsv")||r(".dsv"))return"dsv";if(r(".xml")||r(".osm"))return"xml";if(r(".poly"))return"poly";if(t&&-1!==t.indexOf("shape_id,shape_pt_lat,shape_pt_lon")||t&&-1!==t.indexOf('"shape_id","shape_pt_lat","shape_pt_lon"'))return"gtfs-shapes";if(t&&-1!==t.indexOf("stop_id,stop_code,stop_name,stop_desc,stop_lat,stop_lon")||t&&-1!==t.indexOf('"stop_id","stop_code","stop_name","stop_desc","stop_lat","stop_lon"'))return"gtfs-stops"}(e,t);if(!i)return n({message:"Could not detect file type"});"dsv"===i&&r.csv2geojson(t,{delimiter:"auto"},((e,r)=>e?n({type:"geocode",result:r,raw:t}):n(null,r)))}},5296:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,_=0,b="";function x(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:a,return:""}}function w(e,t){return a(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return _=v>0?u(b,--v):0,g--,10===_&&(g=1,m--),_}function E(){return _=v<y?u(b,v++):0,g++,10===_&&(g=1,m++),_}function A(){return u(b,v)}function T(){return v}function C(e,t){return h(b,e,t)}function k(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(e){return m=g=1,y=d(b=e),v=0,[]}function P(e){return b="",e}function L(e){return s(C(v-1,N(91===e?e+2:40===e?e+1:e)))}function M(e){for(;(_=A())&&_<33;)E();return k(e)>2||k(_)>3?"":" "}function O(e,t){for(;--t&&E()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return C(e,T()+(t<6&&32==A()&&32==E()))}function N(e){for(;E();)switch(_){case e:return v;case 34:case 39:34!==e&&39!==e&&N(_);break;case 40:41===e&&N(e);break;case 92:E()}return v}function R(e,t){for(;E()&&e+_!==57&&(e+_!==84||47!==A()););return"/*"+C(t,v-1)+"*"+o(47===e?e:E())}function D(e){for(;!k(A());)E();return C(e,v)}var F="-ms-",j="-moz-",z="-webkit-",B="comm",U="rule",V="decl",Z="@keyframes";function q(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function G(e,t,n,r){switch(e.type){case"@import":case V:return e.return=e.return||e.value;case B:return"";case Z:return e.return=e.value+"{"+q(e.children,r)+"}";case U:e.value=e.props.join(",")}return d(n=q(e.children,r))?e.return=e.value+"{"+n+"}":""}function W(e){return P(H("",null,null,null,[""],e=I(e),0,[0],e))}function H(e,t,n,r,i,a,s,h,p){for(var m=0,g=0,y=s,v=0,_=0,b=0,x=1,w=1,C=1,k=0,I="",P=i,N=a,F=r,j=I;w;)switch(b=k,k=E()){case 40:if(108!=b&&58==u(j,y-1)){-1!=c(j+=l(L(k),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:j+=L(k);break;case 9:case 10:case 13:case 32:j+=M(b);break;case 92:j+=O(T()-1,7);continue;case 47:switch(A()){case 42:case 47:f(K(R(E(),T()),t,n),p);break;default:j+="/"}break;case 123*x:h[m++]=d(j)*C;case 125*x:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+g:_>0&&d(j)-y&&f(_>32?Y(j+";",r,n,y-1):Y(l(j," ","")+";",r,n,y-2),p);break;case 59:j+=";";default:if(f(F=X(j,t,n,m,g,i,h,I,P=[],N=[],y),a),123===k)if(0===g)H(j,t,F,F,P,a,y,h,N);else switch(99===v&&110===u(j,3)?100:v){case 100:case 109:case 115:H(e,F,F,r&&f(X(e,F,F,0,0,i,h,I,i,P=[],y),N),i,N,y,h,r?P:N);break;default:H(j,F,F,F,[""],N,0,h,N)}}m=g=_=0,x=C=1,I=j="",y=s;break;case 58:y=1+d(j),_=b;default:if(x<1)if(123==k)--x;else if(125==k&&0==x++&&125==S())continue;switch(j+=o(k),k*x){case 38:C=g>0?1:(j+="\f",-1);break;case 44:h[m++]=(d(j)-1)*C,C=1;break;case 64:45===A()&&(j+=L(E())),v=A(),g=y=d(I=j+=D(T())),k++;break;case 45:45===b&&2==d(j)&&(x=0)}}return a}function X(e,t,n,r,o,a,c,u,d,f,m){for(var g=o-1,y=0===o?a:[""],v=p(y),_=0,b=0,w=0;_<r;++_)for(var S=0,E=h(e,g+1,g=i(b=c[_])),A=e;S<v;++S)(A=s(b>0?y[S]+" "+E:l(E,/&\f/g,y[S])))&&(d[w++]=A);return x(e,t,n,0===o?U:u,d,f,m)}function K(e,t,n){return x(e,t,n,B,o(_),h(e,2,-2),0)}function Y(e,t,n,r){return x(e,t,n,V,h(e,0,r),h(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=A(),38===r&&12===i&&(t[n]=1),!k(i);)E();return C(e,v)},Q=function(e,t){return P(function(e,t){var n=-1,r=44;do{switch(k(r)){case 0:38===r&&12===A()&&(t[n]=1),e[n]+=J(v-1,t,n);break;case 2:e[n]+=L(r);break;case 4:if(44===r){e[++n]=58===A()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=E());return e}(I(e),t))},$=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||$.get(n))&&!r){$.set(e,!0);for(var i=[],o=Q(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return"-webkit-print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+j+e+F+e+e;case 6828:case 4268:return z+e+F+e+e;case 6165:return z+e+F+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return z+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+F+l(e,"shrink","negative")+e;case 5292:return z+e+F+l(e,"basis","preferred-size")+e;case 6060:return"-webkit-box-"+l(e,"-grow","")+z+e+F+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,"-webkit-$1"),/(image-set)/,"-webkit-$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,"-webkit-$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,"-webkit-$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1-moz-"+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":-webkit-")+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1-webkit-"+(45===u(e,14)?"inline-":"")+"box$3$1"+"-webkit-$2$3$1"+"-ms-$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case Z:return q([w(e,{value:l(e.value,"@","@-webkit-")})],r);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q([w(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return q([w(e,{props:[l(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,"-ms-input-$1")]})],r)}return""}))}}];const ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,a,s={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,h=[G,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([ee,te].concat(i,h));a=function(e,t,n,r){c=n,q(W(e?e+"{"+t.styles+"}":t.styles),d),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return f.sheet.hydrate(l),f}},1816:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},6132:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>l,w:()=>s});var r=n(7313),i=n(5296),o=(n(1086),n(5696),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));var a=o.Provider,s=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))},l=(0,r.createContext)({})},686:(e,t,n)=>{"use strict";n.d(t,{F4:()=>u,iv:()=>c,xB:()=>l});var r=n(7313),i=(n(5296),n(6132)),o=(n(7861),n(4911)),a=n(1086),s=n(5696),l=(0,i.w)((function(e,t){var n=e.styles,l=(0,a.O)([n],void 0,(0,r.useContext)(i.T)),c=(0,r.useRef)();return(0,s.j)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,s.j)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.My)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.O)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},1086:(e,t,n)=>{"use strict";n.d(t,{O:()=>m});const r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};const i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var o=n(1816),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,o.Z)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===i[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":c(a)&&(r+=u(o)+":"+h(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=d(e,t,a);switch(o){case"animation":case"animationName":r+=u(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)c(a[l])&&(r+=u(o)+":"+h(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=p,o=n(e);return p=i,d(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var p,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,o="";p=void 0;var a=e[0];null==a||void 0===a.raw?(i=!1,o+=d(n,t,a)):o+=a[0];for(var s=1;s<e.length;s++)o+=d(n,t,e[s]),i&&(o+=a[s]);f.lastIndex=0;for(var l,c="";null!==(l=f.exec(o));)c+="-"+l[1];return{name:r(o)+c,styles:o,next:p}}},5696:(e,t,n)=>{"use strict";var r;n.d(t,{L:()=>a,j:()=>s});var i=n(7313),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(e){return e()},s=o||i.useLayoutEffect},4911:(e,t,n)=>{"use strict";n.d(t,{My:()=>o,fp:()=>r,hC:()=>i});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},1685:e=>{function t(e){if(!(this instanceof t))return new t(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}e.exports=t,t.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},t.prototype.equals=function(e){var n;return n=e instanceof t?e.bbox():e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]},t.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},t.prototype.union=function(e){var n;return this._valid=!0,n=e instanceof t?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this},t.prototype.bbox=function(){return this._valid?this._bbox:null},t.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n},t.prototype.intersect=function(e){return this._valid?(n=e instanceof t?e.bbox():e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])):null;var n},t.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},t.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},4173:(e,t,n)=>{"use strict";var r=n(3181),i=n(5307),o="value",a="\n  ",s={};function l(e){var t=Array.isArray(e);return function(n){var r,i=c(s.plainArray,n);if(i)return i;if(t&&n.length!==e.length)return"an array with "+e.length+" items";for(var o=0;o<n.length;o++)if(i=c((r=o,t?e[r]:e),n[o]))return[o].concat(i)}}function c(e,t){if(null!=t||e.hasOwnProperty("__required")){var n=e(t);return n?Array.isArray(n)?n:[n]:void 0}}function u(e,t){var n=e.length,r=e[n-1],a=e.slice(0,n-1);return 0===a.length&&(a=[o]),t=i(t,{path:a}),"function"===typeof r?r(t):d(t,function(e){return"must be "+function(e){if(/^an? /.test(e))return e;if(/^[aeiou]/i.test(e))return"an "+e;if(/^[a-z]/i.test(e))return"a "+e;return e}(e)+"."}(r))}function h(e){return e.length<2?e[0]:2===e.length?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function d(e,t){return(p(e.path)?"Item at position ":"")+(e.path.join(".")+" "+t)}function p(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}s.assert=function(e,t){return t=t||{},function(n){var r=c(e,n);if(r){var i=u(r,t);throw t.apiName&&(i=t.apiName+": "+i),new Error(i)}}},s.shape=function(e){var t,n=(t=e,Object.keys(t||{}).map((function(e){return{key:e,value:t[e]}})));return function(e){var t,r=c(s.plainObject,e);if(r)return r;for(var i=[],l=0;l<n.length;l++)t=n[l].key,(r=c(n[l].value,e[t]))&&i.push([t].concat(r));return i.length<2?i[0]:function(e){i=i.map((function(t){return"- "+t[0]+": "+u(t,e).split("\n").join(a)}));var t=e.path.join(".");return"The following properties"+(t===o?"":" of "+t)+" have invalid values:"+a+i.join(a)}}},s.strictShape=function(e){var t=s.shape(e);return function(n){var r=t(n);if(r)return r;var i=Object.keys(n).reduce((function(t,n){return void 0===e[n]&&t.push(n),t}),[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},s.arrayOf=function(e){return l(e)},s.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return l(e)},s.required=function(e){function t(t){return null==t?function(e){return d(e,p(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},s.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var n=e.map((function(e){return c(e,t)})).filter(Boolean);if(n.length===e.length)return n.every((function(e){return 1===e.length&&"string"===typeof e[0]}))?h(n.map((function(e){return e[0]}))):n.reduce((function(e,t){return t.length>e.length?t:e}))}},s.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},s.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),t=e.map((function(e){return s.equal(e)}));return s.oneOfType.apply(this,t)},s.range=function(e){var t=e[0],n=e[1];return function(e){if(c(s.number,e)||e<t||e>n)return"number between "+t+" & "+n+" (inclusive)"}},s.any=function(){},s.boolean=function(e){if("boolean"!==typeof e)return"boolean"},s.number=function(e){if("number"!==typeof e)return"number"},s.plainArray=function(e){if(!Array.isArray(e))return"array"},s.plainObject=function(e){if(!r(e))return"object"},s.string=function(e){if("string"!==typeof e)return"string"},s.func=function(e){if("function"!==typeof e)return"function"},s.validate=c,s.processMessage=u,e.exports=s},1942:e=>{e.exports=function(e){return function e(t){if(Array.isArray(t)&&t.length&&"number"===typeof t[0])return[t];return t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}(e)}},7562:(e,t,n)=>{var r=n(2147),i=n(3993),o=n(1942);i instanceof Function||(i=i.default),e.exports=function(e){if(!e)return[];var t=i(r(e)),n=[];return t.features.forEach((function(e){e.geometry&&(n=n.concat(o(e.geometry.coordinates)))})),n}},5182:(e,t,n)=>{var r=n(7562),i=n(7762),o=n(1685),a={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},s=Object.keys(a);function l(e){for(var t=o(),n=r(e),i=0;i<n.length;i++)t.include(n[i]);return t}e.exports=function(e){return l(e).bbox()},e.exports.polygon=function(e){return l(e).polygon()},e.exports.bboxify=function(e){return i(e).map((function(e){e&&(s.some((function(t){return!!e[t]&&-1!==a[t].indexOf(e.type)}))&&(e.bbox=l(e).bbox(),this.update(e)))}))}},2147:e=>{e.exports=function(e){if(!e||!e.type)return null;var n=t[e.type];if(!n)return null;if("geometry"===n)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if("feature"===n)return{type:"FeatureCollection",features:[e]};if("featurecollection"===n)return e};var t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},7641:e=>{function t(e,t){if(0!==e.length){n(e[0],t);for(var r=1;r<e.length;r++)n(e[r],!t)}}function n(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!==!!t&&e.reverse()}e.exports=function e(n,r){var i,o=n&&n.type;if("FeatureCollection"===o)for(i=0;i<n.features.length;i++)e(n.features[i],r);else if("GeometryCollection"===o)for(i=0;i<n.geometries.length;i++)e(n.geometries[i],r);else if("Feature"===o)e(n.geometry,r);else if("Polygon"===o)t(n.coordinates,r);else if("MultiPolygon"===o)for(i=0;i<n.coordinates.length;i++)t(n.coordinates[i],r);return n}},2860:function(e,t,n){e.exports=function(){"use strict";var e=function(e,t){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(e,t,r){if(void 0===n[e])throw new Error("Invalid event type: "+e);n[e].push({selector:t,fn:r})},render:function(e){t.store.featureChanged(e)}},i=function(e,i){for(var o=n[e],a=o.length;a--;){var s=o[a];if(s.selector(i)){s.fn.call(r,i)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(e){i("drag",e)},click:function(e){i("click",e)},mousemove:function(e){i("mousemove",e)},mousedown:function(e){i("mousedown",e)},mouseup:function(e){i("mouseup",e)},mouseout:function(e){i("mouseout",e)},keydown:function(e){i("keydown",e)},keyup:function(e){i("keyup",e)},touchstart:function(e){i("touchstart",e)},touchmove:function(e){i("touchmove",e)},touchend:function(e){i("touchend",e)},tap:function(e){i("tap",e)}}};function t(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var r={},i={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(a(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(a(e[n]))}return t}function a(e){var t,n,r,o,a,l,c=0,u=e.length;if(u>2){for(l=0;l<u;l++)l===u-2?(r=u-2,o=u-1,a=0):l===u-1?(r=u-1,o=0,a=1):(r=l,o=l+1,a=l+2),t=e[r],n=e[o],c+=(s(e[a][0])-s(t[0]))*Math.sin(s(n[1]));c=c*i.RADIUS*i.RADIUS/2}return c}function s(e){return e*Math.PI/180}r.geometry=function e(t){var n,r=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=o(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},r.ring=a;var l={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},c={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},u={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},h={POLYGON:"polygon",LINE:"line_string",POINT:"point"},d={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},p={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},f={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},m={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},g={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},y={ACTIVE:"true",INACTIVE:"false"},v=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],_=-85,b=Object.freeze({__proto__:null,classes:l,sources:c,cursors:u,types:h,geojsonTypes:d,modes:p,events:f,updateActions:m,meta:g,activeStates:y,interactions:v,LAT_MIN:-90,LAT_RENDERED_MIN:_,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),x={Point:0,LineString:1,MultiLineString:1,Polygon:2};function w(e,t){var n=x[e.geometry.type]-x[t.geometry.type];return 0===n&&e.geometry.type===d.POLYGON?e.area-t.area:n}function S(e){return e.map((function(e){return e.geometry.type===d.POLYGON&&(e.area=r.geometry({type:d.FEATURE,property:{},geometry:e.geometry})),e})).sort(w).map((function(e){return delete e.area,e}))}function E(e,t){return void 0===t&&(t=0),[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function A(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,n=e.length;t<n;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}A.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},A.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},A.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},A.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(n){t.push({k:n,v:e._items[n]})})),Object.keys(this._nums).forEach((function(n){t.push({k:JSON.parse(n),v:e._nums[n]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},A.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var T=[g.FEATURE,g.MIDPOINT,g.VERTEX],C={click:function(e,t,n){return k(e,t,n,n.options.clickBuffer)},touch:function(e,t,n){return k(e,t,n,n.options.touchBuffer)}};function k(e,t,n,r){if(null===n.map)return[];var i=e?E(e,r):t,o={};n.options.styles&&(o.layers=n.options.styles.map((function(e){return e.id})));var a=n.map.queryRenderedFeatures(i,o).filter((function(e){return-1!==T.indexOf(e.properties.meta)})),s=new A,l=[];return a.forEach((function(e){var t=e.properties.id;s.has(t)||(s.add(t),l.push(e))})),S(l)}function I(e,t){var n=C.click(e,null,t),r={mouse:u.NONE};return n[0]&&(r.mouse=n[0].properties.active===y.ACTIVE?u.MOVE:u.POINTER,r.feature=n[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(r.mouse=u.ADD),t.ui.queueMapClasses(r),t.ui.updateMapClasses(),n[0]}function P(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function L(e,t,n){void 0===n&&(n={});var r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var a=P(e.point,t.point);return a<r||a<i&&t.time-e.time<o}function M(e,t,n){void 0===n&&(n={});var r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,P(e.point,t.point)<r&&t.time-e.time<i}var O={},N={get exports(){return O},set exports(e){O=e}}.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,e/r))/Math.log(t)*r;var i=n-Math.floor(n),o="";for(r=0;r<Math.floor(n);r++)o=Math.floor(Math.random()*t).toString(t)+o;if(i){var a=Math.pow(t,i);o=Math.floor(Math.random()*a).toString(t)+o}var s=parseInt(o,t);return s!==1/0&&s>=Math.pow(2,e)?N(e,t):o};N.rack=function(e,t,n){var r=function(r){var o=0;do{if(o++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var a=N(e,t)}while(Object.hasOwnProperty.call(i,a));return i[a]=r,a},i=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=t||16,r};var R=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||O(),this.type=t.geometry.type};R.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},R.prototype.incomingCoords=function(e){this.setCoordinates(e)},R.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},R.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},R.prototype.setProperty=function(e,t){this.properties[e]=t},R.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:d.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},R.prototype.internal=function(e){var t={id:this.id,meta:g.FEATURE,"meta:type":this.type,active:y.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(var n in this.properties)t["user_"+n]=this.properties[n];return{type:d.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var D=function(e,t){R.call(this,e,t)};(D.prototype=Object.create(R.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},D.prototype.updateCoordinate=function(e,t,n){this.coordinates=3===arguments.length?[t,n]:[e,t],this.changed()},D.prototype.getCoordinate=function(){return this.getCoordinates()};var F=function(e,t){R.call(this,e,t)};(F.prototype=Object.create(R.prototype)).isValid=function(){return this.coordinates.length>1},F.prototype.addCoordinate=function(e,t,n){this.changed();var r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])},F.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},F.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},F.prototype.updateCoordinate=function(e,t,n){var r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};var j=function(e,t){R.call(this,e,t),this.coordinates=this.coordinates.map((function(e){return e.slice(0,-1)}))};(j.prototype=Object.create(R.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(e){return e.length>2}))},j.prototype.incomingCoords=function(e){this.coordinates=e.map((function(e){return e.slice(0,-1)})),this.changed()},j.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},j.prototype.addCoordinate=function(e,t,n){this.changed();var r=e.split(".").map((function(e){return parseInt(e,10)}));this.coordinates[r[0]].splice(r[1],0,[t,n])},j.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},j.prototype.getCoordinate=function(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},j.prototype.getCoordinates=function(){return this.coordinates.map((function(e){return e.concat([e[0]])}))},j.prototype.updateCoordinate=function(e,t,n){this.changed();var r=e.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[t,n]};var z={MultiPoint:D,MultiLineString:F,MultiPolygon:j},B=function(e,t,n,r,i){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return e[a][t](s,r,i)},U=function(e,t){if(R.call(this,e,t),delete this.coordinates,this.model=z[t.geometry.type],void 0===this.model)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function V(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(U.prototype=Object.create(R.prototype))._coordinatesToFeatures=function(e){var t=this,n=this.model.bind(this);return e.map((function(e){return new n(t.ctx,{id:O(),type:d.FEATURE,properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})}))},U.prototype.isValid=function(){return this.features.every((function(e){return e.isValid()}))},U.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},U.prototype.getCoordinate=function(e){return B(this.features,"getCoordinate",e)},U.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(e){return e.type===d.POLYGON?e.getCoordinates():e.coordinates}))))},U.prototype.updateCoordinate=function(e,t,n){B(this.features,"updateCoordinate",e,t,n),this.changed()},U.prototype.addCoordinate=function(e,t,n){B(this.features,"addCoordinate",e,t,n),this.changed()},U.prototype.removeCoordinate=function(e){B(this.features,"removeCoordinate",e),this.changed()},U.prototype.getFeatures=function(){return this.features},V.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},V.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce((function(e,n){return void 0===e[n.feature_id]&&(e[n.feature_id]=!0,t._ctx.store.get(n.feature_id).changed()),e}),{})},V.prototype.getSelected=function(){return this._ctx.store.getSelected()},V.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},V.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},V.prototype.getFeature=function(e){return this._ctx.store.get(e)},V.prototype.select=function(e){return this._ctx.store.select(e)},V.prototype.deselect=function(e){return this._ctx.store.deselect(e)},V.prototype.deleteFeature=function(e,t){return void 0===t&&(t={}),this._ctx.store.delete(e,t)},V.prototype.addFeature=function(e){return this._ctx.store.add(e)},V.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},V.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},V.prototype.setActionableState=function(e){void 0===e&&(e={});var t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},V.prototype.changeMode=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this._ctx.events.changeMode(e,t,n)},V.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},V.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},V.prototype.featuresAt=function(e,t,n){if(void 0===n&&(n="click"),"click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return C[n](e,t,this._ctx)},V.prototype.newFeature=function(e){var t=e.geometry.type;return t===d.POINT?new D(this._ctx,e):t===d.LINE_STRING?new F(this._ctx,e):t===d.POLYGON?new j(this._ctx,e):new U(this._ctx,e)},V.prototype.isInstanceOf=function(e,t){if(e===d.POINT)return t instanceof D;if(e===d.LINE_STRING)return t instanceof F;if(e===d.POLYGON)return t instanceof j;if("MultiFeature"===e)return t instanceof U;throw new Error("Unknown feature class: "+e)},V.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},V.prototype.onSetup=function(){},V.prototype.onDrag=function(){},V.prototype.onClick=function(){},V.prototype.onMouseMove=function(){},V.prototype.onMouseDown=function(){},V.prototype.onMouseUp=function(){},V.prototype.onMouseOut=function(){},V.prototype.onKeyUp=function(){},V.prototype.onKeyDown=function(){},V.prototype.onTouchStart=function(){},V.prototype.onTouchMove=function(){},V.prototype.onTouchEnd=function(){},V.prototype.onTap=function(){},V.prototype.onStop=function(){},V.prototype.onTrash=function(){},V.prototype.onCombineFeature=function(){},V.prototype.onUncombineFeature=function(){},V.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Z={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},q=Object.keys(Z);function G(e){var t=Object.keys(e);return function(n,r){void 0===r&&(r={});var i={},o=t.reduce((function(t,n){return t[n]=e[n],t}),new V(n));return{start:function(){var t=this;i=o.onSetup(r),q.forEach((function(n){var r,a=Z[n],s=function(){return!1};e[a]&&(s=function(){return!0}),t.on(n,s,(r=a,function(e){return o[r](i,e)}))}))},stop:function(){o.onStop(i)},trash:function(){o.onTrash(i)},combineFeatures:function(){o.onCombineFeatures(i)},uncombineFeatures:function(){o.onUncombineFeatures(i)},render:function(e,t){o.toDisplayFeatures(i,e,t)}}}}function W(e){return[].concat(e).filter((function(e){return void 0!==e}))}function H(){var e=this;if(!e.ctx.map||void 0===e.ctx.map.getSource(c.HOT))return l();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var n=[],r=[];e.isDirty?r=e.getAllIds():(n=e.getChangedIds().filter((function(t){return void 0!==e.get(t)})),r=e.sources.hot.filter((function(t){return t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)})).map((function(e){return e.properties.id}))),e.sources.hot=[];var i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((function(e){var t=e.properties.id||e.properties.parent;return-1===n.indexOf(t)}));var o=i!==e.sources.cold.length||r.length>0;function a(n,r){var i=e.get(n).internal(t);e.ctx.events.currentModeRender(i,(function(t){e.sources[r].push(t)}))}if(n.forEach((function(e){return a(e,"hot")})),r.forEach((function(e){return a(e,"cold")})),o&&e.ctx.map.getSource(c.COLD).setData({type:d.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(c.HOT).setData({type:d.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(f.SELECTION_CHANGE,{features:e.getSelected().map((function(e){return e.toGeoJSON()})),points:e.getSelectedCoordinates().map((function(e){return{type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:e.coordinates}}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var s=e._deletedFeaturesToEmit.map((function(e){return e.toGeoJSON()}));e._deletedFeaturesToEmit=[],e.ctx.map.fire(f.DELETE,{features:s})}function l(){e.isDirty=!1,e.clearChangedIds()}l(),e.ctx.map.fire(f.RENDER,{})}function X(e){var t,n=this;this._features={},this._featureIds=new A,this._selectedFeatureIds=new A,this._selectedCoordinates=[],this._changedFeatureIds=new A,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame((function(){t=null,H.call(n)})))},this.isDirty=!1}function K(e,t){var n=e._selectedCoordinates.filter((function(t){return e._selectedFeatureIds.has(t.feature_id)}));e._selectedCoordinates.length===n.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=n}X.prototype.createRenderBatch=function(){var e=this,t=this.render,n=0;return this.render=function(){n++},function(){e.render=t,n>0&&e.render()}},X.prototype.setDirty=function(){return this.isDirty=!0,this},X.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},X.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},X.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},X.prototype.getAllIds=function(){return this._featureIds.values()},X.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},X.prototype.delete=function(e,t){var n=this;return void 0===t&&(t={}),W(e).forEach((function(e){n._featureIds.has(e)&&(n._featureIds.delete(e),n._selectedFeatureIds.delete(e),t.silent||-1===n._deletedFeaturesToEmit.indexOf(n._features[e])&&n._deletedFeaturesToEmit.push(n._features[e]),delete n._features[e],n.isDirty=!0)})),K(this,t),this},X.prototype.get=function(e){return this._features[e]},X.prototype.getAll=function(){var e=this;return Object.keys(this._features).map((function(t){return e._features[t]}))},X.prototype.select=function(e,t){var n=this;return void 0===t&&(t={}),W(e).forEach((function(e){n._selectedFeatureIds.has(e)||(n._selectedFeatureIds.add(e),n._changedFeatureIds.add(e),t.silent||(n._emitSelectionChange=!0))})),this},X.prototype.deselect=function(e,t){var n=this;return void 0===t&&(t={}),W(e).forEach((function(e){n._selectedFeatureIds.has(e)&&(n._selectedFeatureIds.delete(e),n._changedFeatureIds.add(e),t.silent||(n._emitSelectionChange=!0))})),K(this,t),this},X.prototype.clearSelected=function(e){return void 0===e&&(e={}),this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},X.prototype.setSelected=function(e,t){var n=this;return void 0===t&&(t={}),e=W(e),this.deselect(this._selectedFeatureIds.values().filter((function(t){return-1===e.indexOf(t)})),{silent:t.silent}),this.select(e.filter((function(e){return!n._selectedFeatureIds.has(e)})),{silent:t.silent}),this},X.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},X.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},X.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},X.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map((function(t){return e.get(t)}))},X.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map((function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}}))},X.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},X.prototype.setFeatureProperty=function(e,t,n){this.get(e).setProperty(t,n),this.featureChanged(e)},X.prototype.storeMapConfig=function(){var e=this;v.forEach((function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())}))},X.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach((function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()}))},X.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};var Y=function(){for(var e=arguments,t={},n=0;n<arguments.length;n++){var r=e[n];for(var i in r)J.call(r,i)&&(t[i]=r[i])}return t},J=Object.prototype.hasOwnProperty,Q=["mode","feature","mouse"];function $(t){var n=null,r=null,i={onRemove:function(){return t.map.off("load",i.connect),clearInterval(r),i.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,n&&n.parentNode&&n.parentNode.removeChild(n),n=null,this},connect:function(){t.map.off("load",i.connect),clearInterval(r),i.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(o){var a=o.fire;return o.fire=function(e,t){var n=arguments;return 1===a.length&&1!==arguments.length&&(n=[Y({},{type:e},t)]),a.apply(o,n)},t.map=o,t.events=function(t){var n=Object.keys(t.options.modes).reduce((function(e,n){return e[n]=G(t.options.modes[n]),e}),{}),r={},i={},o={},a=null,s=null;o.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:u.DRAG}),s.drag(e)):e.originalEvent.stopPropagation()},o.mousedrag=function(e){o.drag(e,(function(e){return!L(r,e)}))},o.touchdrag=function(e){o.drag(e,(function(e){return!M(i,e)}))},o.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return o.mousedrag(e);var n=I(e,t);e.featureTarget=n,s.mousemove(e)},o.mousedown=function(e){r={time:(new Date).getTime(),point:e.point};var n=I(e,t);e.featureTarget=n,s.mousedown(e)},o.mouseup=function(e){var n=I(e,t);e.featureTarget=n,L(r,{point:e.point,time:(new Date).getTime()})?s.click(e):s.mouseup(e)},o.mouseout=function(e){s.mouseout(e)},o.touchstart=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){i={time:(new Date).getTime(),point:e.point};var n=C.touch(e,null,t)[0];e.featureTarget=n,s.touchstart(e)}},o.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return s.touchmove(e),o.touchdrag(e)},o.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var n=C.touch(e,null,t)[0];e.featureTarget=n,M(i,{time:(new Date).getTime(),point:e.point})?s.tap(e):s.touchend(e)}};var l=function(e){return!(8===e||46===e||e>=48&&e<=57)};function c(r,i,o){void 0===o&&(o={}),s.stop();var l=n[r];if(void 0===l)throw new Error(r+" is not valid");a=r;var c=l(t,i);s=e(c,t),o.silent||t.map.fire(f.MODE_CHANGE,{mode:r}),t.store.setDirty(),t.store.render()}o.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?l(e.keyCode)?s.keydown(e):49===e.keyCode&&t.options.controls.point?c(p.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?c(p.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&c(p.DRAW_POLYGON):(e.preventDefault(),s.trash()))},o.keyup=function(e){l(e.keyCode)&&s.keyup(e)},o.zoomend=function(){t.store.changeZoom()},o.data=function(e){if("style"===e.dataType){var n=t.setup,r=t.map,i=t.options,o=t.store;i.styles.some((function(e){return r.getLayer(e.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var h={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){a=t.options.defaultMode,s=e(n[a](t),t)},changeMode:c,actionable:function(e){var n=!1;Object.keys(e).forEach((function(t){if(void 0===h[t])throw new Error("Invalid action type");h[t]!==e[t]&&(n=!0),h[t]=e[t]})),n&&t.map.fire(f.ACTIONABLE,{actions:h})},currentModeName:function(){return a},currentModeRender:function(e,t){return s.render(e,t)},fire:function(e,t){o[e]&&o[e](t)},addEventListeners:function(){t.map.on("mousemove",o.mousemove),t.map.on("mousedown",o.mousedown),t.map.on("mouseup",o.mouseup),t.map.on("data",o.data),t.map.on("touchmove",o.touchmove),t.map.on("touchstart",o.touchstart),t.map.on("touchend",o.touchend),t.container.addEventListener("mouseout",o.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",o.keydown),t.container.addEventListener("keyup",o.keyup))},removeEventListeners:function(){t.map.off("mousemove",o.mousemove),t.map.off("mousedown",o.mousedown),t.map.off("mouseup",o.mouseup),t.map.off("data",o.data),t.map.off("touchmove",o.touchmove),t.map.off("touchstart",o.touchstart),t.map.off("touchend",o.touchend),t.container.removeEventListener("mouseout",o.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",o.keydown),t.container.removeEventListener("keyup",o.keyup))},trash:function(e){s.trash(e)},combineFeatures:function(){s.combineFeatures()},uncombineFeatures:function(){s.uncombineFeatures()},getMode:function(){return a}}}(t),t.ui=function(e){var t={},n=null,r={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function o(e){i=Y(i,e)}function a(){var t,n;if(e.container){var o=[],a=[];Q.forEach((function(e){i[e]!==r[e]&&(o.push(e+"-"+r[e]),null!==i[e]&&a.push(e+"-"+i[e]))})),o.length>0&&(t=e.container.classList).remove.apply(t,o),a.length>0&&(n=e.container.classList).add.apply(n,a),r=Y(r,i)}}function s(e,t){void 0===t&&(t={});var r=document.createElement("button");return r.className=l.CONTROL_BUTTON+" "+t.className,r.setAttribute("title",t.title),t.container.appendChild(r),r.addEventListener("click",(function(r){if(r.preventDefault(),r.stopPropagation(),r.target===n)return c(),void t.onDeactivate();u(e),t.onActivate()}),!0),r}function c(){n&&(n.classList.remove(l.ACTIVE_BUTTON),n=null)}function u(e){c();var r=t[e];r&&r&&"trash"!==e&&(r.classList.add(l.ACTIVE_BUTTON),n=r)}return{setActiveButton:u,queueMapClasses:o,updateMapClasses:a,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var n=e.options.controls,r=document.createElement("div");return r.className=l.CONTROL_GROUP+" "+l.CONTROL_BASE,n?(n[h.LINE]&&(t[h.LINE]=s(h.LINE,{container:r,className:l.CONTROL_BUTTON_LINE,title:"LineString tool "+(e.options.keybindings?"(l)":""),onActivate:function(){return e.events.changeMode(p.DRAW_LINE_STRING)},onDeactivate:function(){return e.events.trash()}})),n[h.POLYGON]&&(t[h.POLYGON]=s(h.POLYGON,{container:r,className:l.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(e.options.keybindings?"(p)":""),onActivate:function(){return e.events.changeMode(p.DRAW_POLYGON)},onDeactivate:function(){return e.events.trash()}})),n[h.POINT]&&(t[h.POINT]=s(h.POINT,{container:r,className:l.CONTROL_BUTTON_POINT,title:"Marker tool "+(e.options.keybindings?"(m)":""),onActivate:function(){return e.events.changeMode(p.DRAW_POINT)},onDeactivate:function(){return e.events.trash()}})),n.trash&&(t.trash=s("trash",{container:r,className:l.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){e.events.trash()}})),n.combine_features&&(t.combine_features=s("combineFeatures",{container:r,className:l.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){e.events.combineFeatures()}})),n.uncombine_features&&(t.uncombine_features=s("uncombineFeatures",{container:r,className:l.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){e.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(t).forEach((function(e){var n=t[e];n.parentNode&&n.parentNode.removeChild(n),delete t[e]}))}}}(t),t.container=o.getContainer(),t.store=new X(t),n=t.ui.addButtons(),t.options.boxSelect&&(o.boxZoom.disable(),o.dragPan.disable(),o.dragPan.enable()),o.loaded()?i.connect():(o.on("load",i.connect),r=setInterval((function(){o.loaded()&&i.connect()}),16)),t.events.start(),n},addLayers:function(){t.map.addSource(c.COLD,{data:{type:d.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(c.HOT,{data:{type:d.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((function(e){t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach((function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(c.COLD)&&t.map.removeSource(c.COLD),t.map.getSource(c.HOT)&&t.map.removeSource(c.HOT)}};return t.setup=i,i}var ee=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function te(e){return function(t){var n=t.featureTarget;return!!n&&!!n.properties&&n.properties.meta===e}}function ne(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&0===e.originalEvent.button}function re(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===y.ACTIVE&&e.featureTarget.properties.meta===g.FEATURE}function ie(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===y.INACTIVE&&e.featureTarget.properties.meta===g.FEATURE}function oe(e){return void 0===e.featureTarget}function ae(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===g.FEATURE}function se(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===g.VERTEX}function le(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function ce(e){return 27===e.keyCode}function ue(e){return 13===e.keyCode}var he=Object.freeze({__proto__:null,isOfMetaType:te,isShiftMousedown:ne,isActiveFeature:re,isInactiveFeature:ie,noTarget:oe,isFeature:ae,isVertex:se,isShiftDown:le,isEscapeKey:ce,isEnterKey:ue,isTrue:function(){return!0}}),de=pe;function pe(e,t){this.x=e,this.y=t}function fe(e,t){var n=t.getBoundingClientRect();return new de(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function me(e,t,n,r){return{type:d.FEATURE,properties:{meta:g.VERTEX,parent:e,coord_path:n,active:r?y.ACTIVE:y.INACTIVE},geometry:{type:d.POINT,coordinates:t}}}function ge(e,t,n){var r=t.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<_||i[1]>85||i[1]<_)return null;var o={lng:(r[0]+i[0])/2,lat:(r[1]+i[1])/2};return{type:d.FEATURE,properties:{meta:g.MIDPOINT,parent:e,lng:o.lng,lat:o.lat,coord_path:n.properties.coord_path},geometry:{type:d.POINT,coordinates:[o.lng,o.lat]}}}function ye(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r,i=e.geometry,o=i.type,a=i.coordinates,s=e.properties&&e.properties.id,l=[];function c(e,n){var r="",i=null;e.forEach((function(e,o){var a=null!=n?n+"."+o:String(o),c=me(s,e,a,u(a));if(t.midpoints&&i){var h=ge(s,i,c);h&&l.push(h)}i=c;var d=JSON.stringify(e);r!==d&&l.push(c),0===o&&(r=d)}))}function u(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return o===d.POINT?l.push(me(s,a,n,u(n))):o===d.POLYGON?a.forEach((function(e,t){c(e,null!==n?n+"."+t:String(t))})):o===d.LINE_STRING?c(a,n):0===o.indexOf(d.MULTI_PREFIX)&&(r=o.replace(d.MULTI_PREFIX,""),a.forEach((function(n,i){var o={type:d.FEATURE,properties:e.properties,geometry:{type:r,coordinates:n}};l=l.concat(ye(o,t,i))}))),l}pe.prototype={clone:function(){return new pe(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},pe.convert=function(e){return e instanceof pe?e:Array.isArray(e)?new pe(e[0],e[1]):e};var ve={enable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}},_e={},be={get exports(){return _e},set exports(e){_e=e}},xe=function(e){if(!e||!e.type)return null;var t=we[e.type];return t?"geometry"===t?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===t?{type:"FeatureCollection",features:[e]}:"featurecollection"===t?e:void 0:null},we={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Se=Object.freeze({__proto__:null,default:function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,n){return t.concat(e(n))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(n.id=t.id),n})):[t];case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}}),Ee=xe,Ae=t(Se),Te=function(e){return function e(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}(e)};Ae instanceof Function||(Ae=Ae.default);var Ce={},ke={get exports(){return Ce},set exports(e){Ce=e}}.exports=function(e){return new Ie(e)};function Ie(e){this.value=e}function Pe(e,t,n){var r=[],i=[],o=!0;return function e(a){var s=n?Le(a):a,l={},c=!0,u={node:s,node_:a,path:[].concat(r),parent:i[i.length-1],parents:i,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){u.isRoot||(u.parent.node[u.key]=e),u.node=e,t&&(c=!1)},delete:function(e){delete u.parent.node[u.key],e&&(c=!1)},remove:function(e){Ne(u.parent.node)?u.parent.node.splice(u.key,1):delete u.parent.node[u.key],e&&(c=!1)},keys:null,before:function(e){l.before=e},after:function(e){l.after=e},pre:function(e){l.pre=e},post:function(e){l.post=e},stop:function(){o=!1},block:function(){c=!1}};if(!o)return u;function h(){if("object"==typeof u.node&&null!==u.node){u.keys&&u.node_===u.node||(u.keys=Me(u.node)),u.isLeaf=0==u.keys.length;for(var e=0;e<i.length;e++)if(i[e].node_===a){u.circular=i[e];break}}else u.isLeaf=!0,u.keys=null;u.notLeaf=!u.isLeaf,u.notRoot=!u.isRoot}h();var d=t.call(u,u.node);return void 0!==d&&u.update&&u.update(d),l.before&&l.before.call(u,u.node),c?("object"!=typeof u.node||null===u.node||u.circular||(i.push(u),h(),Re(u.keys,(function(t,i){r.push(t),l.pre&&l.pre.call(u,u.node[t],t);var o=e(u.node[t]);n&&De.call(u.node,t)&&(u.node[t]=o.node),o.isLast=i==u.keys.length-1,o.isFirst=0==i,l.post&&l.post.call(u,o),r.pop()})),i.pop()),l.after&&l.after.call(u,u.node),u):u}(e).node}function Le(e){if("object"==typeof e&&null!==e){var t;if(Ne(e))t=[];else if("[object Date]"===Oe(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===Oe(e)}(e))t=new RegExp(e);else if(function(e){return"[object Error]"===Oe(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===Oe(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===Oe(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===Oe(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=n,t=new r}return Re(Me(e),(function(n){t[n]=e[n]})),t}return e}Ie.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!De.call(t,r)){t=void 0;break}t=t[r]}return t},Ie.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!De.call(t,r))return!1;t=t[r]}return!0},Ie.prototype.set=function(e,t){for(var n=this.value,r=0;r<e.length-1;r++){var i=e[r];De.call(n,i)||(n[i]={}),n=n[i]}return n[e[r]]=t,t},Ie.prototype.map=function(e){return Pe(this.value,e,!0)},Ie.prototype.forEach=function(e){return this.value=Pe(this.value,e,!1),this.value},Ie.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach((function(t){this.isRoot&&n||(r=e.call(this,r,t))})),r},Ie.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},Ie.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},Ie.prototype.clone=function(){var e=[],t=[];return function n(r){for(var i=0;i<e.length;i++)if(e[i]===r)return t[i];if("object"==typeof r&&null!==r){var o=Le(r);return e.push(r),t.push(o),Re(Me(r),(function(e){o[e]=n(r[e])})),e.pop(),t.pop(),o}return r}(this.value)};var Me=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function Oe(e){return Object.prototype.toString.call(e)}var Ne=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Re=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};Re(Me(Ie.prototype),(function(e){ke[e]=function(t){var n=[].slice.call(arguments,1),r=new Ie(t);return r[e].apply(r,n)}}));var De=Object.hasOwnProperty||function(e,t){return t in e},Fe=je;function je(e){if(!(this instanceof je))return new je(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}je.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},je.prototype.equals=function(e){var t;return t=e instanceof je?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},je.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},je.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof je?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},je.prototype.bbox=function(){return this._valid?this._bbox:null},je.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n},je.prototype.intersect=function(e){return this._valid?(t=e instanceof je?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},je.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},je.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var ze=function(e){if(!e)return[];var t=Ae(Ee(e)),n=[];return t.features.forEach((function(e){e.geometry&&(n=n.concat(Te(e.geometry.coordinates)))})),n},Be=Ce,Ue=Fe,Ve={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ze=Object.keys(Ve);function qe(e){for(var t=Ue(),n=ze(e),r=0;r<n.length;r++)t.include(n[r]);return t}be.exports=function(e){return qe(e).bbox()},_e.polygon=function(e){return qe(e).polygon()},_e.bboxify=function(e){return Be(e).map((function(e){e&&Ze.some((function(t){return!!e[t]&&-1!==Ve[t].indexOf(e.type)}))&&(e.bbox=qe(e).bbox(),this.update(e))}))};var Ge=-90;function We(e,t){var n=Ge,r=90,i=Ge,o=90,a=270,s=-270;e.forEach((function(e){var t=_e(e),l=t[1],c=t[3],u=t[0],h=t[2];l>n&&(n=l),c<r&&(r=c),c>i&&(i=c),l<o&&(o=l),u<a&&(a=u),h>s&&(s=h)}));var l=t;return n+l.lat>85&&(l.lat=85-n),i+l.lat>90&&(l.lat=90-i),r+l.lat<-85&&(l.lat=-85-r),o+l.lat<Ge&&(l.lat=Ge-o),a+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l}function He(e,t){var n=We(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,r=e.getCoordinates(),i=function(e){var t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},o=function(e){return e.map((function(e){return i(e)}))};e.type===d.POINT?t=i(r):e.type===d.LINE_STRING||e.type===d.MULTI_POINT?t=r.map(i):e.type===d.POLYGON||e.type===d.MULTI_LINE_STRING?t=r.map(o):e.type===d.MULTI_POLYGON&&(t=r.map((function(e){return e.map((function(e){return o(e)}))}))),e.incomingCoords(t)}))}var Xe={onSetup:function(e){var t=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(f.UPDATE,{action:m.MOVE,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),n=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),r=!1;if(t.length>1){r=!0;var i=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=t.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new A).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){ve.enable(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};Xe.onTap=Xe.onClick=function(e,t){return oe(t)?this.clickAnywhere(e,t):te(g.VERTEX)(t)?this.clickOnVertex(e,t):ae(t)?this.clickOnFeature(e,t):void 0},Xe.clickAnywhere=function(e){var t=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(e){return t.doRender(e)}))),ve.enable(this),this.stopExtendedInteractions(e)},Xe.clickOnVertex=function(e,t){this.changeMode(p.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:u.MOVE})},Xe.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},Xe.clickOnFeature=function(e,t){var n=this;ve.disable(this),this.stopExtendedInteractions(e);var r=le(t),i=this.getSelectedIds(),o=t.featureTarget.properties.id,a=this.isSelected(o);if(!r&&a&&this.getFeature(o).type!==d.POINT)return this.changeMode(p.DIRECT_SELECT,{featureId:o});a&&r?(this.deselect(o),this.updateUIClasses({mouse:u.POINTER}),1===i.length&&ve.enable(this)):!a&&r?(this.select(o),this.updateUIClasses({mouse:u.MOVE})):a||r||(i.forEach((function(e){return n.doRender(e)})),this.setSelected(o),this.updateUIClasses({mouse:u.MOVE})),this.doRender(o)},Xe.onMouseDown=function(e,t){return re(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&ne(t)?this.startBoxSelect(e,t):void 0},Xe.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=fe(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},Xe.onTouchStart=function(e,t){if(re(t))return this.startOnActiveFeature(e,t)},Xe.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},Xe.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:u.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(l.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var n=fe(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),i=Math.max(e.boxSelectStartLocation.x,n.x),o=Math.min(e.boxSelectStartLocation.y,n.y),a=Math.max(e.boxSelectStartLocation.y,n.y),s="translate("+r+"px, "+o+"px)";e.boxSelectElement.style.transform=s,e.boxSelectElement.style.WebkitTransform=s,e.boxSelectElement.style.width=i-r+"px",e.boxSelectElement.style.height=a-o+"px"},Xe.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};He(this.getSelected(),n),e.dragMoveLocation=t.lngLat},Xe.onTouchEnd=Xe.onMouseUp=function(e,t){var n=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var r=[e.boxSelectStartLocation,fe(t.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(e){return!n.isSelected(e)}));o.length&&(this.select(o),o.forEach((function(e){return n.doRender(e)})),this.updateUIClasses({mouse:u.MOVE}))}this.stopExtendedInteractions(e)},Xe.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?y.ACTIVE:y.INACTIVE,n(t),this.fireActionable(),t.properties.active===y.ACTIVE&&t.geometry.type!==d.POINT&&ye(t).forEach(n)},Xe.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Xe.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],n=[],r=e[0].type.replace("Multi",""),i=0;i<e.length;i++){var o=e[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(e){t.push(e)})):t.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:d.FEATURE,properties:n[0].properties,geometry:{type:"Multi"+r,coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(f.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},Xe.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var n=[],r=[],i=function(i){var o=t[i];e.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(t){e.addFeature(t),t.properties=o.properties,n.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<t.length;o++)i(o);n.length>1&&this.map.fire(f.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};var Ke=te(g.VERTEX),Ye=te(g.MIDPOINT),Je={fireUpdate:function(){this.map.fire(f.UPDATE,{action:m.CHANGE_COORDINATES,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);le(t)||-1!==r?le(t)&&-1===r&&e.selectedCoordPaths.push(n.coord_path):e.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,n){He(this.getSelected(),n),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),i=We(r.map((function(e){return{type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:e}}})),n),o=0;o<r.length;o++){var a=r[o];e.feature.updateCoordinate(e.selectedCoordPaths[o],a[0]+i.lng,a[1]+i.lat)}},clickNoTarget:function(){this.changeMode(p.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(p.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===d.POINT)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),ve.disable(this),this.setActionableState({trash:!0}),r},onStop:function(){ve.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,n){e.featureId===t.properties.id?(t.properties.active=y.ACTIVE,n(t),ye(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=y.INACTIVE,n(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(p.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var n=re(t),r=Ke(t),i=0===e.selectedCoordPaths.length;return n&&i||r&&!i?this.updateUIClasses({mouse:u.MOVE}):this.updateUIClasses({mouse:u.NONE}),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};Je.onTouchStart=Je.onMouseDown=function(e,t){return Ke(t)?this.onVertex(e,t):re(t)?this.onFeature(e,t):Ye(t)?this.onMidpoint(e,t):void 0},Je.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat}},Je.onClick=function(e,t){return oe(t)?this.clickNoTarget(e,t):re(t)?this.clickActiveFeature(e,t):ie(t)?this.clickInactive(e,t):void this.stopDragging(e)},Je.onTap=function(e,t){return oe(t)?this.clickNoTarget(e,t):re(t)?this.clickActiveFeature(e,t):ie(t)?this.clickInactive(e,t):void 0},Je.onTouchEnd=Je.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var Qe={};function $e(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}Qe.onSetup=function(){var e=this.newFeature({type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:u.ADD}),this.activateUIButton(h.POINT),this.setActionableState({trash:!0}),{point:e}},Qe.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)},Qe.onTap=Qe.onClick=function(e,t){this.updateUIClasses({mouse:u.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(f.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.point.id]})},Qe.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},Qe.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.point.id;if(t.properties.active=r?y.ACTIVE:y.INACTIVE,!r)return n(t)},Qe.onTrash=Qe.stopDrawingAndRemove,Qe.onKeyUp=function(e,t){if(ce(t)||ue(t))return this.stopDrawingAndRemove(e,t)};var et={onSetup:function(){var e=this.newFeature({type:d.FEATURE,properties:{},geometry:{type:d.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),ve.disable(this),this.updateUIClasses({mouse:u.ADD}),this.activateUIButton(h.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&$e(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:u.ADD}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),se(t)&&this.updateUIClasses({mouse:u.POINTER})}};et.onTap=et.onClick=function(e,t){return se(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},et.onKeyUp=function(e,t){ce(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)):ue(t)&&this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},et.onStop=function(e){this.updateUIClasses({mouse:u.NONE}),ve.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(f.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT,{},{silent:!0})))},et.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.polygon.id;if(t.properties.active=r?y.ACTIVE:y.INACTIVE,!r)return n(t);if(0!==t.geometry.coordinates.length){var i=t.geometry.coordinates[0].length;if(!(i<3)){if(t.properties.meta=g.FEATURE,n(me(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=t.geometry.coordinates[0].length-3;n(me(e.polygon.id,t.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var a=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:d.FEATURE,properties:t.properties,geometry:{coordinates:a,type:d.LINE_STRING}}),3===i)return}return n(t)}}},et.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)};var tt={onSetup:function(e){var t,n,r=(e=e||{}).featureId,i="forward";if(r){if(!(t=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var o=e.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=t.coordinates.length-1;if(t.coordinates[a][0]===o[0]&&t.coordinates[a][1]===o[1])n=a+1,t.addCoordinate.apply(t,[n].concat(t.coordinates[a]));else{if(t.coordinates[0][0]!==o[0]||t.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards",n=0,t.addCoordinate.apply(t,[n].concat(t.coordinates[0]))}}else t=this.newFeature({type:d.FEATURE,properties:{},geometry:{type:d.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(t);return this.clearSelectedFeatures(),ve.disable(this),this.updateUIClasses({mouse:u.ADD}),this.activateUIButton(h.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:n,direction:i}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&$e(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&$e(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:u.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),se(t)&&this.updateUIClasses({mouse:u.POINTER})}};tt.onTap=tt.onClick=function(e,t){if(se(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},tt.onKeyUp=function(e,t){ue(t)?this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.line.id]}):ce(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT))},tt.onStop=function(e){ve.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(f.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT,{},{silent:!0})))},tt.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)},tt.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.line.id;if(t.properties.active=r?y.ACTIVE:y.INACTIVE,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=g.FEATURE,n(me(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),n(t))};var nt={simple_select:Xe,direct_select:Je,draw_point:Qe,draw_polygon:et,draw_line_string:tt},rt={defaultMode:p.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:ee,modes:nt,controls:{},userProperties:!1},it={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ot={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function at(e,t){return e.map((function(e){return e.source?e:Y(e,{id:e.id+"."+t,source:"hot"===t?c.HOT:c.COLD})}))}var st={};!function(e,t){var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",d="[object Number]",p="[object Object]",f="[object Promise]",m="[object RegExp]",g="[object Set]",y="[object String]",v="[object Symbol]",_="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[o]=E[a]=E[b]=E[s]=E[x]=E[l]=E[c]=E[u]=E[h]=E[d]=E[p]=E[m]=E[g]=E[y]=E[_]=!1;var A="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,T="object"==typeof self&&self&&self.Object===Object&&self,C=A||T||Function("return this")(),k=t&&!t.nodeType&&t,I=k&&e&&!e.nodeType&&e,P=I&&I.exports===k,L=P&&A.process,M=function(){try{return L&&L.binding&&L.binding("util")}catch(e){}}(),O=M&&M.isTypedArray;function N(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function R(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var F,j,z,B=Array.prototype,U=Function.prototype,V=Object.prototype,Z=C["__core-js_shared__"],q=U.toString,G=V.hasOwnProperty,W=(F=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",H=V.toString,X=RegExp("^"+q.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=P?C.Buffer:void 0,Y=C.Symbol,J=C.Uint8Array,Q=V.propertyIsEnumerable,$=B.splice,ee=Y?Y.toStringTag:void 0,te=Object.getOwnPropertySymbols,ne=K?K.isBuffer:void 0,re=(j=Object.keys,z=Object,function(e){return j(z(e))}),ie=Me(C,"DataView"),oe=Me(C,"Map"),ae=Me(C,"Promise"),se=Me(C,"Set"),le=Me(C,"WeakMap"),ce=Me(Object,"create"),ue=De(ie),he=De(oe),de=De(ae),pe=De(se),fe=De(le),me=Y?Y.prototype:void 0,ge=me?me.valueOf:void 0;function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new _e;++t<n;)this.add(e[t])}function xe(e){var t=this.__data__=new ve(e);this.size=t.size}function we(e,t){var n=ze(e),r=!n&&je(e),i=!n&&!r&&Be(e),o=!n&&!r&&!i&&Ge(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!G.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Re(c,l))||s.push(c);return s}function Se(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}function Ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ee&&ee in Object(e)?function(e){var t=G.call(e,ee),n=e[ee];try{e[ee]=void 0;var r=!0}catch(e){}var i=H.call(e);return r&&(t?e[ee]=n:delete e[ee]),i}(e):function(e){return H.call(e)}(e)}function Ae(e){return qe(e)&&Ee(e)==o}function Te(e,t,n,r,i){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!=e&&t!=t:function(e,t,n,r,i,u){var f=ze(e),_=ze(t),w=f?a:Ne(e),S=_?a:Ne(t),E=(w=w==o?p:w)==p,A=(S=S==o?p:S)==p,T=w==S;if(T&&Be(e)){if(!Be(t))return!1;f=!0,E=!1}if(T&&!E)return u||(u=new xe),f||Ge(e)?Ie(e,t,n,r,i,u):function(e,t,n,r,i,o,a){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!o(new J(e),new J(t)));case s:case l:case d:return Fe(+e,+t);case c:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case h:var u=R;case g:var p=1&r;if(u||(u=D),e.size!=t.size&&!p)return!1;var f=a.get(e);if(f)return f==t;r|=2,a.set(e,t);var _=Ie(u(e),u(t),r,i,o,a);return a.delete(e),_;case v:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,w,n,r,i,u);if(!(1&n)){var C=E&&G.call(e,"__wrapped__"),k=A&&G.call(t,"__wrapped__");if(C||k){var I=C?e.value():e,P=k?t.value():t;return u||(u=new xe),i(I,P,n,r,u)}}return!!T&&(u||(u=new xe),function(e,t,n,r,i,o){var a=1&n,s=Pe(e),l=s.length;if(l!=Pe(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:G.call(t,u)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var f=e[u=s[c]],m=t[u];if(r)var g=a?r(m,f,u,t,e,o):r(f,m,u,e,t,o);if(!(void 0===g?f===m||i(f,m,n,r,o):g)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,i,u))}(e,t,n,r,Te,i))}function Ce(e){return!(!Ze(e)||function(e){return!!W&&W in e}(e))&&(Ue(e)?X:w).test(De(e))}function ke(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||V))return re(e);var t,n,r=[];for(var i in Object(e))G.call(e,i)&&"constructor"!=i&&r.push(i);return r}function Ie(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,h=!0,d=2&n?new be:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var p=e[u],f=t[u];if(r)var m=a?r(f,p,u,t,e,o):r(p,f,u,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!N(t,(function(e,t){if(a=t,!d.has(a)&&(p===e||i(p,e,n,r,o)))return d.push(t);var a}))){h=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Pe(e){return function(e,t,n){var r=t(e);return ze(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,We,Oe)}function Le(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ce(n)?n:void 0}ye.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},ye.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ye.prototype.get=function(e){var t=this.__data__;if(ce){var n=t[e];return n===r?void 0:n}return G.call(t,e)?t[e]:void 0},ye.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:G.call(t,e)},ye.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?r:t,this},ve.prototype.clear=function(){this.__data__=[],this.size=0},ve.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0)&&(n==t.length-1?t.pop():$.call(t,n,1),--this.size,!0)},ve.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},ve.prototype.has=function(e){return Se(this.__data__,e)>-1},ve.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},_e.prototype.clear=function(){this.size=0,this.__data__={hash:new ye,map:new(oe||ve),string:new ye}},_e.prototype.delete=function(e){var t=Le(this,e).delete(e);return this.size-=t?1:0,t},_e.prototype.get=function(e){return Le(this,e).get(e)},_e.prototype.has=function(e){return Le(this,e).has(e)},_e.prototype.set=function(e,t){var n=Le(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},be.prototype.add=be.prototype.push=function(e){return this.__data__.set(e,r),this},be.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.clear=function(){this.__data__=new ve,this.size=0},xe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ve){var r=n.__data__;if(!oe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new _e(r)}return n.set(e,t),this.size=n.size,this};var Oe=te?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(te(e),(function(t){return Q.call(e,t)})))}:function(){return[]},Ne=Ee;function Re(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function De(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,t){return e===t||e!=e&&t!=t}(ie&&Ne(new ie(new ArrayBuffer(1)))!=x||oe&&Ne(new oe)!=h||ae&&Ne(ae.resolve())!=f||se&&Ne(new se)!=g||le&&Ne(new le)!=_)&&(Ne=function(e){var t=Ee(e),n=t==p?e.constructor:void 0,r=n?De(n):"";if(r)switch(r){case ue:return x;case he:return h;case de:return f;case pe:return g;case fe:return _}return t});var je=Ae(function(){return arguments}())?Ae:function(e){return qe(e)&&G.call(e,"callee")&&!Q.call(e,"callee")},ze=Array.isArray,Be=ne||function(){return!1};function Ue(e){if(!Ze(e))return!1;var t=Ee(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var Ge=O?function(e){return function(t){return e(t)}}(O):function(e){return qe(e)&&Ve(e.length)&&!!E[Ee(e)]};function We(e){return null!=(t=e)&&Ve(t.length)&&!Ue(t)?we(e):ke(e);var t}e.exports=function(e,t){return Te(e,t)}}({get exports(){return st},set exports(e){st=e}},st);var lt=st;function ct(e,t){return e.length===t.length&&JSON.stringify(e.map((function(e){return e})).sort())===JSON.stringify(t.map((function(e){return e})).sort())}var ut={Polygon:j,LineString:F,Point:D,MultiPolygon:U,MultiLineString:U,MultiPoint:U},ht=Object.freeze({__proto__:null,CommonSelectors:he,constrainFeatureMovement:We,createMidPoint:ge,createSupplementaryPoints:ye,createVertex:me,doubleClickZoom:ve,euclideanDistance:P,featuresAt:C,getFeatureAtAndSetCursors:I,isClick:L,isEventAtCoordinates:$e,isTap:M,mapEventToBoundingBox:E,ModeHandler:e,moveFeatures:He,sortFeatures:S,stringSetsAreEqual:ct,StringSet:A,theme:ee,toDenseArray:W}),dt=function(e,t){var n={options:e=function(e){void 0===e&&(e={});var t=Y(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=Y(ot,e.controls):t.controls=Y(it,e.controls),(t=Y(rt,t)).styles=at(t.styles,"cold").concat(at(t.styles,"hot")),t}(e)};t=function(e,t){return t.modes=p,t.getFeatureIdsAt=function(t){return C.click({point:t},null,e).map((function(e){return e.properties.id}))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:d.FEATURE_COLLECTION,features:e.store.getSelectedIds().map((function(t){return e.store.get(t)})).map((function(e){return e.toGeoJSON()}))}},t.getSelectedPoints=function(){return{type:d.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map((function(e){return{type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:e.coordinates}}}))}},t.set=function(n){if(void 0===n.type||n.type!==d.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),o=t.add(n),a=new A(o);return(i=i.filter((function(e){return!a.has(e)}))).length&&t.delete(i),r(),o},t.add=function(t){var n=JSON.parse(JSON.stringify(xe(t))).features.map((function(t){if(t.id=t.id||O(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){var n=ut[t.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+t.geometry.type+".");var r=new n(e,t);e.store.add(r)}else{var i=e.store.get(t.id);i.properties=t.properties,lt(i.getCoordinates(),t.geometry.coordinates)||i.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),n},t.get=function(t){var n=e.store.get(t);if(n)return n.toGeoJSON()},t.getAll=function(){return{type:d.FEATURE_COLLECTION,features:e.store.getAll().map((function(e){return e.toGeoJSON()}))}},t.delete=function(n){return e.store.delete(n,{silent:!0}),t.getMode()!==p.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(p.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===p.DIRECT_SELECT?e.events.changeMode(p.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(n,r){return void 0===r&&(r={}),n===p.SIMPLE_SELECT&&t.getMode()===p.SIMPLE_SELECT?(ct(r.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(r.featureIds,{silent:!0}),e.store.render()),t):(n===p.DIRECT_SELECT&&t.getMode()===p.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:!0}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i),t},t}(n,t),n.api=t;var r=$(n);return t.onAdd=r.onAdd,t.onRemove=r.onRemove,t.types=h,t.options=e,t};function pt(e){dt(e,this)}return pt.modes=nt,pt.constants=b,pt.lib=ht,pt}()},1894:(e,t,n)=>{"use strict";var r=n(2751).x0;function i(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}i.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,(n!==this.lastSentIndex||r.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!e.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(e.keyCode)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(e){return e?this.handleError(e,t):t?t():void 0}.bind(this))},getRequestOptions:function(e){return Array.isArray(e)||(e=[e]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},getEventPayload:function(e,t){var n;n=t.options.proximity?"object"===typeof t.options.proximity?[t.options.proximity.longitude,t.options.proximity.latitude]:"ip"===t.options.proximity?[999,999]:t.options.proximity:null;var r=t._map?t._map.getZoom():void 0,i={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:r,keyboardLocale:this.locale};return"search.select"===e?i.queryString=t.inputString:"search.select"!=e&&t._inputEl?i.queryString=t._inputEl.value:i.queryString=t.inputString,i},request:function(e,t){var n=new XMLHttpRequest;for(var r in n.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0),e.headers){var i=e.headers[r];n.setRequestHeader(r,i)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return r()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,r=e.id;return n.map((function(e){return e.id})).indexOf(r)}},shouldEnableLogging:function(e){return!1!==e.enableEventLogging&&((!e.origin||"https://api.mapbox.com"===e.origin)&&(!e.localGeocoder&&!e.filter))},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}},e.exports=i},3901:e=>{e.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},5636:e=>{function t(){}t.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise((function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)}))}},e.exports=t},3457:(e,t,n)=>{"use strict";var r=n(3215),i=n(936),o=n(5307),a=n(8041).EventEmitter,s=n(3901),l=n(599),c=n(8348),u=n(1894),h=n(3291),d=n(3284),p=n(5636),f=n(8942);const m=0,g=1,y=2;function v(e){this._eventEmitter=new a,this.options=o({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new p}v.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(e,t){if(!document.body.contains(t))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const n=e.onAdd();t.appendChild(n)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else{if("string"!=typeof e)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const n=document.querySelectorAll(e);if(0===n.length)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}}},onAdd:function(e){if(e&&"string"!=typeof e&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new u(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",i(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(e){this.eventManager.keyevent(e,this)}.bind(this));var o=document.createElement("div");o.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),o.appendChild(this._clearEl),o.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(o),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var s=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(s),o.appendChild(this._geolocateEl),this._showGeolocateButton()}var h=this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),h.getItemValue=this.options.getItemValue;var d=h.list.draw,p=this._footerNode=function(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}();return h.list.draw=function(){d.call(this),p.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),p.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(p)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const e=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(e),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(e){const n=e.body.features[0];if(n){const e=f.transformFeatureToGeolocationText(n,this.options.addressAccuracy);this._setInputValue(e),n.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:n})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){1===e.code?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(r?r.value:""))return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),e.metaKey||-1!==[n,t,37,39,13,38,40].indexOf(e.keyCode)||r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&s[e.properties.short_code])t=o({},this.options.flyTo),this._map&&this._map.fitBounds(s[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=o({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};t=o({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){return e.localGeocoderOnly?g:e.reverseGeocode&&f.REVERSE_GEOCODE_COORD_RGX.test(t)?y:m},_setupConfig:function(e,t){const n=/[\s,]+/;var r=this,i=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"].reduce((function(e,t){if(void 0===r.options[t]||null===r.options[t])return e;["countries","types","language"].indexOf(t)>-1?e[t]=r.options[t].split(n):e[t]=r.options[t];const i="number"===typeof r.options[t].longitude&&"number"===typeof r.options[t].latitude;if("proximity"===t&&i){const n=r.options[t].longitude,i=r.options[t].latitude;e[t]=[n,i]}return e}),{});switch(e){case y:var a=t.split(n).map((function(e){return parseFloat(e,10)}));r.options.flipCoordinates||a.reverse(),!i.types||i.types[0],i=o(i,{query:a,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach((function(e){e in i&&delete i[e]}));break;case m:{const e=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(e)&&(t=t.replace(/,/g," ")),i=o(i,{query:t})}}return i},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var r;switch(t){case g:r=Promise.resolve();break;case m:r=this.geocoderService.forwardGeocode(n).send();break;case y:r=this.geocoderService.reverseGeocode(n).send()}var i=this.options.localGeocoder&&this.options.localGeocoder(e)||[],o=[],a=null;return r.catch(function(e){a=e}.bind(this)).then(function(t){this._hideLoadingIcon();var r={};return t?"200"==t.statusCode&&((r=t.body).request=t.request,r.headers=t.headers):r={type:"FeatureCollection",features:[]},r.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),r.features=r.features?i.concat(r.features):i,this.options.externalGeocoder?(o=this.options.externalGeocoder(e,r.features)||Promise.resolve([])).then((function(e){return r.features=r.features?e.concat(r.features):e,r}),(function(){return r})):r}.bind(this)).then(function(e){if(a)throw a;this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",e))}.bind(this)).catch(function(e){this._hideLoadingIcon(),this._hideAttribution(),i.length&&this.options.localGeocoder||o.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(i)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:i}),this._eventEmitter.emit("error",{error:e})}.bind(this)),r},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){e.relatedTarget&&this._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map&&this.options.trackProximity)if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderLocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderUserDeniedGeolocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>")},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=d.language(e),n=h.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&"function"==typeof e&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t=o({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(t),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}},e.exports=v},3291:e=>{"use strict";e.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},8942:e=>{function t(e){const t=e.address||"",n=e.text||"",r=e.place_name||"",i={address:r.split(",")[0],houseNumber:t,street:n,placeName:r};return e.context.forEach((function(e){const t=e.id.split(".")[0];i[t]=e.text})),i}e.exports={transformFeatureToGeolocationText:function(e,n){const r=t(e),i=["address","street","place","country"];if("function"===typeof n)return n(r);const o=i.indexOf(n);return(-1===o?i:i.slice(o)).reduce((function(e,t){return r[t]?(""!==e&&(e+=", "),e+r[t]):e}),"")},getAddressInfo:t,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/}},599:(e,t,n)=>{"use strict";var r=n(7962);e.exports=r},7962:(e,t,n)=>{"use strict";var r=n(4516),i=n(9609);function o(e){i.call(this,e)}o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.sendRequest=r.browserSend,o.prototype.abortRequest=r.browserAbort,e.exports=function(e){return new o(e)}},4516:(e,t,n)=>{"use strict";var r=n(1188),i=n(7698),o=n(762),a=n(9928),s={};function l(e){var t=e.total,n=e.loaded;return{total:t,transferred:n,percent:100*n/t}}function c(e,t){return new Promise((function(n,r){t.onprogress=function(t){e.emitter.emit(o.EVENT_PROGRESS_DOWNLOAD,l(t))};var a=e.file;a&&(t.upload.onprogress=function(t){e.emitter.emit(o.EVENT_PROGRESS_UPLOAD,l(t))}),t.onerror=function(e){r(e)},t.onabort=function(){var t=new i({request:e,type:o.ERROR_REQUEST_ABORTED});r(t)},t.onload=function(){if(delete s[e.id],t.status<200||t.status>=400){var o=new i({request:e,body:t.response,statusCode:t.status});r(o)}else n(t)};var c=e.body;"string"===typeof c?t.send(c):c?t.send(JSON.stringify(c)):a?t.send(a):t.send(),s[e.id]=t})).then((function(t){return function(e,t){return new r(e,{body:t.response,headers:a(t.getAllResponseHeaders()),statusCode:t.status})}(e,t)}))}function u(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach((function(t){r.setRequestHeader(t,e.headers[t])})),r}e.exports={browserAbort:function(e){var t=s[e.id];t&&(t.abort(),delete s[e.id])},sendRequestXhr:c,browserSend:function(e){return Promise.resolve().then((function(){var t=u(e,e.client.accessToken);return c(e,t)}))},createRequestXhr:u}},9609:(e,t,n)=>{"use strict";var r=n(247),i=n(3307),o=n(762);function a(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");r(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||o.API_ORIGIN}a.prototype.createRequest=function(e){return new i(this,e)},e.exports=a},7698:(e,t,n)=>{"use strict";var r=n(762);e.exports=function(e){var t,n=e.type||r.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(o){t=e.body}else t=null;var i=e.message||null;i||("string"===typeof t?i=t:t&&"string"===typeof t.message?i=t.message:n===r.ERROR_REQUEST_ABORTED&&(i="Request aborted")),this.message=i,this.type=n,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}},3307:(e,t,n)=>{"use strict";var r=n(247),i=n(5307),o=n(548),a=n(5607),s=n(762),l=1;function c(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=i(n,t.headers),a=Object.keys(r).reduce((function(e,t){return e[t.toLowerCase()]=r[t],e}),{});this.id=l++,this._options=t,this.emitter=new o,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=a}c.prototype.url=function(e){var t=a.prependOrigin(this.path,this.origin);t=a.appendQueryObject(t,this.query);var n=this.params,o=null==e?this.client.accessToken:e;if(o){t=a.appendQueryParam(t,"access_token",o);var s=r(o).user;n=i({ownerId:s},n)}return t=a.interpolateRouteParams(t,n),t},c.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then((function(t){return e.response=t,e.emitter.emit(s.EVENT_RESPONSE,t),t}),(function(t){throw e.error=t,e.emitter.emit(s.EVENT_ERROR,t),t}))},c.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},c.prototype.eachPage=function(e){var t=this;function n(n){e(null,n,(function(){delete t._nextPageRequest;var e=n.nextPage();e&&(t._nextPageRequest=e,i(e))}))}function r(t){e(t,null,(function(){}))}function i(e){e.send().then(n,r)}i(this)},c.prototype.clone=function(){return this._extend()},c.prototype._extend=function(e){var t=i(this._options,e);return new c(this.client,t)},e.exports=c},1188:(e,t,n)=>{"use strict";var r=n(3212);function i(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(n){this.body=t.body}this.links=r(this.headers.link)}i.prototype.hasNextPage=function(){return!!this.links.next},i.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=i},762:e=>{"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},9928:e=>{"use strict";e.exports=function(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach((function(e){var n=function(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}(e);t[n.name]=n.value})),t):t}},3212:e=>{"use strict";e.exports=function(e){return e?e.split(/,\s*</).reduce((function(e,t){var n=function(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),i=null,o=r.reduce((function(e,t){var n=function(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}(t);return n?"rel"===n.key?(i||(i=n.value),e):(e[n.key]=n.value,e):e}),{});return i?{url:n,rel:i,params:o}:null}(t);return n?(n.rel.split(/\s+/).forEach((function(t){e[t]||(e[t]={url:n.url,params:n.params})})),e):e}),{}):{}}},5607:e=>{"use strict";function t(e){return Array.isArray(e)?e.map(encodeURIComponent).join(","):encodeURIComponent(String(e))}function n(e,n,r){if(!1===r||null===r)return e;var i=/\?/.test(e)?"&":"?",o=encodeURIComponent(n);return void 0!==r&&""!==r&&!0!==r&&(o+="="+t(r)),""+e+i+o}e.exports={appendQueryObject:function(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach((function(e){var i=t[e];void 0!==i&&(Array.isArray(i)&&(i=i.filter((function(e){return null!==e&&void 0!==e})).join(",")),r=n(r,e,i))})),r},appendQueryParam:n,prependOrigin:function(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var n="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+n+e},interpolateRouteParams:function(e,n){return n?e.replace(/\/:([a-zA-Z0-9]+)/g,(function(e,r){var i=n[r];if(void 0===i)throw new Error("Unspecified route parameter "+r);return"/"+t(i)})):e}}},8348:(e,t,n)=>{"use strict";var r=n(5307),i=n(3269),o=n(3970),a=n(9216),s=n(598),l={},c=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(e){i.assertShape({query:i.required(i.string),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),proximity:i.oneOf(i.coordinates,"ip"),types:i.arrayOf(i.oneOf(c)),autocomplete:i.boolean,bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),routing:i.boolean,fuzzyMatch:i.boolean,worldview:i.string})(e),e.mode=e.mode||"mapbox.places";var t=a(r({country:e.countries},o(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(e,["mode","query"]),query:t})},l.reverseGeocode=function(e){i.assertShape({query:i.required(i.coordinates),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),types:i.arrayOf(i.oneOf(c)),bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),reverseMode:i.oneOf("distance","score"),routing:i.boolean,worldview:i.string})(e),e.mode=e.mode||"mapbox.places";var t=a(r({country:e.countries},o(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(e,["mode","query"]),query:t})},e.exports=s(l)},598:(e,t,n)=>{"use strict";var r=n(9609),i=n(7962);e.exports=function(e){return function(t){var n;n=r.prototype.isPrototypeOf(t)?t:i(t);var o=Object.create(e);return o.client=n,o}}},8480:e=>{"use strict";e.exports=function(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=t(r,e[r]),n}),{})}},3970:e=>{"use strict";e.exports=function(e,t){var n=function(e,n){return-1!==t.indexOf(e)&&void 0!==n};return"function"===typeof t&&(n=t),Object.keys(e).filter((function(t){return n(t,e[t])})).reduce((function(t,n){return t[n]=e[n],t}),{})}},9216:(e,t,n)=>{"use strict";var r=n(8480);e.exports=function(e){return r(e,(function(e,t){return"boolean"===typeof t?JSON.stringify(t):t}))}},3269:(e,t,n)=>{"use strict";var r=n(5307),i=n(4173);e.exports=r(i,{file:function(e){if("undefined"!==typeof window){if(e instanceof n.g.Blob||e instanceof n.g.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!==typeof e&&void 0===e.pipe)return"Filename or Readable stream"},date:function(e){var t="date";if("boolean"===typeof e)return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch(r){return t}},coordinates:function(e){return i.tuple(i.number,i.number)(e)},assertShape:function(e,t){return i.assert(i.strictShape(e),t)}})},247:(e,t,n)=>{"use strict";var r=n(7538),i={};function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){if(i[e])return i[e];var t=e.split("."),n=t[0],a=t[1];if(!a)throw new Error("Invalid token");var s=function(e){try{return JSON.parse(r.decode(e))}catch(t){throw new Error("Invalid token")}}(a),l={usage:n,user:s.u};return o(s,"a")&&(l.authorization=s.a),o(s,"exp")&&(l.expires=1e3*s.exp),o(s,"iat")&&(l.created=1e3*s.iat),o(s,"scopes")&&(l.scopes=s.scopes),o(s,"client")&&(l.client=s.client),o(s,"ll")&&(l.lastLogin=s.ll),o(s,"iu")&&(l.impersonator=s.iu),i[e]=l,l}},673:e=>{function t(e,t){var r=n(e,t);return r.whole+"\xb0 "+(r.minutes?r.minutes+"' ":"")+(r.seconds?r.seconds+'" ':"")+r.dir}function n(e,t){var n=({lat:["N","S"],lon:["E","W"]}[t]||"")[e>=0?0:1],r=Math.abs(e),i=Math.floor(r),o=60*(r-i),a=Math.floor(o);return{whole:i,minutes:a,seconds:Math.floor(60*(o-a)),dir:n}}function r(e,t){if(t||(t="NSEW"),"string"!==typeof e)return null;var n=(e=e.toUpperCase()).match(/^[\s\,]*([NSEW])?\s*([\-|\\u2014|\\u2015]?[0-9.]+)[\xb0\xba\u02da]?\s*(?:([0-9.]+)['\u2019\u2032\u2018]\s*)?(?:([0-9.]+)(?:''|"|\u201d|\u2033)\s*)?([NSEW])?/);if(!n)return null;var r,i=n[0];if(n[1]&&n[5]?(r=n[1],i=i.slice(0,-1)):r=n[1]||n[5],r&&-1===t.indexOf(r))return null;var o=n[2]?parseFloat(n[2]):0,a=n[3]?parseFloat(n[3])/60:0,s=n[4]?parseFloat(n[4])/3600:0,l=o<0?-1:1;return"S"!==r&&"W"!==r||(l*=-1),{val:(Math.abs(o)+a+s)*l,dim:r,matched:i,remain:e.slice(i.length)}}e.exports=function(e,t){var n=r(e,t);return null===n?null:n.val},e.exports.pair=function(e,t){var n=r(e=e.trim(),t);if(!n)return null;var i=r(e=n.remain.trim(),t);if(!i||i.remain)return null;return n.dim?function(e,t,n){if("N"===n||"S"===n)return[e,t];if("W"===n||"E"===n)return[t,e]}(n.val,i.val,n.dim):[n.val,i.val]},e.exports.format=t,e.exports.formatPair=function(e){return t(e.lat,"lat")+" "+t(e.lon,"lon")},e.exports.coordToDMS=n},2071:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7313),i=n(7472),o=n(9081),a=n(6417);const s=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function l(e){const t=[],n=[];return Array.from(e.querySelectorAll(s)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function c(){return!0}const u=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:s=!1,disableRestoreFocus:u=!1,getTabbable:h=l,isEnabled:d=c,open:p}=e,f=r.useRef(),m=r.useRef(null),g=r.useRef(null),y=r.useRef(null),v=r.useRef(null),_=r.useRef(!1),b=r.useRef(null),x=(0,i.Z)(t.ref,b),w=r.useRef(null);r.useEffect((()=>{p&&b.current&&(_.current=!n)}),[n,p]),r.useEffect((()=>{if(!p||!b.current)return;const e=(0,o.Z)(b.current);return b.current.contains(e.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),_.current&&b.current.focus()),()=>{u||(y.current&&y.current.focus&&(f.current=!0,y.current.focus()),y.current=null)}}),[p]),r.useEffect((()=>{if(!p||!b.current)return;const e=(0,o.Z)(b.current),t=t=>{const{current:n}=b;if(null!==n)if(e.hasFocus()&&!s&&d()&&!f.current){if(!n.contains(e.activeElement)){if(t&&v.current!==t.target||e.activeElement!==v.current)v.current=null;else if(null!==v.current)return;if(!_.current)return;let o=[];if(e.activeElement!==m.current&&e.activeElement!==g.current||(o=h(b.current)),o.length>0){var r,i;const e=Boolean((null==(r=w.current)?void 0:r.shiftKey)&&"Tab"===(null==(i=w.current)?void 0:i.key)),t=o[0],n=o[o.length-1];e?n.focus():t.focus()}else n.focus()}}else f.current=!1},n=t=>{w.current=t,!s&&d()&&"Tab"===t.key&&e.activeElement===b.current&&t.shiftKey&&(f.current=!0,g.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);const r=setInterval((()=>{"BODY"===e.activeElement.tagName&&t()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}),[n,s,u,d,p,h]);const S=e=>{null===y.current&&(y.current=e.relatedTarget),_.current=!0};return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("div",{tabIndex:p?0:-1,onFocus:S,ref:m,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:x,onFocus:e=>{null===y.current&&(y.current=e.relatedTarget),_.current=!0,v.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,a.jsx)("div",{tabIndex:p?0:-1,onFocus:S,ref:g,"data-testid":"sentinelEnd"})]})}},5676:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,Z:()=>h});var r=n(9081),i=n(3282),o=n(1194);function a(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function s(e){return parseInt((0,i.Z)(e).getComputedStyle(e).paddingRight,10)||0}function l(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&a(e,i)}))}function c(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function u(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,r.Z)(e);return t.body===e?(0,i.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(a)){const e=(0,o.Z)((0,r.Z)(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight="".concat(s(a)+e,"px");const t=(0,r.Z)(a).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(s(t)+e,"px")}))}let e;if(a.parentNode instanceof DocumentFragment)e=(0,r.Z)(a).body;else{const t=a.parentElement,n=(0,i.Z)(a);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:a}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}class h{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&a(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);l(t,e.mount,e.modalRef,r,!0);const i=c(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=c(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=u(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=c(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&a(e.modalRef,t),l(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&a(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}},6280:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(7462),i=n(3366),o=n(7313),a=n(7472),s=n(9081),l=n(2780),c=n(4246),u=n(1921),h=n(2871),d=n(5676),p=n(2071),f=n(6551),m=n(9648),g=n(6417);const y=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];const v=new d.Z,_=o.forwardRef((function(e,t){var n,_;const{children:b,classes:x,closeAfterTransition:w=!1,component:S,container:E,disableAutoFocus:A=!1,disableEnforceFocus:T=!1,disableEscapeKeyDown:C=!1,disablePortal:k=!1,disableRestoreFocus:I=!1,disableScrollLock:P=!1,hideBackdrop:L=!1,keepMounted:M=!1,manager:O=v,onBackdropClick:N,onClose:R,onKeyDown:D,open:F,onTransitionEnter:j,onTransitionExited:z,slotProps:B={},slots:U={}}=e,V=(0,i.Z)(e,y),[Z,q]=o.useState(!0),G=o.useRef({}),W=o.useRef(null),H=o.useRef(null),X=(0,a.Z)(H,t),K=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),Y=null==(n=e["aria-hidden"])||n,J=()=>(G.current.modalRef=H.current,G.current.mountNode=W.current,G.current),Q=()=>{O.mount(J(),{disableScrollLock:P}),H.current.scrollTop=0},$=(0,l.Z)((()=>{const e=function(e){return"function"===typeof e?e():e}(E)||(0,s.Z)(W.current).body;O.add(J(),e),H.current&&Q()})),ee=o.useCallback((()=>O.isTopModal(J())),[O]),te=(0,l.Z)((e=>{W.current=e,e&&(F&&ee()?Q():(0,d.G)(H.current,Y))})),ne=o.useCallback((()=>{O.remove(J(),Y)}),[O,Y]);o.useEffect((()=>()=>{ne()}),[ne]),o.useEffect((()=>{F?$():K&&w||ne()}),[F,ne,K,w,$]);const re=(0,r.Z)({},e,{classes:x,closeAfterTransition:w,disableAutoFocus:A,disableEnforceFocus:T,disableEscapeKeyDown:C,disablePortal:k,disableRestoreFocus:I,disableScrollLock:P,exited:Z,hideBackdrop:L,keepMounted:M}),ie=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"]};return(0,u.Z)(i,f.x,r)})(re),oe=()=>{q(!1),j&&j()},ae=()=>{q(!0),z&&z(),w&&ne()},se={};void 0===b.props.tabIndex&&(se.tabIndex="-1"),K&&(se.onEnter=(0,c.Z)(oe,b.props.onEnter),se.onExited=(0,c.Z)(ae,b.props.onExited));const le=null!=(_=null!=S?S:U.root)?_:"div",ce=(0,m.Z)({elementType:le,externalSlotProps:B.root,externalForwardedProps:V,additionalProps:{ref:X,role:"presentation",onKeyDown:e=>{D&&D(e),"Escape"===e.key&&ee()&&(C||(e.stopPropagation(),R&&R(e,"escapeKeyDown")))}},className:ie.root,ownerState:re}),ue=U.backdrop,he=(0,m.Z)({elementType:ue,externalSlotProps:B.backdrop,additionalProps:{"aria-hidden":!0,onClick:e=>{e.target===e.currentTarget&&(N&&N(e),R&&R(e,"backdropClick"))},open:F},className:ie.backdrop,ownerState:re});return M||F||K&&!Z?(0,g.jsx)(h.Z,{ref:te,container:E,disablePortal:k,children:(0,g.jsxs)(le,(0,r.Z)({},ce,{children:[!L&&ue?(0,g.jsx)(ue,(0,r.Z)({},he)):null,(0,g.jsx)(p.Z,{disableEnforceFocus:T,disableAutoFocus:A,disableRestoreFocus:I,isEnabled:ee,open:F,children:o.cloneElement(b,se)})]}))}):null}))},6551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,x:()=>o});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiModal",e)}const a=(0,r.Z)("MuiModal",["root","hidden"])},2871:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(7313),i=n(1168),o=n(7472),a=n(2678),s=n(9265),l=n(6417);const c=r.forwardRef((function(e,t){const{children:n,container:c,disablePortal:u=!1}=e,[h,d]=r.useState(null),p=(0,o.Z)(r.isValidElement(n)?n.ref:null,t);return(0,a.Z)((()=>{u||d(function(e){return"function"===typeof e?e():e}(c)||document.body)}),[c,u]),(0,a.Z)((()=>{if(h&&!u)return(0,s.Z)(t,h),()=>{(0,s.Z)(t,null)}}),[t,h,u]),u?r.isValidElement(n)?r.cloneElement(n,{ref:p}):n:(0,l.jsx)(r.Fragment,{children:h?i.createPortal(n,h):h})}))},1001:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(7462),i=n(3366),o=n(7313),a=n(1168),s=n(7472),l=n(3282),c=n(4312),u=n(2678),h=n(6417);const d=["onChange","maxRows","minRows","style","value"];function p(e,t){return parseInt(e[t],10)||0}const f={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function m(e){return void 0===e||null===e||0===Object.keys(e).length}const g=o.forwardRef((function(e,t){const{onChange:n,maxRows:g,minRows:y=1,style:v,value:_}=e,b=(0,i.Z)(e,d),{current:x}=o.useRef(null!=_),w=o.useRef(null),S=(0,s.Z)(t,w),E=o.useRef(null),A=o.useRef(0),[T,C]=o.useState({}),k=o.useCallback((()=>{const t=w.current,n=(0,l.Z)(t).getComputedStyle(t);if("0px"===n.width)return{};const r=E.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const i=n["box-sizing"],o=p(n,"padding-bottom")+p(n,"padding-top"),a=p(n,"border-bottom-width")+p(n,"border-top-width"),s=r.scrollHeight;r.value="x";const c=r.scrollHeight;let u=s;y&&(u=Math.max(Number(y)*c,u)),g&&(u=Math.min(Number(g)*c,u)),u=Math.max(u,c);return{outerHeightStyle:u+("border-box"===i?o+a:0),overflow:Math.abs(u-s)<=1}}),[g,y,e.placeholder]),I=(e,t)=>{const{outerHeightStyle:n,overflow:r}=t;return A.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(A.current+=1,{overflow:r,outerHeightStyle:n}):e},P=o.useCallback((()=>{const e=k();m(e)||C((t=>I(t,e)))}),[k]);o.useEffect((()=>{const e=(0,c.Z)((()=>{A.current=0,w.current&&(()=>{const e=k();m(e)||(0,a.flushSync)((()=>{C((t=>I(t,e)))}))})()})),t=(0,l.Z)(w.current);let n;return t.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver(e),n.observe(w.current)),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}})),(0,u.Z)((()=>{P()})),o.useEffect((()=>{A.current=0}),[_]);return(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)("textarea",(0,r.Z)({value:_,onChange:e=>{A.current=0,x||P(),n&&n(e)},ref:S,rows:y,style:(0,r.Z)({height:T.outerHeightStyle,overflow:T.overflow?"hidden":null},v)},b)),(0,h.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:E,tabIndex:-1,style:(0,r.Z)({},f,v,{padding:0})})]})}))},8479:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ActionTypes:()=>ee,BadgeUnstyled:()=>P,ButtonUnstyled:()=>F,ClickAwayListener:()=>B,FocusTrap:()=>U.Z,FormControlUnstyled:()=>W,FormControlUnstyledContext:()=>V,InputUnstyled:()=>$,MenuItemUnstyled:()=>Wt,MenuUnstyled:()=>Ut,MenuUnstyledContext:()=>pe,ModalManager:()=>Xt.Z,ModalUnstyled:()=>Ht.Z,MultiSelectUnstyled:()=>cn,NoSsr:()=>un,OptionGroupUnstyled:()=>fn,OptionUnstyled:()=>_n,PopperUnstyled:()=>zt,Portal:()=>Mt.Z,SelectUnstyled:()=>Sn,SelectUnstyledContext:()=>nn,SliderUnstyled:()=>Wn,SliderValueLabelUnstyled:()=>Cn,SnackbarUnstyled:()=>Jn,SwitchUnstyled:()=>nr,TabPanelUnstyled:()=>Ir,TabUnstyled:()=>Xr,TablePaginationActionsUnstyled:()=>pr,TablePaginationUnstyled:()=>_r,TabsContext:()=>Tr,TabsListUnstyled:()=>Fr,TabsUnstyled:()=>Vr,TextareaAutosize:()=>Kr.Z,appendOwnerState:()=>r.Z,areArraysEqual:()=>i,areOptionsEqual:()=>Jt,badgeUnstyledClasses:()=>C,buttonUnstyledClasses:()=>M,createFilterOptions:()=>g,defaultListboxReducer:()=>ie,extractEventHandlers:()=>o.Z,flattenOptionGroups:()=>$t,formControlUnstyledClasses:()=>q,getBadgeUnstyledUtilityClass:()=>T,getButtonUnstyledUtilityClass:()=>L,getFormControlUnstyledUtilityClass:()=>Z,getInputUnstyledUtilityClass:()=>X,getMenuItemUnstyledUtilityClass:()=>Vt,getMenuUnstyledUtilityClass:()=>fe,getModalUtilityClass:()=>Kt.x,getOptionGroupUnstyledUtilityClass:()=>hn,getOptionUnstyledUtilityClass:()=>mn,getOptionsFromChildren:()=>Qt,getPanelId:()=>Er,getSelectUnstyledUtilityClass:()=>rn,getSliderUtilityClass:()=>An,getSnackbarUnstyledUtilityClass:()=>Hn,getSwitchUnstyledUtilityClass:()=>$n,getTabId:()=>Ar,getTabPanelUnstyledUtilityClass:()=>br,getTabUnstyledUtilityClass:()=>Zr,getTablePaginationUnstyledUtilityClass:()=>fr,getTabsListUnstyledUtilityClass:()=>Pr,getTabsUnstyledUtilityClass:()=>jr,inputUnstyledClasses:()=>K,isHostComponent:()=>a.Z,isOptionGroup:()=>Yt,menuItemUnstyledClasses:()=>Zt,menuUnstyledClasses:()=>me,modalUnstyledClasses:()=>Kt.Z,optionGroupUnstyledClasses:()=>dn,optionUnstyledClasses:()=>gn,resolveComponentProps:()=>s.Z,selectUnstyledClasses:()=>on,sliderUnstyledClasses:()=>Tn,snackbarUnstyledClasses:()=>Xn,switchUnstyledClasses:()=>er,tabPanelUnstyledClasses:()=>xr,tabUnstyledClasses:()=>qr,tablePaginationUnstyledClasses:()=>mr,tabsListUnstyledClasses:()=>Lr,tabsUnstyledClasses:()=>zr,unstable_composeClasses:()=>x.Z,useAutocomplete:()=>_,useBadge:()=>S,useButton:()=>R,useFormControlUnstyledContext:()=>H,useInput:()=>J,useListbox:()=>he,useMenu:()=>ye,useMenuItem:()=>qt,useSelect:()=>tn,useSlider:()=>Un,useSlotProps:()=>l.Z,useSnackbar:()=>Kn,useSwitch:()=>Qn,useTab:()=>Wr,useTabContext:()=>Sr,useTabPanel:()=>Cr,useTabs:()=>Br,useTabsList:()=>Rr});var r=n(3637);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var o=n(4816),a=n(3066),s=n(3107),l=n(9648),c=n(7462),u=n(7313),h=n(3362),d=n(782),p=n(2780),f=n(9265);function m(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:a=!1}=e;return(e,s)=>{let{inputValue:l,getOptionLabel:c}=s,u=a?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=m(u));const h=u?e.filter((e=>{let r=(o||c)(e);return n&&(r=r.toLowerCase()),t&&(r=m(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1})):e;return"number"===typeof r?h.slice(0,r):h}}function y(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const v=g();function _(e){const{autoComplete:t=!1,autoHighlight:n=!1,autoSelect:r=!1,blurOnSelect:i=!1,clearOnBlur:o=!e.freeSolo,clearOnEscape:a=!1,componentName:s="useAutocomplete",defaultValue:l=(e.multiple?[]:null),disableClearable:m=!1,disableCloseOnSelect:g=!1,disabled:_,disabledItemsFocusable:b=!1,disableListWrap:x=!1,filterOptions:w=v,filterSelectedOptions:S=!1,freeSolo:E=!1,getOptionDisabled:A,getOptionLabel:T=(e=>{var t;return null!=(t=e.label)?t:e}),groupBy:C,handleHomeEndKeys:k=!e.freeSolo,id:I,includeInputInList:P=!1,inputValue:L,isOptionEqualToValue:M=((e,t)=>e===t),multiple:O=!1,onChange:N,onClose:R,onHighlightChange:D,onInputChange:F,onOpen:j,open:z,openOnFocus:B=!1,options:U,readOnly:V=!1,selectOnFocus:Z=!e.freeSolo,value:q}=e,G=(0,h.Z)(I);let W=T;W=e=>{const t=T(e);return"string"!==typeof t?String(t):t};const H=u.useRef(!1),X=u.useRef(!0),K=u.useRef(null),Y=u.useRef(null),[J,Q]=u.useState(null),[$,ee]=u.useState(-1),te=n?0:-1,ne=u.useRef(te),[re,ie]=(0,d.Z)({controlled:q,default:l,name:s}),[oe,ae]=(0,d.Z)({controlled:L,default:"",name:s,state:"inputValue"}),[se,le]=u.useState(!1),ce=u.useCallback(((e,t)=>{if(!(O?re.length<t.length:null!==t)&&!o)return;let n;if(O)n="";else if(null==t)n="";else{const e=W(t);n="string"===typeof e?e:""}oe!==n&&(ae(n),F&&F(e,n,"reset"))}),[W,oe,O,F,ae,o,re]),ue=u.useRef();u.useEffect((()=>{const e=re!==ue.current;ue.current=re,se&&!e||E&&!e||ce(null,re)}),[re,ce,se,ue,E]);const[he,de]=(0,d.Z)({controlled:z,default:!1,name:s,state:"open"}),[pe,fe]=u.useState(!0),me=!O&&null!=re&&oe===W(re),ge=he&&!V,ye=ge?w(U.filter((e=>!S||!(O?re:[re]).some((t=>null!==t&&M(e,t))))),{inputValue:me&&pe?"":oe,getOptionLabel:W}):[],ve=he&&ye.length>0&&!V;const _e=(0,p.Z)((e=>{-1===e?K.current.focus():J.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));u.useEffect((()=>{O&&$>re.length-1&&(ee(-1),_e(-1))}),[re,O,$,_e]);const be=(0,p.Z)((e=>{let{event:t,index:n,reason:r="auto"}=e;if(ne.current=n,-1===n?K.current.removeAttribute("aria-activedescendant"):K.current.setAttribute("aria-activedescendant","".concat(G,"-option-").concat(n)),D&&D(t,-1===n?null:ye[n],r),!Y.current)return;const i=Y.current.querySelector('[role="option"].Mui-focused');i&&(i.classList.remove("Mui-focused"),i.classList.remove("Mui-focusVisible"));const o=Y.current.parentElement.querySelector('[role="listbox"]');if(!o)return;if(-1===n)return void(o.scrollTop=0);const a=Y.current.querySelector('[data-option-index="'.concat(n,'"]'));if(a&&(a.classList.add("Mui-focused"),"keyboard"===r&&a.classList.add("Mui-focusVisible"),o.scrollHeight>o.clientHeight&&"mouse"!==r)){const e=a,t=o.clientHeight+o.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?o.scrollTop=n-o.clientHeight:e.offsetTop-e.offsetHeight*(C?1.3:0)<o.scrollTop&&(o.scrollTop=e.offsetTop-e.offsetHeight*(C?1.3:0))}})),xe=(0,p.Z)((e=>{let{event:n,diff:r,direction:i="next",reason:o="auto"}=e;if(!ge)return;const a=function(e,t){if(!Y.current||-1===e)return-1;let n=e;for(;;){if("next"===t&&n===ye.length||"previous"===t&&-1===n)return-1;const e=Y.current.querySelector('[data-option-index="'.concat(n,'"]')),r=!b&&(!e||e.disabled||"true"===e.getAttribute("aria-disabled"));if(!(e&&!e.hasAttribute("tabindex")||r))return n;n+="next"===t?1:-1}}((()=>{const e=ye.length-1;if("reset"===r)return te;if("start"===r)return 0;if("end"===r)return e;const t=ne.current+r;return t<0?-1===t&&P?-1:x&&-1!==ne.current||Math.abs(r)>1?0:e:t>e?t===e+1&&P?-1:x||Math.abs(r)>1?e:0:t})(),i);if(be({index:a,reason:o,event:n}),t&&"reset"!==r)if(-1===a)K.current.value=oe;else{const e=W(ye[a]);K.current.value=e;0===e.toLowerCase().indexOf(oe.toLowerCase())&&oe.length>0&&K.current.setSelectionRange(oe.length,e.length)}})),we=u.useCallback((()=>{if(!ge)return;const e=O?re[0]:re;if(0!==ye.length&&null!=e){if(Y.current)if(null==e)ne.current>=ye.length-1?be({index:ye.length-1}):be({index:ne.current});else{const t=ye[ne.current];if(O&&t&&-1!==y(re,(e=>M(t,e))))return;const n=y(ye,(t=>M(t,e)));-1===n?xe({diff:"reset"}):be({index:n})}}else xe({diff:"reset"})}),[ye.length,!O&&re,S,xe,be,ge,oe,O]),Se=(0,p.Z)((e=>{(0,f.Z)(Y,e),e&&we()}));u.useEffect((()=>{we()}),[we]);const Ee=e=>{he||(de(!0),fe(!0),j&&j(e))},Ae=(e,t)=>{he&&(de(!1),R&&R(e,t))},Te=(e,t,n,r)=>{if(O){if(re.length===t.length&&re.every(((e,n)=>e===t[n])))return}else if(re===t)return;N&&N(e,t,n,r),ie(t)},Ce=u.useRef(!1),ke=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",o=n,a=t;if(O){a=Array.isArray(re)?re.slice():[];const e=y(a,(e=>M(t,e)));-1===e?a.push(t):"freeSolo"!==r&&(a.splice(e,1),o="removeOption")}ce(e,a),Te(e,a,o,{option:t}),g||e&&(e.ctrlKey||e.metaKey)||Ae(e,o),(!0===i||"touch"===i&&Ce.current||"mouse"===i&&!Ce.current)&&K.current.blur()};const Ie=(e,t)=>{if(!O)return;""===oe&&Ae(e,"toggleInput");let n=$;-1===$?""===oe&&"previous"===t&&(n=re.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===re.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===re.length||"previous"===t&&-1===n)return-1;const e=J.querySelector('[data-tag-index="'.concat(n,'"]'));if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),ee(n),_e(n)},Pe=e=>{H.current=!0,ae(""),F&&F(e,"","clear"),Te(e,O?[]:null,"clear")},Le=e=>n=>{if(e.onKeyDown&&e.onKeyDown(n),!n.defaultMuiPrevented&&(-1!==$&&-1===["ArrowLeft","ArrowRight"].indexOf(n.key)&&(ee(-1),_e(-1)),229!==n.which))switch(n.key){case"Home":ge&&k&&(n.preventDefault(),xe({diff:"start",direction:"next",reason:"keyboard",event:n}));break;case"End":ge&&k&&(n.preventDefault(),xe({diff:"end",direction:"previous",reason:"keyboard",event:n}));break;case"PageUp":n.preventDefault(),xe({diff:-5,direction:"previous",reason:"keyboard",event:n}),Ee(n);break;case"PageDown":n.preventDefault(),xe({diff:5,direction:"next",reason:"keyboard",event:n}),Ee(n);break;case"ArrowDown":n.preventDefault(),xe({diff:1,direction:"next",reason:"keyboard",event:n}),Ee(n);break;case"ArrowUp":n.preventDefault(),xe({diff:-1,direction:"previous",reason:"keyboard",event:n}),Ee(n);break;case"ArrowLeft":Ie(n,"previous");break;case"ArrowRight":Ie(n,"next");break;case"Enter":if(-1!==ne.current&&ge){const e=ye[ne.current],r=!!A&&A(e);if(n.preventDefault(),r)return;ke(n,e,"selectOption"),t&&K.current.setSelectionRange(K.current.value.length,K.current.value.length)}else E&&""!==oe&&!1===me&&(O&&n.preventDefault(),ke(n,oe,"createOption","freeSolo"));break;case"Escape":ge?(n.preventDefault(),n.stopPropagation(),Ae(n,"escape")):a&&(""!==oe||O&&re.length>0)&&(n.preventDefault(),n.stopPropagation(),Pe(n));break;case"Backspace":if(O&&!V&&""===oe&&re.length>0){const e=-1===$?re.length-1:$,t=re.slice();t.splice(e,1),Te(n,t,"removeOption",{option:re[e]})}}},Me=e=>{le(!0),B&&!H.current&&Ee(e)},Oe=e=>{null!==Y.current&&Y.current.parentElement.contains(document.activeElement)?K.current.focus():(le(!1),X.current=!0,H.current=!1,r&&-1!==ne.current&&ge?ke(e,ye[ne.current],"blur"):r&&E&&""!==oe?ke(e,oe,"blur","freeSolo"):o&&ce(e,re),Ae(e,"blur"))},Ne=e=>{const t=e.target.value;oe!==t&&(ae(t),fe(!1),F&&F(e,t,"input")),""===t?m||O||Te(e,null,"clear"):Ee(e)},Re=e=>{be({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},De=()=>{Ce.current=!0},Fe=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));ke(e,ye[t],"selectOption"),Ce.current=!1},je=e=>t=>{const n=re.slice();n.splice(e,1),Te(t,n,"removeOption",{option:re[e]})},ze=e=>{he?Ae(e,"toggleInput"):Ee(e)},Be=e=>{e.target.getAttribute("id")!==G&&e.preventDefault()},Ue=()=>{K.current.focus(),Z&&X.current&&K.current.selectionEnd-K.current.selectionStart===0&&K.current.select(),X.current=!1},Ve=e=>{""!==oe&&he||ze(e)};let Ze=E&&oe.length>0;Ze=Ze||(O?re.length>0:null!==re);let qe=ye;if(C){new Map;qe=ye.reduce(((e,t,n)=>{const r=C(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return _&&se&&Oe(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)({"aria-owns":ve?"".concat(G,"-listbox"):null},e,{onKeyDown:Le(e),onMouseDown:Be,onClick:Ue})},getInputLabelProps:()=>({id:"".concat(G,"-label"),htmlFor:G}),getInputProps:()=>({id:G,value:oe,onBlur:Oe,onFocus:Me,onChange:Ne,onMouseDown:Ve,"aria-activedescendant":ge?"":null,"aria-autocomplete":t?"both":"list","aria-controls":ve?"".concat(G,"-listbox"):void 0,"aria-expanded":ve,autoComplete:"off",ref:K,autoCapitalize:"none",spellCheck:"false",role:"combobox"}),getClearProps:()=>({tabIndex:-1,onClick:Pe}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:ze}),getTagProps:e=>{let{index:t}=e;return(0,c.Z)({key:t,"data-tag-index":t,tabIndex:-1},!V&&{onDelete:je(t)})},getListboxProps:()=>({role:"listbox",id:"".concat(G,"-listbox"),"aria-labelledby":"".concat(G,"-label"),ref:Se,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;const r=(O?re:[re]).some((e=>null!=e&&M(n,e))),i=!!A&&A(n);return{key:W(n),tabIndex:-1,role:"option",id:"".concat(G,"-option-").concat(t),onMouseOver:Re,onClick:Fe,onTouchStart:De,"data-option-index":t,"aria-disabled":i,"aria-selected":r}},id:G,inputValue:oe,value:re,dirty:Ze,popupOpen:ge,focused:se||-1!==$,anchorEl:J,setAnchorEl:Q,focusedTag:$,groupedOptions:qe}}var b=n(3366),x=n(1921),w=n(3961);function S(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=(0,w.Z)({badgeContent:t,max:r});let a=n;!1!==n||0!==t||i||(a=!0);const{badgeContent:s,max:l=r}=a?o:e;return{badgeContent:s,invisible:a,max:l,displayValue:s&&Number(s)>l?"".concat(l,"+"):s}}var E=n(7430),A=n(2298);function T(e){return(0,A.Z)("MuiBadge",e)}const C=(0,E.Z)("MuiBadge",["root","badge","invisible"]);var k=n(6417);const I=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],P=u.forwardRef((function(e,t){const{component:n,children:r,max:i=99,slotProps:o={},slots:a={},showZero:s=!1}=e,u=(0,b.Z)(e,I),{badgeContent:h,max:d,displayValue:p,invisible:f}=S((0,c.Z)({},e,{max:i})),m=(0,c.Z)({},e,{badgeContent:h,invisible:f,max:d,showZero:s}),g=(e=>{const{invisible:t}=e,n={root:["root"],badge:["badge",t&&"invisible"]};return(0,x.Z)(n,T,void 0)})(m),y=n||a.root||"span",v=(0,l.Z)({elementType:y,externalSlotProps:o.root,externalForwardedProps:u,additionalProps:{ref:t},ownerState:m,className:g.root}),_=a.badge||"span",w=(0,l.Z)({elementType:_,externalSlotProps:o.badge,ownerState:m,className:g.badge});return(0,k.jsxs)(y,(0,c.Z)({},v,{children:[r,(0,k.jsx)(_,(0,c.Z)({},w,{children:p}))]}))}));function L(e){return(0,A.Z)("MuiButton",e)}const M=(0,E.Z)("MuiButton",["root","active","disabled","focusVisible"]);var O=n(5669),N=n(7472);function R(e){const{disabled:t=!1,focusableWhenDisabled:n,href:r,ref:i,tabIndex:a,to:s,type:l}=e,h=u.useRef(),[d,p]=u.useState(!1),{isFocusVisibleRef:f,onFocus:m,onBlur:g,ref:y}=(0,O.Z)(),[v,_]=u.useState(!1);t&&!n&&v&&_(!1),u.useEffect((()=>{f.current=v}),[v,f]);const[b,x]=u.useState(""),w=e=>t=>{var n;v&&t.preventDefault(),null==(n=e.onMouseLeave)||n.call(e,t)},S=e=>t=>{var n;g(t),!1===f.current&&_(!1),null==(n=e.onBlur)||n.call(e,t)},E=e=>t=>{var n,r;(h.current||(h.current=t.currentTarget),m(t),!0===f.current)&&(_(!0),null==(r=e.onFocusVisible)||r.call(e,t));null==(n=e.onFocus)||n.call(e,t)},A=()=>{const e=h.current;return"BUTTON"===b||"INPUT"===b&&["button","submit","reset"].includes(null==e?void 0:e.type)||"A"===b&&(null==e?void 0:e.href)},T=e=>n=>{var r;t||(null==(r=e.onClick)||r.call(e,n))},C=e=>n=>{var r;n.target!==n.currentTarget||t||p(!0),null==(r=e.onMouseDown)||r.call(e,n)},k=e=>t=>{var n;t.target===t.currentTarget&&p(!1),null==(n=e.onMouseUp)||n.call(e,t)},I=e=>n=>{var r,i;(null==(r=e.onKeyDown)||r.call(e,n),n.defaultPrevented)||(n.target!==n.currentTarget||A()||" "!==n.key||n.preventDefault(),n.target!==n.currentTarget||" "!==n.key||t||p(!0),n.target!==n.currentTarget||A()||"Enter"!==n.key||t||(null==(i=e.onClick)||i.call(e,n),n.preventDefault()))},P=e=>n=>{var r,i;(n.target===n.currentTarget&&p(!1),null==(r=e.onKeyUp)||r.call(e,n),n.target!==n.currentTarget||A()||t||" "!==n.key||n.defaultPrevented)||(null==(i=e.onClick)||i.call(e,n))},L=u.useCallback((e=>{var t;x(null!=(t=null==e?void 0:e.tagName)?t:"")}),[]),M=(0,N.Z)(L,i,y,h),R={};"BUTTON"===b?(R.type=null!=l?l:"button",n?R["aria-disabled"]=t:R.disabled=t):""!==b&&(r||s||(R.role="button",R.tabIndex=null!=a?a:0),t&&(R["aria-disabled"]=t,R.tabIndex=n?null!=a?a:0:-1));return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.Z)(e),r=(0,c.Z)({},n,t);return delete r.onFocusVisible,(0,c.Z)({type:l},r,R,{onBlur:S(r),onClick:T(r),onFocus:E(r),onKeyDown:I(r),onKeyUp:P(r),onMouseDown:C(r),onMouseLeave:w(r),onMouseUp:k(r),ref:M})},focusVisible:v,setFocusVisible:_,disabled:t,active:d}}const D=["action","children","component","disabled","focusableWhenDisabled","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseLeave","slotProps","slots"],F=u.forwardRef((function(e,t){var n;const{action:r,children:i,component:o,focusableWhenDisabled:a=!1,slotProps:s={},slots:h={}}=e,d=(0,b.Z)(e,D),p=u.useRef(),{active:f,focusVisible:m,setFocusVisible:g,getRootProps:y}=R((0,c.Z)({},e,{focusableWhenDisabled:a}));u.useImperativeHandle(r,(()=>({focusVisible:()=>{g(!0),p.current.focus()}})),[g]);const v=(0,c.Z)({},e,{active:f,focusableWhenDisabled:a,focusVisible:m}),_=(e=>{const{active:t,disabled:n,focusVisible:r}=e,i={root:["root",n&&"disabled",r&&"focusVisible",t&&"active"]};return(0,x.Z)(i,L,{})})(v),w=d.href||d.to?"a":"button",S=null!=(n=null!=o?o:h.root)?n:w,E=(0,l.Z)({elementType:S,getSlotProps:y,externalForwardedProps:d,externalSlotProps:s.root,additionalProps:{ref:t},ownerState:v,className:_.root});return(0,k.jsx)(S,(0,c.Z)({},E,{children:i}))}));var j=n(9081);function z(e){return e.substring(2).toLowerCase()}const B=function(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,a=u.useRef(!1),s=u.useRef(null),l=u.useRef(!1),c=u.useRef(!1);u.useEffect((()=>(setTimeout((()=>{l.current=!0}),0),()=>{l.current=!1})),[]);const h=(0,N.Z)(t.ref,s),d=(0,p.Z)((e=>{const t=c.current;c.current=!1;const r=(0,j.Z)(s.current);if(!l.current||!s.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(a.current)return void(a.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(s.current)>-1:!r.documentElement.contains(e.target)||s.current.contains(e.target),o||!n&&t||i(e)})),f=e=>n=>{c.current=!0;const r=t.props[e];r&&r(n)},m={ref:h};return!1!==o&&(m[o]=f(o)),u.useEffect((()=>{if(!1!==o){const e=z(o),t=(0,j.Z)(s.current),n=()=>{a.current=!0};return t.addEventListener(e,d),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,d),t.removeEventListener("touchmove",n)}}}),[d,o]),!1!==r&&(m[r]=f(r)),u.useEffect((()=>{if(!1!==r){const e=z(r),t=(0,j.Z)(s.current);return t.addEventListener(e,d),()=>{t.removeEventListener(e,d)}}}),[d,r]),(0,k.jsx)(u.Fragment,{children:u.cloneElement(t,m)})};var U=n(2071);const V=u.createContext(void 0);function Z(e){return(0,A.Z)("MuiFormControl",e)}const q=(0,E.Z)("MuiFormControl",["root","disabled","error","filled","focused","required"]),G=["defaultValue","children","component","disabled","error","onChange","required","slotProps","slots","value"];const W=u.forwardRef((function(e,t){var n;const{defaultValue:r,children:i,component:o,disabled:a=!1,error:s=!1,onChange:h,required:p=!1,slotProps:f={},slots:m={},value:g}=e,y=(0,b.Z)(e,G),[v,_]=(0,d.Z)({controlled:g,default:r,name:"FormControl",state:"value"}),w=function(e){return null!=e&&!(Array.isArray(e)&&0===e.length)&&""!==e}(v),[S,E]=u.useState(!1);a&&S&&E(!1);const A=(0,c.Z)({},e,{disabled:a,error:s,filled:w,focused:S,required:p}),T=u.useMemo((()=>({disabled:a,error:s,filled:w,focused:S,onBlur:()=>{E(!1)},onChange:e=>{_(e.target.value),null==h||h(e)},onFocus:()=>{E(!0)},required:p,value:null!=v?v:""})),[a,s,w,S,h,p,_,v]),C=function(e){const{disabled:t,error:n,filled:r,focused:i,required:o}=e,a={root:["root",t&&"disabled",i&&"focused",n&&"error",r&&"filled",o&&"required"]};return(0,x.Z)(a,Z,{})}(A),I=null!=(n=null!=o?o:m.root)?n:"div",P=(0,l.Z)({elementType:I,externalSlotProps:f.root,externalForwardedProps:y,additionalProps:{ref:t,children:"function"===typeof i?i(T):i},ownerState:A,className:C.root});return(0,k.jsx)(V.Provider,{value:T,children:(0,k.jsx)(I,(0,c.Z)({},P))})}));function H(){return u.useContext(V)}function X(e){return(0,A.Z)("MuiInput",e)}const K=(0,E.Z)("MuiInput",["root","formControl","focused","disabled","error","multiline","input","inputMultiline","inputTypeSearch","adornedStart","adornedEnd"]);var Y=n(7219);function J(e){const{defaultValue:t,disabled:n=!1,error:r=!1,onBlur:i,onChange:a,onFocus:s,required:l=!1,value:h}=e,d=H();let p,f,m,g,y;var v,_,b;d?(p=void 0,f=null!=(v=d.disabled)&&v,m=null!=(_=d.error)&&_,g=null!=(b=d.required)&&b,y=d.value):(p=t,f=n,m=r,g=l,y=h);const{current:x}=u.useRef(null!=y),w=u.useCallback((e=>{0}),[]),S=u.useRef(null),E=(0,N.Z)(S,w),[A,T]=u.useState(!1);u.useEffect((()=>{!d&&f&&A&&(T(!1),null==i||i())}),[d,f,A,i]);const C=e=>t=>{var n,r;null!=d&&d.disabled?t.stopPropagation():(null==(n=e.onFocus)||n.call(e,t),d&&d.onFocus?null==d||null==(r=d.onFocus)||r.call(d):T(!0))},k=e=>t=>{var n;null==(n=e.onBlur)||n.call(e,t),d&&d.onBlur?d.onBlur():T(!1)},I=e=>function(t){var n,r;if(!x){if(null==(t.target||S.current))throw new Error((0,Y.Z)(17))}null==d||null==(n=d.onChange)||n.call(d,t);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];null==(r=e.onChange)||r.call(e,t,...o)},P=e=>t=>{var n;S.current&&t.currentTarget===t.target&&S.current.focus(),null==(n=e.onClick)||n.call(e,t)};return{disabled:f,error:m,focused:A,formControlContext:d,getInputProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={onBlur:i,onChange:a,onFocus:s},n=(0,c.Z)({},t,(0,o.Z)(e)),r=(0,c.Z)({},e,n,{onBlur:k(n),onChange:I(n),onFocus:C(n)});return(0,c.Z)({},r,{"aria-invalid":m||void 0,defaultValue:p,ref:E,value:y,required:g,disabled:f})},getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.Z)(e,["onBlur","onChange","onFocus"]),r=(0,c.Z)({},n,(0,o.Z)(t));return(0,c.Z)({},t,r,{onClick:P(r)})},required:g,value:y}}const Q=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","component","defaultValue","disabled","endAdornment","error","id","multiline","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","startAdornment","value","type","rows","slotProps","slots","minRows","maxRows"],$=u.forwardRef((function(e,t){var n,r,i;const{"aria-describedby":o,"aria-label":s,"aria-labelledby":u,autoComplete:h,autoFocus:d,className:p,component:f,defaultValue:m,disabled:g,endAdornment:y,error:v,id:_,multiline:x=!1,name:w,onClick:S,onChange:E,onKeyDown:A,onKeyUp:T,onFocus:C,onBlur:I,placeholder:P,readOnly:L,required:M,startAdornment:O,value:N,type:R,rows:D,slotProps:F={},slots:j={},minRows:z,maxRows:B}=e,U=(0,b.Z)(e,Q),{getRootProps:V,getInputProps:Z,focused:q,formControlContext:G,error:W,disabled:H}=J({disabled:g,defaultValue:m,error:v,onBlur:I,onClick:S,onChange:E,onFocus:C,required:M,value:N}),X=x?void 0:null!=R?R:"text",Y=(0,c.Z)({},e,{disabled:H,error:W,focused:q,formControlContext:G,multiline:x,type:X}),$={[K.disabled]:H,[K.error]:W,[K.focused]:q,[K.formControl]:Boolean(G),[K.multiline]:x,[K.adornedStart]:Boolean(O),[K.adornedEnd]:Boolean(y)},ee={[K.disabled]:H,[K.multiline]:x},te={"aria-describedby":o,"aria-label":s,"aria-labelledby":u,autoComplete:h,autoFocus:d,id:_,onKeyDown:A,onKeyUp:T,name:w,placeholder:P,readOnly:L,type:X},ne=null!=(n=null!=f?f:j.root)?n:"div",re=(0,l.Z)({elementType:ne,getSlotProps:V,externalSlotProps:F.root,externalForwardedProps:U,additionalProps:{ref:t},ownerState:Y,className:[K.root,$,p]}),ie=x?null!=(r=j.textarea)?r:"textarea":null!=(i=j.input)?i:"input",oe=(0,l.Z)({elementType:ie,getSlotProps:e=>Z((0,c.Z)({},e,te)),externalSlotProps:F.input,additionalProps:(0,c.Z)({rows:x?D:void 0},x&&!(0,a.Z)(ie)&&{minRows:D||z,maxRows:D||B}),ownerState:Y,className:[K.input,ee]});return(0,k.jsxs)(ne,(0,c.Z)({},re,{children:[O,(0,k.jsx)(ie,(0,c.Z)({},oe)),y]}))}));var ee;!function(e){e.blur="blur",e.focus="focus",e.keyDown="keyDown",e.optionClick="optionClick",e.optionHover="optionHover",e.optionsChange="optionsChange",e.setValue="setValue",e.setHighlight="setHighlight",e.textNavigation="textNagivation"}(ee||(ee={}));function te(e,t,n,r,i,o,a,s){var l;const c=e.length-1;let u;const h=null==t?-1:e.findIndex((e=>s(e,t)));if("reset"===n)return null;if("start"===n)u=0;else if("end"===n)u=c;else{const e=h+n;u=e<0?!a&&-1!==h||Math.abs(n)>1?0:c:e>c?!a||Math.abs(n)>1?c:0:e}const d=function(e,t,n,r,i,o){if(0===n.length||n.every(((e,t)=>i(e,t))))return-1;let a=e;for(;;){if(!o&&"next"===t&&a===n.length||!o&&"previous"===t&&-1===a)return-1;if(r||!i(n[a],a))return a;a+="next"===t?1:-1,o&&(a=(a+n.length)%n.length)}}(u,r,e,i,o,a);return null!=(l=e[d])?l:null}function ne(e,t,n){const{multiple:r,optionComparer:i=((e,t)=>e===t),isOptionDisabled:o=(()=>!1)}=n,{selectedValue:a}=t,s=n.options.findIndex((t=>n.optionComparer(e,t)));if(o(e,s))return t;if(r){var l,c;return{selectedValue:(null!=(l=a)?l:[]).some((t=>i(t,e)))?a.filter((t=>!i(t,e))):[...null!=(c=a)?c:[],e],highlightedValue:e}}return null!=a&&i(e,a)?t:{selectedValue:e,highlightedValue:e}}const re=(e,t,n)=>{var r;const i=null==(r=n(e))?void 0:r.trim().toLowerCase();return!(!i||0===i.length)&&0===i.indexOf(t)};function ie(e,t){const{type:n}=t;switch(n){case ee.keyDown:return function(e,t,n){const{options:r,isOptionDisabled:i,disableListWrap:o,disabledItemsFocusable:a,optionComparer:s}=n,l=(e,n,o)=>te(r,t.highlightedValue,e,n,null!=a&&a,null!=i?i:()=>!1,o,s);switch(e.key){case"Home":return(0,c.Z)({},t,{highlightedValue:l("start","next",!1)});case"End":return(0,c.Z)({},t,{highlightedValue:l("end","previous",!1)});case"PageUp":return(0,c.Z)({},t,{highlightedValue:l(-5,"previous",!1)});case"PageDown":return(0,c.Z)({},t,{highlightedValue:l(5,"next",!1)});case"ArrowUp":return(0,c.Z)({},t,{highlightedValue:l(-1,"previous",!(null!=o&&o))});case"ArrowDown":return(0,c.Z)({},t,{highlightedValue:l(1,"next",!(null!=o&&o))});case"Enter":case" ":return null===t.highlightedValue?t:ne(t.highlightedValue,t,n)}return t}(t.event,e,t.props);case ee.optionClick:return ne(t.option,e,t.props);case ee.blur:return function(e){return(0,c.Z)({},e,{highlightedValue:null})}(e);case ee.setValue:return(0,c.Z)({},e,{selectedValue:t.value});case ee.setHighlight:return(0,c.Z)({},e,{highlightedValue:t.highlight});case ee.textNavigation:return function(e,t,n){const{options:r,isOptionDisabled:i,disableListWrap:o,disabledItemsFocusable:a,optionComparer:s,optionStringifier:l}=n,u=e=>te(r,e,1,"next",null!=a&&a,null!=i?i:()=>!1,!(null!=o&&o),s),h=t.length>1;let d=h?e.highlightedValue:u(e.highlightedValue);for(let p=0;p<r.length;p+=1){if(!d||!h&&e.highlightedValue===d)return e;if(re(d,t,l)&&(!i(d,r.indexOf(d))||a))return(0,c.Z)({},e,{highlightedValue:d});d=u(d)}return e}(e,t.searchString,t.props);case ee.optionsChange:return function(e,t,n,r){var i,o;const{multiple:a,optionComparer:s}=r,l=null==n.highlightedValue?null:null!=(i=e.find((e=>s(e,n.highlightedValue))))?i:null;var c;return a?{highlightedValue:l,selectedValue:(null!=(c=n.selectedValue)?c:[]).filter((t=>e.some((e=>s(e,t)))))}:{highlightedValue:l,selectedValue:null!=(o=e.find((e=>s(e,n.selectedValue))))?o:null}}(t.options,t.previousOptions,e,t.props);default:return e}}function oe(e,t){return void 0!==t.value?(0,c.Z)({},e,{selectedValue:t.value}):e}function ae(e,t,n){return e===t||null!==e&&null!==t&&n(e,t)}function se(e,t,n){var r;const{value:o,defaultValue:a}=n,s=u.useRef(n);s.current=n;const l=u.useRef(null),c={highlightedValue:null,selectedValue:null!=(r=void 0===o?a:o)?r:n.multiple?[]:null},h=u.useCallback(((n,r)=>(l.current=r,t?t(oe(n,s.current),r):e(oe(n,s.current),r))),[t,e,s]),[d,p]=u.useReducer(h,c),f=u.useRef(c);return u.useEffect((()=>{f.current=d}),[f,d]),function(e,t,n,r){u.useEffect((()=>{if(!n.current||null===r.current)return;const o=oe(t,n.current),{multiple:a,optionComparer:s}=n.current;if(a){var l;const t=null!=(l=null==o?void 0:o.selectedValue)?l:[],a=e.selectedValue,c=n.current.onChange;i(a,t,s)||null==c||c(r.current.event,a)}else{const t=null==o?void 0:o.selectedValue,i=e.selectedValue,a=n.current.onChange;ae(i,t,s)||null==a||a(r.current.event,i)}var c,u;ae(t.highlightedValue,e.highlightedValue,n.current.optionComparer)||null==(c=n.current)||null==(u=c.onHighlightChange)||u.call(c,r.current.event,e.highlightedValue),r.current=null}),[e.selectedValue,e.highlightedValue,t,n,r])}(d,f.current,s,l),[oe(d,s.current),p]}const le=(e,t)=>e===t,ce=()=>!1,ue=e=>"string"===typeof e?e:String(e);function he(e){var t,n;const{disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:a="activeDescendant",id:s,isOptionDisabled:l=ce,listboxRef:d,multiple:p=!1,optionComparer:f=le,optionStringifier:m=ue,options:g,stateReducer:y}=e,v=(0,h.Z)(s);const _=null!=(t=e.optionIdGenerator)?t:function(e,t){return"".concat(v,"-option-").concat(t)},b=(0,c.Z)({},e,{disabledItemsFocusable:r,disableListWrap:o,focusManagement:a,isOptionDisabled:l,multiple:p,optionComparer:f,optionStringifier:m}),x=u.useRef(null),w=(0,N.Z)(d,x),S=u.useRef({searchString:"",lastTime:null}),[{highlightedValue:E,selectedValue:A},T]=se(ie,y,b),C=u.useMemo((()=>null==E?-1:g.findIndex((e=>f(e,E)))),[E,g,f]),k=u.useRef([]);u.useEffect((()=>{i(k.current,g,f)||(T({type:ee.optionsChange,event:null,options:g,previousOptions:k.current,props:b}),k.current=g)}),[g,f,T]);const I=u.useCallback((e=>{T({type:ee.setValue,event:null,value:e})}),[T]),P=u.useCallback((e=>{T({type:ee.setHighlight,event:null,highlight:e})}),[T]),L=(e,t)=>n=>{var r;null==(r=t.onClick)||r.call(t,n),n.defaultPrevented||(n.preventDefault(),T({type:ee.optionClick,option:e,event:n,props:b}))},M=(e,t)=>n=>{var r;null==(r=t.onMouseOver)||r.call(t,n),n.defaultPrevented||T({type:ee.optionHover,option:e,event:n,props:b})},O=e=>t=>{var n;if(null==(n=e.onKeyDown)||n.call(e,t),t.defaultPrevented)return;const r=["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"];if("activeDescendant"===a&&r.push(" ","Enter"),r.includes(t.key)&&t.preventDefault(),T({type:ee.keyDown,event:t,props:b}),1===t.key.length&&" "!==t.key){const e=S.current,n=t.key.toLowerCase(),r=performance.now();e.searchString.length>0&&e.lastTime&&r-e.lastTime>500?e.searchString=n:1===e.searchString.length&&n===e.searchString||(e.searchString+=n),e.lastTime=r,T({type:ee.textNavigation,event:t,searchString:e.searchString,props:b})}},R=e=>t=>{var n,r;null==(n=e.onBlur)||n.call(e,t),t.defaultPrevented||null!=(r=x.current)&&r.contains(document.activeElement)||T({type:ee.blur,event:t,props:b})},D=e=>{let t;const n=g.findIndex((t=>f(t,e)));var r;p?t=(null!=(r=A)?r:[]).some((t=>null!=t&&f(e,t))):t=f(e,A);return{selected:t,disabled:l(e,n),highlighted:C===n}},F=e=>{if("activeDescendant"!==a)return e.highlighted?e.disabled&&!r?-1:0:-1};return u.useDebugValue({highlightedOption:g[C],selectedOption:A}),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)({},e,{"aria-activedescendant":"activeDescendant"===a&&null!=E?_(E,C):void 0,id:v,onBlur:R(e),onKeyDown:O(e),role:"listbox",tabIndex:"DOM"===a?-1:0,ref:w})},getOptionProps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=D(e),r=g.findIndex((t=>f(t,e)));return(0,c.Z)({},t,{"aria-disabled":n.disabled||void 0,"aria-selected":n.selected,id:_(e,r),onClick:L(e,t),onPointerOver:M(e,t),role:"option",tabIndex:F(n)})},getOptionState:D,highlightedOption:null!=(n=g[C])?n:null,selectedOption:A,setSelectedValue:I,setHighlightedValue:P}}const de=u.createContext(null);de.displayName="MenuUnstyledContext";const pe=de;function fe(e){return(0,A.Z)("MuiMenu",e)}const me=(0,E.Z)("MuiMenu",["root","listbox","expanded"]);function ge(e,t){if(t.type===ee.blur||t.type===ee.optionHover||t.type===ee.setValue)return e;const n=ie(e,t);return t.type!==ee.setHighlight&&null===n.highlightedValue&&t.props.options.length>0?(0,c.Z)({},n,{highlightedValue:t.props.options[0]}):n}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{listboxRef:t,open:n=!1,onClose:r,listboxId:i}=e,[o,a]=u.useState({}),s=u.useRef(null),l=(0,N.Z)(s,t),h=u.useCallback(((e,t)=>{a((n=>{const r=(0,c.Z)({},n);return r[e]=t,r}))}),[]),d=u.useCallback((e=>{a((t=>{const n=(0,c.Z)({},t);return delete n[e],n}))}),[]),{getOptionState:p,getOptionProps:f,getRootProps:m,highlightedOption:g,setHighlightedValue:y}=he({options:Object.keys(o),optionStringifier:e=>{var t;return o[e].label||(null==(t=o[e].ref.current)?void 0:t.innerText)},isOptionDisabled:e=>{var t;return(null==o||null==(t=o[e])?void 0:t.disabled)||!1},listboxRef:l,focusManagement:"DOM",id:i,stateReducer:ge,disabledItemsFocusable:!0}),v=u.useCallback((()=>{Object.keys(o).length>0&&y(o[Object.keys(o)[0]].id)}),[o,y]),_=u.useCallback((()=>{Object.keys(o).length>0&&y(o[Object.keys(o)[Object.keys(o).length-1]].id)}),[o,y]);u.useEffect((()=>{n||v()}),[n,v]);const b=e=>t=>{var i;null==(i=e.onKeyDown)||i.call(e,t),t.defaultPrevented||"Escape"===t.key&&n&&(null==r||r())},x=e=>t=>{var n,i;null==(n=e.onBlur)||n.call(e,t),null!=(i=s.current)&&i.contains(t.relatedTarget)||null==r||r()};u.useEffect((()=>{var e,t,n;null!=(e=s.current)&&e.contains(document.activeElement)&&null!==g&&(null==o||null==(t=o[g])||null==(n=t.ref.current)||n.focus())}),[g,o]);const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=m((0,c.Z)({},e,{onBlur:x(e),onKeyDown:b(e)}));return(0,c.Z)({},e,t,{role:"menu"})},S=e=>{const{disabled:t,highlighted:n}=p(e);return{disabled:t,highlighted:n}};return u.useDebugValue({menuItems:o,highlightedOption:g}),{registerItem:h,unregisterItem:d,menuItems:o,getListboxProps:w,getItemState:S,getItemProps:f,highlightedOption:g,highlightFirstItem:v,highlightLastItem:_}}var ve=n(2678);function _e(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function be(e){return e instanceof _e(e).Element||e instanceof Element}function xe(e){return e instanceof _e(e).HTMLElement||e instanceof HTMLElement}function we(e){return"undefined"!==typeof ShadowRoot&&(e instanceof _e(e).ShadowRoot||e instanceof ShadowRoot)}var Se=Math.max,Ee=Math.min,Ae=Math.round;function Te(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Ce(){return!/^((?!chrome|android).)*safari/i.test(Te())}function ke(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&xe(e)&&(i=e.offsetWidth>0&&Ae(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Ae(r.height)/e.offsetHeight||1);var a=(be(e)?_e(e):window).visualViewport,s=!Ce()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,c=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,h=r.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function Ie(e){var t=_e(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Pe(e){return e?(e.nodeName||"").toLowerCase():null}function Le(e){return((be(e)?e.ownerDocument:e.document)||window.document).documentElement}function Me(e){return ke(Le(e)).left+Ie(e).scrollLeft}function Oe(e){return _e(e).getComputedStyle(e)}function Ne(e){var t=Oe(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Re(e,t,n){void 0===n&&(n=!1);var r=xe(t),i=xe(t)&&function(e){var t=e.getBoundingClientRect(),n=Ae(t.width)/e.offsetWidth||1,r=Ae(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=Le(t),a=ke(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==Pe(t)||Ne(o))&&(s=function(e){return e!==_e(e)&&xe(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Ie(e);var t}(t)),xe(t)?((l=ke(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Me(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function De(e){var t=ke(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Fe(e){return"html"===Pe(e)?e:e.assignedSlot||e.parentNode||(we(e)?e.host:null)||Le(e)}function je(e){return["html","body","#document"].indexOf(Pe(e))>=0?e.ownerDocument.body:xe(e)&&Ne(e)?e:je(Fe(e))}function ze(e,t){var n;void 0===t&&(t=[]);var r=je(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=_e(r),a=i?[o].concat(o.visualViewport||[],Ne(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(ze(Fe(a)))}function Be(e){return["table","td","th"].indexOf(Pe(e))>=0}function Ue(e){return xe(e)&&"fixed"!==Oe(e).position?e.offsetParent:null}function Ve(e){for(var t=_e(e),n=Ue(e);n&&Be(n)&&"static"===Oe(n).position;)n=Ue(n);return n&&("html"===Pe(n)||"body"===Pe(n)&&"static"===Oe(n).position)?t:n||function(e){var t=/firefox/i.test(Te());if(/Trident/i.test(Te())&&xe(e)&&"fixed"===Oe(e).position)return null;var n=Fe(e);for(we(n)&&(n=n.host);xe(n)&&["html","body"].indexOf(Pe(n))<0;){var r=Oe(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Ze="top",qe="bottom",Ge="right",We="left",He="auto",Xe=[Ze,qe,Ge,We],Ke="start",Ye="end",Je="viewport",Qe="popper",$e=Xe.reduce((function(e,t){return e.concat([t+"-"+Ke,t+"-"+Ye])}),[]),et=[].concat(Xe,[He]).reduce((function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+Ye])}),[]),tt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function nt(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function rt(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var it={placement:"bottom",modifiers:[],strategy:"absolute"};function ot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function at(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?it:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},it,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:be(e)?ze(e):e.contextElement?ze(e.contextElement):[],popper:ze(t)};var u=function(e){var t=nt(e);return tt.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(ot(t,n)){i.rects={reference:Re(t,Ve(n),"fixed"===i.options.strategy),popper:De(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof a&&(i=a({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:rt((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!ot(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var st={passive:!0};function lt(e){return e.split("-")[0]}function ct(e){return e.split("-")[1]}function ut(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ht(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?lt(i):null,a=i?ct(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case Ze:t={x:s,y:n.y-r.height};break;case qe:t={x:s,y:n.y+n.height};break;case Ge:t={x:n.x+n.width,y:l};break;case We:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?ut(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ke:t[c]=t[c]-(n[u]/2-r[u]/2);break;case Ye:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var dt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pt(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=a.x,p=void 0===d?0:d,f=a.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),_=We,b=Ze,x=window;if(c){var w=Ve(n),S="clientHeight",E="clientWidth";if(w===_e(n)&&"static"!==Oe(w=Le(n)).position&&"absolute"===s&&(S="scrollHeight",E="scrollWidth"),i===Ze||(i===We||i===Ge)&&o===Ye)b=qe,m-=(h&&w===x&&x.visualViewport?x.visualViewport.height:w[S])-r.height,m*=l?1:-1;if(i===We||(i===Ze||i===qe)&&o===Ye)_=Ge,p-=(h&&w===x&&x.visualViewport?x.visualViewport.width:w[E])-r.width,p*=l?1:-1}var A,T=Object.assign({position:s},c&&dt),C=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Ae(n*i)/i||0,y:Ae(r*i)/i||0}}({x:p,y:m},_e(n)):{x:p,y:m};return p=C.x,m=C.y,l?Object.assign({},T,((A={})[b]=v?"0":"",A[_]=y?"0":"",A.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",A)):Object.assign({},T,((t={})[b]=v?m+"px":"",t[_]=y?p+"px":"",t.transform="",t))}const ft={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=et.reduce((function(e,n){return e[n]=function(e,t,n){var r=lt(e),i=[We,Ze].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[We,Ge].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var mt={left:"right",right:"left",bottom:"top",top:"bottom"};function gt(e){return e.replace(/left|right|bottom|top/g,(function(e){return mt[e]}))}var yt={start:"end",end:"start"};function vt(e){return e.replace(/start|end/g,(function(e){return yt[e]}))}function _t(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&we(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function bt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function xt(e,t,n){return t===Je?bt(function(e,t){var n=_e(e),r=Le(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=Ce();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+Me(e),y:l}}(e,n)):be(t)?function(e,t){var n=ke(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):bt(function(e){var t,n=Le(e),r=Ie(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Se(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Se(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Me(e),l=-r.scrollTop;return"rtl"===Oe(i||n).direction&&(s+=Se(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Le(e)))}function wt(e,t,n,r){var i="clippingParents"===t?function(e){var t=ze(Fe(e)),n=["absolute","fixed"].indexOf(Oe(e).position)>=0&&xe(e)?Ve(e):e;return be(n)?t.filter((function(e){return be(e)&&_t(e,n)&&"body"!==Pe(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(t,n){var i=xt(e,n,r);return t.top=Se(i.top,t.top),t.right=Ee(i.right,t.right),t.bottom=Ee(i.bottom,t.bottom),t.left=Se(i.left,t.left),t}),xt(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function St(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Et(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function At(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?Je:c,h=n.elementContext,d=void 0===h?Qe:h,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=St("number"!==typeof g?g:Et(g,Xe)),v=d===Qe?"reference":Qe,_=e.rects.popper,b=e.elements[f?v:d],x=wt(be(b)?b:b.contextElement||Le(e.elements.popper),l,u,a),w=ke(e.elements.reference),S=ht({reference:w,element:_,strategy:"absolute",placement:i}),E=bt(Object.assign({},_,S)),A=d===Qe?E:w,T={top:x.top-A.top+y.top,bottom:A.bottom-x.bottom+y.bottom,left:x.left-A.left+y.left,right:A.right-x.right+y.right},C=e.modifiersData.offset;if(d===Qe&&C){var k=C[i];Object.keys(T).forEach((function(e){var t=[Ge,qe].indexOf(e)>=0?1:-1,n=[Ze,qe].indexOf(e)>=0?"y":"x";T[e]+=k[n]*t}))}return T}function Tt(e,t,n){return Se(e,Ee(t,n))}const Ct={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=At(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=lt(t.placement),v=ct(t.placement),_=!v,b=ut(y),x="x"===b?"y":"x",w=t.modifiersData.popperOffsets,S=t.rects.reference,E=t.rects.popper,A="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,k={x:0,y:0};if(w){if(o){var I,P="y"===b?Ze:We,L="y"===b?qe:Ge,M="y"===b?"height":"width",O=w[b],N=O+g[P],R=O-g[L],D=p?-E[M]/2:0,F=v===Ke?S[M]:E[M],j=v===Ke?-E[M]:-S[M],z=t.elements.arrow,B=p&&z?De(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=U[P],Z=U[L],q=Tt(0,S[M],B[M]),G=_?S[M]/2-D-q-V-T.mainAxis:F-q-V-T.mainAxis,W=_?-S[M]/2+D+q+Z+T.mainAxis:j+q+Z+T.mainAxis,H=t.elements.arrow&&Ve(t.elements.arrow),X=H?"y"===b?H.clientTop||0:H.clientLeft||0:0,K=null!=(I=null==C?void 0:C[b])?I:0,Y=O+W-K,J=Tt(p?Ee(N,O+G-K-X):N,O,p?Se(R,Y):R);w[b]=J,k[b]=J-O}if(s){var Q,$="x"===b?Ze:We,ee="x"===b?qe:Ge,te=w[x],ne="y"===x?"height":"width",re=te+g[$],ie=te-g[ee],oe=-1!==[Ze,We].indexOf(y),ae=null!=(Q=null==C?void 0:C[x])?Q:0,se=oe?re:te-S[ne]-E[ne]-ae+T.altAxis,le=oe?te+S[ne]+E[ne]-ae-T.altAxis:ie,ce=p&&oe?function(e,t,n){var r=Tt(e,t,n);return r>n?n:r}(se,te,le):Tt(p?se:re,te,p?le:ie);w[x]=ce,k[x]=ce-te}t.modifiersData[r]=k}},requiresIfExists:["offset"]};const kt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=lt(n.placement),l=ut(s),c=[We,Ge].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return St("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Et(e,Xe))}(i.padding,n),h=De(o),d="y"===l?Ze:We,p="y"===l?qe:Ge,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=Ve(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,_=u[d],b=y-h[c]-u[p],x=y/2-h[c]/2+v,w=Tt(_,x,b),S=l;n.modifiersData[r]=((t={})[S]=w,t.centerOffset=w-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&_t(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function It(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Pt(e){return[Ze,Ge,qe,We].some((function(t){return e[t]>=0}))}var Lt=at({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=_e(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,st)})),s&&l.addEventListener("resize",n.update,st),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,st)})),s&&l.removeEventListener("resize",n.update,st)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ht({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:lt(t.placement),variation:ct(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,pt(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,pt(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];xe(i)&&Pe(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});xe(r)&&Pe(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},ft,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=lt(g),v=l||(y===g||!f?[gt(g)]:function(e){if(lt(e)===He)return[];var t=gt(e);return[vt(e),t,vt(t)]}(g)),_=[g].concat(v).reduce((function(e,n){return e.concat(lt(n)===He?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?et:l,u=ct(r),h=u?s?$e:$e.filter((function(e){return ct(e)===u})):Xe,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var p=d.reduce((function(t,n){return t[n]=At(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[lt(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),b=t.rects.reference,x=t.rects.popper,w=new Map,S=!0,E=_[0],A=0;A<_.length;A++){var T=_[A],C=lt(T),k=ct(T)===Ke,I=[Ze,qe].indexOf(C)>=0,P=I?"width":"height",L=At(t,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),M=I?k?Ge:We:k?qe:Ze;b[P]>x[P]&&(M=gt(M));var O=gt(M),N=[];if(o&&N.push(L[C]<=0),s&&N.push(L[M]<=0,L[O]<=0),N.every((function(e){return e}))){E=T,S=!1;break}w.set(T,N)}if(S)for(var R=function(e){var t=_.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},D=f?3:1;D>0;D--){if("break"===R(D))break}t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},Ct,kt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=At(t,{elementContext:"reference"}),s=At(t,{altBoundary:!0}),l=It(a,r),c=It(s,i,o),u=Pt(l),h=Pt(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),Mt=n(2871);function Ot(e){return(0,A.Z)("MuiPopperUnstyled",e)}(0,E.Z)("MuiPopperUnstyled",["root"]);const Nt=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],Rt=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function Dt(e){return"function"===typeof e?e():e}const Ft={},jt=u.forwardRef((function(e,t){var n;const{anchorEl:r,children:i,component:o,direction:a,disablePortal:s,modifiers:h,open:d,ownerState:p,placement:f,popperOptions:m,popperRef:g,slotProps:y={},slots:v={},TransitionProps:_}=e,w=(0,b.Z)(e,Nt),S=u.useRef(null),E=(0,N.Z)(S,t),A=u.useRef(null),T=(0,N.Z)(A,g),C=u.useRef(T);(0,ve.Z)((()=>{C.current=T}),[T]),u.useImperativeHandle(g,(()=>A.current),[]);const I=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(f,a),[P,L]=u.useState(I);u.useEffect((()=>{A.current&&A.current.forceUpdate()})),(0,ve.Z)((()=>{if(!r||!d)return;Dt(r);let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;L(t.placement)}}];null!=h&&(e=e.concat(h)),m&&null!=m.modifiers&&(e=e.concat(m.modifiers));const t=Lt(Dt(r),S.current,(0,c.Z)({placement:I},m,{modifiers:e}));return C.current(t),()=>{t.destroy(),C.current(null)}}),[r,s,h,d,m,I]);const M={placement:P};null!==_&&(M.TransitionProps=_);const O=(0,x.Z)({root:["root"]},Ot,{}),R=null!=(n=null!=o?o:v.root)?n:"div",D=(0,l.Z)({elementType:R,externalSlotProps:y.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:E},ownerState:(0,c.Z)({},e,p),className:O.root});return(0,k.jsx)(R,(0,c.Z)({},D,{children:"function"===typeof i?i(M):i}))})),zt=u.forwardRef((function(e,t){const{anchorEl:n,children:r,container:i,direction:o="ltr",disablePortal:a=!1,keepMounted:s=!1,modifiers:l,open:h,placement:d="bottom",popperOptions:p=Ft,popperRef:f,style:m,transition:g=!1}=e,y=(0,b.Z)(e,Rt),[v,_]=u.useState(!0);if(!s&&!h&&(!g||v))return null;const x=i||(n?(0,j.Z)(Dt(n)).body:void 0);return(0,k.jsx)(Mt.Z,{disablePortal:a,container:x,children:(0,k.jsx)(jt,(0,c.Z)({anchorEl:n,direction:o,disablePortal:a,modifiers:l,ref:t,open:g?!v:h,placement:d,popperOptions:p,popperRef:f},y,{style:(0,c.Z)({position:"fixed",top:0,left:0,display:h||!s||g&&!v?null:"none"},m),TransitionProps:g?{in:h,onEnter:()=>{_(!1)},onExited:()=>{_(!0)}}:null,children:r}))})})),Bt=["actions","anchorEl","children","component","keepMounted","listboxId","onClose","open","slotProps","slots"];const Ut=u.forwardRef((function(e,t){var n,r;const{actions:i,anchorEl:o,children:a,component:s,keepMounted:h=!1,listboxId:d,onClose:p,open:f=!1,slotProps:m={},slots:g={}}=e,y=(0,b.Z)(e,Bt),{registerItem:v,unregisterItem:_,getListboxProps:w,getItemProps:S,getItemState:E,highlightFirstItem:A,highlightLastItem:T}=ye({open:f,onClose:p,listboxId:d});u.useImperativeHandle(i,(()=>({highlightFirstItem:A,highlightLastItem:T})),[A,T]);const C=(0,c.Z)({},e,{open:f}),I=function(e){const{open:t}=e,n={root:["root",t&&"expanded"],listbox:["listbox",t&&"expanded"]};return(0,x.Z)(n,fe,{})}(C),P=null!=(n=null!=s?s:g.root)?n:zt,L=(0,l.Z)({elementType:P,externalForwardedProps:y,externalSlotProps:m.root,additionalProps:{anchorEl:o,open:f,keepMounted:h,role:void 0,ref:t},className:I.root,ownerState:C}),M=null!=(r=g.listbox)?r:"ul",O=(0,l.Z)({elementType:M,getSlotProps:w,externalSlotProps:m.listbox,ownerState:C,className:I.listbox}),N=u.useMemo((()=>({registerItem:v,unregisterItem:_,getItemState:E,getItemProps:S,open:f})),[S,E,f,v,_]);return(0,k.jsx)(P,(0,c.Z)({},L,{children:(0,k.jsx)(M,(0,c.Z)({},O,{children:(0,k.jsx)(pe.Provider,{value:N,children:a})}))}))}));function Vt(e){return(0,A.Z)("MuiMenuItem",e)}const Zt=(0,E.Z)("MuiMenuItem",["root","disabled","focusVisible"]);function qt(e){var t;const{disabled:n=!1,ref:r,label:i}=e,o=(0,h.Z)(),a=u.useContext(pe),s=u.useRef(null),l=(0,N.Z)(s,r);if(null===a)throw new Error("MenuItemUnstyled must be used within a MenuUnstyled");const{registerItem:d,unregisterItem:p,open:f}=a;u.useEffect((()=>{if(void 0!==o)return d(o,{disabled:n,id:o,ref:s,label:i}),()=>p(o)}),[o,d,p,n,r,i]);const{getRootProps:m,focusVisible:g}=R({disabled:n,focusableWhenDisabled:!0,ref:l}),[y,v]=u.useState(!1),_=u.useCallback((()=>{y&&null!=s.current&&(s.current.focus(),v(!1))}),[y]);u.useEffect((()=>{_()})),u.useDebugValue({id:o,disabled:n,label:i});const b=a.getItemState(null!=o?o:""),{highlighted:x}=null!=b?b:{highlighted:!1};return u.useEffect((()=>{v(x&&f)}),[x,f]),void 0===o?{getRootProps:e=>(0,c.Z)({},e,m(e),{role:"menuitem"}),disabled:!1,focusVisible:g}:{getRootProps:e=>{const t=a.getItemProps(o,e);return(0,c.Z)({},e,m(e),{tabIndex:t.tabIndex,id:t.id,role:"menuitem"})},disabled:null!=(t=null==b?void 0:b.disabled)&&t,focusVisible:g}}const Gt=["children","disabled","component","label","slotProps","slots"];const Wt=u.forwardRef((function(e,t){var n;const{children:r,disabled:i=!1,component:o,label:a,slotProps:s={},slots:u={}}=e,h=(0,b.Z)(e,Gt),{getRootProps:d,disabled:p,focusVisible:f}=qt({disabled:i,ref:t,label:a}),m=(0,c.Z)({},e,{disabled:p,focusVisible:f}),g=function(e){const{disabled:t,focusVisible:n}=e,r={root:["root",t&&"disabled",n&&"focusVisible"]};return(0,x.Z)(r,Vt,{})}(m),y=null!=(n=null!=o?o:u.root)?n:"li",v=(0,l.Z)({elementType:y,getSlotProps:d,externalSlotProps:s.root,externalForwardedProps:h,className:g.root,ownerState:m});return(0,k.jsx)(y,(0,c.Z)({},v,{children:r}))}));var Ht=n(6280),Xt=n(5676),Kt=n(6551);function Yt(e){return!!e.options}function Jt(e,t){return e.label===t.label&&e.value===t.value&&e.disabled===t.disabled}function Qt(e){if(null==e)return[];const t=[];return u.Children.forEach(e,(e=>{var n,r,i;const o=null==e||null==(n=e.props)?void 0:n.children;if(void 0===(null==e||null==(r=e.props)?void 0:r.value)){if(null!=o){var a;const n=e,r={options:Qt(o),label:n.props.label,disabled:null!=(a=n.props.disabled)&&a};t.push(r)}return}const s=e,l={value:s.props.value,label:s.props.label||s.props.children,disabled:null!=(i=s.props.disabled)&&i};t.push(l)})),null!=t?t:[]}function $t(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return e.forEach((e=>{Yt(e)?n=n.concat($t(e.options,e.disabled)):n.push((0,c.Z)({},e,{disabled:t||e.disabled}))})),n}const en=e=>{const{label:t,value:n}=e;return"string"===typeof t?t:"string"===typeof n?n:String(e)};const tn=function(e){const{buttonRef:t,defaultValue:n,disabled:r=!1,listboxId:i,listboxRef:o,multiple:a=!1,onChange:s,onOpenChange:l,open:h=!1,options:p,optionStringifier:f=en,value:m}=e,g=u.useRef(null),y=(0,N.Z)(t,g),v=u.useRef(null),[_,b]=(0,d.Z)({controlled:m,default:n,name:"SelectUnstyled",state:"value"}),x=u.useRef(!1),w=u.useRef(!1),[S,E]=u.useState(!1),A=u.useCallback((()=>{S&&null!=v.current&&(v.current.focus(),E(!1))}),[S]),T=(0,N.Z)(o,v,A);u.useEffect((()=>{A()}),[A]),u.useEffect((()=>{E(h)}),[h]);const C=e=>t=>{var n;null==e||null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&h&&(w.current=!0)},k=e=>t=>{var n;null==e||null==(n=e.onClick)||n.call(e,t),t.defaultPrevented||w.current||null==l||l(!h),w.current=!1},I=e=>t=>{var n;null==e||null==(n=e.onKeyDown)||n.call(e,t),t.defaultPrevented||("Enter"===t.key&&(x.current=!0),"ArrowDown"!==t.key&&"ArrowUp"!==t.key||(t.preventDefault(),null==l||l(!0)))},P=e=>t=>{var n;if(null==e||null==(n=e.onKeyUp)||n.call(e,t),t.defaultPrevented)return;const r=a?["Escape"]:["Escape","Enter"," "];var i;h&&!x.current&&r.includes(t.key)&&(null==g||null==(i=g.current)||i.focus());x.current=!1},L=e=>t=>{var n;null==e||null==(n=e.onClick)||n.call(e,t),t.defaultPrevented||a||null==l||l(!1)},M=e=>t=>{var n;null==e||null==(n=e.onBlur)||n.call(e,t),t.defaultPrevented||null==l||l(!1)},O=(e,t)=>{const n=ie(e,t);return t.type!==ee.keyDown||h||"ArrowUp"!==t.event.key&&"ArrowDown"!==t.event.key?t.type===ee.blur||t.type===ee.setValue||t.type===ee.optionsChange?(0,c.Z)({},n,{highlightedValue:n.selectedValue}):n:(0,c.Z)({},n,{selectedValue:n.highlightedValue})},{getRootProps:D,active:F,focusVisible:j}=R({disabled:r,ref:y}),z=u.useMemo((()=>{var t;return e.multiple?e.options.filter((e=>_.includes(e.value))):null!=(t=e.options.find((e=>e.value===_)))?t:null}),[e.multiple,e.options,_]);let B;if(e.multiple){const e=s;B={id:i,isOptionDisabled:e=>{var t;return null!=(t=null==e?void 0:e.disabled)&&t},optionComparer:(e,t)=>(null==e?void 0:e.value)===(null==t?void 0:t.value),listboxRef:T,multiple:!0,onChange:(t,n)=>{const r=n.map((e=>e.value));b(r),null==e||e(t,r)},options:p,optionStringifier:f,value:z}}else{const e=s;B={id:i,isOptionDisabled:e=>{var t;return null!=(t=null==e?void 0:e.disabled)&&t},optionComparer:(e,t)=>(null==e?void 0:e.value)===(null==t?void 0:t.value),listboxRef:T,multiple:!1,onChange:(t,n)=>{var r,i;b(null!=(r=null==n?void 0:n.value)?r:null),null==e||e(t,null!=(i=null==n?void 0:n.value)?i:null)},options:p,optionStringifier:f,stateReducer:O,value:z}}const{getRootProps:U,getOptionProps:V,getOptionState:Z,highlightedOption:q,selectedOption:G}=he(B);return u.useDebugValue({selectedOption:G,highlightedOption:q,open:h}),{buttonActive:F,buttonFocusVisible:j,disabled:r,getButtonProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)({},D((0,c.Z)({},e,{onClick:k(e),onMouseDown:C(e),onKeyDown:I(e)})),{"aria-expanded":h,"aria-haspopup":"listbox"})},getListboxProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return U((0,c.Z)({},e,{onBlur:M(e),onKeyUp:P(e)}))},getOptionProps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return V(e,(0,c.Z)({},t,{onClick:L(t)}))},getOptionState:Z,open:h,value:_}},nn=u.createContext(void 0);function rn(e){return(0,A.Z)("MuiSelect",e)}const on=(0,E.Z)("MuiSelect",["root","button","listbox","popper","active","expanded","disabled","focusVisible"]),an=["autoFocus","children","component","defaultListboxOpen","defaultValue","disabled","getSerializedValue","listboxId","listboxOpen","name","onChange","onListboxOpenChange","optionStringifier","renderValue","slotProps","slots","value"];function sn(e){return(0,k.jsx)(u.Fragment,{children:e.map((e=>e.label)).join(", ")})}function ln(e){return 0===e.length?"":e.every((e=>"string"===typeof e.value||"number"===typeof e.value||"boolean"===typeof e.value))?e.map((e=>String(e.value))):JSON.stringify(e.map((e=>e.value)))}const cn=u.forwardRef((function(e,t){var n,r,i;const{autoFocus:o,children:a,component:s,defaultListboxOpen:h=!1,defaultValue:p=[],disabled:f,getSerializedValue:m=ln,listboxId:g,listboxOpen:y,name:v,onChange:_,onListboxOpenChange:w,optionStringifier:S=en,renderValue:E,slotProps:A={},slots:T={},value:C}=e,I=(0,b.Z)(e,an),P=null!=E?E:sn,[L,M]=u.useState([]),O=u.useMemo((()=>$t(L)),[L]),[R,D]=(0,d.Z)({controlled:y,default:h,name:"MultiSelectUnstyled",state:"listboxOpen"});u.useEffect((()=>{M(Qt(a))}),[a]);const[F,j]=u.useState(!1),z=u.useRef(null),B=u.useRef(null),U=null!=(n=null!=s?s:T.root)?n:"button",V=null!=(r=T.listbox)?r:"ul",Z=null!=(i=T.popper)?i:zt,q=u.useCallback((e=>{j(null!=e)}),[]),G=(0,N.Z)(t,z,q);u.useEffect((()=>{o&&z.current.focus()}),[o]);const{buttonActive:W,buttonFocusVisible:H,disabled:X,getButtonProps:K,getListboxProps:Y,getOptionProps:J,getOptionState:Q,value:$}=tn({buttonRef:G,defaultValue:p,disabled:f,listboxId:g,multiple:!0,onChange:_,onOpenChange:e=>{D(e),null==w||w(e)},open:R,options:O,optionStringifier:S,value:C}),ee=(0,c.Z)({},e,{active:W,defaultListboxOpen:h,disabled:X,focusVisible:H,open:R,renderValue:P,value:$}),te=function(e){const{active:t,disabled:n,open:r,focusVisible:i}=e,o={root:["root",n&&"disabled",i&&"focusVisible",t&&"active",r&&"expanded"],listbox:["listbox",n&&"disabled"],popper:["popper"]};return(0,x.Z)(o,rn,{})}(ee),ne=u.useMemo((()=>null==$?[]:O.filter((e=>$.includes(e.value)))),[O,$]),re=(0,l.Z)({elementType:U,getSlotProps:K,externalSlotProps:A.root,externalForwardedProps:I,ownerState:ee,className:te.root}),ie=(0,l.Z)({elementType:V,getSlotProps:Y,externalSlotProps:A.listbox,additionalProps:{ref:B},ownerState:ee,className:te.listbox}),oe=(0,l.Z)({elementType:Z,externalSlotProps:A.popper,additionalProps:{anchorEl:z.current,disablePortal:!0,open:R,placement:"bottom-start",role:void 0},ownerState:ee,className:te.popper}),ae=u.useMemo((()=>({getOptionProps:J,getOptionState:Q,listboxRef:B})),[J,Q]);return(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(U,(0,c.Z)({},re,{children:P(ne)})),F&&(0,k.jsx)(Z,(0,c.Z)({},oe,{children:(0,k.jsx)(V,(0,c.Z)({},ie,{children:(0,k.jsx)(nn.Provider,{value:ae,children:a})}))})),v&&(0,k.jsx)("input",{type:"hidden",name:v,value:m(ne)})]})}));const un=function(e){const{children:t,defer:n=!1,fallback:r=null}=e,[i,o]=u.useState(!1);return(0,ve.Z)((()=>{n||o(!0)}),[n]),u.useEffect((()=>{n&&o(!0)}),[n]),(0,k.jsx)(u.Fragment,{children:i?t:r})};function hn(e){return(0,A.Z)("MuiOptionGroup",e)}const dn=(0,E.Z)("MuiOptionGroup",["root","label","list"]),pn=["component","disabled","slotProps","slots"];const fn=u.forwardRef((function(e,t){const{component:n,disabled:r=!1,slotProps:i={},slots:o={}}=e,a=(0,b.Z)(e,pn),s=n||(null==o?void 0:o.root)||"li",u=(null==o?void 0:o.label)||"span",h=(null==o?void 0:o.list)||"ul",d=function(e){const t={root:["root",e&&"disabled"],label:["label"],list:["list"]};return(0,x.Z)(t,hn,{})}(r),p=(0,l.Z)({elementType:s,externalSlotProps:i.root,externalForwardedProps:a,additionalProps:{ref:t},ownerState:e,className:d.root}),f=(0,l.Z)({elementType:u,externalSlotProps:i.label,ownerState:e,className:d.label}),m=(0,l.Z)({elementType:h,externalSlotProps:i.list,ownerState:e,className:d.list});return(0,k.jsxs)(s,(0,c.Z)({},p,{children:[(0,k.jsx)(u,(0,c.Z)({},f,{children:e.label})),(0,k.jsx)(h,(0,c.Z)({},m,{children:e.children}))]}))}));function mn(e){return(0,A.Z)("MuiOption",e)}const gn=(0,E.Z)("MuiOption",["root","disabled","selected","highlighted"]),yn=["children","component","disabled","label","slotProps","slots","value"];const vn=u.forwardRef((function(e,t){const{children:n,component:r,disabled:i,label:o,slotProps:a={},slots:s={},value:h}=e,d=(0,b.Z)(e,yn),p=u.useContext(nn);if(!p)throw new Error("OptionUnstyled must be used within a SelectUnstyled");const f=r||s.root||"li",m={value:h,label:o||n,disabled:i},g=p.getOptionState(m),y=p.getOptionProps(m),v=p.listboxRef,_=(0,c.Z)({},e,g),w=u.useRef(null),S=(0,N.Z)(t,w);u.useEffect((()=>{if(g.highlighted){if(!v.current||!w.current)return;const e=v.current.getBoundingClientRect(),t=w.current.getBoundingClientRect();t.top<e.top?v.current.scrollTop-=e.top-t.top:t.bottom>e.bottom&&(v.current.scrollTop+=t.bottom-e.bottom)}}),[g.highlighted,v]);const E=function(e){const{disabled:t,highlighted:n,selected:r}=e,i={root:["root",t&&"disabled",n&&"highlighted",r&&"selected"]};return(0,x.Z)(i,mn,{})}(_),A=(0,l.Z)({elementType:f,externalSlotProps:a.root,externalForwardedProps:d,additionalProps:(0,c.Z)({},y,{ref:S}),className:E.root,ownerState:_});return(0,k.jsx)(f,(0,c.Z)({},A,{children:n}))})),_n=u.memo(vn),bn=["autoFocus","children","component","defaultValue","defaultListboxOpen","disabled","getSerializedValue","listboxId","listboxOpen","name","onChange","onListboxOpenChange","optionStringifier","renderValue","slotProps","slots","value"];function xn(e){var t;return null!=(t=null==e?void 0:e.label)?t:""}function wn(e){return null==(null==e?void 0:e.value)?"":"string"===typeof e.value||"number"===typeof e.value?e.value:JSON.stringify(e.value)}const Sn=u.forwardRef((function(e,t){var n,r,i;const{autoFocus:o,children:a,component:s,defaultValue:h,defaultListboxOpen:p=!1,disabled:f,getSerializedValue:m=wn,listboxId:g,listboxOpen:y,name:v,onChange:_,onListboxOpenChange:w,optionStringifier:S=en,renderValue:E,slotProps:A={},slots:T={},value:C}=e,I=(0,b.Z)(e,bn),P=null!=E?E:xn,[L,M]=u.useState([]),O=u.useMemo((()=>$t(L)),[L]),[R,D]=(0,d.Z)({controlled:y,default:p,name:"SelectUnstyled",state:"listboxOpen"});u.useEffect((()=>{M(Qt(a))}),[a]);const[F,j]=u.useState(!1),z=u.useRef(null),B=u.useRef(null),U=null!=(n=null!=s?s:T.root)?n:"button",V=null!=(r=T.listbox)?r:"ul",Z=null!=(i=T.popper)?i:zt,q=u.useCallback((e=>{j(null!=e)}),[]),G=(0,N.Z)(t,z,q);u.useEffect((()=>{o&&z.current.focus()}),[o]);const{buttonActive:W,buttonFocusVisible:H,disabled:X,getButtonProps:K,getListboxProps:Y,getOptionProps:J,getOptionState:Q,value:$}=tn({buttonRef:G,defaultValue:h,disabled:f,listboxId:g,multiple:!1,onChange:_,onOpenChange:e=>{D(e),null==w||w(e)},open:R,options:O,optionStringifier:S,value:C}),ee=(0,c.Z)({},e,{active:W,defaultListboxOpen:p,disabled:X,focusVisible:H,open:R,renderValue:P,value:$}),te=function(e){const{active:t,disabled:n,open:r,focusVisible:i}=e,o={root:["root",n&&"disabled",i&&"focusVisible",t&&"active",r&&"expanded"],listbox:["listbox",n&&"disabled"],popper:["popper"]};return(0,x.Z)(o,rn,{})}(ee),ne=u.useMemo((()=>{var e;return null!=(e=O.find((e=>$===e.value)))?e:null}),[O,$]),re=(0,l.Z)({elementType:U,getSlotProps:K,externalSlotProps:A.root,externalForwardedProps:I,ownerState:ee,className:te.root}),ie=(0,l.Z)({elementType:V,getSlotProps:Y,externalSlotProps:A.listbox,additionalProps:{ref:B},ownerState:ee,className:te.listbox}),oe=(0,l.Z)({elementType:Z,externalSlotProps:A.popper,additionalProps:{anchorEl:z.current,disablePortal:!0,open:R,placement:"bottom-start",role:void 0},ownerState:ee,className:te.popper}),ae=u.useMemo((()=>({getOptionProps:J,getOptionState:Q,listboxRef:B})),[J,Q]);return(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(U,(0,c.Z)({},re,{children:P(ne)})),F&&(0,k.jsx)(Z,(0,c.Z)({},oe,{children:(0,k.jsx)(V,(0,c.Z)({},ie,{children:(0,k.jsx)(nn.Provider,{value:ae,children:a})}))})),v&&(0,k.jsx)("input",{type:"hidden",name:v,value:m(ne)})]})}));var En=n(3061);function An(e){return(0,A.Z)("MuiSlider",e)}const Tn=(0,E.Z)("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);function Cn(e){const{children:t,className:n,value:r}=e,i=(e=>{const{open:t}=e;return{offset:(0,En.default)(t&&Tn.valueLabelOpen),circle:Tn.valueLabelCircle,label:Tn.valueLabelLabel}})(e);return u.cloneElement(t,{className:(0,En.default)(t.props.className)},(0,k.jsxs)(u.Fragment,{children:[t.props.children,(0,k.jsx)("span",{className:(0,En.default)(i.offset,n),"aria-hidden":!0,children:(0,k.jsx)("span",{className:i.circle,children:(0,k.jsx)("span",{className:i.label,children:r})})})]}))}var kn=n(282);function In(e,t){return e-t}function Pn(e,t,n){return null==e?t:Math.min(Math.max(t,e),n)}function Ln(e,t){var n;const{index:r}=null!=(n=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null))?n:{};return r}function Mn(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function On(e,t,n){return 100*(e-t)/(n-t)}function Nn(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function Rn(e){let{values:t,newValue:n,index:r}=e;const i=t.slice();return i[r]=n,i.sort(In)}function Dn(e){let{sliderRef:t,activeIndex:n,setActive:r}=e;var i,o;const a=(0,j.Z)(t.current);var s;null!=(i=t.current)&&i.contains(a.activeElement)&&Number(null==a||null==(o=a.activeElement)?void 0:o.getAttribute("data-index"))===n||(null==(s=t.current)||s.querySelector('[type="range"][data-index="'.concat(n,'"]')).focus());r&&r(n)}const Fn={horizontal:{offset:e=>({left:"".concat(e,"%")}),leap:e=>({width:"".concat(e,"%")})},"horizontal-reverse":{offset:e=>({right:"".concat(e,"%")}),leap:e=>({width:"".concat(e,"%")})},vertical:{offset:e=>({bottom:"".concat(e,"%")}),leap:e=>({height:"".concat(e,"%")})}},jn=e=>e;let zn;function Bn(){return void 0===zn&&(zn="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),zn}function Un(e){const{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:a=!1,max:s=100,min:l=0,name:h,onChange:f,onChangeCommitted:m,orientation:g="horizontal",ref:y,scale:v=jn,step:_=1,tabIndex:b,value:x}=e,w=u.useRef(),[S,E]=u.useState(-1),[A,T]=u.useState(-1),[C,k]=u.useState(!1),I=u.useRef(0),[P,L]=(0,d.Z)({controlled:x,default:null!=n?n:l,name:"Slider"}),M=f&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:h}}),f(i,t,n)}),R=Array.isArray(P);let D=R?P.slice().sort(In):[P];D=D.map((e=>Pn(e,l,s)));const F=!0===a&&null!==_?[...Array(Math.floor((s-l)/_)+1)].map(((e,t)=>({value:l+_*t}))):a||[],z=F.map((e=>e.value)),{isFocusVisibleRef:B,onBlur:U,onFocus:V,ref:Z}=(0,O.Z)(),[q,G]=u.useState(-1),W=u.useRef(),H=(0,N.Z)(Z,W),X=(0,N.Z)(y,H),K=e=>t=>{var n;const r=Number(t.currentTarget.getAttribute("data-index"));V(t),!0===B.current&&G(r),T(r),null==e||null==(n=e.onFocus)||n.call(e,t)},Y=e=>t=>{var n;U(t),!1===B.current&&G(-1),T(-1),null==e||null==(n=e.onBlur)||n.call(e,t)};(0,ve.Z)((()=>{var e;r&&W.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[r]),r&&-1!==S&&E(-1),r&&-1!==q&&G(-1);const J=e=>t=>{var n;null==(n=e.onChange)||n.call(e,t);const r=Number(t.currentTarget.getAttribute("data-index")),o=D[r],a=z.indexOf(o);let c=t.target.valueAsNumber;if(F&&null==_&&(c=c<o?z[a-1]:z[a+1]),c=Pn(c,l,s),F&&null==_){const e=z.indexOf(D[r]);c=c<D[r]?z[e-1]:z[e+1]}if(R){i&&(c=Pn(c,D[r-1]||-1/0,D[r+1]||1/0));const e=c;c=Rn({values:D,newValue:c,index:r});let t=r;i||(t=c.indexOf(e)),Dn({sliderRef:W,activeIndex:t})}L(c),G(r),M&&M(t,c,r),m&&m(t,c)},Q=u.useRef();let $=g;o&&"horizontal"===g&&($+="-reverse");const ee=e=>{let{finger:t,move:n=!1}=e;const{current:r}=W,{width:o,height:a,bottom:c,left:u}=r.getBoundingClientRect();let h,d;if(h=0===$.indexOf("vertical")?(c-t.y)/a:(t.x-u)/o,-1!==$.indexOf("-reverse")&&(h=1-h),d=function(e,t,n){return(n-t)*e+t}(h,l,s),_)d=Nn(d,_,l);else{const e=Ln(z,d);d=z[e]}d=Pn(d,l,s);let p=0;if(R){p=n?Q.current:Ln(D,d),i&&(d=Pn(d,D[p-1]||-1/0,D[p+1]||1/0));const e=d;d=Rn({values:D,newValue:d,index:p}),i&&n||(p=d.indexOf(e),Q.current=p)}return{newValue:d,activeIndex:p}},te=(0,p.Z)((e=>{const t=Mn(e,w);if(!t)return;if(I.current+=1,"mousemove"===e.type&&0===e.buttons)return void ne(e);const{newValue:n,activeIndex:r}=ee({finger:t,move:!0});Dn({sliderRef:W,activeIndex:r,setActive:E}),L(n),!C&&I.current>2&&k(!0),M&&n!==P&&M(e,n,r)})),ne=(0,p.Z)((e=>{const t=Mn(e,w);if(k(!1),!t)return;const{newValue:n}=ee({finger:t,move:!0});E(-1),"touchend"===e.type&&T(-1),m&&m(e,n),w.current=void 0,ie()})),re=(0,p.Z)((e=>{if(r)return;Bn()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(w.current=t.identifier);const n=Mn(e,w);if(!1!==n){const{newValue:t,activeIndex:r}=ee({finger:n});Dn({sliderRef:W,activeIndex:r,setActive:E}),L(t),M&&M(e,t,r)}I.current=0;const i=(0,j.Z)(W.current);i.addEventListener("touchmove",te),i.addEventListener("touchend",ne)})),ie=u.useCallback((()=>{const e=(0,j.Z)(W.current);e.removeEventListener("mousemove",te),e.removeEventListener("mouseup",ne),e.removeEventListener("touchmove",te),e.removeEventListener("touchend",ne)}),[ne,te]);u.useEffect((()=>{const{current:e}=W;return e.addEventListener("touchstart",re,{passive:Bn()}),()=>{e.removeEventListener("touchstart",re,{passive:Bn()}),ie()}}),[ie,re]),u.useEffect((()=>{r&&ie()}),[r,ie]);const oe=e=>t=>{var n;if(null==(n=e.onMouseDown)||n.call(e,t),r)return;if(t.defaultPrevented)return;if(0!==t.button)return;t.preventDefault();const i=Mn(t,w);if(!1!==i){const{newValue:e,activeIndex:n}=ee({finger:i});Dn({sliderRef:W,activeIndex:n,setActive:E}),L(e),M&&M(t,e,n)}I.current=0;const o=(0,j.Z)(W.current);o.addEventListener("mousemove",te),o.addEventListener("mouseup",ne)},ae=On(R?D[0]:l,l,s),se=On(D[D.length-1],l,s)-ae,le=e=>t=>{var n;null==(n=e.onMouseOver)||n.call(e,t);const r=Number(t.currentTarget.getAttribute("data-index"));T(r)},ce=e=>t=>{var n;null==(n=e.onMouseLeave)||n.call(e,t),T(-1)};return{active:S,axis:$,axisProps:Fn,dragging:C,focusedThumbIndex:q,getHiddenInputProps:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const a={onChange:J(n||{}),onFocus:K(n||{}),onBlur:Y(n||{})},u=(0,c.Z)({},n,a);return(0,c.Z)({tabIndex:b,"aria-labelledby":t,"aria-orientation":g,"aria-valuemax":v(s),"aria-valuemin":v(l),name:h,type:"range",min:e.min,max:e.max,step:null!=(i=e.step)?i:void 0,disabled:r},u,{style:(0,c.Z)({},kn.Z,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={onMouseDown:oe(e||{})},n=(0,c.Z)({},e,t);return(0,c.Z)({ref:X},n)},getThumbProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={onMouseOver:le(e||{}),onMouseLeave:ce(e||{})};return(0,c.Z)({},e,t)},marks:F,open:A,range:R,trackLeap:se,trackOffset:ae,values:D}}const Vn=["aria-label","aria-valuetext","aria-labelledby","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","slotProps","slots"],Zn=e=>e,qn=e=>{let{children:t}=e;return t},Gn=u.forwardRef((function(e,t){var n,r,i,o,s,h,d;const{"aria-label":p,"aria-valuetext":f,"aria-labelledby":m,className:g,component:y,classes:v,disableSwap:_=!1,disabled:w=!1,getAriaLabel:S,getAriaValueText:E,marks:A=!1,max:T=100,min:C=0,orientation:I="horizontal",scale:P=Zn,step:L=1,track:M="normal",valueLabelDisplay:O="off",valueLabelFormat:N=Zn,isRtl:R=!1,slotProps:D={},slots:F={}}=e,j=(0,b.Z)(e,Vn),z=(0,c.Z)({},e,{marks:A,classes:v,disabled:w,isRtl:R,max:T,min:C,orientation:I,scale:P,step:L,track:M,valueLabelDisplay:O,valueLabelFormat:N}),{axisProps:B,getRootProps:U,getHiddenInputProps:V,getThumbProps:Z,open:q,active:G,axis:W,range:H,focusedThumbIndex:X,dragging:K,marks:Y,values:J,trackOffset:Q,trackLeap:$}=Un((0,c.Z)({},z,{ref:t}));z.marked=Y.length>0&&Y.some((e=>e.label)),z.dragging=K,z.focusedThumbIndex=X;const ee=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:a}=e,s={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,x.Z)(s,An,a)})(z),te=null!=(n=null!=y?y:F.root)?n:"span",ne=(0,l.Z)({elementType:te,getSlotProps:U,externalSlotProps:D.root,externalForwardedProps:j,ownerState:z,className:[ee.root,g]}),re=null!=(r=F.rail)?r:"span",ie=(0,l.Z)({elementType:re,externalSlotProps:D.rail,ownerState:z,className:ee.rail}),oe=null!=(i=F.track)?i:"span",ae=(0,l.Z)({elementType:oe,externalSlotProps:D.track,additionalProps:{style:(0,c.Z)({},B[W].offset(Q),B[W].leap($))},ownerState:z,className:ee.track}),se=null!=(o=F.thumb)?o:"span",le=(0,l.Z)({elementType:se,getSlotProps:Z,externalSlotProps:D.thumb,ownerState:z}),ce=null!=(s=F.valueLabel)?s:Cn,ue=(0,l.Z)({elementType:ce,externalSlotProps:D.valueLabel,ownerState:z}),he=null!=(h=F.mark)?h:"span",de=(0,l.Z)({elementType:he,externalSlotProps:D.mark,ownerState:z,className:ee.mark}),pe=null!=(d=F.markLabel)?d:"span",fe=(0,l.Z)({elementType:pe,externalSlotProps:D.markLabel,ownerState:z}),me=F.input||"input",ge=(0,l.Z)({elementType:me,getSlotProps:V,externalSlotProps:D.input,ownerState:z});return(0,k.jsxs)(te,(0,c.Z)({},ne,{children:[(0,k.jsx)(re,(0,c.Z)({},ie)),(0,k.jsx)(oe,(0,c.Z)({},ae)),Y.filter((e=>e.value>=C&&e.value<=T)).map(((e,t)=>{const n=On(e.value,C,T),r=B[W].offset(n);let i;return i=!1===M?-1!==J.indexOf(e.value):"normal"===M&&(H?e.value>=J[0]&&e.value<=J[J.length-1]:e.value<=J[0])||"inverted"===M&&(H?e.value<=J[0]||e.value>=J[J.length-1]:e.value>=J[0]),(0,k.jsxs)(u.Fragment,{children:[(0,k.jsx)(he,(0,c.Z)({"data-index":t},de,!(0,a.Z)(he)&&{markActive:i},{style:(0,c.Z)({},r,de.style),className:(0,En.default)(de.className,i&&ee.markActive)})),null!=e.label?(0,k.jsx)(pe,(0,c.Z)({"aria-hidden":!0,"data-index":t},fe,!(0,a.Z)(pe)&&{markLabelActive:i},{style:(0,c.Z)({},r,fe.style),className:(0,En.default)(ee.markLabel,fe.className,i&&ee.markLabelActive),children:e.label})):null]},t)})),J.map(((e,t)=>{const n=On(e,C,T),r=B[W].offset(n),i="off"===O?qn:ce;return(0,k.jsx)(u.Fragment,{children:(0,k.jsx)(i,(0,c.Z)({},!(0,a.Z)(i)&&{valueLabelFormat:N,valueLabelDisplay:O,value:"function"===typeof N?N(P(e),t):N,index:t,open:q===t||G===t||"on"===O,disabled:w},ue,{className:(0,En.default)(ee.valueLabel,ue.className),children:(0,k.jsx)(se,(0,c.Z)({"data-index":t,"data-focusvisible":X===t},le,{className:(0,En.default)(ee.thumb,le.className,G===t&&ee.active,X===t&&ee.focusVisible),style:(0,c.Z)({},r,{pointerEvents:_&&G!==t?"none":void 0},le.style),children:(0,k.jsx)(me,(0,c.Z)({"data-index":t,"aria-label":S?S(t):p,"aria-valuenow":P(e),"aria-labelledby":m,"aria-valuetext":E?E(P(e),t):f,value:J[t]},ge))}))}))},t)}))]}))})),Wn=Gn;function Hn(e){return(0,A.Z)("MuiSnackbar",e)}const Xn=(0,E.Z)("MuiSnackbar",["root"]);function Kn(e){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:i,ref:a,resumeHideDuration:s}=e,l=u.useRef();u.useEffect((()=>{if(i)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==r||r(e,"escapeKeyDown")}}),[i,r]);const h=(0,p.Z)(((e,t)=>{null==r||r(e,t)})),d=(0,p.Z)((e=>{r&&null!=e&&(clearTimeout(l.current),l.current=setTimeout((()=>{h(null,"timeout")}),e))}));u.useEffect((()=>(i&&d(t),()=>{clearTimeout(l.current)})),[i,t,d]);const f=()=>{clearTimeout(l.current)},m=u.useCallback((()=>{null!=t&&d(null!=s?s:.5*t)}),[t,s,d]),g=e=>t=>{const n=e.onBlur;null==n||n(t),m()},y=e=>t=>{const n=e.onFocus;null==n||n(t),f()},v=e=>t=>{const n=e.onMouseEnter;null==n||n(t),f()},_=e=>t=>{const n=e.onMouseLeave;null==n||n(t),m()};u.useEffect((()=>{if(!n&&i)return window.addEventListener("focus",m),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",f)}}),[n,m,i]);return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.Z)(e),r=(0,c.Z)({},n,t);return(0,c.Z)({ref:a,role:"presentation"},r,{onBlur:g(r),onFocus:y(r),onMouseEnter:v(r),onMouseLeave:_(r)})},onClickAway:e=>{null==r||r(e,"clickaway")}}}const Yn=["autoHideDuration","children","component","disableWindowBlurListener","exited","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","slotProps","slots"],Jn=u.forwardRef((function(e,t){const{autoHideDuration:n=null,children:r,component:i,disableWindowBlurListener:o=!1,exited:a=!0,onClose:s,open:u,resumeHideDuration:h,slotProps:d={},slots:p={}}=e,f=(0,b.Z)(e,Yn),m=(0,x.Z)({root:["root"]},Hn,void 0),{getRootProps:g,onClickAway:y}=Kn((0,c.Z)({},e,{autoHideDuration:n,disableWindowBlurListener:o,onClose:s,open:u,resumeHideDuration:h,ref:t})),v=e,_=i||p.root||"div",w=(0,l.Z)({elementType:_,getSlotProps:g,externalForwardedProps:f,externalSlotProps:d.root,additionalProps:{ref:t},ownerState:v,className:m.root}),S=(0,l.Z)({elementType:B,externalSlotProps:d.clickAwayListener,additionalProps:{onClickAway:y},ownerState:v});return delete S.ownerState,!u&&a?null:(0,k.jsx)(B,(0,c.Z)({},S,{children:(0,k.jsx)(_,(0,c.Z)({},w,{children:r}))}))}));function Qn(e){const{checked:t,defaultChecked:n,disabled:r,onBlur:i,onChange:o,onFocus:a,onFocusVisible:s,readOnly:l,required:h}=e,[p,f]=(0,d.Z)({controlled:t,default:Boolean(n),name:"Switch",state:"checked"}),m=e=>t=>{var n;t.nativeEvent.defaultPrevented||(f(t.target.checked),null==o||o(t),null==(n=e.onChange)||n.call(e,t))},{isFocusVisibleRef:g,onBlur:y,onFocus:v,ref:_}=(0,O.Z)(),[b,x]=u.useState(!1);r&&b&&x(!1),u.useEffect((()=>{g.current=b}),[b,g]);const w=u.useRef(null),S=e=>t=>{var n;w.current||(w.current=t.currentTarget),v(t),!0===g.current&&(x(!0),null==s||s(t)),null==a||a(t),null==(n=e.onFocus)||n.call(e,t)},E=e=>t=>{var n;y(t),!1===g.current&&x(!1),null==i||i(t),null==(n=e.onBlur)||n.call(e,t)},A=(0,N.Z)(_,w);return{checked:p,disabled:Boolean(r),focusVisible:b,getInputProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)({checked:t,defaultChecked:n,disabled:r,readOnly:l,ref:A,required:h,type:"checkbox"},e,{onChange:m(e),onFocus:S(e),onBlur:E(e)})},readOnly:Boolean(l)}}function $n(e){return(0,A.Z)("MuiSwitch",e)}const er=(0,E.Z)("MuiSwitch",["root","input","track","thumb","checked","disabled","focusVisible","readOnly"]),tr=["checked","component","defaultChecked","disabled","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","slotProps","slots"],nr=u.forwardRef((function(e,t){var n,r,i,o;const{checked:a,component:s,defaultChecked:u,disabled:h,onBlur:d,onChange:p,onFocus:f,onFocusVisible:m,readOnly:g,slotProps:y={},slots:v={}}=e,_=(0,b.Z)(e,tr),w={checked:a,defaultChecked:u,disabled:h,onBlur:d,onChange:p,onFocus:f,onFocusVisible:m,readOnly:g},{getInputProps:S,checked:E,disabled:A,focusVisible:T,readOnly:C}=Qn(w),I=(0,c.Z)({},e,{checked:E,disabled:A,focusVisible:T,readOnly:C}),P=(e=>{const{checked:t,disabled:n,focusVisible:r,readOnly:i}=e,o={root:["root",t&&"checked",n&&"disabled",r&&"focusVisible",i&&"readOnly"],thumb:["thumb"],input:["input"],track:["track"]};return(0,x.Z)(o,$n,{})})(I),L=null!=(n=null!=s?s:v.root)?n:"span",M=(0,l.Z)({elementType:L,externalSlotProps:y.root,externalForwardedProps:_,additionalProps:{ref:t},ownerState:I,className:P.root}),O=null!=(r=v.thumb)?r:"span",N=(0,l.Z)({elementType:O,externalSlotProps:y.thumb,ownerState:I,className:P.thumb}),R=null!=(i=v.input)?i:"input",D=(0,l.Z)({elementType:R,getSlotProps:S,externalSlotProps:y.input,ownerState:I,className:P.input}),F=null===v.track?()=>null:null!=(o=v.track)?o:"span",j=(0,l.Z)({elementType:F,externalSlotProps:y.track,ownerState:I,className:P.track});return(0,k.jsxs)(L,(0,c.Z)({},M,{children:[(0,k.jsx)(F,(0,c.Z)({},j)),(0,k.jsx)(O,(0,c.Z)({},N)),(0,k.jsx)(R,(0,c.Z)({},D))]}))})),rr=["component","count","getItemAriaLabel","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","direction","ownerState","slotProps","slots"];var ir,or,ar,sr;function lr(){return ir||(ir=(0,k.jsx)("span",{children:"\u21fe|"}))}function cr(){return or||(or=(0,k.jsx)("span",{children:"|\u21fd"}))}function ur(){return ar||(ar=(0,k.jsx)("span",{children:"\u21fe"}))}function hr(){return sr||(sr=(0,k.jsx)("span",{children:"\u21fd"}))}function dr(e){return"Go to ".concat(e," page")}const pr=u.forwardRef((function(e,t){var n,r,i,o,a,s,u,h,d,p;const{component:f,count:m,getItemAriaLabel:g=dr,onPageChange:y,page:v,rowsPerPage:_,showFirstButton:x=!1,showLastButton:w=!1,direction:S,slotProps:E={},slots:A={}}=e,T=(0,b.Z)(e,rr),C=e,I=null!=(n=null!=(r=A.root)?r:f)?n:"div",P=(0,l.Z)({elementType:I,externalSlotProps:E.root,externalForwardedProps:T,additionalProps:{ref:t},ownerState:C}),L=null!=(i=A.firstButton)?i:"button",M=(0,l.Z)({elementType:L,externalSlotProps:E.firstButton,additionalProps:{onClick:e=>{y(e,0)},disabled:0===v,"aria-label":g("first",v),title:g("first",v)},ownerState:C}),O=null!=(o=A.lastButton)?o:"button",N=(0,l.Z)({elementType:O,externalSlotProps:E.lastButton,additionalProps:{onClick:e=>{y(e,Math.max(0,Math.ceil(m/_)-1))},disabled:v>=Math.ceil(m/_)-1,"aria-label":g("last",v),title:g("last",v)},ownerState:C}),R=null!=(a=A.nextButton)?a:"button",D=(0,l.Z)({elementType:R,externalSlotProps:E.nextButton,additionalProps:{onClick:e=>{y(e,v+1)},disabled:-1!==m&&v>=Math.ceil(m/_)-1,"aria-label":g("next",v),title:g("next",v)},ownerState:C}),F=null!=(s=A.backButton)?s:"button",j=(0,l.Z)({elementType:F,externalSlotProps:E.backButton,additionalProps:{onClick:e=>{y(e,v-1)},disabled:0===v,"aria-label":g("previous",v),title:g("previous",v)},ownerState:C}),z=null!=(u=A.lastPageIcon)?u:lr,B=null!=(h=A.firstPageIcon)?h:cr,U=null!=(d=A.nextPageIcon)?d:ur,V=null!=(p=A.backPageIcon)?p:hr;return(0,k.jsxs)(I,(0,c.Z)({},P,{children:[x&&(0,k.jsx)(L,(0,c.Z)({},M,{children:"rtl"===S?(0,k.jsx)(z,{}):(0,k.jsx)(B,{})})),(0,k.jsx)(F,(0,c.Z)({},j,{children:"rtl"===S?(0,k.jsx)(U,{}):(0,k.jsx)(V,{})})),(0,k.jsx)(R,(0,c.Z)({},D,{children:"rtl"===S?(0,k.jsx)(V,{}):(0,k.jsx)(U,{})})),w&&(0,k.jsx)(O,(0,c.Z)({},N,{children:"rtl"===S?(0,k.jsx)(B,{}):(0,k.jsx)(z,{})}))]}))}));function fr(e){return(0,A.Z)("MuiTablePagination",e)}const mr=(0,E.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),gr=["component","colSpan","count","getItemAriaLabel","labelDisplayedRows","labelId","labelRowsPerPage","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","selectId","slotProps","slots"];function yr(e){let{from:t,to:n,count:r}=e;return"".concat(t,"\u2013").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))}function vr(e){return"Go to ".concat(e," page")}const _r=u.forwardRef((function(e,t){var n,r,i,o,s,d,p,f;const{component:m,colSpan:g,count:y,getItemAriaLabel:v=vr,labelDisplayedRows:_=yr,labelId:w,labelRowsPerPage:S="Rows per page:",onPageChange:E,onRowsPerPageChange:A,page:T,rowsPerPage:C,rowsPerPageOptions:I=[10,25,50,100],selectId:P,slotProps:L={},slots:M={}}=e,O=(0,b.Z)(e,gr),N=e,R=(0,x.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},fr,{});let D;m&&"td"!==m&&(0,a.Z)(m)||(D=g||1e3);const F=(0,h.Z)(P),j=(0,h.Z)(w),z=null!=(n=null!=m?m:M.root)?n:"td",B=(0,l.Z)({elementType:z,externalSlotProps:L.root,externalForwardedProps:O,additionalProps:{colSpan:D,ref:t},ownerState:N,className:R.root}),U=null!=(r=M.select)?r:"select",V=(0,l.Z)({elementType:U,externalSlotProps:L.select,additionalProps:{value:C,id:F,onChange:e=>A&&A(e),"aria-label":C.toString(),"aria-labelledby":[j,F].filter(Boolean).join(" ")||void 0},ownerState:N,className:R.select}),Z=null!=(i=M.actions)?i:pr,q=(0,l.Z)({elementType:Z,externalSlotProps:L.actions,additionalProps:{page:T,rowsPerPage:C,count:y,onPageChange:E,getItemAriaLabel:v},ownerState:N,className:R.actions}),G=null!=(o=M.menuItem)?o:"option",W=(0,l.Z)({elementType:G,externalSlotProps:L.menuItem,additionalProps:{value:void 0},ownerState:N,className:R.menuItem}),H=null!=(s=M.selectLabel)?s:"p",X=(0,l.Z)({elementType:H,externalSlotProps:L.selectLabel,additionalProps:{id:j},ownerState:N,className:R.selectLabel}),K=null!=(d=M.displayedRows)?d:"p",Y=(0,l.Z)({elementType:K,externalSlotProps:L.displayedRows,ownerState:N,className:R.displayedRows}),J=null!=(p=M.toolbar)?p:"div",Q=(0,l.Z)({elementType:J,externalSlotProps:L.toolbar,ownerState:N,className:R.toolbar}),$=null!=(f=M.spacer)?f:"div",ee=(0,l.Z)({elementType:$,externalSlotProps:L.spacer,ownerState:N,className:R.spacer});return(0,k.jsx)(z,(0,c.Z)({},B,{children:(0,k.jsxs)(J,(0,c.Z)({},Q,{children:[(0,k.jsx)($,(0,c.Z)({},ee)),I.length>1&&(0,k.jsx)(H,(0,c.Z)({},X,{children:S})),I.length>1&&(0,k.jsx)(U,(0,c.Z)({},V,{children:I.map((e=>(0,u.createElement)(G,(0,c.Z)({},W,{key:"number"!==typeof e&&e.label?e.label:e,value:"number"!==typeof e&&e.value?e.value:e}),"number"!==typeof e&&e.label?e.label:e)))})),(0,k.jsx)(K,(0,c.Z)({},Y,{children:_({from:0===y?0:T*C+1,to:-1===y?(T+1)*C:-1===C?y:Math.min(y,(T+1)*C),count:-1===y?-1:y,page:T})})),(0,k.jsx)(Z,(0,c.Z)({},q))]}))}))}));function br(e){return(0,A.Z)("MuiTabPanel",e)}const xr=(0,E.Z)("MuiTabPanel",["root","hidden"]),wr=u.createContext(null);function Sr(){return u.useContext(wr)}function Er(e,t){const{idPrefix:n}=e;return null===n?null:"".concat(e.idPrefix,"-P-").concat(t)}function Ar(e,t){const{idPrefix:n}=e;return null===n?null:"".concat(e.idPrefix,"-T-").concat(t)}const Tr=wr,Cr=e=>{const{value:t}=e,n=Sr();if(null===n)throw new Error("No TabContext provided");const r=t!==n.value,i=Er(n,t),o=Ar(n,t);return{hidden:r,getRootProps:()=>({"aria-labelledby":null!=o?o:void 0,hidden:r,id:null!=i?i:void 0})}},kr=["children","component","value","slotProps","slots"],Ir=u.forwardRef((function(e,t){var n;const{children:r,component:i,slotProps:o={},slots:a={}}=e,s=(0,b.Z)(e,kr),{hidden:u,getRootProps:h}=Cr(e),d=(0,c.Z)({},e,{hidden:u}),p=(e=>{const{hidden:t}=e,n={root:["root",t&&"hidden"]};return(0,x.Z)(n,br,{})})(d),f=null!=(n=null!=i?i:a.root)?n:"div",m=(0,l.Z)({elementType:f,getSlotProps:h,externalSlotProps:o.root,externalForwardedProps:s,additionalProps:{role:"tabpanel",ref:t},ownerState:d,className:p.root});return(0,k.jsx)(f,(0,c.Z)({},m,{children:!u&&r}))}));function Pr(e){return(0,A.Z)("MuiTabsList",e)}const Lr=(0,E.Z)("MuiTabsList",["root","horizontal","vertical"]);n(6214);const Mr=(e,t)=>e?e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild:null,Or=(e,t)=>e?e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild:null,Nr=(e,t,n)=>{let r=!1,i=n(e,t);for(;e&&i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},Rr=e=>{const{"aria-label":t,"aria-labelledby":n,children:r,ref:i}=e,a=u.createRef(),s=(0,N.Z)(a,i),l=Sr();if(null===l)throw new Error("No TabContext provided");const{value:h,orientation:d="horizontal",direction:p="ltr"}=l,f="rtl"===p,m=e=>t=>{var n;(e=>{const t=a.current,n=(0,j.Z)(t).activeElement;if("tab"!==(null==n?void 0:n.getAttribute("role")))return;let r="horizontal"===d?"ArrowLeft":"ArrowUp",i="horizontal"===d?"ArrowRight":"ArrowDown";switch("horizontal"===d&&f&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),Nr(t,n,Or);break;case i:e.preventDefault(),Nr(t,n,Mr);break;case"Home":e.preventDefault(),Nr(t,null,Mr);break;case"End":e.preventDefault(),Nr(t,null,Or)}})(t),null==(n=e.onKeyDown)||n.call(e,t)},g=u.useCallback((()=>{const e=new Map;let t=0;return u.Children.map(r,(n=>{if(!u.isValidElement(n))return null;const r=void 0===n.props.value?t:n.props.value;return e.set(r,t),t+=1,u.cloneElement(n,(0,c.Z)({value:r},1===t&&!1===h&&!n.props.tabIndex||h===r?{tabIndex:0}:{tabIndex:-1}))}))}),[r,h]);return{isRtl:f,orientation:d,value:h,processChildren:g,getRootProps:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=(0,o.Z)(e),a=(0,c.Z)({},i,r),l={onKeyDown:m(a)},u=(0,c.Z)({},a,l);return(0,c.Z)({"aria-label":t,"aria-labelledby":n,"aria-orientation":"vertical"===d?"vertical":void 0,role:"tablist",ref:s},u)}}},Dr=["children","component","slotProps","slots"],Fr=u.forwardRef(((e,t)=>{var n;const{component:r,slotProps:i={},slots:o={}}=e,a=(0,b.Z)(e,Dr),{isRtl:s,orientation:u,getRootProps:h,processChildren:d}=Rr((0,c.Z)({},e,{ref:t})),p=(0,c.Z)({},e,{isRtl:s,orientation:u}),f=(e=>{const{orientation:t}=e,n={root:["root",t]};return(0,x.Z)(n,Pr,{})})(p),m=null!=(n=null!=r?r:o.root)?n:"div",g=(0,l.Z)({elementType:m,getSlotProps:h,externalSlotProps:i.root,externalForwardedProps:a,ownerState:p,className:f.root}),y=d();return(0,k.jsx)(m,(0,c.Z)({},g,{children:y}))}));function jr(e){return(0,A.Z)("MuiTabs",e)}const zr=(0,E.Z)("MuiTabs",["root","horizontal","vertical"]),Br=e=>{const{value:t,defaultValue:n,onChange:r,orientation:i,direction:o,selectionFollowsFocus:a}=e,[s,l]=(0,d.Z)({controlled:t,default:n,name:"Tabs",state:"value"}),c=(0,h.Z)(),p=u.useCallback(((e,t)=>{l(t),r&&r(e,t)}),[r,l]);return{tabsContextValue:u.useMemo((()=>({idPrefix:c,value:s,onSelected:p,orientation:i,direction:o,selectionFollowsFocus:a})),[c,s,p,i,o,a])}},Ur=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","slotProps","slots"],Vr=u.forwardRef(((e,t)=>{var n;const{children:r,orientation:i="horizontal",direction:o="ltr",component:a,slotProps:s={},slots:u={}}=e,h=(0,b.Z)(e,Ur),{tabsContextValue:d}=Br(e),p=(0,c.Z)({},e,{orientation:i,direction:o}),f=(e=>{const{orientation:t}=e,n={root:["root",t]};return(0,x.Z)(n,jr,{})})(p),m=null!=(n=null!=a?a:u.root)?n:"div",g=(0,l.Z)({elementType:m,externalSlotProps:s.root,externalForwardedProps:h,additionalProps:{ref:t},ownerState:p,className:f.root});return(0,k.jsx)(m,(0,c.Z)({},g,{children:(0,k.jsx)(Tr.Provider,{value:d,children:r})}))}));function Zr(e){return(0,A.Z)("MuiTab",e)}const qr=(0,E.Z)("MuiTab",["root","selected","disabled"]),Gr=["getRootProps"],Wr=e=>{var t,n;const{value:r,onChange:i,onClick:o,onFocus:a}=e,s=R(e),{getRootProps:l}=s,u=(0,b.Z)(s,Gr),h=Sr();if(null===h)throw new Error("No TabContext provided");const d=null!=r?r:0,p=h.value===d,f=h.selectionFollowsFocus,m={role:"tab","aria-controls":null!=(t=Er(h,d))?t:void 0,id:null!=(n=Ar(h,d))?n:void 0,"aria-selected":p,disabled:u.disabled},g=e=>t=>{var n;null==(n=e.onFocus)||n.call(e,t),t.defaultPrevented||(f&&!p&&(i&&i(t,d),h.onSelected(t,d)),a&&a(t))},y=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.defaultPrevented||(p||(i&&i(t,d),h.onSelected(t,d)),o&&o(t))};return(0,c.Z)({getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=l((0,c.Z)({},e,{onClick:y(e),onFocus:g(e)}));return(0,c.Z)({},t,m)}},u,{selected:p})},Hr=["action","children","value","disabled","onChange","onClick","onFocus","component","slotProps","slots"],Xr=u.forwardRef((function(e,t){var n;const{action:r,children:i,disabled:o=!1,component:a,slotProps:s={},slots:h={}}=e,d=(0,b.Z)(e,Hr),p=u.useRef(),f=(0,N.Z)(p,t),{active:m,focusVisible:g,setFocusVisible:y,selected:v,getRootProps:_}=Wr((0,c.Z)({},e,{ref:f}));u.useImperativeHandle(r,(()=>({focusVisible:()=>{y(!0),p.current.focus()}})),[y]);const w=(0,c.Z)({},e,{active:m,focusVisible:g,disabled:o,selected:v}),S=(e=>{const{selected:t,disabled:n}=e,r={root:["root",t&&"selected",n&&"disabled"]};return(0,x.Z)(r,Zr,{})})(w),E=null!=(n=null!=a?a:h.root)?n:"button",A=(0,l.Z)({elementType:E,getSlotProps:_,externalSlotProps:s.root,externalForwardedProps:d,additionalProps:{ref:t},ownerState:w,className:S.root});return(0,k.jsx)(E,(0,c.Z)({},A,{children:i}))}));var Kr=n(1001)},3637:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7462),i=n(3066);function o(e,t,n){return(0,i.Z)(e)?t:(0,r.Z)({},t,{ownerState:(0,r.Z)({},t.ownerState,n)})}},4816:(e,t,n)=>{"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}n.d(t,{Z:()=>r})},3066:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return"string"===typeof e}},3107:(e,t,n)=>{"use strict";function r(e,t){return"function"===typeof e?e(t):e}n.d(t,{Z:()=>r})},9648:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7462),i=n(3366),o=n(7472),a=n(3637),s=n(3061),l=n(4816);function c(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}var u=n(3107);const h=["elementType","externalSlotProps","ownerState"];function d(e){var t;const{elementType:n,externalSlotProps:d,ownerState:p}=e,f=(0,i.Z)(e,h),m=(0,u.Z)(d,p),{props:g,internalRef:y}=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:o,className:a}=e;if(!t){const e=(0,s.default)(null==o?void 0:o.className,null==i?void 0:i.className,a,null==n?void 0:n.className),t=(0,r.Z)({},null==n?void 0:n.style,null==o?void 0:o.style,null==i?void 0:i.style),l=(0,r.Z)({},n,o,i);return e.length>0&&(l.className=e),Object.keys(t).length>0&&(l.style=t),{props:l,internalRef:void 0}}const u=(0,l.Z)((0,r.Z)({},o,i)),h=c(i),d=c(o),p=t(u),f=(0,s.default)(null==p?void 0:p.className,null==n?void 0:n.className,a,null==o?void 0:o.className,null==i?void 0:i.className),m=(0,r.Z)({},null==p?void 0:p.style,null==n?void 0:n.style,null==o?void 0:o.style,null==i?void 0:i.style),g=(0,r.Z)({},p,n,d,h);return f.length>0&&(g.className=f),Object.keys(m).length>0&&(g.style=m),{props:g,internalRef:p.ref}}((0,r.Z)({},f,{externalSlotProps:m})),v=(0,o.Z)(y,null==m?void 0:m.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,a.Z)(n,(0,r.Z)({},g,{ref:v}),p)}},5211:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},1997:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},5954:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=a},4107:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"}),"ExpandLessOutlined");t.Z=a},7205:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"}),"ExpandMoreOutlined");t.Z=a},2094:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),o=n(6417),a=(0,i.default)((0,o.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.Z=a},5045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(2276)},7176:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(7071)),o=r(n(434)),a=y(n(7313)),s=(r(n(5192)),r(n(3061))),l=n(8479),c=r(n(1287)),u=r(n(1615)),h=r(n(7342)),d=r(n(7592)),p=(r(n(4552)),y(n(1839))),f=n(6417);const m=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"];function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const v=(0,d.default)(c.default,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t["textColor".concat((0,u.default)(n.textColor))],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})((e=>{let{theme:t,ownerState:n}=e;return(0,o.default)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,["& > .".concat(p.default.iconWrapper)]:(0,o.default)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,["&.".concat(p.default.selected)]:{opacity:1},["&.".concat(p.default.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,["&.".concat(p.default.selected)]:{color:(t.vars||t).palette.primary.main},["&.".concat(p.default.disabled)]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,["&.".concat(p.default.selected)]:{color:(t.vars||t).palette.secondary.main},["&.".concat(p.default.disabled)]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})}));var _=a.forwardRef((function(e,t){const n=(0,h.default)({props:e,name:"MuiTab"}),{className:r,disabled:c=!1,disableFocusRipple:d=!1,fullWidth:g,icon:y,iconPosition:_="top",indicator:b,label:x,onChange:w,onClick:S,onFocus:E,selected:A,selectionFollowsFocus:T,textColor:C="inherit",value:k,wrapped:I=!1}=n,P=(0,i.default)(n,m),L=(0,o.default)({},n,{disabled:c,disableFocusRipple:d,selected:A,icon:!!y,iconPosition:_,label:!!x,fullWidth:g,textColor:C,wrapped:I}),M=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:c}=e,h={root:["root",o&&a&&"labelIcon","textColor".concat((0,u.default)(n)),r&&"fullWidth",i&&"wrapped",s&&"selected",c&&"disabled"],iconWrapper:["iconWrapper"]};return(0,l.unstable_composeClasses)(h,p.getTabUtilityClass,t)})(L),O=y&&x&&a.isValidElement(y)?a.cloneElement(y,{className:(0,s.default)(M.iconWrapper,y.props.className)}):y;return(0,f.jsxs)(v,(0,o.default)({focusRipple:!d,className:(0,s.default)(M.root,r),ref:t,role:"tab","aria-selected":A,disabled:c,onClick:e=>{!A&&w&&w(e,k),S&&S(e)},onFocus:e=>{T&&!A&&w&&w(e,k),E&&E(e)},ownerState:L,tabIndex:A?0:-1},P,{children:["top"===_||"start"===_?(0,f.jsxs)(a.Fragment,{children:[O,x]}):(0,f.jsxs)(a.Fragment,{children:[x,O]}),b]}))}));t.Z=_},1839:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getTabUtilityClass=function(e){return(0,o.default)("MuiTab",e)};var i=n(4897),o=r(n(7234));var a=(0,i.unstable_generateUtilityClasses)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]);t.default=a},9994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};t.default=n},2876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={black:"#000",white:"#fff"};t.default=n},3837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=n},9749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};t.default=n},5991:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};t.default=n},9850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};t.default=n},2316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};t.default=n},1293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};t.default=n},9572:(e,t,n)=>{"use strict";n.d(t,{Z:()=>q});var r=n(7462),i=n(3366),o=n(7313),a=n(3061),s=n(1921),l=n(4164),c=n(1236),u=n(2995),h=n(6127),d=n(7464);function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=n(1721),m=n(10);function g(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,o.isValidElement)(e)?t(e):e}(e)})),n}function y(e,t,n){return null!=n[t]?n[t]:e.props[t]}function v(e,t,n){var r=g(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(a){var s=i[a];if((0,o.isValidElement)(s)){var l=a in t,c=a in r,u=t[a],h=(0,o.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,o.isValidElement)(u)&&(i[a]=(0,o.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:y(s,"exit",e),enter:y(s,"enter",e)})):i[a]=(0,o.cloneElement)(s,{in:!1}):i[a]=(0,o.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:y(s,"exit",e),enter:y(s,"enter",e)})}})),i}var _=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},b=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,f.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,g(n.children,(function(e){return(0,o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:y(e,"appear",n),enter:y(e,"enter",n),exit:y(e,"exit",n)})}))):v(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var n=g(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,r.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,i.Z)(e,["component","childFactory"]),a=this.state.contextValue,s=_(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o.createElement(m.Z.Provider,{value:a},s):o.createElement(m.Z.Provider,{value:a},o.createElement(t,r,s))},t}(o.Component);b.propTypes={},b.defaultProps={component:"div",childFactory:function(e){return e}};const x=b;var w=n(686),S=n(6417);const E=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:l,in:c,onExited:u,timeout:h}=e,[d,p]=o.useState(!1),f=(0,a.default)(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:l,height:l,top:-l/2+s,left:-l/2+i},g=(0,a.default)(n.child,d&&n.childLeaving,r&&n.childPulsate);return c||d||p(!0),o.useEffect((()=>{if(!c&&null!=u){const e=setTimeout(u,h);return()=>{clearTimeout(e)}}}),[u,c,h]),(0,S.jsx)("span",{className:f,style:m,children:(0,S.jsx)("span",{className:g})})};var A,T,C,k,I=n(5291);const P=["center","classes","className"];let L,M,O,N;const R=(0,w.F4)(L||(L=A||(A=p(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),D=(0,w.F4)(M||(M=T||(T=p(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),F=(0,w.F4)(O||(O=C||(C=p(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),j=(0,l.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),z=(0,l.ZP)(E,{name:"MuiTouchRipple",slot:"Ripple"})(N||(N=k||(k=p(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),I.Z.rippleVisible,R,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),I.Z.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),I.Z.child,I.Z.childLeaving,D,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),I.Z.childPulsate,F,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),B=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:l={},className:u}=n,h=(0,i.Z)(n,P),[d,p]=o.useState([]),f=o.useRef(0),m=o.useRef(null);o.useEffect((()=>{m.current&&(m.current(),m.current=null)}),[d]);const g=o.useRef(!1),y=o.useRef(null),v=o.useRef(null),_=o.useRef(null);o.useEffect((()=>()=>{clearTimeout(y.current)}),[]);const b=o.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:o}=e;p((e=>[...e,(0,S.jsx)(z,{classes:{ripple:(0,a.default)(l.ripple,I.Z.ripple),rippleVisible:(0,a.default)(l.rippleVisible,I.Z.rippleVisible),ripplePulsate:(0,a.default)(l.ripplePulsate,I.Z.ripplePulsate),child:(0,a.default)(l.child,I.Z.child),childLeaving:(0,a.default)(l.childLeaving,I.Z.childLeaving),childPulsate:(0,a.default)(l.childPulsate,I.Z.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},f.current)])),f.current+=1,m.current=o}),[l]),w=o.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:i=s||t.pulsate,fakeElement:o=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&g.current)return void(g.current=!1);"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);const a=o?null:_.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(i||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(i)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===v.current&&(v.current=()=>{b({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})},y.current=setTimeout((()=>{v.current&&(v.current(),v.current=null)}),80)):b({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[s,b]),E=o.useCallback((()=>{w({},{pulsate:!0})}),[w]),A=o.useCallback(((e,t)=>{if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&v.current)return v.current(),v.current=null,void(y.current=setTimeout((()=>{A(e,t)})));v.current=null,p((e=>e.length>0?e.slice(1):e)),m.current=t}),[]);return o.useImperativeHandle(t,(()=>({pulsate:E,start:w,stop:A})),[E,w,A]),(0,S.jsx)(j,(0,r.Z)({className:(0,a.default)(I.Z.root,l.root,u),ref:_},h,{children:(0,S.jsx)(x,{component:null,exit:!0,children:d})}))}));var U=n(4735);const V=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Z=(0,l.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(U.Z.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),q=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiButtonBase"}),{action:l,centerRipple:p=!1,children:f,className:m,component:g="button",disabled:y=!1,disableRipple:v=!1,disableTouchRipple:_=!1,focusRipple:b=!1,LinkComponent:x="a",onBlur:w,onClick:E,onContextMenu:A,onDragLeave:T,onFocus:C,onFocusVisible:k,onKeyDown:I,onKeyUp:P,onMouseDown:L,onMouseLeave:M,onMouseUp:O,onTouchEnd:N,onTouchMove:R,onTouchStart:D,tabIndex:F=0,TouchRippleProps:j,touchRippleRef:z,type:q}=n,G=(0,i.Z)(n,V),W=o.useRef(null),H=o.useRef(null),X=(0,u.Z)(H,z),{isFocusVisibleRef:K,onFocus:Y,onBlur:J,ref:Q}=(0,d.Z)(),[$,ee]=o.useState(!1);y&&$&&ee(!1),o.useImperativeHandle(l,(()=>({focusVisible:()=>{ee(!0),W.current.focus()}})),[]);const[te,ne]=o.useState(!1);o.useEffect((()=>{ne(!0)}),[]);const re=te&&!v&&!y;function ie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return(0,h.Z)((r=>{t&&t(r);return!n&&H.current&&H.current[e](r),!0}))}o.useEffect((()=>{$&&b&&!v&&te&&H.current.pulsate()}),[v,b,$,te]);const oe=ie("start",L),ae=ie("stop",A),se=ie("stop",T),le=ie("stop",O),ce=ie("stop",(e=>{$&&e.preventDefault(),M&&M(e)})),ue=ie("start",D),he=ie("stop",N),de=ie("stop",R),pe=ie("stop",(e=>{J(e),!1===K.current&&ee(!1),w&&w(e)}),!1),fe=(0,h.Z)((e=>{W.current||(W.current=e.currentTarget),Y(e),!0===K.current&&(ee(!0),k&&k(e)),C&&C(e)})),me=()=>{const e=W.current;return g&&"button"!==g&&!("A"===e.tagName&&e.href)},ge=o.useRef(!1),ye=(0,h.Z)((e=>{b&&!ge.current&&$&&H.current&&" "===e.key&&(ge.current=!0,H.current.stop(e,(()=>{H.current.start(e)}))),e.target===e.currentTarget&&me()&&" "===e.key&&e.preventDefault(),I&&I(e),e.target===e.currentTarget&&me()&&"Enter"===e.key&&!y&&(e.preventDefault(),E&&E(e))})),ve=(0,h.Z)((e=>{b&&" "===e.key&&H.current&&$&&!e.defaultPrevented&&(ge.current=!1,H.current.stop(e,(()=>{H.current.pulsate(e)}))),P&&P(e),E&&e.target===e.currentTarget&&me()&&" "===e.key&&!e.defaultPrevented&&E(e)}));let _e=g;"button"===_e&&(G.href||G.to)&&(_e=x);const be={};"button"===_e?(be.type=void 0===q?"button":q,be.disabled=y):(G.href||G.to||(be.role="button"),y&&(be["aria-disabled"]=y));const xe=(0,u.Z)(t,Q,W);const we=(0,r.Z)({},n,{centerRipple:p,component:g,disabled:y,disableRipple:v,disableTouchRipple:_,focusRipple:b,tabIndex:F,focusVisible:$}),Se=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,s.Z)(o,U.$,i);return n&&r&&(a.root+=" ".concat(r)),a})(we);return(0,S.jsxs)(Z,(0,r.Z)({as:_e,className:(0,a.default)(Se.root,m),ownerState:we,onBlur:pe,onClick:E,onContextMenu:ae,onFocus:fe,onKeyDown:ye,onKeyUp:ve,onMouseDown:oe,onMouseLeave:ce,onMouseUp:le,onDragLeave:se,onTouchEnd:he,onTouchMove:de,onTouchStart:ue,ref:xe,tabIndex:y?-1:F,type:q},be,G,{children:[f,re?(0,S.jsx)(B,(0,r.Z)({ref:X,center:p},j)):null]}))}))},4735:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,Z:()=>a});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiButtonBase",e)}const a=(0,r.Z)("MuiButtonBase",["root","disabled","focusVisible"])},1287:(e,t,n)=>{"use strict";n.r(t),n.d(t,{buttonBaseClasses:()=>i.Z,default:()=>r.Z,getButtonBaseUtilityClass:()=>i.$,getTouchRippleUtilityClass:()=>o.H,touchRippleClasses:()=>o.Z});var r=n(9572),i=n(4735),o=n(5291)},5291:(e,t,n)=>{"use strict";n.d(t,{H:()=>o,Z:()=>a});var r=n(7430),i=n(2298);function o(e){return(0,i.Z)("MuiTouchRipple",e)}const a=(0,r.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"])},2180:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"}},7234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z});var r=n(2298)},3281:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(7462),i=n(3366),o=n(7219),a=n(3019),s=n(7424);function l(e,t){return(0,r.Z)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var c=n(7551);const u={black:"#000",white:"#fff"};var h=n(2180);const d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},f={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},v=["mode","contrastThreshold","tonalOffset"],_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function x(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,i):"dark"===t&&(e.dark=(0,c._j)(e.main,o)))}function w(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2}=e,l=(0,i.Z)(e,v),w=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(t),S=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(t),E=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(t),A=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[700],light:g[500],dark:g[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),C=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[400],light:f[300],dark:f[700]}:{main:"#ed6c02",light:f[500],dark:f[900]}}(t);function k(e){return(0,c.mi)(e,b.text.primary)>=n?b.text.primary:_.text.primary}const I=e=>{let{color:t,name:n,mainShade:i=500,lightShade:a=300,darkShade:l=700}=e;if(t=(0,r.Z)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.Z)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,o.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return x(t,"light",a,s),x(t,"dark",l,s),t.contrastText||(t.contrastText=k(t.main)),t},P={dark:b,light:_};return(0,a.Z)((0,r.Z)({common:(0,r.Z)({},u),mode:t,primary:I({color:w,name:"primary"}),secondary:I({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:E,name:"error"}),warning:I({color:C,name:"warning"}),info:I({color:A,name:"info"}),success:I({color:T,name:"success"}),grey:h.Z,contrastThreshold:n,getContrastText:k,augmentColor:I,tonalOffset:s},P[t]),l)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const E={textTransform:"uppercase"},A='"Roboto", "Helvetica", "Arial", sans-serif';function T(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=A,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:p,pxToRem:f}=n,m=(0,i.Z)(n,S);const g=s/14,y=f||(e=>"".concat(e/d*g,"rem")),v=(e,t,n,i,a)=>{return(0,r.Z)({fontFamily:o,fontWeight:e,fontSize:y(t),lineHeight:n},o===A?{letterSpacing:"".concat((s=i/t,Math.round(1e5*s)/1e5),"em")}:{},a,p);var s},_={h1:v(l,96,1.167,-1.5),h2:v(l,60,1.2,-.5),h3:v(c,48,1.167,0),h4:v(c,34,1.235,.25),h5:v(c,24,1.334,0),h6:v(u,20,1.6,.15),subtitle1:v(c,16,1.75,.15),subtitle2:v(u,14,1.57,.1),body1:v(c,16,1.5,.15),body2:v(c,14,1.43,.15),button:v(u,14,1.75,.4,E),caption:v(c,12,1.66,.4),overline:v(c,12,2.66,1,E)};return(0,a.Z)((0,r.Z)({htmlFontSize:d,pxToRem:y,fontFamily:o,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:h},_),m,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const k=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)];var I=n(4965);const P={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function M(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:c={},typography:u={}}=e,h=(0,i.Z)(e,L);if(e.vars)throw new Error((0,o.Z)(18));const d=w(n),p=(0,s.Z)(e);let f=(0,a.Z)(p,{mixins:l(p.breakpoints,t),palette:d,shadows:k.slice(),typography:T(d,u),transitions:(0,I.ZP)(c),zIndex:(0,r.Z)({},P)});f=(0,a.Z)(f,h);for(var m=arguments.length,g=new Array(m>1?m-1:0),y=1;y<m;y++)g[y-1]=arguments[y];return f=g.reduce(((e,t)=>(0,a.Z)(e,t)),f),f}const O=M},4965:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u,x9:()=>s});var r=n(3366),i=n(7462);const o=["duration","easing","delay"],a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return"".concat(Math.round(e),"ms")}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.Z)({},a,e.easing),n=(0,i.Z)({},s,e.duration);return(0,i.Z)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:a=n.standard,easing:s=t.easeInOut,delay:c=0}=i;(0,r.Z)(i,o);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof a?a:l(a)," ").concat(s," ").concat("string"===typeof c?c:l(c)))).join(",")}},e,{easing:t,duration:n})}},3566:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(3281).Z)()},4164:(e,t,n)=>{"use strict";n.d(t,{Dz:()=>a,FO:()=>o,ZP:()=>s});var r=n(6541),i=n(3566);const o=e=>(0,r.x9)(e)&&"classes"!==e,a=r.x9,s=(0,r.ZP)({defaultTheme:i.Z,rootShouldForwardProp:o})},1236:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4614),i=n(3566);function o(e){let{props:t,name:n}=e;return(0,r.Z)({props:t,name:n,defaultTheme:i.Z})}},8170:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(114).Z},5700:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(7462),i=n(7313),o=n(3366),a=n(3061),s=n(1921),l=n(8170),c=n(1236),u=n(4164),h=n(7430),d=n(2298);function p(e){return(0,d.Z)("MuiSvgIcon",e)}(0,h.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(6417);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.Z)(n.color))],t["fontSize".concat((0,l.Z)(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(a=o.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(l=s.pxToRem)?void 0:l.call(s,20))||"1.25rem",medium:(null==(c=t.typography)||null==(u=c.pxToRem)?void 0:u.call(c,24))||"1.5rem",large:(null==(h=t.typography)||null==(d=h.pxToRem)?void 0:d.call(h,35))||"2.1875rem"}[n.fontSize],color:null!=(p=null==(f=(t.vars||t).palette)||null==(m=f[n.color])?void 0:m.main)?p:{action:null==(g=(t.vars||t).palette)||null==(y=g.action)?void 0:y.active,disabled:null==(v=(t.vars||t).palette)||null==(_=v.action)?void 0:_.disabled,inherit:void 0}[n.color]}})),y=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:i,className:u,color:h="inherit",component:d="svg",fontSize:y="medium",htmlColor:v,inheritViewBox:_=!1,titleAccess:b,viewBox:x="0 0 24 24"}=n,w=(0,o.Z)(n,m),S=(0,r.Z)({},n,{color:h,component:d,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:_,viewBox:x}),E={};_||(E.viewBox=x);const A=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&"color".concat((0,l.Z)(t)),"fontSize".concat((0,l.Z)(n))]};return(0,s.Z)(i,p,r)})(S);return(0,f.jsxs)(g,(0,r.Z)({as:d,className:(0,a.default)(A.root,u),focusable:"false",color:v,"aria-hidden":!b||void 0,role:b?"img":void 0,ref:t},E,w,{ownerState:S,children:[i,b?(0,f.jsx)("title",{children:b}):null]}))}));y.muiName="SvgIcon";const v=y;function _(e,t){function n(n,i){return(0,f.jsx)(v,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=v.muiName,i.memo(i.forwardRef(n))}},9492:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(4312).Z},2276:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.Z,createChainedFunction:()=>o,createSvgIcon:()=>a.Z,debounce:()=>s.Z,deprecatedPropType:()=>l,isMuiElement:()=>c.Z,ownerDocument:()=>u.Z,ownerWindow:()=>h.Z,requirePropFactory:()=>d,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>f.Z,unstable_useId:()=>m.Z,unsupportedProp:()=>g,useControlled:()=>y.Z,useEventCallback:()=>v.Z,useForkRef:()=>_.Z,useIsFocusVisible:()=>b.Z});var r=n(1271),i=n(8170);const o=n(4246).Z;var a=n(5700),s=n(9492);const l=n(3503).Z;var c=n(272),u=n(6182),h=n(897);const d=n(422).Z;const p=n(9265).Z;var f=n(9926),m=n(8677);const g=n(8517).Z;var y=n(6716),v=n(6127),_=n(2995),b=n(7464);const x={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},272:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(8436).Z},6182:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(9081).Z},897:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(3282).Z},6716:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(782).Z},9926:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2678).Z},6127:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2780).Z},2995:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(7472).Z},8677:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(3362).Z},7464:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(5669).Z},7534:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)};var i=r(n(434))},4498:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.dark=void 0,t.default=function(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,b=(0,o.default)(e,g),x=e.primary||function(){if("dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light"))return{main:p.default[200],light:p.default[50],dark:p.default[400]};return{main:p.default[700],light:p.default[400],dark:p.default[800]}}(t),w=e.secondary||function(){if("dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light"))return{main:u.default[200],light:u.default[50],dark:u.default[400]};return{main:u.default[500],light:u.default[300],dark:u.default[700]}}(t),S=e.error||function(){if("dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light"))return{main:h.default[500],light:h.default[300],dark:h.default[700]};return{main:h.default[700],light:h.default[400],dark:h.default[800]}}(t),E=e.info||function(){if("dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light"))return{main:f.default[400],light:f.default[300],dark:f.default[700]};return{main:f.default[700],light:f.default[500],dark:f.default[900]}}(t),A=e.success||function(){if("dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light"))return{main:m.default[400],light:m.default[300],dark:m.default[700]};return{main:m.default[800],light:m.default[500],dark:m.default[900]}}(t),T=e.warning||function(){if("dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light"))return{main:d.default[400],light:d.default[300],dark:d.default[700]};return{main:"#ed6c02",light:d.default[500],dark:d.default[900]}}(t);function C(e){return(0,s.getContrastRatio)(e,v.text.primary)>=n?v.text.primary:y.text.primary}const k=e=>{let{color:t,name:n,mainShade:o=500,lightShade:s=300,darkShade:l=700}=e;if(t=(0,i.default)({},t),!t.main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,a.formatMuiErrorMessage)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,a.formatMuiErrorMessage)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return _(t,"light",s,r),_(t,"dark",l,r),t.contrastText||(t.contrastText=C(t.main)),t},I={dark:v,light:y};0;return(0,a.deepmerge)((0,i.default)({common:(0,i.default)({},l.default),mode:t,primary:k({color:x,name:"primary"}),secondary:k({color:w,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:k({color:S,name:"error"}),warning:k({color:T,name:"warning"}),info:k({color:E,name:"info"}),success:k({color:A,name:"success"}),grey:c.default,contrastThreshold:n,getContrastText:C,augmentColor:k,tonalOffset:r},I[t]),b)},t.light=void 0;var i=r(n(434)),o=r(n(7071)),a=n(4897),s=n(3342),l=r(n(2876)),c=r(n(9749)),u=r(n(2316)),h=r(n(1293)),d=r(n(9850)),p=r(n(9994)),f=r(n(5991)),m=r(n(3837));const g=["mode","contrastThreshold","tonalOffset"],y={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:l.default.white,default:l.default.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}};t.light=y;const v={text:{primary:l.default.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:l.default.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,s.lighten)(e.main,i):"dark"===t&&(e.dark=(0,s.darken)(e.main,o)))}t.dark=v},1683:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.createMuiTheme=function(){0;return m(...arguments)},t.default=void 0;var i=r(n(434)),o=r(n(7071)),a=n(4897),s=n(3342),l=(r(n(7234)),r(n(7534))),c=r(n(4498)),u=r(n(9210)),h=r(n(5534)),d=r(n(5829)),p=r(n(9100));const f=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:m={}}=e,g=(0,o.default)(e,f);if(e.vars)throw new Error((0,a.formatMuiErrorMessage)(18));const y=(0,c.default)(n),v=(0,s.createTheme)(e);let _=(0,a.deepmerge)(v,{mixins:(0,l.default)(v.breakpoints,t),palette:y,shadows:h.default.slice(),typography:(0,u.default)(y,m),transitions:(0,d.default)(r),zIndex:(0,i.default)({},p.default)});_=(0,a.deepmerge)(_,g);for(var b=arguments.length,x=new Array(b>1?b-1:0),w=1;w<b;w++)x[w-1]=arguments[w];return _=x.reduce(((e,t)=>(0,a.deepmerge)(e,t)),_),_}var g=m;t.default=g},5829:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.default)({},s,e.easing),n=(0,o.default)({},l,e.duration);return(0,o.default)({getAutoHeightDuration:u,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=n.standard,easing:s=t.easeInOut,delay:l=0}=r;return(0,i.default)(r,a),(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof o?o:c(o)," ").concat(s," ").concat("string"===typeof l?l:c(l)))).join(",")}},e,{easing:t,duration:n})},t.easing=t.duration=void 0;var i=r(n(7071)),o=r(n(434));const a=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"};t.easing=s;const l={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function c(e){return"".concat(Math.round(e),"ms")}function u(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}t.duration=l},9210:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=c,fontSize:u=14,fontWeightLight:h=300,fontWeightRegular:d=400,fontWeightMedium:p=500,fontWeightBold:f=700,htmlFontSize:m=16,allVariants:g,pxToRem:y}=n,v=(0,o.default)(n,s);0;const _=u/14,b=y||(e=>"".concat(e/m*_,"rem")),x=(e,t,n,o,a)=>{return(0,i.default)({fontFamily:r,fontWeight:e,fontSize:b(t),lineHeight:n},r===c?{letterSpacing:"".concat((s=o/t,Math.round(1e5*s)/1e5),"em")}:{},a,g);var s},w={h1:x(h,96,1.167,-1.5),h2:x(h,60,1.2,-.5),h3:x(d,48,1.167,0),h4:x(d,34,1.235,.25),h5:x(d,24,1.334,0),h6:x(p,20,1.6,.15),subtitle1:x(d,16,1.75,.15),subtitle2:x(p,14,1.57,.1),body1:x(d,16,1.5,.15),body2:x(d,14,1.43,.15),button:x(p,14,1.75,.4,l),caption:x(d,12,1.66,.4),overline:x(d,12,2.66,1,l)};return(0,a.deepmerge)((0,i.default)({htmlFontSize:m,pxToRem:b,fontFamily:r,fontSize:u,fontWeightLight:h,fontWeightRegular:d,fontWeightMedium:p,fontWeightBold:f},w),v,{clone:!1})};var i=r(n(434)),o=r(n(7071)),a=n(4897);const s=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const l={textTransform:"uppercase"},c='"Roboto", "Helvetica", "Arial", sans-serif'},2248:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(n(1683)).default)();t.default=i},5534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function n(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var r=["none",n(0,2,1,-1,0,1,1,0,0,1,3,0),n(0,3,1,-2,0,2,2,0,0,1,5,0),n(0,3,3,-2,0,3,4,0,0,1,8,0),n(0,2,4,-1,0,4,5,0,0,1,10,0),n(0,3,5,-1,0,5,8,0,0,1,14,0),n(0,3,5,-1,0,6,10,0,0,1,18,0),n(0,4,5,-2,0,7,10,1,0,2,16,1),n(0,5,5,-3,0,8,10,1,0,3,14,2),n(0,5,6,-3,0,9,12,1,0,3,16,2),n(0,6,6,-3,0,10,14,1,0,4,18,3),n(0,6,7,-4,0,11,15,1,0,4,20,3),n(0,7,8,-4,0,12,17,2,0,5,22,4),n(0,7,8,-4,0,13,19,2,0,5,24,4),n(0,7,9,-4,0,14,21,2,0,5,26,4),n(0,8,9,-5,0,15,22,2,0,6,28,5),n(0,8,10,-5,0,16,24,2,0,6,30,5),n(0,8,11,-5,0,17,26,2,0,6,32,5),n(0,9,11,-5,0,18,28,2,0,7,34,6),n(0,9,12,-6,0,19,29,2,0,7,36,6),n(0,10,13,-6,0,20,31,3,0,8,38,7),n(0,10,13,-6,0,21,33,3,0,8,40,7),n(0,10,14,-6,0,22,35,3,0,8,42,7),n(0,11,14,-7,0,23,36,3,0,9,44,8),n(0,11,15,-7,0,24,38,3,0,9,46,8)];t.default=r},7592:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.slotShouldForwardProp=t.rootShouldForwardProp=t.default=void 0;var i=n(3342),o=r(n(2248));const a=e=>(0,i.shouldForwardProp)(e)&&"classes"!==e;t.rootShouldForwardProp=a;const s=i.shouldForwardProp;t.slotShouldForwardProp=s;var l=(0,i.createStyled)({defaultTheme:o.default,rootShouldForwardProp:a});t.default=l},7342:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{props:t,name:n}=e;return(0,i.useThemeProps)({props:t,name:n,defaultTheme:o.default})};var i=n(3342),o=r(n(2248))},9100:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};t.default=n},1615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4897).unstable_capitalize;t.default=r},4552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4897).unstable_unsupportedProp;t.default=r},5693:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(7313).createContext(null)},201:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7313),i=n(5693);function o(){return r.useContext(i.Z)}},5150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});n(7313);var r=n(686),i=n(6417);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.xB,{styles:o})}},4472:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>b,Co:()=>x});var r=n(7313),i=n(7462),o=n(1816),a=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const s=(0,o.Z)((function(e){return a.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var l=n(6132),c=n(4911),u=n(1086),h=n(5696),d=s,p=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:p},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,c.hC)(t,n,r);(0,h.L)((function(){return(0,c.My)(t,n,r)}));return null};const y=function e(t,n){var o,a,s=t.__emotion_real===t,h=s&&t.__emotion_base||t;void 0!==n&&(o=n.label,a=n.target);var d=m(t,n,s),p=d||f(h),y=!p("as");return function(){var v=arguments,_=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&_.push("label:"+o+";"),null==v[0]||void 0===v[0].raw)_.push.apply(_,v);else{0,_.push(v[0][0]);for(var b=v.length,x=1;x<b;x++)_.push(v[x],v[0][x])}var w=(0,l.w)((function(e,t,n){var i=y&&e.as||h,o="",s=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=(0,r.useContext)(l.T)}"string"===typeof e.className?o=(0,c.fp)(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var b=(0,u.O)(_.concat(s),t.registered,m);o+=t.key+"-"+b.name,void 0!==a&&(o+=" "+a);var x=y&&void 0===d?f(i):p,w={};for(var S in e)y&&"as"===S||x(S)&&(w[S]=e[S]);return w.className=o,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(g,{cache:t,serialized:b,isStringTag:"string"===typeof i}),(0,r.createElement)(i,w))}));return w.displayName=void 0!==o?o:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=h,w.__emotion_styles=_,w.__emotion_forwardProp=d,Object.defineProperty(w,"toString",{value:function(){return"."+a}}),w.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:m(w,r,!0)})).apply(void 0,_)},w}};var v=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));const _=v;function b(e,t){return _(e,t)}const x=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7158:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>l,E0:()=>v,SK:()=>f,Vv:()=>y,XY:()=>m,ZP:()=>_,h$:()=>h,j1:()=>c,sc:()=>d,tv:()=>p,vQ:()=>u,vS:()=>g});var r=n(6428),i=n(7702),o=n(6886),a=n(4929);function s(e){return"number"!==typeof e?e:"".concat(e,"px solid")}const l=(0,r.Z)({prop:"border",themeKey:"borders",transform:s}),c=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:s}),u=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:s}),h=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:s}),d=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:s}),p=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),f=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),v=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,o.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,o.NA)(t,e)});return(0,a.k9)(e,e.borderRadius,n)}return null};v.propTypes={},v.filterProps=["borderRadius"];const _=(0,i.Z)(l,c,u,h,d,p,f,m,g,y,v)},4929:(e,t,n)=>{"use strict";n.d(t,{L7:()=>u,P$:()=>d,VO:()=>a,W8:()=>c,ZP:()=>p,dt:()=>h,k9:()=>l});var r=n(7462),i=n(3019),o=n(7330);const a={xs:0,sm:600,md:900,lg:1200,xl:1536},s={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(a[e],"px)")};function l(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||s;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||s;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||a).indexOf(i)){r[e.up(i)]=n(t[i],i)}else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const n=null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return n||{}}function u(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function h(e){const t=c(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const a=[t,...r].reduce(((e,t)=>(0,i.Z)(e,t)),{});return u(Object.keys(t),a)}function d(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let a;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}const p=function(e){const t=t=>{const n=t.theme||{},i=e(t),a=n.breakpoints||s,l=a.keys.reduce(((i,o)=>(t[o]&&((i=i||{})[a.up(o)]=e((0,r.Z)({theme:n},t[o]))),i)),null);return(0,o.Z)(i,l)};return t.propTypes={},t.filterProps=["xs","sm","md","lg","xl",...e.filterProps],t}},7551:(e,t,n)=>{"use strict";n.d(t,{$n:()=>m,Fq:()=>p,H3:()=>h,_4:()=>g,_j:()=>f,mi:()=>d,n8:()=>s,oo:()=>o,tB:()=>a,ve:()=>u,vq:()=>c,wy:()=>l});var r=n(7219);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(o(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));let i,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),i=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:n,values:s,colorSpace:i}}const s=e=>{const t=a(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function l(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function c(e){if(0===e.indexOf("#"))return e;const{values:t}=a(e);return"#".concat(t.map(((e,t)=>function(e){const t=e.toString(16);return 1===t.length?"0".concat(t):t}(3===t?Math.round(255*e):e))).join(""))}function u(e){e=a(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let c="rgb";const u=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),l({type:c,values:u})}function h(e){let t="hsl"===(e=a(e)).type||"hsla"===e.type?a(u(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function d(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function p(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,l(e)}function f(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return l(e)}function m(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return l(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?f(e,t):m(e,t)}},7702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7330);const i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),o=e=>Object.keys(e).reduce(((t,n)=>i[n]?(0,r.Z)(t,i[n](e)):t),{});return o.propTypes={},o.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),o}},4156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(7462),i=n(3366),o=n(7313),a=n(3061),s=n(4472),l=n(3649),c=n(9028),u=n(6728),h=n(6417);const d=["className","component"];function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:p,styleFunctionSx:f=l.Z}=e,m=(0,s.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(f),g=o.forwardRef((function(e,o){const s=(0,u.Z)(t),l=(0,c.Z)(e),{className:f,component:g="div"}=l,y=(0,i.Z)(l,d);return(0,h.jsx)(m,(0,r.Z)({as:g,ref:o,className:(0,a.default)(f,p?p(n):n),theme:s},y))}));return g}},6541:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>w,x9:()=>b,P_:()=>x});var r=n(3366),i=n(7462),o=n(4472),a=n(7424),s=n(114);const l=["variant"];function c(e){return 0===e.length}function u(e){const{variant:t}=e,n=(0,r.Z)(e,l);let i=t||"";return Object.keys(n).sort().forEach((t=>{i+="color"===t?c(i)?e[t]:(0,s.Z)(e[t]):"".concat(c(i)?t:(0,s.Z)(t)).concat((0,s.Z)(e[t].toString()))})),i}var h=n(3649);const d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],p=["theme"],f=["theme"];function m(e){return 0===Object.keys(e).length}function g(e){return"string"===typeof e&&e.charCodeAt(0)>96}const y=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,v=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=u(e.props);r[t]=e.style})),r},_=(e,t,n,r)=>{var i,o;const{ownerState:a={}}=e,s=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{a[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[u(n.props)])})),s};function b(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const x=(0,a.Z)();function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:t=x,rootShouldForwardProp:n=b,slotShouldForwardProp:a=b,styleFunctionSx:s=h.Z}=e,l=e=>{const n=m(e.theme)?t:e.theme;return s((0,i.Z)({},e,{theme:n}))};return l.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.Co)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:c,slot:u,skipVariantsResolver:h,skipSx:x,overridesResolver:w}=s,S=(0,r.Z)(s,d),E=void 0!==h?h:u&&"Root"!==u||!1,A=x||!1;let T;let C=b;"Root"===u?C=n:u?C=a:g(e)&&(C=void 0);const k=(0,o.ZP)(e,(0,i.Z)({shouldForwardProp:C,label:T},S)),I=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];const s=o?o.map((e=>"function"===typeof e&&e.__emotion_real!==e?n=>{let{theme:o}=n,a=(0,r.Z)(n,p);return e((0,i.Z)({theme:m(o)?t:o},a))}:e)):[];let u=e;c&&w&&s.push((e=>{const n=m(e.theme)?t:e.theme,r=y(c,n);if(r){const t={};return Object.entries(r).forEach((r=>{let[o,a]=r;t[o]="function"===typeof a?a((0,i.Z)({},e,{theme:n})):a})),w(e,t)}return null})),c&&!E&&s.push((e=>{const n=m(e.theme)?t:e.theme;return _(e,v(c,n),n,c)})),A||s.push(l);const h=s.length-o.length;if(Array.isArray(e)&&h>0){const t=new Array(h).fill("");u=[...e,...t],u.raw=[...e.raw,...t]}else"function"===typeof e&&e.__emotion_real!==e&&(u=n=>{let{theme:o}=n,a=(0,r.Z)(n,f);return e((0,i.Z)({theme:m(o)?t:o},a))});const d=k(u,...s);return d};return k.withConfig&&(I.withConfig=k.withConfig),I}}},4162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3366),i=n(7462);const o=["values","unit","step"];function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,s=(0,r.Z)(e,o),l=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.Z)({},e,{[t.key]:t.val})),{})})(t),c=Object.keys(l);function u(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function d(e,r){const i=c.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[c[i]]?t[c[i]]:r)-a/100).concat(n,")")}return(0,i.Z)({keys:c,values:l,up:u,down:h,between:d,only:function(e){return c.indexOf(e)+1<c.length?d(e,c[c.indexOf(e)+1]):u(e)},not:function(e){const t=c.indexOf(e);return 0===t?u(c[1]):t===c.length-1?h(c[t]):d(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},s)}},8358:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(6886);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,r.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=0===n.length?[1]:n;return i.map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}},7424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7462),i=n(3366),o=n(3019),a=n(4162),s=n(5821),l=n(8358);const c=["breakpoints","palette","spacing","shape"];const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:u,shape:h={}}=e,d=(0,i.Z)(e,c),p=(0,a.Z)(t),f=(0,l.Z)(u);let m=(0,o.Z)({breakpoints:p,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},n),spacing:f,shape:(0,r.Z)({},s.Z,h)},d);for(var g=arguments.length,y=new Array(g>1?g-1:0),v=1;v<g;v++)y[v-1]=arguments[v];return m=y.reduce(((e,t)=>(0,o.Z)(e,t)),m),m}},5821:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={borderRadius:4}},924:(e,t,n)=>{"use strict";n.d(t,{B:()=>d,FW:()=>f,K$:()=>m,RG:()=>g,SG:()=>s,ZP:()=>_,aN:()=>p,e$:()=>l,fD:()=>v,oI:()=>h,s2:()=>c,t4:()=>u,zI:()=>y});var r=n(6428),i=n(7702),o=n(6886),a=n(4929);const s=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,o.eI)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,o.NA)(t,e)});return(0,a.k9)(e,e.gap,n)}return null};s.propTypes={},s.filterProps=["gap"];const l=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,o.eI)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,o.NA)(t,e)});return(0,a.k9)(e,e.columnGap,n)}return null};l.propTypes={},l.filterProps=["columnGap"];const c=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,o.eI)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,o.NA)(t,e)});return(0,a.k9)(e,e.rowGap,n)}return null};c.propTypes={},c.filterProps=["rowGap"];const u=(0,r.Z)({prop:"gridColumn"}),h=(0,r.Z)({prop:"gridRow"}),d=(0,r.Z)({prop:"gridAutoFlow"}),p=(0,r.Z)({prop:"gridAutoColumns"}),f=(0,r.Z)({prop:"gridAutoRows"}),m=(0,r.Z)({prop:"gridTemplateColumns"}),g=(0,r.Z)({prop:"gridTemplateRows"}),y=(0,r.Z)({prop:"gridTemplateAreas"}),v=(0,r.Z)({prop:"gridArea"}),_=(0,i.Z)(s,l,c,u,h,d,p,f,m,g,y,v)},692:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>h});var r=n(6428),i=n(7702);const o=(0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),a=(0,r.Z)({prop:"display"}),s=(0,r.Z)({prop:"overflow"}),l=(0,r.Z)({prop:"textOverflow"}),c=(0,r.Z)({prop:"visibility"}),u=(0,r.Z)({prop:"whiteSpace"}),h=(0,i.Z)(o,a,s,l,c,u)},4518:(e,t,n)=>{"use strict";n.d(t,{H7:()=>p,Kl:()=>l,Kv:()=>u,Me:()=>a,P_:()=>o,WO:()=>s,ZP:()=>v,cq:()=>c,eY:()=>g,fU:()=>d,i4:()=>f,uk:()=>m,vm:()=>h,zo:()=>y});var r=n(6428),i=n(7702);const o=(0,r.Z)({prop:"flexBasis"}),a=(0,r.Z)({prop:"flexDirection"}),s=(0,r.Z)({prop:"flexWrap"}),l=(0,r.Z)({prop:"justifyContent"}),c=(0,r.Z)({prop:"alignItems"}),u=(0,r.Z)({prop:"alignContent"}),h=(0,r.Z)({prop:"order"}),d=(0,r.Z)({prop:"flex"}),p=(0,r.Z)({prop:"flexGrow"}),f=(0,r.Z)({prop:"flexShrink"}),m=(0,r.Z)({prop:"alignSelf"}),g=(0,r.Z)({prop:"justifyItems"}),y=(0,r.Z)({prop:"justifySelf"}),v=(0,i.Z)(o,a,s,l,c,u,h,d,p,f,m,g,y)},6630:(e,t,n)=>{"use strict";n.d(t,{G$:()=>f,Gc:()=>m,ZP:()=>g});var r=n(7158),i=n(692),o=n(4518),a=n(924),s=n(2694),l=n(6236),c=n(1398),u=n(9341),h=n(6886),d=n(7597);const p={borders:r.ZP.filterProps,display:i.ZP.filterProps,flexbox:o.ZP.filterProps,grid:a.ZP.filterProps,positions:s.ZP.filterProps,palette:l.ZP.filterProps,shadows:c.Z.filterProps,sizing:u.ZP.filterProps,spacing:h.ZP.filterProps,typography:d.ZP.filterProps},f={borders:r.ZP,display:i.ZP,flexbox:o.ZP,grid:a.ZP,positions:s.ZP,palette:l.ZP,shadows:c.Z,sizing:u.ZP,spacing:h.ZP,typography:d.ZP},m=Object.keys(p).reduce(((e,t)=>(p[t].forEach((n=>{e[n]=f[t]})),e)),{});const g=function(e,t,n){const r={[e]:t,theme:n},i=m[e];return i?i(r):{[e]:t}}},3342:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Box:()=>I,Container:()=>xe,GlobalStyles:()=>u.Z,Stack:()=>$e,StyledEngineProvider:()=>l,ThemeProvider:()=>X,Unstable_Grid:()=>Ue,alignContent:()=>m.Kv,alignItems:()=>m.cq,alignSelf:()=>m.uk,alpha:()=>B.Fq,backgroundColor:()=>y.Cz,bgcolor:()=>y.n9,border:()=>h.Cg,borderBottom:()=>h.h$,borderBottomColor:()=>h.vS,borderColor:()=>h.tv,borderLeft:()=>h.sc,borderLeftColor:()=>h.Vv,borderRadius:()=>h.E0,borderRight:()=>h.vQ,borderRightColor:()=>h.XY,borderTop:()=>h.j1,borderTopColor:()=>h.SK,borders:()=>h.ZP,bottom:()=>v.I,boxSizing:()=>b.ix,breakpoints:()=>d.ZP,color:()=>y.$_,colorChannel:()=>B.n8,columnGap:()=>g.e$,compose:()=>p.Z,containerClasses:()=>Ee,createBox:()=>k.Z,createBreakpoints:()=>O.Z,createContainer:()=>be,createGrid:()=>Be,createSpacing:()=>N.Z,createStack:()=>Qe,createStyled:()=>P.ZP,createTheme:()=>M.Z,createUnarySpacing:()=>x.hB,createUnaryUnit:()=>x.eI,css:()=>c.iv,darken:()=>B._j,decomposeColor:()=>B.tB,display:()=>f.ZP,emphasize:()=>B._4,experimental_sx:()=>T,flex:()=>m.fU,flexBasis:()=>m.P_,flexDirection:()=>m.Me,flexGrow:()=>m.H7,flexShrink:()=>m.i4,flexWrap:()=>m.WO,flexbox:()=>m.ZP,fontFamily:()=>S.I8,fontSize:()=>S.JB,fontStyle:()=>S.p_,fontWeight:()=>S.Ue,gap:()=>g.SG,getContainerUtilityClass:()=>Se,getContrastRatio:()=>B.mi,getGridUtilityClass:()=>Ve,getLuminance:()=>B.H3,getPath:()=>w.D,getStackUtilityClass:()=>et,getStyleFromPropValue:()=>x.zO,getThemeProps:()=>F.Z,getValue:()=>x.NA,grid:()=>g.ZP,gridArea:()=>g.fD,gridAutoColumns:()=>g.aN,gridAutoFlow:()=>g.B,gridAutoRows:()=>g.FW,gridClasses:()=>Ge,gridColumn:()=>g.t4,gridRow:()=>g.oI,gridTemplateAreas:()=>g.zI,gridTemplateColumns:()=>g.K$,gridTemplateRows:()=>g.RG,handleBreakpoints:()=>d.k9,height:()=>b.Cb,hexToRgb:()=>B.oo,hslToRgb:()=>B.ve,justifyContent:()=>m.Kl,justifyItems:()=>m.eY,justifySelf:()=>m.zo,keyframes:()=>c.F4,left:()=>v.t$,letterSpacing:()=>S.rX,lighten:()=>B.$n,lineHeight:()=>S.Nv,margin:()=>x.e6,maxHeight:()=>b.kC,maxWidth:()=>b.kk,mergeBreakpointsInOrder:()=>d.dt,minHeight:()=>b.jw,minWidth:()=>b.ih,order:()=>m.vm,padding:()=>x.o3,palette:()=>y.ZP,position:()=>v.FK,positions:()=>v.ZP,recomposeColor:()=>B.wy,rgbToHex:()=>B.vq,right:()=>v.F2,rowGap:()=>g.s2,shadows:()=>_.Z,shape:()=>R.Z,shouldForwardProp:()=>P.x9,sizeHeight:()=>b.Vs,sizeWidth:()=>b.lO,sizing:()=>b.ZP,spacing:()=>x.ZP,stackClasses:()=>tt,style:()=>w.Z,styled:()=>L,systemDefaultTheme:()=>P.P_,textAlign:()=>S.yd,textTransform:()=>S.Qx,top:()=>v.we,typography:()=>S.ZP,typographyVariant:()=>S.HB,unstable_createCssVarsProvider:()=>ce,unstable_createGetCssVar:()=>ue,unstable_createStyleFunctionSx:()=>E.n,unstable_extendSxProp:()=>A.Z,unstable_getThemeValue:()=>C.ZP,unstable_resolveBreakpointValues:()=>d.P$,unstable_styleFunctionSx:()=>E.Z,useTheme:()=>j.Z,useThemeProps:()=>D.Z,useThemeWithoutDefault:()=>z.Z,width:()=>b.bf,zIndex:()=>v.W5});var r=n(7313),i=n(6132),o=n(5296),a=n(6417);const s=(0,o.Z)({key:"css",prepend:!0});function l(e){const{injectFirst:t,children:n}=e;return t?(0,a.jsx)(i.C,{value:s,children:n}):n}var c=n(686),u=n(5150),h=n(7158),d=n(4929),p=n(7702),f=n(692),m=n(4518),g=n(924),y=n(6236),v=n(2694),_=n(1398),b=n(9341),x=n(6886),w=n(6428),S=n(7597),E=n(3649),A=n(9028);const T=function(e){return t=>{let{theme:n}=t;return(0,E.Z)({sx:e,theme:n})}};var C=n(6630),k=n(4156);const I=(0,k.Z)();var P=n(6541);const L=(0,P.ZP)();var M=n(7424),O=n(4162),N=n(8358),R=n(5821),D=n(4614),F=n(4290),j=n(6728),z=n(4976),B=n(7551),U=n(7462),V=n(5693),Z=n(201);const q="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const G=function(e){const{children:t,theme:n}=e,i=(0,Z.Z)(),o=r.useMemo((()=>{const e=null===i?n:function(e,t){if("function"===typeof t)return t(e);return(0,U.Z)({},e,t)}(i,n);return null!=e&&(e[q]=null!==i),e}),[n,i]);return(0,a.jsx)(V.Z.Provider,{value:o,children:t})},W={};function H(e){const t=(0,j.Z)();return(0,a.jsx)(i.T.Provider,{value:"object"===typeof t?t:W,children:e.children})}const X=function(e){const{children:t,theme:n}=e;return(0,a.jsx)(G,{theme:n,children:(0,a.jsx)(H,{children:t})})};var K=n(3366),Y=n(7219),J=n(3019);const Q=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))},$=(e,t)=>{if("number"===typeof t){if(["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t))))return t;return e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:"".concat(t,"px")}return t};function ee(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},a={};var s,l;return s=(e,t,s)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r="--".concat(n?"".concat(n,"-"):"").concat(e.join("-"));Object.assign(i,{[r]:$(e,t)}),Q(o,e,"var(".concat(r,")"),s)}Q(a,e,t,s)},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,o]=t;(!l||l&&!l([...n,i]))&&void 0!==o&&null!==o&&("object"===typeof o&&Object.keys(o).length>0?e(o,[...n,i],Array.isArray(o)?[...r,i]:r):s([...n,i],o,r))}))}(e),{css:i,vars:o,parsedTheme:a}}const te="mode",ne="color-scheme",re="data-color-scheme";function ie(e){if("undefined"!==typeof window&&"system"===e){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}}function oe(e,t){return"light"===e.mode||"system"===e.mode&&"light"===e.systemMode?t("light"):"dark"===e.mode||"system"===e.mode&&"dark"===e.systemMode?t("dark"):void 0}function ae(e,t){if("undefined"===typeof window)return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch(r){}return n||t}function se(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:i,supportedColorSchemes:o=[],modeStorageKey:a=te,colorSchemeStorageKey:s=ne,storageWindow:l=("undefined"===typeof window?void 0:window)}=e,c=o.join(","),[u,h]=r.useState((()=>{const e=ae(a,t),r=ae("".concat(s,"-light"),n),o=ae("".concat(s,"-dark"),i);return{mode:e,systemMode:ie(e),lightColorScheme:r,darkColorScheme:o}})),d=function(e){return oe(e,(t=>"light"===t?e.lightColorScheme:"dark"===t?e.darkColorScheme:void 0))}(u),p=r.useCallback((e=>{h((n=>{if(e===n.mode)return n;const r=e||t;try{localStorage.setItem(a,r)}catch(i){}return(0,U.Z)({},n,{mode:r,systemMode:ie(r)})}))}),[a,t]),f=r.useCallback((e=>{e?"string"===typeof e?e&&!c.includes(e)?console.error("`".concat(e,"` does not exist in `theme.colorSchemes`.")):h((t=>{const n=(0,U.Z)({},t);return oe(t,(t=>{try{localStorage.setItem("".concat(s,"-").concat(t),e)}catch(r){}"light"===t&&(n.lightColorScheme=e),"dark"===t&&(n.darkColorScheme=e)})),n})):h((t=>{const r=(0,U.Z)({},t),o=null===e.light?n:e.light,a=null===e.dark?i:e.dark;if(o)if(c.includes(o)){r.lightColorScheme=o;try{localStorage.setItem("".concat(s,"-light"),o)}catch(l){}}else console.error("`".concat(o,"` does not exist in `theme.colorSchemes`."));if(a)if(c.includes(a)){r.darkColorScheme=a;try{localStorage.setItem("".concat(s,"-dark"),a)}catch(l){}}else console.error("`".concat(a,"` does not exist in `theme.colorSchemes`."));return r})):h((e=>{try{localStorage.setItem("".concat(s,"-light"),n),localStorage.setItem("".concat(s,"-dark"),i)}catch(t){}return(0,U.Z)({},e,{lightColorScheme:n,darkColorScheme:i})}))}),[c,s,n,i]),m=r.useCallback((e=>{"system"===u.mode&&h((t=>(0,U.Z)({},t,{systemMode:null!=e&&e.matches?"dark":"light"})))}),[u.mode]),g=r.useRef(m);return g.current=m,r.useEffect((()=>{const e=function(){return g.current(...arguments)},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(e),e(t),()=>t.removeListener(e)}),[]),r.useEffect((()=>{const e=e=>{const n=e.newValue;"string"!==typeof e.key||!e.key.startsWith(s)||n&&!c.match(n)||(e.key.endsWith("light")&&f({light:n}),e.key.endsWith("dark")&&f({dark:n})),e.key!==a||n&&!["light","dark","system"].includes(n)||p(n||t)};if(l)return l.addEventListener("storage",e),()=>l.removeEventListener("storage",e)}),[f,p,a,s,c,t,l]),(0,U.Z)({},u,{colorScheme:d,setMode:p,setColorScheme:f})}const le=["colorSchemes","components","cssVarPrefix"];function ce(e){const{theme:t={},attribute:n=re,modeStorageKey:i=te,colorSchemeStorageKey:o=ne,defaultMode:s="light",defaultColorScheme:l,disableTransitionOnChange:c=!1,shouldSkipGeneratingVar:h,resolveTheme:d,excludeVariablesFromRoot:p}=e;(!t.colorSchemes||"string"===typeof l&&!t.colorSchemes[l]||"object"===typeof l&&!t.colorSchemes[null==l?void 0:l.light]||"object"===typeof l&&!t.colorSchemes[null==l?void 0:l.dark])&&console.error("MUI: `".concat(l,"` does not exist in `theme.colorSchemes`."));const f=r.createContext(void 0);const m="string"===typeof l?l:l.light,g="string"===typeof l?l:l.dark;return{CssVarsProvider:function(e){let{children:m,theme:g=t,modeStorageKey:y=i,colorSchemeStorageKey:v=o,attribute:_=n,defaultMode:b=s,defaultColorScheme:x=l,disableTransitionOnChange:w=c,storageWindow:S=("undefined"===typeof window?void 0:window),documentNode:E=("undefined"===typeof document?void 0:document),colorSchemeNode:A=("undefined"===typeof document?void 0:document.documentElement),colorSchemeSelector:T=":root",shouldSkipGeneratingVar:C=h}=e;const k=r.useRef(!1),{colorSchemes:I={},components:P={},cssVarPrefix:L}=g,M=(0,K.Z)(g,le),O=Object.keys(I),N="string"===typeof x?x:x.light,R="string"===typeof x?x:x.dark,{mode:D,setMode:F,systemMode:j,lightColorScheme:z,darkColorScheme:B,colorScheme:V,setColorScheme:Z}=se({supportedColorSchemes:O,defaultLightColorScheme:N,defaultDarkColorScheme:R,modeStorageKey:y,colorSchemeStorageKey:v,defaultMode:b,storageWindow:S}),q=V||("dark"===(D||("system"===b?s:b))?R:N),{css:G,vars:W,parsedTheme:H}=ee(M,{prefix:L,shouldSkipGeneratingVar:C});let Y=(0,U.Z)({},H,{components:P,colorSchemes:I,cssVarPrefix:L,vars:W,getColorSchemeSelector:e=>"[".concat(_,'="').concat(e,'"] &')});const Q={},$={};Object.entries(I).forEach((e=>{let[t,n]=e;const{css:r,vars:i,parsedTheme:o}=ee(n,{prefix:L,shouldSkipGeneratingVar:C});Y.vars=(0,J.Z)(Y.vars,i),t===q&&(Y=(0,U.Z)({},Y,o),Y.palette&&(Y.palette.colorScheme=t));if(t===("string"===typeof x?x:"dark"===b?x.dark:x.light)){if(p){const e={};p(L).forEach((t=>{e[t]=r[t],delete r[t]})),Q["[".concat(_,'="').concat(t,'"]')]=e}Q["".concat(T,", [").concat(_,'="').concat(t,'"]')]=r}else $["".concat(":root"===T?"":T,"[").concat(_,'="').concat(t,'"]')]=r})),r.useEffect((()=>{V&&A&&A.setAttribute(_,V)}),[V,_,A]),r.useEffect((()=>{let e;if(w&&k.current&&E){const t=E.createElement("style");t.appendChild(E.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),E.head.appendChild(t),window.getComputedStyle(E.body),e=setTimeout((()=>{E.head.removeChild(t)}),1)}return()=>{clearTimeout(e)}}),[V,w,E]),r.useEffect((()=>(k.current=!0,()=>{k.current=!1})),[]);const te=r.useMemo((()=>({mode:D,systemMode:j,setMode:F,lightColorScheme:z,darkColorScheme:B,colorScheme:V,setColorScheme:Z,allColorSchemes:O})),[O,V,B,z,D,Z,F,j]);return(0,a.jsxs)(f.Provider,{value:te,children:[(0,a.jsx)(u.Z,{styles:{[T]:G}}),(0,a.jsx)(u.Z,{styles:Q}),(0,a.jsx)(u.Z,{styles:$}),(0,a.jsx)(X,{theme:d?d(Y):Y,children:m})]})},useColorScheme:()=>{const e=r.useContext(f);if(!e)throw new Error((0,Y.Z)(19));return e},getInitColorSchemeScript:e=>function(e){const{defaultMode:t="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=te,colorSchemeStorageKey:o=ne,attribute:s=re,colorSchemeNode:l="document.documentElement"}=e||{};return(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:"(function() { try {\n        var mode = localStorage.getItem('".concat(i,"') || '").concat(t,"';\n        var cssColorScheme = mode;\n        var colorScheme = '';\n        if (mode === 'system') {\n          // handle system mode\n          var mql = window.matchMedia('(prefers-color-scheme: dark)');\n          if (mql.matches) {\n            cssColorScheme = 'dark';\n            colorScheme = localStorage.getItem('").concat(o,"-dark') || '").concat(r,"';\n          } else {\n            cssColorScheme = 'light';\n            colorScheme = localStorage.getItem('").concat(o,"-light') || '").concat(n,"';\n          }\n        }\n        if (mode === 'light') {\n          colorScheme = localStorage.getItem('").concat(o,"-light') || '").concat(n,"';\n        }\n        if (mode === 'dark') {\n          colorScheme = localStorage.getItem('").concat(o,"-dark') || '").concat(r,"';\n        }\n        if (colorScheme) {\n          ").concat(l,".setAttribute('").concat(s,"', colorScheme);\n        }\n      } catch (e) {} })();")}})}((0,U.Z)({attribute:n,colorSchemeStorageKey:o,defaultMode:s,defaultLightColorScheme:m,defaultDarkColorScheme:g,modeStorageKey:i},e))}}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))/)?", ".concat(o):", var(--".concat(e?"".concat(e,"-"):"").concat(o).concat(t(...r.slice(1)),")")}const n=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return"var(--".concat(e?"".concat(e,"-"):"").concat(n).concat(t(...i),")")};return n}var he=n(3061),de=n(114),pe=n(2298),fe=n(1921);const me=["className","component","disableGutters","fixed","maxWidth","classes"],ge=(0,M.Z)(),ye=L("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,de.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),ve=e=>(0,D.Z)({props:e,name:"MuiContainer",defaultTheme:ge}),_e=(e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,a={root:["root",o&&"maxWidth".concat((0,de.Z)(String(o))),r&&"fixed",i&&"disableGutters"]};return(0,fe.Z)(a,(e=>(0,pe.Z)(t,e)),n)};function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=ye,useThemeProps:n=ve,componentName:i="MuiContainer"}=e,o=t((e=>{let{theme:t,ownerState:n}=e;return(0,U.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(i).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,U.Z)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})})),s=r.forwardRef((function(e,t){const r=n(e),{className:s,component:l="div",disableGutters:c=!1,fixed:u=!1,maxWidth:h="lg"}=r,d=(0,K.Z)(r,me),p=(0,U.Z)({},r,{component:l,disableGutters:c,fixed:u,maxWidth:h}),f=_e(p,i);return(0,a.jsx)(o,(0,U.Z)({as:l,ownerState:p,className:(0,he.default)(f.root,s),ref:t},d))}));return s}const xe=be();var we=n(7430);function Se(e){return(0,pe.Z)("MuiContainer",e)}const Ee=(0,we.Z)("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]),Ae=(e,t,n)=>{const r=e.keys[0];if(Array.isArray(t))t.forEach(((t,r)=>{n(((t,n)=>{r<=e.keys.length-1&&(0===r?Object.assign(t,n):t[e.up(e.keys[r])]=n)}),t)}));else if(t&&"object"===typeof t){(Object.keys(t).length>e.keys.length?e.keys:Object.keys(t)).forEach((i=>{if(-1!==e.keys.indexOf(i)){const o=t[i];void 0!==o&&n(((t,n)=>{r===i?Object.assign(t,n):t[e.up(i)]=n}),o)}}))}else"number"!==typeof t&&"string"!==typeof t||n(((e,t)=>{Object.assign(e,t)}),t)},Te=e=>{let{theme:t,ownerState:n}=e;const r={};return Ae(t.breakpoints,n.gridSize,((e,t)=>{let i={};!0===t&&(i={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"===typeof t&&(i={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(t," / var(--Grid-columns)").concat(n.nested&&n.container?" + var(--Grid-columnSpacing)":"",")")}),e(r,i)})),r},Ce=e=>{let{theme:t,ownerState:n}=e;const r={};return Ae(t.breakpoints,n.gridOffset,((e,t)=>{let n={};"auto"===t&&(n={marginLeft:"auto"}),"number"===typeof t&&(n={marginLeft:0===t?"0px":"calc(100% * ".concat(t," / var(--Grid-columns))")}),e(r,n)})),r},ke=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={"--Grid-columns":12};return Ae(t.breakpoints,n.columns,((e,t)=>{e(r,{"--Grid-columns":t})})),r},Ie=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return Ae(t.breakpoints,n.rowSpacing,((e,n)=>{var i;e(r,{"--Grid-rowSpacing":"string"===typeof n?n:null==(i=t.spacing)?void 0:i.call(t,n)})})),r},Pe=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return Ae(t.breakpoints,n.columnSpacing,((e,n)=>{var i;e(r,{"--Grid-columnSpacing":"string"===typeof n?n:null==(i=t.spacing)?void 0:i.call(t,n)})})),r},Le=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return Ae(t.breakpoints,n.direction,((e,t)=>{e(r,{flexDirection:t})})),r},Me=e=>{let{ownerState:t}=e;return(0,U.Z)({minWidth:0,boxSizing:"border-box"},t.container?(0,U.Z)({display:"flex",flexWrap:"wrap"},t.wrap&&"wrap"!==t.wrap&&{flexWrap:t.wrap},{margin:"calc(var(--Grid-rowSpacing) / -2) calc(var(--Grid-columnSpacing) / -2)"},t.disableEqualOverflow&&{margin:"calc(var(--Grid-rowSpacing) * -1) 0px 0px calc(var(--Grid-columnSpacing) * -1)"},t.nested?(0,U.Z)({padding:"calc(var(--Grid-nested-rowSpacing) / 2) calc(var(--Grid-nested-columnSpacing) / 2)"},(t.disableEqualOverflow||t.parentDisableEqualOverflow)&&{padding:"calc(var(--Grid-nested-rowSpacing)) 0px 0px calc(var(--Grid-nested-columnSpacing))"}):{"--Grid-nested-rowSpacing":"var(--Grid-rowSpacing)","--Grid-nested-columnSpacing":"var(--Grid-columnSpacing)"}):(0,U.Z)({padding:"calc(var(--Grid-rowSpacing) / 2) calc(var(--Grid-columnSpacing) / 2)"},t.disableEqualOverflow&&{padding:"calc(var(--Grid-rowSpacing)) 0px 0px calc(var(--Grid-columnSpacing))"}))},Oe=e=>{const t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;!1!==r&&void 0!==r&&t.push("grid-".concat(n,"-").concat(String(r)))})),t},Ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function n(e){return void 0!==e&&("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e&&e>0)}if(n(e))return["spacing-".concat(t,"-").concat(String(e))];if("object"===typeof e&&!Array.isArray(e)){const t=[];return Object.entries(e).forEach((e=>{let[r,i]=e;n(i)&&t.push("spacing-".concat(r,"-").concat(String(i)))})),t}return[]},Re=e=>void 0===e?[]:"object"===typeof e?Object.entries(e).map((e=>{let[t,n]=e;return"direction-".concat(t,"-").concat(n)})):["direction-xs-".concat(String(e))],De=["className","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow"],Fe=(0,M.Z)(),je=L("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function ze(e){return(0,D.Z)({props:e,name:"MuiGrid",defaultTheme:Fe})}function Be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=je,useThemeProps:n=ze,componentName:i="MuiGrid"}=e,o=r.createContext(!1),s=r.createContext(void 0),l=(e,t)=>{const{container:n,direction:r,spacing:o,wrap:a,gridSize:s}=e,l={root:["root",n&&"container","wrap"!==a&&"wrap-xs-".concat(String(a)),...Re(r),...Oe(s),...n?Ne(o,t.breakpoints.keys[0]):[]]};return(0,fe.Z)(l,(e=>(0,pe.Z)(i,e)),{})},c=t(ke,Pe,Ie,Te,Le,Me,Ce),u=r.forwardRef((function(e,t){var i,u,h,d,p,f,m,g;const y=(0,j.Z)(),v=n(e),_=(0,A.Z)(v),b=r.useContext(o),x=r.useContext(s),{className:w,columns:S=12,container:E=!1,component:T="div",direction:C="row",wrap:k="wrap",spacing:I=0,rowSpacing:P=I,columnSpacing:L=I,disableEqualOverflow:M}=_,O=(0,K.Z)(_,De);let N=M;b&&void 0!==M&&(N=e.disableEqualOverflow);const R={},D={},F={};Object.entries(O).forEach((e=>{let[t,n]=e;void 0!==y.breakpoints.values[t]?R[t]=n:void 0!==y.breakpoints.values[t.replace("Offset","")]?D[t.replace("Offset","")]=n:F[t]=n}));const z=null!=(i=e.columns)?i:b?void 0:S,B=null!=(u=e.spacing)?u:b?void 0:I,V=null!=(h=null!=(d=e.rowSpacing)?d:e.spacing)?h:b?void 0:P,Z=null!=(p=null!=(f=e.columnSpacing)?f:e.spacing)?p:b?void 0:L,q=(0,U.Z)({},_,{nested:b,columns:z,container:E,direction:C,wrap:k,spacing:B,rowSpacing:V,columnSpacing:Z,gridSize:R,gridOffset:D,disableEqualOverflow:null!=(m=null!=(g=N)?g:x)&&m,parentDisableEqualOverflow:x}),G=l(q,y);let W=(0,a.jsx)(c,(0,U.Z)({ref:t,as:T,ownerState:q,className:(0,he.default)(G.root,w)},F));return b||(W=(0,a.jsx)(o.Provider,{value:!0,children:W})),void 0!==N&&N!==(null!=x&&x)&&(W=(0,a.jsx)(s.Provider,{value:N,children:W})),W}));return u}const Ue=Be();function Ve(e){return(0,pe.Z)("MuiGrid",e)}const Ze=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],qe=(0,we.Z)("MuiGrid",["root","container","item",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...Ze.map((e=>"grid-xs-".concat(e))),...Ze.map((e=>"grid-sm-".concat(e))),...Ze.map((e=>"grid-md-".concat(e))),...Ze.map((e=>"grid-lg-".concat(e))),...Ze.map((e=>"grid-xl-".concat(e)))]),Ge=qe,We=["component","direction","spacing","divider","children","className"],He=(0,M.Z)(),Xe=L("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Ke(e){return(0,D.Z)({props:e,name:"MuiStack",defaultTheme:He})}function Ye(e,t){const n=r.Children.toArray(e).filter(Boolean);return n.reduce(((e,i,o)=>(e.push(i),o<n.length-1&&e.push(r.cloneElement(t,{key:"separator-".concat(o)})),e)),[])}const Je=e=>{let{ownerState:t,theme:n}=e,r=(0,U.Z)({display:"flex",flexDirection:"column"},(0,d.k9)({theme:n},(0,d.P$)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,x.hB)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,d.P$)({values:t.direction,base:i}),a=(0,d.P$)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const s=(n,r)=>{return{"& > :not(style) + :not(style)":{margin:0,["margin".concat((i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,x.NA)(e,n)}};var i};r=(0,J.Z)(r,(0,d.k9)({theme:n},a,s))}return r=(0,d.dt)(n.breakpoints,r),r};function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=Xe,useThemeProps:n=Ke,componentName:i="MuiStack"}=e,o=()=>(0,fe.Z)({root:["root"]},(e=>(0,pe.Z)(i,e)),{}),s=t(Je),l=r.forwardRef((function(e,t){const r=n(e),i=(0,A.Z)(r),{component:l="div",direction:c="column",spacing:u=0,divider:h,children:d,className:p}=i,f=(0,K.Z)(i,We),m={direction:c,spacing:u},g=o();return(0,a.jsx)(s,(0,U.Z)({as:l,ownerState:m,ref:t,className:(0,he.default)(g.root,p)},f,{children:h?Ye(d,h):d}))}));return l}const $e=Qe();function et(e){return(0,pe.Z)("MuiStack",e)}const tt=(0,we.Z)("MuiStack",["root"])},7330:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3019);const i=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},6236:(e,t,n)=>{"use strict";n.d(t,{$_:()=>a,Cz:()=>l,ZP:()=>c,n9:()=>s});var r=n(6428),i=n(7702);function o(e,t){return"grey"===t?t:e}const a=(0,r.Z)({prop:"color",themeKey:"palette",transform:o}),s=(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:o}),l=(0,r.Z)({prop:"backgroundColor",themeKey:"palette",transform:o}),c=(0,i.Z)(a,s,l)},2694:(e,t,n)=>{"use strict";n.d(t,{F2:()=>l,FK:()=>o,I:()=>c,W5:()=>a,ZP:()=>h,t$:()=>u,we:()=>s});var r=n(6428),i=n(7702);const o=(0,r.Z)({prop:"position"}),a=(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),s=(0,r.Z)({prop:"top"}),l=(0,r.Z)({prop:"right"}),c=(0,r.Z)({prop:"bottom"}),u=(0,r.Z)({prop:"left"}),h=(0,i.Z)(o,a,s,l,c,u)},1398:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(6428).Z)({prop:"boxShadow",themeKey:"shadows"})},9341:(e,t,n)=>{"use strict";n.d(t,{Cb:()=>u,Vs:()=>f,ZP:()=>g,bf:()=>s,ih:()=>c,ix:()=>m,jw:()=>d,kC:()=>h,kk:()=>l,lO:()=>p});var r=n(6428),i=n(7702),o=n(4929);function a(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const s=(0,r.Z)({prop:"width",transform:a}),l=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||o.VO[t]||a(t)}};return(0,o.k9)(e,e.maxWidth,t)}return null};l.filterProps=["maxWidth"];const c=(0,r.Z)({prop:"minWidth",transform:a}),u=(0,r.Z)({prop:"height",transform:a}),h=(0,r.Z)({prop:"maxHeight",transform:a}),d=(0,r.Z)({prop:"minHeight",transform:a}),p=(0,r.Z)({prop:"size",cssProperty:"width",transform:a}),f=(0,r.Z)({prop:"size",cssProperty:"height",transform:a}),m=(0,r.Z)({prop:"boxSizing"}),g=(0,i.Z)(s,l,c,u,h,d,m)},6886:(e,t,n)=>{"use strict";n.d(t,{hB:()=>f,eI:()=>p,ZP:()=>x,zO:()=>g,NA:()=>m,e6:()=>v,o3:()=>_});var r=n(4929),i=n(6428),o=n(7330);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=a[t],i=s[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function p(e,t,n,r){var o;const a=null!=(o=(0,i.D)(e,t,!1))?o:n;return"number"===typeof a?e=>"string"===typeof e?e:a*e:Array.isArray(a)?e=>"string"===typeof e?e:a[e]:"function"===typeof a?a:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}function y(e,t){const n=f(e.theme);return Object.keys(e).map((i=>function(e,t,n,i){if(-1===t.indexOf(n))return null;const o=g(c(n),i),a=e[n];return(0,r.k9)(e,a,o)}(e,t,i,n))).reduce(o.Z,{})}function v(e){return y(e,u)}function _(e){return y(e,h)}function b(e){return y(e,d)}v.propTypes={},v.filterProps=u,_.propTypes={},_.filterProps=h,b.propTypes={},b.filterProps=d;const x=b},6428:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,Z:()=>s});var r=n(114),i=n(4929);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function a(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,s)||{};return(0,i.k9)(e,c,(e=>{let i=a(u,l,e);return e===i&&"string"===typeof e&&(i=a(u,l,"".concat(t).concat("default"===e?"":(0,r.Z)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},9028:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7462),i=n(3366),o=n(3019),a=n(6630);const s=["sx"];function l(e){const{sx:t}=e,n=(0,i.Z)(e,s),{systemProps:l,otherProps:c}=(e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((n=>{a.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t})(n);let u;return u=Array.isArray(t)?[l,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.P)(e)?(0,r.Z)({},l,e):l}:(0,r.Z)({},l,t),(0,r.Z)({},c,{sx:u})}},3649:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,n:()=>l});var r=n(7330),i=n(6630),o=n(4929);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}function s(e,t){return"function"===typeof e?e(t):e}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.G$;const t=Object.keys(e).reduce(((t,n)=>(e[n].filterProps.forEach((r=>{t[r]=e[n]})),t)),{});function n(e,n,r){const i={[e]:n,theme:r},o=t[e];return o?o(i):{[e]:n}}function l(e){const{sx:i,theme:c={}}=e||{};if(!i)return null;function u(e){let i=e;if("function"===typeof e)i=e(c);else if("object"!==typeof e)return e;if(!i)return null;const u=(0,o.W8)(c.breakpoints),h=Object.keys(u);let d=u;return Object.keys(i).forEach((e=>{const u=s(i[e],c);if(null!==u&&void 0!==u)if("object"===typeof u)if(t[e])d=(0,r.Z)(d,n(e,u,c));else{const t=(0,o.k9)({theme:c},u,(t=>({[e]:t})));a(t,u)?d[e]=l({sx:u,theme:c}):d=(0,r.Z)(d,t)}else d=(0,r.Z)(d,n(e,u,c))})),(0,o.L7)(h,d)}return Array.isArray(i)?i.map(u):u(i)}return l}const c=l();c.filterProps=["sx"];const u=c},7597:(e,t,n)=>{"use strict";n.d(t,{HB:()=>p,I8:()=>o,JB:()=>a,Nv:()=>h,Qx:()=>u,Ue:()=>l,ZP:()=>f,p_:()=>s,rX:()=>c,yd:()=>d});var r=n(6428),i=n(7702);const o=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),a=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),s=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),l=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),c=(0,r.Z)({prop:"letterSpacing"}),u=(0,r.Z)({prop:"textTransform"}),h=(0,r.Z)({prop:"lineHeight"}),d=(0,r.Z)({prop:"textAlign"}),p=(0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),f=(0,i.Z)(p,o,a,s,l,c,h,d,u)},6728:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7424),i=n(4976);const o=(0,r.Z)();const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,i.Z)(e)}},4290:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9023);function i(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}},4614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4290),i=n(6728);function o(e){let{props:t,name:n,defaultTheme:o}=e;const a=(0,i.Z)(o);return(0,r.Z)({theme:a,name:n,props:t})}},4976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(201);function i(e){return 0===Object.keys(e).length}const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=(0,r.Z)();return!t||i(t)?e:t}},1271:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7219);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},1921:(e,t,n)=>{"use strict";function r(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>(r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e)),[]).join(" ")})),r}n.d(t,{Z:()=>r})},4246:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{Z:()=>r})},4312:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];const a=()=>{e.apply(this,i)};clearTimeout(t),t=setTimeout(a,n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{Z:()=>r})},3019:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,Z:()=>o});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=o(e[r],t[r],n):a[r]=t[r])})),a}},3503:(e,t,n)=>{"use strict";function r(e,t){return()=>null}n.d(t,{Z:()=>r})},7219:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:()=>r})},2298:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1271);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?"".concat(n,"-").concat(o):"".concat(r.Z.generate(e),"-").concat(t)}},7430:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2298);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.Z)(e,t,n)})),i}},1194:(e,t,n)=>{"use strict";function r(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}n.d(t,{Z:()=>r})},4897:(e,t,n)=>{"use strict";function r(e,t){return()=>null}n.r(t),n.d(t,{HTMLElementType:()=>v,chainPropTypes:()=>r,deepmerge:()=>i.Z,elementAcceptingRef:()=>l,elementTypeAcceptingRef:()=>c,exactProp:()=>u,formatMuiErrorMessage:()=>h.Z,getDisplayName:()=>y,integerPropType:()=>V,internal_resolveProps:()=>Z.Z,isPlainObject:()=>i.P,ponyfillGlobal:()=>_,refType:()=>b,unstable_ClassNameGenerator:()=>H.Z,unstable_capitalize:()=>x.Z,unstable_composeClasses:()=>q.Z,unstable_createChainedFunction:()=>w.Z,unstable_debounce:()=>S.Z,unstable_deprecatedPropType:()=>E.Z,unstable_detectScrollType:()=>j.E,unstable_generateUtilityClass:()=>G.Z,unstable_generateUtilityClasses:()=>W.Z,unstable_getNormalizedScrollLeft:()=>j.T,unstable_getScrollbarSize:()=>F.Z,unstable_isMuiElement:()=>A.Z,unstable_ownerDocument:()=>T.Z,unstable_ownerWindow:()=>C.Z,unstable_requirePropFactory:()=>k.Z,unstable_setRef:()=>I.Z,unstable_unsupportedProp:()=>M.Z,unstable_useControlled:()=>O.Z,unstable_useEnhancedEffect:()=>P.Z,unstable_useEventCallback:()=>N.Z,unstable_useForkRef:()=>R.Z,unstable_useId:()=>L.Z,unstable_useIsFocusVisible:()=>D.Z,usePreviousProps:()=>z.Z,visuallyHidden:()=>B.Z});var i=n(3019),o=n(5192),a=n.n(o);const s=(a().element,()=>null);s.isRequired=(a().element.isRequired,()=>null);const l=s;const c=(a().elementType,()=>null);n(7462);function u(e){return e}var h=n(7219),d=n(6214);const p=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function f(e){const t="".concat(e).match(p);return t&&t[1]||""}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||f(e)||t}function g(e,t,n){const r=m(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function y(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return m(e,"Component");if("object"===typeof e)switch(e.$$typeof){case d.ForwardRef:return g(e,e.render,"ForwardRef");case d.Memo:return g(e,e.type,"memo");default:return}}}function v(e,t,n,r,i){return null}const _="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),b=a().oneOfType([a().func,a().object]);var x=n(114),w=n(4246),S=n(4312),E=n(3503),A=n(8436),T=n(9081),C=n(3282),k=n(422),I=n(9265),P=n(2678),L=n(3362),M=n(8517),O=n(782),N=n(2780),R=n(7472),D=n(5669),F=n(1194),j=n(7906),z=n(3961),B=n(282);Number.isInteger;function U(){return null}U.isRequired=U;const V=U;var Z=n(9023),q=n(1921),G=n(2298),W=n(7430),H=n(1271)},8436:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7313);function i(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},9081:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:()=>r})},3282:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9081);function i(e){return(0,r.Z)(e).defaultView||window}},422:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(7462);function r(e,t){return()=>null}},9023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7462);function i(e,t){const n=(0,r.Z)({},t);return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}},7906:(e,t,n)=>{"use strict";let r;function i(){if(r)return r;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),r="reverse",e.scrollLeft>0?r="default":(e.scrollLeft=1,0===e.scrollLeft&&(r="negative")),document.body.removeChild(e),r}function o(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(i()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}n.d(t,{E:()=>i,T:()=>o})},9265:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:()=>r})},8517:(e,t,n)=>{"use strict";function r(e,t,n,r,i){return null}n.d(t,{Z:()=>r})},782:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7313);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:a}=r.useRef(void 0!==t),[s,l]=r.useState(n);return[a?t:s,r.useCallback((e=>{a||l(e)}),[])]}},2678:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7313);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},2780:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7313),i=n(2678);function o(e){const t=r.useRef(e);return(0,i.Z)((()=>{t.current=e})),r.useCallback((function(){return(0,t.current)(...arguments)}),[])}},7472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7313),i=n(9265);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.Z)(t,e)}))}),t)}},3362:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>s});var i=n(7313);let o=0;const a=(r||(r=n.t(i,2))).useId;function s(e){if(void 0!==a){const t=a();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n("mui-".concat(o)))}),[t]),r}(e)}},5669:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7313);let i,o=!0,a=!1;const s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function u(){"hidden"===this.visibilityState&&a&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function d(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,window.clearTimeout(i),i=window.setTimeout((()=>{a=!1}),100),t.current=!1,!0)},ref:e}}},3961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7313);const i=e=>{const t=r.useRef({});return r.useEffect((()=>{t.current=e})),t.current}},282:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"}},9230:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(8522)),o=n(1949);t.default=function(e,t,n){void 0===n&&(n={});for(var r=n.steps||64,a=n.properties?n.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},s=[],l=0;l<r;l++)s.push(i.default(e,t,-360*l/r,n).geometry.coordinates);return s.push(s[0]),o.polygon([s],a)}},8522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1949),i=n(4273);t.default=function(e,t,n,o){void 0===o&&(o={});var a=i.getCoord(e),s=r.degreesToRadians(a[0]),l=r.degreesToRadians(a[1]),c=r.degreesToRadians(n),u=r.lengthToRadians(t,o.units),h=Math.asin(Math.sin(l)*Math.cos(u)+Math.cos(l)*Math.sin(u)*Math.cos(c)),d=s+Math.atan2(Math.sin(c)*Math.sin(u)*Math.cos(l),Math.cos(u)-Math.sin(l)*Math.sin(h)),p=r.radiansToDegrees(d),f=r.radiansToDegrees(h);return r.point([p,f],o.properties)}},1272:(e,t,n)=>{"use strict";var r=n(4273),i=n(1949);t.Z=function(e,t,n){void 0===n&&(n={});var o=r.getCoord(e),a=r.getCoord(t),s=i.degreesToRadians(a[1]-o[1]),l=i.degreesToRadians(a[0]-o[0]),c=i.degreesToRadians(o[1]),u=i.degreesToRadians(a[1]),h=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(c)*Math.cos(u);return i.radiansToLength(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),n.units)}},1949:(e,t)=>{"use strict";function n(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function r(e,t,r){if(void 0===r&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(e[0])||!p(e[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:e},t,r)}function i(e,t,r){void 0===r&&(r={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function o(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function a(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function s(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function c(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function u(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function h(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function d(e){return 180*(e%(2*Math.PI))/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return r(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=r,t.points=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return r(e,t)})),n)},t.polygon=i,t.polygons=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return i(e,t)})),n)},t.lineString=o,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return o(e,t)})),n)},t.featureCollection=a,t.multiLineString=s,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=u,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return d(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(h(e,t),n)},t.convertArea=function(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[n];if(!i)throw new Error("invalid original units");var o=t.areaFactors[r];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!p(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},4273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1949);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=e.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},7538:function(e,t,n){var r;e=n.nmd(e),function(i){var o=t,a=(e&&e.exports,"object"==typeof n.g&&n.g);a.global!==a&&a.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,h={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",s=-1,u=e.length-o;++s<u;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),a+=c.charAt((i=t+n+r)>>18&63)+c.charAt(i>>12&63)+c.charAt(i>>6&63)+c.charAt(63&i);return 2==o?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),a+=c.charAt((i=t+n)>>10)+c.charAt(i>>4&63)+c.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(s),a+=c.charAt(i>>2)+c.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=c.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}()},3061:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>o});const o=i},9739:(e,t,n)=>{"use strict";var r=n(432),i=n(673),o=/(Lat)(itude)?/gi,a=/(L)(on|ng)(gitude)?/i;function s(e,t){var n,r,i;for(var o in e)(r=o.match(t))&&(!n||r[0].length/o.length>i)&&(i=r[0].length/o.length,n=o);return n}function l(e){return s(e,o)}function c(e){return s(e,a)}function u(e){return"object"==typeof e?Object.keys(e).length:0}function h(e){var t=[];return[",",";","\t","|"].forEach((function(n){var i=r.dsvFormat(n).parse(e);if(i.length>=1){for(var o=u(i[0]),a=0;a<i.length;a++)if(u(i[a])!==o)return;t.push({delimiter:n,arity:Object.keys(i[0]).length})}})),t.length?t.sort((function(e,t){return t.arity-e.arity}))[0].delimiter:null}e.exports={isLon:function(e){return!!e.match(a)},isLat:function(e){return!!e.match(o)},guessLatHeader:l,guessLonHeader:c,csv:r.csvParse,tsv:r.tsvParse,dsv:r,auto:function(e){var t=h(e);return t?function(e){return delete e.columns,e}(r.dsvFormat(t).parse(e)):null},csv2geojson:function(e,t,n){n||(n=t,t={}),t.delimiter=t.delimiter||",";var o=t.latfield||"",a=t.lonfield||"",s=t.crs||"",u=[],d={type:"FeatureCollection",features:u};if(""!==s&&(d.crs={type:"name",properties:{name:s}}),"auto"!==t.delimiter||"string"!=typeof e||(t.delimiter=h(e),t.delimiter)){var p=t.numericFields?t.numericFields.split(","):null,f="string"==typeof e?r.dsvFormat(t.delimiter).parse(e,(function(e){if(p)for(var t in e)p.includes(t)&&(e[t]=+e[t]);return e})):e;if(f.length){var m,g=[];if(o||(o=l(f[0])),a||(a=c(f[0])),!o||!a){for(m=0;m<f.length;m++)u.push({type:"Feature",properties:f[m],geometry:null});n(g.length?g:null,d)}else{for(m=0;m<f.length;m++)if(void 0!==f[m][a]&&void 0!==f[m][o]){var y,v,_,b=f[m][a],x=f[m][o];(_=i(b,"EW"))&&(b=_),(_=i(x,"NS"))&&(x=_),y=parseFloat(b),v=parseFloat(x),isNaN(y)||isNaN(v)?g.push({message:"A row contained an invalid value for latitude or longitude",row:f[m],index:m}):(t.includeLatLon||(delete f[m][a],delete f[m][o]),u.push({type:"Feature",properties:f[m],geometry:{type:"Point",coordinates:[parseFloat(y),parseFloat(v)]}}))}n(g.length?g:null,d)}}else n(null,d)}else n({type:"Error",message:"Could not autodetect delimiter"})},toLine:function(e){for(var t=e.features,n={type:"Feature",geometry:{type:"LineString",coordinates:[]}},r=0;r<t.length;r++)n.geometry.coordinates.push(t[r].geometry.coordinates);return n.properties=t.reduce((function(e,t){for(var n in t.properties)e[n]||(e[n]=[]),e[n].push(t.properties[n]);return e}),{}),{type:"FeatureCollection",features:[n]}},toPolygon:function(e){for(var t=e.features,n={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},r=0;r<t.length;r++)n.geometry.coordinates[0].push(t[r].geometry.coordinates);return n.properties=t.reduce((function(e,t){for(var n in t.properties)e[n]||(e[n]=[]),e[n].push(t.properties[n]);return e}),{}),{type:"FeatureCollection",features:[n]}}}},432:(e,t,n)=>{"use strict";function r(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}")}function i(e){var t=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function i(e,t){var r,i,o={},a={},s=[],l=e.length,c=0,u=0;function h(){if(c>=l)return a;if(i)return i=!1,o;var t,r=c;if(34===e.charCodeAt(r)){for(var s=r;s++<l;)if(34===e.charCodeAt(s)){if(34!==e.charCodeAt(s+1))break;++s}return c=s+2,13===(t=e.charCodeAt(s+1))?(i=!0,10===e.charCodeAt(s+2)&&++c):10===t&&(i=!0),e.slice(r+1,s).replace(/""/g,'"')}for(;c<l;){var u=1;if(10===(t=e.charCodeAt(c++)))i=!0;else if(13===t)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(t!==n)continue;return e.slice(r,c-u)}return e.slice(r)}for(;(r=h())!==a;){for(var d=[];r!==o&&r!==a;)d.push(r),r=h();t&&null==(d=t(d,u++))||s.push(d)}return s}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}return{parse:function(e,t){var n,o,a=i(e,(function(e,i){if(n)return n(e,i-1);o=e,n=t?function(e,t){var n=r(e);return function(r,i){return t(n(r),i,e)}}(e,t):r(e)}));return a.columns=o,a},parseRows:i,format:function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}(t)),[n.map(a).join(e)].concat(t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))).join("\n")},formatRows:function(e){return e.map(o).join("\n")}}}n.r(t),n.d(t,{csvFormat:()=>l,csvFormatRows:()=>c,csvParse:()=>a,csvParseRows:()=>s,dsvFormat:()=>i,tsvFormat:()=>p,tsvFormatRows:()=>f,tsvParse:()=>h,tsvParseRows:()=>d});var o=i(","),a=o.parse,s=o.parseRows,l=o.format,c=o.formatRows,u=i("\t"),h=u.parse,d=u.parseRows,p=u.format,f=u.formatRows},548:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},8041:e=>{"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"===typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"===typeof l)r(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1507:e=>{!function(){var t={};e.exports=t,t.simpleFilter=function(e,n){return n.filter((function(n){return t.test(e,n)}))},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var r,i=0,o=[],a=t.length,s=0,l=0,c=n.pre||"",u=n.post||"",h=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var d=0;d<a;d++)r=t[d],h[d]===e[i]?(r=c+r+u,i+=1,l+=1+l):l=0,s+=l,o[o.length]=r;return i===e.length?(s=h===e?1/0:s,{rendered:o.join(""),score:s}):null},t.filter=function(e,n,r){return n&&0!==n.length?"string"!==typeof e?n:(r=r||{},n.reduce((function(n,i,o,a){var s=i;r.extract&&(s=r.extract(i));var l=t.match(e,s,r);return null!=l&&(n[n.length]={string:l.rendered,score:l.score,index:o,original:i}),n}),[]).sort((function(e,t){var n=t.score-e.score;return n||e.index-t.index}))):[]}}()},3993:(e,t,n)=>{"use strict";function r(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,t){return e.concat(r(t))}),[]),e;case"Feature":return e.geometry?r(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):[e];case"MultiPoint":return e.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return e.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return e.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return e.geometries.map(r).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}n.r(t),n.d(t,{default:()=>r})},7861:(e,t,n)=>{"use strict";var r=n(9456),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(n,y);try{c(t,y,v)}catch(_){}}}}return t}},229:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===_||e.$$typeof===b||e.$$typeof===y)},t.typeOf=x},9456:(e,t,n)=>{"use strict";e.exports=n(229)},3181:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n;return"[object Object]"===t.call(e)&&(null===(n=Object.getPrototypeOf(e))||n===Object.getPrototypeOf({}))}},936:(e,t,n)=>{var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function _(e){return c=e,s=setTimeout(x,t),u?v(e):a}function b(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function x(){var e=f();if(b(e))return w(e);s=setTimeout(x,function(e){var n=t-(e-l);return h?p(n,o-(e-c)):n}(e))}function w(e){return s=void 0,y&&r?v(e):(r=i=void 0,a)}function S(){var e=f(),n=b(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return _(l);if(h)return s=setTimeout(x,t),v(l)}return void 0===s&&(s=setTimeout(x,t)),a}return t=g(t)||0,m(n)&&(u=!!n.leading,o=(h="maxWait"in n)?d(g(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},S.flush=function(){return void 0===s?a:w(f())},S}},5056:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),n=i(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(["exports"],(function(e){var t="undefined"!=typeof self?self:{},n="2.14.1";let r;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):e}catch(t){r=e}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const e=new URL(i.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(e){!l&&s&&(c?u(e):a=e)}};let a,s,l=!1,c=!1;function u(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;o.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){a&&u(a),a=null,c=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const h="01";var d=p;function p(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}p.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var f=m;function m(e,t){this.x=e,this.y=t}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(e){return e instanceof m?e:Array.isArray(e)?new m(e[0],e[1]):e};const g=Math.PI/180,y=180/Math.PI;function v(e){return e*g}function _(e){return e*y}const b=[[0,0],[1,0],[1,1],[0,1]];function x(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function w(e,t,n,r){const i=new d(e,t,n,r);return function(e){return i.solve(e)}}const S=w(.25,.1,.25,1);function E(e,t,n){return Math.min(n,Math.max(t,e))}function A(e,t,n){return(n=E((n-e)/(t-e),0,1))*n*(3-2*n)}function T(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function C(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function k(e){const t=[];for(const n in e)t.push(e[n]);return t}function I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)for(const t in i)e[t]=i[t];return e}let P=1;function L(){return P++}function M(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function O(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function N(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function R(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function D(e,t){return-1!==e.indexOf(t,e.length-t.length)}function F(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function j(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function z(e){return Array.isArray(e)?e.map(z):"object"==typeof e&&e?F(e,z):e}const B={};function U(e){B[e]||("undefined"!=typeof console&&console.warn(e),B[e]=!0)}function V(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Z(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function q(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function G(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let W=null;function H(e){if(null==W){const t=e.navigator?e.navigator.userAgent:null;W=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return W}function X(e){try{const n=t[e];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function K(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const Y="mapbox-tiles";let J,Q,$=500,ee=50;function te(){try{return t.caches}catch(e){}}function ne(){te()&&!J&&(J=t.caches.open(Y))}function re(e){const t=e.indexOf("?");if(t<0)return e;const n=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?"".concat(e.slice(0,t),"?").concat(r.join("&")):e.slice(0,t)}let ie=1/0;const oe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(oe);class ae extends Error{constructor(e,t,n){401===t&&ye(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const se=q()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,le=function(e,n){if(!(/^file:/.test(r=e.url)||/^file:/.test(se())&&!/^\w+:/.test(r))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,n){const r=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:se(),referrerPolicy:e.referrerPolicy,signal:r.signal});let o=!1,a=!1;const s=(l=i.url).indexOf("sku=")>0&&ye(l);var l;"json"===e.type&&i.headers.set("Accept","application/json");const c=(r,o,l)=>{if(a)return;if(r&&"SecurityError"!==r.message&&U(r),o&&l)return u(o);const c=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=s?t.clone():null;return u(t,e,c)}return n(new ae(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&n(new Error("".concat(t.message," ").concat(e.url)))}))},u=(r,s,l)=>{("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((e=>{a||(s&&l&&function(e,n,r){if(ne(),!J)return;const i={status:n.status,statusText:n.statusText,headers:new t.Headers};n.headers.forEach(((e,t)=>i.headers.set(t,e)));const o=G(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(e,t){if(void 0===Q)try{new Response(new ReadableStream),Q=!0}catch(e){Q=!1}Q?t(e.body):e.blob().then(t)}(n,(n=>{const r=new t.Response(n,i);ne(),J&&J.then((t=>t.put(re(e.url),r))).catch((e=>U(e.message)))})))}(i,s,l),o=!0,n(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((e=>{a||n(new Error(e.message))}))};return s?function(e,t){if(ne(),!J)return t(null);const n=re(e.url);J.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=G(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,c):c(null,null),{cancel:()=>{a=!0,o||r.abort()}}}(e,n);if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,n,void 0,!0)}var r;return function(e,n){const r=new t.XMLHttpRequest;r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer");for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let t=r.response;if("json"===e.type)try{t=JSON.parse(r.response)}catch(e){return n(e)}n(null,t,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ae(r.statusText,r.status,e.url))},r.send(e.body),{cancel:()=>r.abort()}}(e,n)},ce=function(e,t){return le(I(e,{type:"arrayBuffer"}),t)};function ue(e){const n=t.document.createElement("a");return n.href=e,n.protocol===t.document.location.protocol&&n.host===t.document.location.host}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let de,pe;de=[],pe=0;const fe=function(e,n){if(o.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),pe>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return de.push(t),t}pe++;let r=!1;const a=()=>{if(!r)for(r=!0,pe--;de.length&&pe<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=de.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=fe(t,n).cancel)}},s=ce(e,((e,r,i,o)=>{a(),e?n(e):r&&(t.createImageBitmap?function(e,n){const r=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(r).then((e=>{n(null,e)})).catch((e=>{n(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(r,((e,t)=>n(e,t,i,o))):function(e,n){const r=new t.Image,i=t.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,t.requestAnimationFrame((()=>{r.src=he}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new t.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?i.createObjectURL(o):he}(r,((e,t)=>n(e,t,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},me="NO_ACCESS_TOKEN";function ge(e){return 0===e.indexOf("mapbox:")}function ye(e){return i.API_URL_REGEX.test(e)}function ve(e){return i.API_CDN_URL_REGEX.test(e)}function _e(e){return i.API_STYLE_REGEX.test(e)&&!be(e)}function be(e){return i.API_SPRITE_REGEX.test(e)}const xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(e){const t=e.match(xe);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Se(e){const t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function Ee(e){if(!e)return null;const n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(n[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Ae{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=Ee(i.ACCESS_TOKEN);let r="";return r=n&&n.u?t.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(r):"mapbox.eventData:".concat(r)}fetchEventData(){const e=X("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(n);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(r);i&&(this.anonId=i)}catch(e){U("Unable to read from LocalStorage")}}saveEventData(){const e=X("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(e){U("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,r){if(!i.EVENTS_URL)return;const o=we(i.EVENTS_URL);o.params.push("access_token=".concat(r||i.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(e).toISOString()},s=t?I(a,t):a,l={url:Se(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return le(I(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Te=new class extends Ae{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>ge(e)||ye(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ee(i.ACCESS_TOKEN),r=t?t.u:i.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;N(this.anonId)||(this.anonId=M(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),n=(a-this.eventData.lastSuccess)/864e5;o=o||n>=1||n<-1||e.getDate()!==t.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:h,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),e):this.processRequests()}},Ce=Te.postTurnstileEvent.bind(Te),ke=new class extends Ae{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,i.EVENTS_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(me)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),N(this.anonId)||(this.anonId=M()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:h,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},Ie=ke.postMapLoadEvent.bind(ke),Pe=new class extends Ae{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(e){const r=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),o=function(e){const t={};if(e)for(const n in e)if("other"!==n)for(const r of e[n]){const e="".concat(n,"ResolveRangeMin"),i="".concat(n,"ResolveRangeMax"),o="".concat(n,"RequestCount"),a="".concat(n,"RequestCachedCount");t[e]=Math.min(t[e]||1/0,r.startTime),t[i]=Math.max(t[i]||-1/0,r.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return t}(function(e,t){const n={};if(e)for(const r of e){const e=t(r);void 0===n[e]&&(n[e]=[]),n[e].push(r)}return n}(r,Fe)),a=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,n)=>{null!=n&&e.push({name:t,value:n.toString()})};for(const t in o)c(l.counters,t,o[t]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const t of Object.keys(Re)){const e=Re[t],n=i.find((t=>t.name===e));n&&c(l.counters,e,n.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(_e(e)){const t=e.split("/").slice(-2);if(2===t.length)return"mapbox://styles/".concat(t[0],"/").concat(t[1])}}}(r)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",a),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",t.navigator.userAgent),c(l.metadata,"screenWidth",t.screen.width),c(l.metadata,"screenHeight",t.screen.height),c(l.metadata,"windowWidth",t.innerWidth),c(l.metadata,"windowHeight",t.innerHeight),c(l.metadata,"mapWidth",e.width/a),c(l.metadata,"mapHeight",e.height/a),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",n),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const t of o.metadata);for(const t of o.counters);for(const t of o.attributes);this.postEvent(r,o,(()=>{}),e)}},Le=Pe.postPerformanceEvent.bind(Pe),Me=new class extends Ae{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!i.API_URL||!i.SESSION_PATH)return;const o=we(i.API_URL+i.SESSION_PATH);o.params.push("sku=".concat(t||"")),o.params.push("access_token=".concat(r||i.ACCESS_TOKEN||""));const a={url:Se(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return le(I(e,{method:"GET"}),t)}(a,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,i.SESSION_PATH&&i.API_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(me)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},Oe=Me.getSessionAPI.bind(Me),Ne=new Set,Re={create:"create",load:"load",fullLoad:"fullLoad"},De={mark(e){t.performance.mark(e)},measure(e,n,r){t.performance.measure(e,n,r)}};function Fe(e){const t=e.name.split("?")[0];return ve(t)&&t.includes("mapbox-gl.js")?"javascript":ve(t)&&t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":be(t)?"sprite":_e(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const je=t.performance;function ze(e){const t=e?e.url.toString():void 0;return je.getEntriesByName(t)}let Be,Ue,Ve,Ze;const qe={now:()=>void 0!==Ve?Ve:t.performance.now(),setNow(e){Ve=e},restoreNow(){Ve=void 0},frame(e){const n=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(n)}},getImageData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:r,height:i}=e;Ze||(Ze=t.document.createElement("canvas"));const o=Ze.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>Ze.width||i>Ze.height)&&(Ze.width=r,Ze.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(e,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:e=>(Be||(Be=t.document.createElement("a")),Be.href=e,Be.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==Ue&&(Ue=t.matchMedia("(prefers-reduced-motion: reduce)")),Ue.matches)}};function Ge(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function We(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class He{constructor(e){I(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class Xe extends He{constructor(e){super("error",I({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class Ke{on(e,t){return this._listeners=this._listeners||{},Ge(e,t,this._listeners),this}off(e,t){return We(e,t,this._listeners),We(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Ge(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new He(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)We(n,o,this._oneTimeListeners),o.call(this,e);const i=this._eventedParent;i&&(I(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Xe&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Ye=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Je(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)for(const t in i)e[t]=i[t];return e}function Qe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function $e(e){if(Array.isArray(e))return e.map($e);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=$e(e[n]);return t}return Qe(e)}class et extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var tt=et;class nt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new nt(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var rt=nt;const it={kind:"null"},ot={kind:"number"},at={kind:"string"},st={kind:"boolean"},lt={kind:"color"},ct={kind:"object"},ut={kind:"value"},ht={kind:"collator"},dt={kind:"formatted"},pt={kind:"resolvedImage"};function ft(e,t){return{kind:"array",itemType:e,N:t}}function mt(e){if("array"===e.kind){const t=mt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}const gt=[it,ot,at,st,lt,dt,ct,ft(ut),pt];function yt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!yt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of gt)if(!yt(e,t))return null}return"Expected ".concat(mt(e)," but found ").concat(mt(t)," instead.")}function vt(e,t){return t.some((t=>t.kind===e.kind))}function _t(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var bt,xt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function wt(e){return(e=Math.round(e))<0?0:e>255?255:e}function St(e){return wt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Et(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function At(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{bt={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in xt)return xt[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Et(a.pop());case"rgb":return 3!==a.length?null:[St(a[0]),St(a[1]),St(a[2]),s];case"hsla":if(4!==a.length)return null;s=Et(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Et(a[1]),u=Et(a[2]),h=u<=.5?u*(c+1):u+c-u*c,d=2*u-h;return[wt(255*At(d,h,l+1/3)),wt(255*At(d,h,l)),wt(255*At(d,h,l-1/3)),s];default:return null}}return null}}catch(e){}class Tt{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof Tt)return e;if("string"!=typeof e)return;const t=bt(e);return t?new Tt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return"rgba(".concat(Math.round(e),",").concat(Math.round(t),",").concat(Math.round(n),",").concat(r,")")}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}toArray01(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:r}=this;return[e,t,n,r]}}Tt.black=new Tt(0,0,0,1),Tt.white=new Tt(1,1,1,1),Tt.transparent=new Tt(0,0,0,0),Tt.red=new Tt(1,0,0,1),Tt.blue=new Tt(0,0,1,1);var Ct=Tt;class kt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class It{constructor(e,t,n,r,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Pt{constructor(e){this.sections=e}static fromString(e){return new Pt([new It(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Pt?e:Pt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Lt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Lt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Mt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Ot(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ct)return!0;if(e instanceof kt)return!0;if(e instanceof Pt)return!0;if(e instanceof Lt)return!0;if(Array.isArray(e)){for(const t of e)if(!Ot(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Ot(e[t]))return!1;return!0}return!1}function Nt(e){if(null===e)return it;if("string"==typeof e)return at;if("boolean"==typeof e)return st;if("number"==typeof e)return ot;if(e instanceof Ct)return lt;if(e instanceof kt)return ht;if(e instanceof Pt)return dt;if(e instanceof Lt)return pt;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=Nt(r);if(n){if(n===e)continue;n=ut;break}n=e}return ft(n||ut,t)}return ct}function Rt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ct||e instanceof Pt||e instanceof Lt?e.toString():JSON.stringify(e)}class Dt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!Ot(e[1]))return t.error("invalid value");const n=e[1];let r=Nt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Dt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ct?["rgba"].concat(this.value.toArray()):this.value instanceof Pt?this.value.serialize():this.value}}var Ft=Dt,jt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const zt={string:at,number:ot,boolean:st,object:ct};class Bt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in zt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=zt[n],r++}else i=ut;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=ft(i,o)}else n=zt[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,ut);if(!n)return null;o.push(n)}return new Bt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!yt(this.type,Nt(n)))return n;if(t===this.args.length-1)throw new jt("Expected value to be of type ".concat(mt(this.type),", but found ").concat(mt(Nt(n))," instead."))}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}var Ut=Bt;class Vt{constructor(e){this.type=dt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ot),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,ft(at)),!o))return null;let a=null;if(n["text-color"]&&(a=t.parse(n["text-color"],1,lt),!a))return null;const s=r[r.length-1];s.scale=e,s.font=o,s.textColor=a}else{const n=t.parse(e[o],1,ut);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new Vt(r)}evaluate(e){return new Pt(this.sections.map((t=>{const n=t.content.evaluate(e);return Nt(n)===pt?new It("",n,null,null,null):new It(Rt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class Zt{constructor(e){this.type=pt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,at);return n?new Zt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Lt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const qt={"to-boolean":st,"to-color":lt,"to-number":ot,"to-string":at};class Gt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=qt[n],i=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,ut);if(!n)return null;i.push(n)}return new Gt(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof Ct)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Mt(t[0],t[1],t[2],t[3]),!n))return new Ct(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new jt(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new jt("Could not convert ".concat(JSON.stringify(t)," to number."))}return"formatted"===this.type.kind?Pt.fromString(Rt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Lt.fromString(Rt(this.args[0].evaluate(e))):Rt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Vt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Zt(this.args[0]).serialize();const e=["to-".concat(this.type.kind)];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Wt=Gt;const Ht=["Unknown","Point","LineString","Polygon"];var Xt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ht[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ct.parse(e)),t}};class Kt{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=Kt.definitions[n];if(!r)return t.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((t=>{let[n]=t;return!Array.isArray(n)||n.length===e.length-1}));let s=null;for(const[l,c]of a){s=new Sn(t.registry,t.path,null,t.scope);const r=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(l)?l[t-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(r.length," instead."));else{for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=r[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Kt(n,i,c,r)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((e=>{let[t]=e;return n=t,Array.isArray(n)?"(".concat(n.map(mt).join(", "),")"):"(".concat(mt(n.type),"...)");var n})).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(mt(n.type))}t.error("Expected arguments of type ".concat(n,", but found (").concat(r.join(", "),") instead."))}return null}static register(e,t){Kt.definitions=t;for(const n in t)e[n]=Kt}}var Yt=Kt;class Jt{constructor(e,t,n){this.type=ht,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,st);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,st);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,at),!o)?null:new Jt(r,i,o)}evaluate(e){return new kt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Qt=8192;function $t(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function en(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function tn(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*Qt),Math.round(r*i*Qt)]}function nn(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function rn(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(nn(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function on(e,t){for(let n=0;n<t.length;n++)if(rn(e,t[n]))return!0;return!1}function an(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function sn(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&an(r,i,o,a)&&an(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function ln(e,t){for(let n=0;n<e.length;++n)if(!rn(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(sn(e[n],e[n+1],t))return!1;return!0}function cn(e,t){for(let n=0;n<t.length;n++)if(ln(e,t[n]))return!0;return!1}function un(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=tn(e[i][r],n);$t(t,a),o.push(a)}r.push(o)}return r}function hn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=un(e[i],t,n);r.push(o)}return r}function dn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}$t(t,e)}function pn(e,t,n,r){const i=Math.pow(2,r.z)*Qt,o=[r.x*Qt,r.y*Qt],a=[];if(!e)return a;for(const s of e)for(const e of s){const r=[e.x+o[0],e.y+o[1]];dn(r,t,n,i),a.push(r)}return a}function fn(e,t,n,r){const i=Math.pow(2,r.z)*Qt,o=[r.x*Qt,r.y*Qt],a=[];if(!e)return a;for(const l of e){const e=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];$t(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)dn(r,t,n,i)}var s;return a}class mn{constructor(e,t){this.type=st,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Ot(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new mn(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new mn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new mn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=un(t.coordinates,r,i),a=pn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!rn(e,o))return!1}if("MultiPolygon"===t.type){const o=hn(t.coordinates,r,i),a=pn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!on(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=un(t.coordinates,r,i),a=fn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!ln(e,o))return!1}if("MultiPolygon"===t.type){const o=hn(t.coordinates,r,i),a=fn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!cn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var gn=mn;function yn(e){if(e instanceof Yt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof gn)return!1;let t=!0;return e.eachChild((e=>{t&&!yn(e)&&(t=!1)})),t}function vn(e){if(e instanceof Yt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!vn(e)&&(t=!1)})),t}function _n(e,t){if(e instanceof Yt&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!_n(e,t)&&(n=!1)})),n}class bn{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new bn(n,t.scope.get(n)):t.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var xn=bn;class wn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new rt,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=e,this.path=t,this.key=t.map((e=>"[".concat(e,"]"))).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new Ut(t,[e]):"coerce"===n?new Wt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof Ft)&&"resolvedImage"!==r.type.kind&&En(r)){const t=new Xt;try{r=new Ft(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new wn(this.registry,r,t||null,i,this.errors)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="".concat(this.key).concat(n.map((e=>"[".concat(e,"]"))).join(""));this.errors.push(new tt(i,e))}checkSubtype(e,t){const n=yt(e,t);return n&&this.error(n),n}}var Sn=wn;function En(e){if(e instanceof xn)return En(e.boundExpression);if(e instanceof Yt&&"error"===e.name)return!1;if(e instanceof Jt)return!1;if(e instanceof gn)return!1;const t=e instanceof Wt||e instanceof Ut;let n=!0;return e.eachChild((e=>{n=t?n&&En(e):n&&e instanceof Ft})),!!n&&yn(e)&&_n(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function An(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new jt("Input is not a number.");a=s-1}return 0}class Tn{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ot);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new Tn(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[An(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Cn=Tn;function kn(e,t,n){return e*(1-n)+t*n}var In=Object.freeze({__proto__:null,number:kn,color:function(e,t,n){return new Ct(kn(e.r,t.r,n),kn(e.g,t.g,n),kn(e.b,t.b,n),kn(e.a,t.a,n))},array:function(e,t,n){return e.map(((e,r)=>kn(e,t[r],n)))}});const Pn=.95047,Ln=1.08883,Mn=4/29,On=6/29,Nn=3*On*On,Rn=Math.PI/180,Dn=180/Math.PI;function Fn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Nn+Mn}function jn(e){return e>On?e*e*e:Nn*(e-Mn)}function zn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Un(e){const t=Bn(e.r),n=Bn(e.g),r=Bn(e.b),i=Fn((.4124564*t+.3575761*n+.1804375*r)/Pn),o=Fn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Fn((.0193339*t+.119192*n+.9503041*r)/Ln)),alpha:e.a}}function Vn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*jn(t),n=Pn*jn(n),r=Ln*jn(r),new Ct(zn(3.2404542*n-1.5371385*t-.4985314*r),zn(-.969266*n+1.8760108*t+.041556*r),zn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Zn(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const qn={forward:Un,reverse:Vn,interpolate:function(e,t,n){return{l:kn(e.l,t.l,n),a:kn(e.a,t.a,n),b:kn(e.b,t.b,n),alpha:kn(e.alpha,t.alpha,n)}}},Gn={forward:function(e){const{l:t,a:n,b:r}=Un(e),i=Math.atan2(r,n)*Dn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Rn,n=e.c;return Vn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Zn(e.h,t.h,n),c:kn(e.c,t.c,n),l:kn(e.l,t.l,n),alpha:kn(e.alpha,t.alpha,n)}}};var Wn=Object.freeze({__proto__:null,lab:qn,hcl:Gn});class Hn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=Xn(t,e.base,n,r);else if("linear"===e.name)i=Xn(t,1,n,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new d(o[0],o[1],o[2],o[3]).solve(Xn(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type ".concat(String(r[0])),1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ot),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=lt:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,i,s);if(!c)return null;s=s||c.type,a.push([e,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Hn(s,n,r,i,a):t.error("Type ".concat(mt(s)," is not interpolatable."))}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=An(t,r),a=Hn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?In[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Gn.reverse(Gn.interpolate(Gn.forward(s),Gn.forward(l),a)):qn.reverse(qn.interpolate(qn.forward(s),qn.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}function Xn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var Kn=Hn;class Yn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of e.slice(1)){const e=t.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>yt(r,e.type)));return new Yn(o?ut:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(e),n&&n instanceof Lt&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Jn=Yn;class Qn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error("Expected string, but found ".concat(typeof r," instead."),i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new Qn(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var $n=Qn;class er{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,ot),r=t.parse(e[2],2,ft(t.expectedType||ut));return n&&r?new er(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new jt("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new jt("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new jt("Array index must be an integer, but found ".concat(t," instead."));return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var tr=er;class nr{constructor(e,t){this.type=st,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,ut),r=t.parse(e[2],2,ut);return n&&r?vt(n.type,[st,at,ot,it,ut])?new nr(n,r):t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(mt(n.type)," instead")):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!_t(t,["boolean","string","number","null"]))throw new jt("Expected first argument to be of type boolean, string, number or null, but found ".concat(mt(Nt(t))," instead."));if(!_t(n,["string","array"]))throw new jt("Expected second argument to be of type array or string, but found ".concat(mt(Nt(n))," instead."));return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var rr=nr;class ir{constructor(e,t,n){this.type=ot,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,ut),r=t.parse(e[2],2,ut);if(!n||!r)return null;if(!vt(n.type,[st,at,ot,it,ut]))return t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(mt(n.type)," instead"));if(4===e.length){const i=t.parse(e[3],3,ot);return i?new ir(n,r,i):null}return new ir(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!_t(t,["boolean","string","number","null"]))throw new jt("Expected first argument to be of type boolean, string, number or null, but found ".concat(mt(Nt(t))," instead."));if(!_t(n,["string","array"]))throw new jt("Expected second argument to be of type array or string, but found ".concat(mt(Nt(n))," instead."));if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var or=ir;class ar{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Nt(e)))return null}else n=Nt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(s,l,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,ut);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new ar(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(Nt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const o of t){const e=r[this.cases[o]];void 0===e?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[e][1].push(o)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[o,a]of n)e.push(1===a.length?i(a[0]):a.map(i)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var sr=ar;class lr{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const i=t.parse(e[o],o,st);if(!i)return null;const a=t.parse(e[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new lr(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((e=>{let[t,n]=e;return n.outputDefined()}))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var cr=lr;class ur{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1,ut),r=t.parse(e[2],2,ot);if(!n||!r)return null;if(!vt(n.type,[ft(ut),at,ut]))return t.error("Expected first argument to be of type array or string, but found ".concat(mt(n.type)," instead"));if(4===e.length){const i=t.parse(e[3],3,ot);return i?new ur(n.type,n,r,i):null}return new ur(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!_t(t,["string","array"]))throw new jt("Expected first argument to be of type array or string, but found ".concat(mt(Nt(t))," instead."));if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var hr=ur;function dr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function pr(e,t,n,r){return 0===r.compare(t,n)}function fr(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=st,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,ut);if(!o)return null;if(!dr(n,o.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(mt(o.type),"'."));let a=t.parse(e[2],2,ut);if(!a)return null;if(!dr(n,a.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(mt(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(mt(o.type),"' and '").concat(mt(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ut(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ut(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ht),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=Nt(o),n=Nt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new jt('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(t.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){const e=Nt(o),n=Nt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const mr=fr("==",(function(e,t,n){return t===n}),pr),gr=fr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!pr(0,t,n,r)})),yr=fr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),vr=fr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),_r=fr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),br=fr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class xr{constructor(e,t,n,r,i,o){this.type=at,this.number=e,this.locale=t,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ot);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,at),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,at),!o))return null;let a=null;if(r.unit&&(a=t.parse(r.unit,1,at),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parse(r["min-fraction-digits"],1,ot),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=t.parse(r["max-fraction-digits"],1,ot),!l)?null:new xr(n,i,o,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class wr{constructor(e){this.type=ot,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found ".concat(mt(n.type)," instead.")):new wr(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new jt("Expected value to be of type string or array, but found ".concat(mt(Nt(t))," instead."))}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Sr={"==":mr,"!=":gr,">":vr,"<":yr,">=":br,"<=":_r,array:Ut,at:tr,boolean:Ut,case:cr,coalesce:Jn,collator:Jt,format:Vt,image:Zt,in:rr,"index-of":or,interpolate:Kn,"interpolate-hcl":Kn,"interpolate-lab":Kn,length:wr,let:$n,literal:Ft,match:sr,number:Ut,"number-format":xr,object:Ut,slice:hr,step:Cn,string:Ut,"to-boolean":Wt,"to-color":Wt,"to-number":Wt,"to-string":Wt,var:xn,within:gn};function Er(e,t){let[n,r,i,o]=t;n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);const a=o?o.evaluate(e):1,s=Mt(n,r,i,a);if(s)throw new jt(s);return new Ct(n/255*a,r/255*a,i/255*a,a)}function Ar(e,t){return e in t}function Tr(e,t){const n=t[e];return void 0===n?null:n}function Cr(e){return{type:e}}Yt.register(Sr,{error:[{kind:"error"},[at],(e,t)=>{let[n]=t;throw new jt(n.evaluate(e))}],typeof:[at,[ut],(e,t)=>{let[n]=t;return mt(Nt(n.evaluate(e)))}],"to-rgba":[ft(ot,4),[lt],(e,t)=>{let[n]=t;return n.evaluate(e).toArray()}],rgb:[lt,[ot,ot,ot],Er],rgba:[lt,[ot,ot,ot,ot],Er],has:{type:st,overloads:[[[at],(e,t)=>{let[n]=t;return Ar(n.evaluate(e),e.properties())}],[[at,ct],(e,t)=>{let[n,r]=t;return Ar(n.evaluate(e),r.evaluate(e))}]]},get:{type:ut,overloads:[[[at],(e,t)=>{let[n]=t;return Tr(n.evaluate(e),e.properties())}],[[at,ct],(e,t)=>{let[n,r]=t;return Tr(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[ut,[at],(e,t)=>{let[n]=t;return Tr(n.evaluate(e),e.featureState||{})}],properties:[ct,[],e=>e.properties()],"geometry-type":[at,[],e=>e.geometryType()],id:[ut,[],e=>e.id()],zoom:[ot,[],e=>e.globals.zoom],pitch:[ot,[],e=>e.globals.pitch||0],"distance-from-center":[ot,[],e=>e.distanceFromCenter()],"heatmap-density":[ot,[],e=>e.globals.heatmapDensity||0],"line-progress":[ot,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ot,[],e=>e.globals.skyRadialProgress||0],accumulated:[ut,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ot,Cr(ot),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[ot,Cr(ot),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:ot,overloads:[[[ot,ot],(e,t)=>{let[n,r]=t;return n.evaluate(e)-r.evaluate(e)}],[[ot],(e,t)=>{let[n]=t;return-n.evaluate(e)}]]},"/":[ot,[ot,ot],(e,t)=>{let[n,r]=t;return n.evaluate(e)/r.evaluate(e)}],"%":[ot,[ot,ot],(e,t)=>{let[n,r]=t;return n.evaluate(e)%r.evaluate(e)}],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(e,t)=>{let[n,r]=t;return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[ot,[ot],(e,t)=>{let[n]=t;return Math.sqrt(n.evaluate(e))}],log10:[ot,[ot],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN10}],ln:[ot,[ot],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))}],log2:[ot,[ot],(e,t)=>{let[n]=t;return Math.log(n.evaluate(e))/Math.LN2}],sin:[ot,[ot],(e,t)=>{let[n]=t;return Math.sin(n.evaluate(e))}],cos:[ot,[ot],(e,t)=>{let[n]=t;return Math.cos(n.evaluate(e))}],tan:[ot,[ot],(e,t)=>{let[n]=t;return Math.tan(n.evaluate(e))}],asin:[ot,[ot],(e,t)=>{let[n]=t;return Math.asin(n.evaluate(e))}],acos:[ot,[ot],(e,t)=>{let[n]=t;return Math.acos(n.evaluate(e))}],atan:[ot,[ot],(e,t)=>{let[n]=t;return Math.atan(n.evaluate(e))}],min:[ot,Cr(ot),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ot,Cr(ot),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ot,[ot],(e,t)=>{let[n]=t;return Math.abs(n.evaluate(e))}],round:[ot,[ot],(e,t)=>{let[n]=t;const r=n.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[ot,[ot],(e,t)=>{let[n]=t;return Math.floor(n.evaluate(e))}],ceil:[ot,[ot],(e,t)=>{let[n]=t;return Math.ceil(n.evaluate(e))}],"filter-==":[st,[at,ut],(e,t)=>{let[n,r]=t;return e.properties()[n.value]===r.value}],"filter-id-==":[st,[ut],(e,t)=>{let[n]=t;return e.id()===n.value}],"filter-type-==":[st,[at],(e,t)=>{let[n]=t;return e.geometryType()===n.value}],"filter-<":[st,[at,ut],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[st,[ut],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[st,[at,ut],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[st,[ut],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[st,[at,ut],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[st,[ut],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[st,[at,ut],(e,t)=>{let[n,r]=t;const i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[st,[ut],(e,t)=>{let[n]=t;const r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[st,[ut],(e,t)=>{let[n]=t;return n.value in e.properties()}],"filter-has-id":[st,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[st,[ft(at)],(e,t)=>{let[n]=t;return n.value.indexOf(e.geometryType())>=0}],"filter-id-in":[st,[ft(ut)],(e,t)=>{let[n]=t;return n.value.indexOf(e.id())>=0}],"filter-in-small":[st,[at,ft(ut)],(e,t)=>{let[n,r]=t;return r.value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[st,[at,ft(ut)],(e,t)=>{let[n,r]=t;return function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:st,overloads:[[[st,st],(e,t)=>{let[n,r]=t;return n.evaluate(e)&&r.evaluate(e)}],[Cr(st),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:st,overloads:[[[st,st],(e,t)=>{let[n,r]=t;return n.evaluate(e)||r.evaluate(e)}],[Cr(st),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[st,[st],(e,t)=>{let[n]=t;return!n.evaluate(e)}],"is-supported-script":[st,[at],(e,t)=>{let[n]=t;const r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[at,[at],(e,t)=>{let[n]=t;return n.evaluate(e).toUpperCase()}],downcase:[at,[at],(e,t)=>{let[n]=t;return n.evaluate(e).toLowerCase()}],concat:[at,Cr(ut),(e,t)=>t.map((t=>Rt(t.evaluate(e)))).join("")],"resolved-locale":[at,[ht],(e,t)=>{let[n]=t;return n.evaluate(e).resolvedLocale()}]});var kr=Sr;function Ir(e){return{result:"success",value:e}}function Pr(e){return{result:"error",value:e}}function Lr(e){return"data-driven"===e["property-type"]}function Mr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Or(e){return!!e.expression&&e.expression.interpolated}function Nr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Rr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Dr(e){return e}function Fr(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(Or(t)?"exponential":"interval");if(n&&((e=Je({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],Ct.parse(e[1])]))),e.default=Ct.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Wn[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));let a,s,l;if("exponential"===o)a=Ur;else if("interval"===o)a=Br;else if("categorical"===o){a=zr,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));a=Vr}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Fr(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Kn.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:(n,r)=>{let{zoom:o}=n;return Ur({stops:i,base:e.base},t,o).evaluate(o,r)}}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Kn.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:n=>{let{zoom:r}=n;return a(e,t,r,s,l)}}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?jr(e.default,t.default):a(e,t,i,s,l)}}}function jr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function zr(e,t,n,r,i){return jr(typeof n===i?r[n]:void 0,e.default,t.default)}function Br(e,t,n){if("number"!==Nr(n))return jr(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=An(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function Ur(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Nr(n))return jr(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=An(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=In[t.type]||Dr;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Wn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return c(r,i,a)}}:c(s,l,a)}function Vr(e,t,n){return"color"===t.type?n=Ct.parse(n):"formatted"===t.type?n=Pt.fromString(n.toString()):"resolvedImage"===t.type?n=Lt.fromString(n.toString()):Nr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),jr(n,e.default,t.default)}class Zr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Xt,this._defaultValue=t?function(e){return"color"===e.type&&(Rr(e.default)||Array.isArray(e.default))?new Ct(0,0,0,0):"color"===e.type?Ct.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new jt("Expected value to be one of ".concat(Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", "),", but found ").concat(JSON.stringify(e)," instead."));return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function qr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in kr}function Gr(e,t){const n=new Sn(kr,[],t?function(e){const t={color:lt,string:at,number:ot,enum:at,boolean:st,formatted:dt,resolvedImage:pt};return"array"===e.type?ft(t[e.value]||ut,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Ir(new Zr(r,t)):Pr(n.errors)}class Wr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!vn(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class Hr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!vn(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?Kn.interpolationFactor(this.interpolationType,e,t,n):0}}function Xr(e,t){if("error"===(e=Gr(e,t)).result)return e;const n=e.value.expression,r=yn(n);if(!r&&!Lr(t))return Pr([new tt("","data expressions not supported")]);const i=_n(n,["zoom","pitch","distance-from-center"]);if(!i&&!Mr(t))return Pr([new tt("","zoom expressions not supported")]);const o=Yr(n);return o||i?o instanceof tt?Pr([o]):o instanceof Kn&&!Or(t)?Pr([new tt("",'"interpolate" expressions cannot be used with this property')]):Ir(o?new Hr(r?"camera":"composite",e.value,o.labels,o instanceof Kn?o.interpolation:void 0):new Wr(r?"constant":"source",e.value)):Pr([new tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Kr{constructor(e,t){this._parameters=e,this._specification=t,Je(this,Fr(this._parameters,this._specification))}static deserialize(e){return new Kr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Yr(e){let t=null;if(e instanceof $n)t=Yr(e.result);else if(e instanceof Jn){for(const n of e.args)if(t=Yr(n),t)break}else(e instanceof Cn||e instanceof Kn)&&e.input instanceof Yt&&"zoom"===e.input.name&&(t=e);return t instanceof tt||e.eachChild((e=>{const n=Yr(e);n instanceof tt?t=n:!t&&n?t=new tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class Jr{constructor(e,t,n,r){this.message=(e?"".concat(e,": "):"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function Qr(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Nr(n);if("object"!==l)return[new Jr(t,n,"object expected, ".concat(l," found"))];for(const c in n){const e=c.split(".")[0],l=r[e]||r["*"];let u;i[e]?u=i[e]:r[e]?u=Mi:i["*"]?u=i["*"]:r["*"]&&(u=Mi),u?s=s.concat(u({key:(t?"".concat(t,"."):t)+c,value:n[c],valueSpec:l,style:o,styleSpec:a,object:n,objectKey:c},n)):s.push(new Jr(t,n[c],'unknown property "'.concat(c,'"')))}for(const c in r)i[c]||r[c].required&&void 0===r[c].default&&void 0===n[c]&&s.push(new Jr(t,n,'missing required property "'.concat(c,'"')));return s}function $r(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Mi;if("array"!==Nr(t))return[new Jr(o,t,"array expected, ".concat(Nr(t)," found"))];if(n.length&&t.length!==n.length)return[new Jr(o,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new Jr(o,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Nr(n.value)&&(s=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(c,"]")}));return l}function ei(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Nr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new Jr(t,n,"number expected, ".concat(i," found"))];if("minimum"in r){let i=r.minimum;if("array"===Nr(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new Jr(t,n,"".concat(n," is less than the minimum value ").concat(i))]}if("maximum"in r){let i=r.maximum;if("array"===Nr(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new Jr(t,n,"".concat(n," is greater than the maximum value ").concat(i))]}return[]}function ti(e){const t=e.valueSpec,n=Qe(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Nr(e.value.stops)&&"array"===Nr(e.value.stops[0])&&"object"===Nr(e.value.stops[0][0]),u=Qr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Jr(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat($r({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Nr(r)&&0===r.length&&t.push(new Jr(e.key,r,"array must have at least one stop")),t},default:function(e){return Mi({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new Jr(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new Jr(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Or(e.valueSpec)&&u.push(new Jr(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Lr(e.valueSpec)?u.push(new Jr(e.key,e.value,"property functions not supported")):s&&!Mr(e.valueSpec)&&u.push(new Jr(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new Jr(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,s=e.key;if("array"!==Nr(r))return[new Jr(s,r,"array expected, ".concat(Nr(r)," found"))];if(2!==r.length)return[new Jr(s,r,"array length 2 expected, length ".concat(r.length," found"))];if(c){if("object"!==Nr(r[0]))return[new Jr(s,r,"object expected, ".concat(Nr(r[0])," found"))];if(void 0===r[0].zoom)return[new Jr(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Jr(s,r,"object stop key must have value")];const t=Qe(r[0].zoom);if("number"!=typeof t)return[new Jr(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new Jr(s,r[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,i=void 0,a={}),n=n.concat(Qr({key:"".concat(s,"[0]"),value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:ei,value:d}}))}else n=n.concat(d({key:"".concat(s,"[0]"),value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return qr($e(r[1]))?n.concat([new Jr("".concat(s,"[1]"),r[1],"expressions are not allowed in function stops.")]):n.concat(Mi({key:"".concat(s,"[1]"),value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const s=Nr(e.value),l=Qe(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new Jr(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(r))]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Jr(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r="number expected, ".concat(s," found");return Lr(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jr(e.key,c,r)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new Jr(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new Jr(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Jr(e.key,c,"integer expected, found ".concat(String(l)))]}}function ni(e){const t=("property"===e.expressionContext?Xr:Gr)($e(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new Jr("".concat(e.key).concat(t.key),e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Jr(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!vn(n))return[new Jr(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return ri(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!_n(n,["zoom","feature-state"]))return[new Jr(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!yn(n))return[new Jr(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ri(e,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const i of t.valueSpec.expression.parameters)n.delete(i);if(0===n.size)return[];const r=[];return e instanceof Yt&&n.has(e.name)?[new Jr(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((e=>{r.push(...ri(e,t))})),r)}function ii(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Qe(n))&&i.push(new Jr(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(Qe(n))&&i.push(new Jr(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function oi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!oi(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function ai(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};oi(e)||(e=pi(e));const n=e;let r=!0;try{r=function(e){if(!ci(e))return e;let t=$e(e);return li(t),t=si(t),t}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}const i=Ye["filter_".concat(t)],o=Gr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));a=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,l=null;if(r!==n){const e=Gr(n,i);if("error"===e.result)throw new Error(e.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));s=(t,n,r,i,o)=>e.value.evaluate(t,n,{},r,void 0,void 0,i,o),l=!yn(e.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:di(r),needFeature:!!l}}function si(e){if(!Array.isArray(e))return e;const t=function(e){if(ui.has(e[0]))for(let t=1;t<e.length;t++)if(ci(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>si(e)))}function li(e){let t=!1;const n=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||ci(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||ci(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||ci(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}t&&(e.length=0,e.push("any",...n));for(let r=1;r<e.length;r++)li(e[r])}function ci(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let n=1;n<e.length;n++)if(ci(e[n]))return!0;return!1}const ui=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function hi(e,t){return e<t?-1:e>t?1:0}function di(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(di(e[t]))return!0;return!1}function pi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?fi(e[1],e[2],"=="):"!="===t?yi(fi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?fi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(pi))):"all"===t?["all"].concat(e.slice(1).map(pi)):"none"===t?["all"].concat(e.slice(1).map(pi).map(yi)):"in"===t?mi(e[1],e.slice(2)):"!in"===t?yi(mi(e[1],e.slice(2))):"has"===t?gi(e[1]):"!has"===t?yi(gi(e[1])):"within"!==t||e;var n}function fi(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function mi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(hi)]]:["filter-in-small",e,["literal",t]]}}function gi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function yi(e){return["!",e]}function vi(e){return oi($e(e.value))?ni(Je({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):_i(e)}function _i(e){const t=e.value,n=e.key;if("array"!==Nr(t))return[new Jr(n,t,"array expected, ".concat(Nr(t)," found"))];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new Jr(n,t,"filter array must have at least 1 element")];switch(o=o.concat(ii({key:"".concat(n,"[0]"),value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Qe(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Qe(t[1])&&o.push(new Jr(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&o.push(new Jr(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&(i=Nr(t[1]),"string"!==i&&o.push(new Jr("".concat(n,"[1]"),t[1],"string expected, ".concat(i," found"))));for(let a=2;a<t.length;a++)i=Nr(t[a]),"$type"===Qe(t[1])?o=o.concat(ii({key:"".concat(n,"[").concat(a,"]"),value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Jr("".concat(n,"[").concat(a,"]"),t[a],"string, number, or boolean expected, ".concat(i," found")));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(_i({key:"".concat(n,"[").concat(r,"]"),value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Nr(t[1]),2!==t.length?o.push(new Jr(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==i&&o.push(new Jr("".concat(n,"[1]"),t[1],"string expected, ".concat(i," found")));break;case"within":i=Nr(t[1]),2!==t.length?o.push(new Jr(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==i&&o.push(new Jr("".concat(n,"[1]"),t[1],"object expected, ".concat(i," found")))}return o}function bi(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Mi({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new Jr(n,o,'unknown property "'.concat(a,'"'))];let u;if("string"===Nr(o)&&Lr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o))){const e='`{ "type": "identity", "property": '.concat(u?JSON.stringify(u[1]):'"_"'," }`");return[new Jr(n,o,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(e,"."))]}const h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new Jr(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Rr($e(o))&&"identity"===Qe(o.type)&&h.push(new Jr(n,o,'"text-font" does not support identity functions'))),h.concat(Mi({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function xi(e){return bi(e,"paint")}function wi(e){return bi(e,"layout")}function Si(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Jr(r,n,'either "type" or "ref" is required'));let a=Qe(n.type);const s=Qe(n.ref);if(n.id){const o=Qe(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];Qe(e.id)===o&&t.push(new Jr(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(e.id.__line__)))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new Jr(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((t=>{Qe(t.id)===s&&(e=t)})),e?e.ref?t.push(new Jr(r,n.ref,"ref cannot reference another ref layer")):a=Qe(e.type):"string"==typeof s&&t.push(new Jr(r,n.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&Qe(e.type);e?"vector"===o&&"raster"===a?t.push(new Jr(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===o&&"raster"!==a?t.push(new Jr(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new Jr(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&e.lineMetrics||t.push(new Jr(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new Jr(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new Jr(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new Jr(r,n,'missing required property "source"'));return t=t.concat(Qr({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mi({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>vi(Je({layerType:a},e)),layout:e=>Qr({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>wi(Je({layerType:a},e))}}),paint:e=>Qr({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>xi(Je({layerType:a},e))}})}})),t}function Ei(e){const t=e.value,n=e.key,r=Nr(t);return"string"!==r?[new Jr(n,t,"string expected, ".concat(r," found"))]:[]}const Ai={promoteId:function(e){let{key:t,value:n}=e;if("string"===Nr(n))return Ei({key:t,value:n});{const e=[];for(const r in n)e.push(...Ei({key:"".concat(t,".").concat(r),value:n[r]}));return e}}};function Ti(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new Jr(n,t,'"type" is required')];const o=Qe(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Qr({key:n,value:t,valueSpec:r["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:Ai}),a;case"geojson":if(a=Qr({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Ai}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...ni({key:"".concat(n,".").concat(e,".map"),value:i,expressionContext:"cluster-map"})),a.push(...ni({key:"".concat(n,".").concat(e,".reduce"),value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Qr({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Qr({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Jr(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ii({key:"".concat(n,".type"),value:t.type,valueSpec:{values:Ci(r)},style:i,styleSpec:r})}}function Ci(e){return e.source.reduce(((t,n)=>{const r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function ki(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Nr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Jr("light",t,"object expected, ".concat(a," found"))]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&r[e[1]]&&r[e[1]].transition?Mi({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Mi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new Jr(s,t[s],'unknown property "'.concat(s,'"'))])}return o}function Ii(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Nr(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Jr("terrain",t,"object expected, ".concat(s," found"))]),a;for(const l in t){const e=l.match(/^(.*)-transition$/);a=a.concat(e&&o[e[1]]&&o[e[1]].transition?Mi({key:l,value:t[l],valueSpec:i.transition,style:r,styleSpec:i}):o[l]?Mi({key:l,value:t[l],valueSpec:o[l],style:r,styleSpec:i}):[new Jr(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&Qe(e.type);e?"raster-dem"!==i&&a.push(new Jr(n,t.source,"terrain cannot be used with a source of type ".concat(String(i),', it only be used with a "raster-dem" source type'))):a.push(new Jr(n,t.source,'source "'.concat(t.source,'" not found')))}else a.push(new Jr(n,t,'terrain is missing required property "source"'));return a}function Pi(e){const t=e.value,n=e.style,r=e.styleSpec,i=r.fog;let o=[];const a=Nr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Jr("fog",t,"object expected, ".concat(a," found"))]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&i[e[1]]&&i[e[1]].transition?Mi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Mi({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new Jr(s,t[s],'unknown property "'.concat(s,'"'))])}return o}const Li={"*":()=>[],array:$r,boolean:function(e){const t=e.value,n=e.key,r=Nr(t);return"boolean"!==r?[new Jr(n,t,"boolean expected, ".concat(r," found"))]:[]},number:ei,color:function(e){const t=e.key,n=e.value,r=Nr(n);return"string"!==r?[new Jr(t,n,"color expected, ".concat(r," found"))]:null===bt(n)?[new Jr(t,n,'color expected, "'.concat(n,'" found'))]:[]},enum:ii,filter:vi,function:ti,layer:Si,object:Qr,source:Ti,light:ki,terrain:Ii,fog:Pi,string:Ei,formatted:function(e){return 0===Ei(e).length?[]:ni(e)},resolvedImage:function(e){return 0===Ei(e).length?[]:ni(e)},projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style;let o=[];const a=Nr(t);if("object"===a)for(const s in t)o=o.concat(Mi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new Jr("projection",t,"object or string expected, ".concat(a," found"))]));return o}};function Mi(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Rr(Qe(t))?ti(e):n.expression&&qr($e(t))?ni(e):n.type&&Li[n.type]?Li[n.type](e):Qr(Je({},e,{valueSpec:n.type?r[n.type]:n}))}function Oi(e){const t=e.value,n=e.key,r=Ei(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Jr(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Jr(n,t,'"glyphs" url must include a "{range}" token'))),r}function Ni(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye;return Fi(Mi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Oi,"*":()=>[]}}))}const Ri=e=>Fi(xi(e)),Di=e=>Fi(wi(e));function Fi(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function ji(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new Xe(new Error(r.message))),n=!0;return n}var zi=Bi;function Bi(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}Bi.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Bi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Bi.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Bi.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Bi.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&n>=u[p+0]&&r>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},Bi.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,n,r,f,o,a,s))return}},Bi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Bi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Bi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const Ui={};function Vi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Ui[t]={klass:e,omit:n.omit||[]}}Vi(Object,"Object"),zi.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},zi.deserialize=function(e){return new zi(e.buffer)},Object.defineProperty(zi,"name",{value:"Grid"}),Vi(zi,"Grid"),Vi(Ct,"Color"),Vi(Error,"Error"),Vi(ae,"AJAXError"),Vi(Lt,"ResolvedImage"),Vi(Kr,"StylePropertyFunction"),Vi(Zr,"StyleExpression",{omit:["_evaluator"]}),Vi(Hr,"ZoomDependentExpression"),Vi(Wr,"ZoomConstantExpression"),Vi(Yt,"CompoundExpression",{omit:["_evaluate"]});for(const _m in kr)Ui[kr[_m]._classRegistryKey]||Vi(kr[_m],"Expression".concat(_m));function Zi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function qi(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Gi(e,n){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Zi(e)||qi(e))return n&&n.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return n&&n.push(t.buffer),t}if(e instanceof t.ImageData)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const r of e)t.push(Gi(r,n));return t}if("object"==typeof e){const t=e.constructor,r=t._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class ".concat(r));const i=t.serialize?t.serialize(e,n):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Ui[r].omit.indexOf(t)>=0||(i[t]=Gi(e[t],n)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function Wi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Zi(e)||qi(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Wi);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Ui[t];if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const i of Object.keys(e))"$name"!==i&&(r[i]=Wi(e[i]));return r}throw new Error("can't deserialize object of type "+typeof e)}const Hi=e=>e>=1536&&e<=1791,Xi=e=>e>=1872&&e<=1919,Ki=e=>e>=2208&&e<=2303,Yi=e=>e>=11904&&e<=12031,Ji=e=>e>=12032&&e<=12255,Qi=e=>e>=12272&&e<=12287,$i=e=>e>=12288&&e<=12351,eo=e=>e>=12352&&e<=12447,to=e=>e>=12448&&e<=12543,no=e=>e>=12544&&e<=12591,ro=e=>e>=12704&&e<=12735,io=e=>e>=12736&&e<=12783,oo=e=>e>=12784&&e<=12799,ao=e=>e>=12800&&e<=13055,so=e=>e>=13056&&e<=13311,lo=e=>e>=13312&&e<=19903,co=e=>e>=19968&&e<=40959,uo=e=>e>=40960&&e<=42127,ho=e=>e>=42128&&e<=42191,po=e=>e>=44032&&e<=55215,fo=e=>e>=63744&&e<=64255,mo=e=>e>=64336&&e<=65023,go=e=>e>=65040&&e<=65055,yo=e=>e>=65072&&e<=65103,vo=e=>e>=65104&&e<=65135,_o=e=>e>=65136&&e<=65279,bo=e=>e>=65280&&e<=65519;function xo(e){for(const t of e)if(Eo(t.charCodeAt(0)))return!0;return!1}function wo(e){for(const t of e)if(!So(t.charCodeAt(0)))return!1;return!0}function So(e){return!(Hi(e)||Xi(e)||Ki(e)||mo(e)||_o(e))}function Eo(e){return!(746!==e&&747!==e&&(e<4352||!(ro(e)||no(e)||yo(e)&&!(e>=65097&&e<=65103)||fo(e)||so(e)||Yi(e)||io(e)||!(!$i(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||lo(e)||co(e)||ao(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||po(e)||eo(e)||Qi(e)||(e=>e>=12688&&e<=12703)(e)||Ji(e)||oo(e)||to(e)&&12540!==e||!(!bo(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!vo(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||go(e)||(e=>e>=19904&&e<=19967)(e)||uo(e)||ho(e))))}function Ao(e){return!(Eo(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||$i(e)||to(e)||(e=>e>=57344&&e<=63743)(e)||yo(e)||vo(e)||bo(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function To(e){return e>=1424&&e<=2303||mo(e)||_o(e)}function Co(e,t){return!(!t&&To(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function ko(e){for(const t of e)if(To(t.charCodeAt(0)))return!0;return!1}const Io="deferred",Po="loading",Lo="loaded";let Mo=null,Oo="unavailable",No=null;const Ro=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Oo="error"),Mo&&Mo(e)};function Do(){Fo.fire(new He("pluginStateChange",{pluginStatus:Oo,pluginURL:No}))}const Fo=new Ke,jo=function(){return Oo},zo=function(){if(Oo!==Io||!No)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Oo=Po,Do(),No&&ce({url:No},(e=>{e?Ro(e):(Oo=Lo,Do())}))},Bo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Oo===Lo||null!=Bo.applyArabicShaping,isLoading:()=>Oo===Po,setState(e){Oo=e.pluginStatus,No=e.pluginURL},isParsed:()=>null!=Bo.applyArabicShaping&&null!=Bo.processBidirectionalText&&null!=Bo.processStyledBidirectionalText,getPluginURL:()=>No};class Uo{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!Co(n.charCodeAt(0),t))return!1;return!0}(e,Bo.isLoaded())}}class Vo{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Rr(e))return new Kr(e,t);if(qr(e)){const n=Xr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=Ct.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Zo{constructor(e){this.property=e,this.value=new Vo(e,void 0)}transitioned(e,t){return new Go(this.property,this.value,t,I({},e.transition,this.transition),e.now)}untransitioned(){return new Go(this.property,this.value,null,{},0)}}class qo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return z(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Zo(this._values[e].property)),this._values[e].value=new Vo(this._values[e].property,null===t?void 0:z(t))}getTransition(e){return z(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Zo(this._values[e].property)),this._values[e].transition=z(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e["".concat(t,"-transition")]=r)}return e}transitioned(e,t){const n=new Wo(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new Wo(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Go{constructor(e,t,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,x(a))}}return i}}class Wo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new Ko(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ho{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return z(this._values[e].value)}setValue(e,t){this._values[e]=new Vo(this._values[e].property,null===t?void 0:z(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new Ko(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class Xo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class Ko{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Yo{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=In[this.specification.type];return r?r(e,t,n):e}}class Jo{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new Xo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Xo(this,{kind:"constant",value:void 0},e.parameters);const r=In[this.specification.type];return r?new Xo(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class Qo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class $o{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new Uo(0,{});for(const n in e){const r=e[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new Vo(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new Zo(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(t)}}}function ea(e,t){return 256*(e=E(Math.floor(e),0,255))+E(Math.floor(t),0,255)}Vi(Jo,"DataDrivenProperty"),Vi(Yo,"DataConstantProperty"),Vi(Qo,"ColorRampProperty");const ta={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class na{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ra{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((e=>{const i=ta[e.type].BYTES_PER_ELEMENT,o=n=oa(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:oa(n,Math.max(r,t)),alignment:t}}function oa(e,t){return Math.ceil(e/t)*t}class aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}aa.prototype.bytesPerElement=4,Vi(aa,"StructArrayLayout2i4");class sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}sa.prototype.bytesPerElement=6,Vi(sa,"StructArrayLayout3i6");class la extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}la.prototype.bytesPerElement=8,Vi(la,"StructArrayLayout4i8");class ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}ca.prototype.bytesPerElement=12,Vi(ca,"StructArrayLayout2i4ub1f12");class ua extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}ua.prototype.bytesPerElement=16,Vi(ua,"StructArrayLayout4f16");class ha extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=6*e,s=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,e}}ha.prototype.bytesPerElement=12,Vi(ha,"StructArrayLayout4ui1f12");class da extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,e}}da.prototype.bytesPerElement=8,Vi(da,"StructArrayLayout4ui8");class pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}pa.prototype.bytesPerElement=12,Vi(pa,"StructArrayLayout6i12");class fa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,l,c,u,h)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}fa.prototype.bytesPerElement=24,Vi(fa,"StructArrayLayout4i4ui4i24");class ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,e}}ma.prototype.bytesPerElement=20,Vi(ma,"StructArrayLayout3i3f20");class ga extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}ga.prototype.bytesPerElement=4,Vi(ga,"StructArrayLayout1ul4");class ya extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,l,c,u,h,d)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,e}}ya.prototype.bytesPerElement=40,Vi(ya,"StructArrayLayout5i4f1i1ul2ui40");class va extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}va.prototype.bytesPerElement=16,Vi(va,"StructArrayLayout3i2i2i16");class _a extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}_a.prototype.bytesPerElement=16,Vi(_a,"StructArrayLayout2f1f2i16");class ba extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}ba.prototype.bytesPerElement=12,Vi(ba,"StructArrayLayout2ub2f12");class xa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}xa.prototype.bytesPerElement=12,Vi(xa,"StructArrayLayout3f12");class wa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}wa.prototype.bytesPerElement=6,Vi(wa,"StructArrayLayout3ui6");class Sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b){const x=this.length;return this.resize(x+1),this.emplace(x,e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x){const w=30*e,S=15*e,E=60*e;return this.int16[w+0]=t,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[S+2]=i,this.float32[S+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[S+5]=l,this.uint32[S+6]=c,this.uint32[S+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[S+10]=f,this.float32[S+11]=m,this.uint8[E+48]=g,this.uint8[E+49]=y,this.uint8[E+50]=v,this.uint32[S+13]=_,this.int16[w+28]=b,this.uint8[E+58]=x,e}}Sa.prototype.bytesPerElement=60,Vi(Sa,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ea extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,S,E,A,T,C,k,I){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,S,E,A,T,C,k,I)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,S,E,A,T,C,k,I,P){const L=38*e,M=19*e;return this.int16[L+0]=t,this.int16[L+1]=n,this.int16[L+2]=r,this.float32[M+2]=i,this.float32[M+3]=o,this.int16[L+8]=a,this.int16[L+9]=s,this.int16[L+10]=l,this.int16[L+11]=c,this.int16[L+12]=u,this.int16[L+13]=h,this.uint16[L+14]=d,this.uint16[L+15]=p,this.uint16[L+16]=f,this.uint16[L+17]=m,this.uint16[L+18]=g,this.uint16[L+19]=y,this.uint16[L+20]=v,this.uint16[L+21]=_,this.uint16[L+22]=b,this.uint16[L+23]=x,this.uint16[L+24]=w,this.uint16[L+25]=S,this.uint16[L+26]=E,this.uint16[L+27]=A,this.uint16[L+28]=T,this.uint32[M+15]=C,this.float32[M+16]=k,this.float32[M+17]=I,this.float32[M+18]=P,e}}Ea.prototype.bytesPerElement=76,Vi(Ea,"StructArrayLayout3i2f6i15ui1ul3f76");class Aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Aa.prototype.bytesPerElement=4,Vi(Aa,"StructArrayLayout1f4");class Ta extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,e}}Ta.prototype.bytesPerElement=20,Vi(Ta,"StructArrayLayout5f20");class Ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}Ca.prototype.bytesPerElement=12,Vi(Ca,"StructArrayLayout1ul3ui12");class ka extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}ka.prototype.bytesPerElement=4,Vi(ka,"StructArrayLayout2ui4");class Ia extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Ia.prototype.bytesPerElement=2,Vi(Ia,"StructArrayLayout1ui2");class Pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}Pa.prototype.bytesPerElement=8,Vi(Pa,"StructArrayLayout2f8");class La extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}La.prototype.size=40;class Ma extends ya{get(e){return new La(this,e)}}Vi(Ma,"CollisionBoxArray");class Oa extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Oa.prototype.size=60;class Na extends Sa{get(e){return new Oa(this,e)}}Vi(Na,"PlacedSymbolArray");class Ra extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ra.prototype.size=76;class Da extends Ea{get(e){return new Ra(this,e)}}Vi(Da,"SymbolInstanceArray");class Fa extends Aa{getoffsetX(e){return this.float32[1*e+0]}}Vi(Fa,"GlyphOffsetArray");class ja extends aa{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Vi(ja,"SymbolLineVertexArray");class za extends na{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}za.prototype.size=12;class Ba extends Ca{get(e){return new za(this,e)}}Vi(Ba,"FeatureIndexArray");class Ua extends ka{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Vi(Ua,"FillExtrusionCentroidArray");const Va=ia([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Za=ia([{name:"a_dash",components:4,type:"Uint16"}]);var qa={},Ga={get exports(){return qa},set exports(e){qa=e}},Wa={};({get exports(){return Wa},set exports(e){Wa=e}}).exports=function(e,t){var n,r,i,o,a,s,l,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Ha={};({get exports(){return Ha},set exports(e){Ha=e}}).exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Xa=Wa,Ka=Ha;Ga.exports=Xa,qa.murmur3=Xa,qa.murmur2=Ka;class Ya{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Ja(e)),this.positions.push(t,n,r)}getPositions(e){const t=Ja(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return Qa(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new Ya;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Ja(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:qa(String(e))}function Qa(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;$a(e,o,a),$a(t,3*o,3*a),$a(t,3*o+1,3*a+1),$a(t,3*o+2,3*a+2)}a-n<r-a?(Qa(e,t,n,a),n=a+1):(Qa(e,t,a+1,r),r=a)}}function $a(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}Vi(Ya,"FeaturePositionMap");class es{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class ts extends es{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ns extends es{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class rs extends es{constructor(e){super(e),this.current=Ct.transparent}set(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const is=new Float32Array(16),os=new Float32Array(9),as=new Float32Array(4);function ss(e){return[ea(255*e.r,255*e.g),ea(255*e.b,255*e.a)]}class ls{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>"u_".concat(e))),this.type=n}setUniform(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new rs(e):new ts(e)}}class cs{constructor(e,t){this.uniformNames=t.map((e=>"u_".concat(e))),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&t.set(e,i,o)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new ns(e):new ts(e)}}class us{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new Uo(0),t,{},i,r,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const r=ss(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hs{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>"u_".concat(e,"_t"))),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:"a_".concat(e),type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i,o){const a=this.expression.evaluate(new Uo(this.zoom),t,{},i,r,o),s=this.expression.evaluate(new Uo(this.zoom+1),t,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=ss(n),o=ss(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=E(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(e,i,a)}getBinding(e,t){return new ts(e)}}class ds{constructor(e,t,n,r,i){this.expression=e,this.layerId=i,this.paintVertexAttributes=("array"===n?Za:Va).members;for(let o=0;o<t.length;++o);this.paintVertexArray=new r}populatePaintArray(e,t,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:a,pixelRatio:s}=i;for(let l=e;l<t;l++)this.paintVertexArray.emplace(l,o[0],o[1],a[0],a[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ps{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof Xo&&Lr(o.property.specification)))continue;const a=gs(i,e.type),s=o.value,l=o.property.specification.type,c=!!o.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),h="line-dasharray"===i&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||h)if("source"===s.kind||h||u){const t=_s(i,l,"source");this.binders[i]=u?new ds(s,a,l,t,e.id):new us(s,a,l,t),r.push("/a_".concat(i))}else{const e=_s(i,l,"composite");this.binders[i]=new hs(s,a,l,c,t,e),r.push("/z_".concat(i))}else this.binders[i]=u?new cs(s.value,a):new ls(s.value,a,l),r.push("/u_".concat(i))}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof us||t instanceof hs?t.maxValue:0}populatePaintArrays(e,t,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof us||s instanceof hs||s instanceof ds)&&s.populatePaintArray(e,t,n,r,i,o)}}setConstantPatternPositions(e){for(const t in this.binders){const n=this.binders[t];n instanceof cs&&n.setConstantPatternPositions(e)}}updatePaintArrays(e,t,n,r,i,o){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof us||c instanceof hs||c instanceof ds)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof ls||n instanceof cs)&&e.push(...n.uniformNames.map((e=>"#define HAS_UNIFORM_".concat(e))))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof us||n instanceof hs||n instanceof ds)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof ls||n instanceof cs||n instanceof hs)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof ls||r instanceof cs||r instanceof hs)for(const i of r.uniformNames)t.push({name:i,property:n,binding:r.getBinding(e,i)})}return t}setUniforms(e,t,n,r,i){for(const{name:o,property:a,binding:s}of n)this.binders[a].setUniform(e,s,i,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof us||t instanceof hs||t instanceof ds)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof us||n instanceof hs||n instanceof ds)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof us||t instanceof hs||t instanceof ds)&&t.destroy()}}}class fs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new ps(r,t,n);this.needsUpload=!1,this._featureMap=new Ya,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const ms={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function gs(e,t){return ms[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}const ys={"line-pattern":{source:ha,composite:ha},"fill-pattern":{source:ha,composite:ha},"fill-extrusion-pattern":{source:ha,composite:ha},"line-dasharray":{source:da,composite:da}},vs={color:{source:Pa,composite:ua},number:{source:Aa,composite:Pa}};function _s(e,t,n){const r=ys[e];return r&&r[n]||vs[t][n]}Vi(ls,"ConstantBinder"),Vi(cs,"PatternConstantBinder"),Vi(us,"SourceExpressionBinder"),Vi(ds,"PatternCompositeBinder"),Vi(hs,"CompositeExpressionBinder"),Vi(ps,"ProgramConfiguration",{omit:["_buffers"]}),Vi(fs,"ProgramConfigurationSet");const bs="-transition";class xs extends Ke{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Ho(t.layout)),t.paint)){this._transitionablePaint=new qo(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ko(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Di,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return D(e,bs)?this._transitionablePaint.getTransition(e.slice(0,-bs.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Ri,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(D(e,bs))return this._transitionablePaint.setTransition(e.slice(0,-bs.length),t||void 0),!1;{const n=this._transitionablePaint._values[e],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value,a=o.isDataDriven(),s=D(e,"pattern")||"line-dasharray"===e;return a||r||s||this._handleOverridablePaintPropertyUpdate(e,i,o)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),j(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&ji(this,e.call(Ni,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Xo&&Lr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ai(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ws=ia([{name:"a_pos",components:2,type:"Int16"}],4),Ss=ia([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Es{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>Es.MAX_VERTEX_ARRAY_LENGTH&&U("Max vertices per segment is ".concat(Es.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!i||i.vertexLength+e>Es.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new Es([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}Es.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Vi(Es,"SegmentVector");var As=8192;class Ts{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof nc?new nc(e.lng,e.lat):nc.convert(e),this}setSouthWest(e){return this._sw=e instanceof nc?new nc(e.lng,e.lat):nc.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof nc)r=e,i=e;else{if(!(e instanceof Ts))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ts.convert(e)):this.extend(nc.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(nc.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new nc(r.lng,r.lat),this._ne=new nc(i.lng,i.lat)),this}getCenter(){return new nc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new nc(this.getWest(),this.getNorth())}getSouthEast(){return new nc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=nc.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof Ts?e:new Ts(e)}}var Cs=1e-6,ks="undefined"!=typeof Float32Array?Float32Array:Array;function Is(){var e=new ks(9);return ks!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ps(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],p=n[1],f=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],b=n[8];return e[0]=d*r+p*a+f*c,e[1]=d*i+p*s+f*u,e[2]=d*o+p*l+f*h,e[3]=m*r+g*a+y*c,e[4]=m*i+g*s+y*u,e[5]=m*o+g*l+y*h,e[6]=v*r+_*a+b*c,e[7]=v*i+_*s+b*u,e[8]=v*o+_*l+b*h,e}function Ls(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ms(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,S=i*c-o*l,E=u*m-h*f,A=u*g-d*f,T=u*y-p*f,C=h*g-d*m,k=h*y-p*m,I=d*y-p*g,P=v*I-_*k+b*C+x*T-w*A+S*E;return P?(e[0]=(s*I-l*k+c*C)*(P=1/P),e[1]=(i*k-r*I-o*C)*P,e[2]=(m*S-g*w+y*x)*P,e[3]=(d*w-h*S-p*x)*P,e[4]=(l*T-a*I-c*A)*P,e[5]=(n*I-i*T+o*A)*P,e[6]=(g*b-f*S-y*_)*P,e[7]=(u*S-d*b+p*_)*P,e[8]=(a*k-s*T+c*E)*P,e[9]=(r*T-n*k-o*E)*P,e[10]=(f*w-m*b+y*v)*P,e[11]=(h*b-u*w-p*v)*P,e[12]=(s*A-a*C-l*E)*P,e[13]=(n*C-r*A+i*E)*P,e[14]=(m*_-f*x-g*v)*P,e[15]=(u*x-h*_+d*v)*P,e):null}function Os(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*h+w*m,e[1]=_*i+b*l+x*d+w*g,e[2]=_*o+b*c+x*p+w*y,e[3]=_*a+b*u+x*f+w*v,e[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,e[5]=_*i+b*l+x*d+w*g,e[6]=_*o+b*c+x*p+w*y,e[7]=_*a+b*u+x*f+w*v,e[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,e[9]=_*i+b*l+x*d+w*g,e[10]=_*o+b*c+x*p+w*y,e[11]=_*a+b*u+x*f+w*v,e[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,e[13]=_*i+b*l+x*d+w*g,e[14]=_*o+b*c+x*p+w*y,e[15]=_*a+b*u+x*f+w*v,e}function Ns(e,t,n){var r,i,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e}function Rs(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ds(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e}function Fs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=l*r+d*i,e}function js(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zs(e,t,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.hypot(a,s,l);return c<Cs?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(t),i=Math.cos(t),e[0]=a*a*(o=1-i)+i,e[1]=s*a*o+l*r,e[2]=l*a*o-s*r,e[3]=0,e[4]=a*s*o-l*r,e[5]=s*s*o+i,e[6]=l*s*o+a*r,e[7]=0,e[8]=a*l*o+s*r,e[9]=s*l*o-a*r,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Bs=Os;function Us(){var e=new ks(3);return ks!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Vs(e){var t=new ks(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Zs(e){return Math.hypot(e[0],e[1],e[2])}function qs(e,t,n){var r=new ks(3);return r[0]=e,r[1]=t,r[2]=n,r}function Gs(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ws(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Hs(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Xs(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ks(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Ys(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Js(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Qs(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function $s(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function el(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function tl(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function nl(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],l=t[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,d=i*h-o*u,p=o*c-r*h,f=r*u-i*c,m=2*n[3];return u*=m,h*=m,p*=2,f*=2,e[0]=a+(c*=m)+(d*=2),e[1]=s+u+p,e[2]=l+h+f,e}var rl,il=Ws,ol=Hs,al=Zs;function sl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function ll(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function cl(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function ul(){var e=new ks(4);return ks!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function hl(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function dl(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}function pl(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e}Us(),rl=new ks(4),ks!=Float32Array&&(rl[0]=0,rl[1]=0,rl[2]=0,rl[3]=0);var fl=ll;Us(),qs(1,0,0),qs(0,1,0),ul(),ul(),Is();const ml=ia([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:gl}=ml,yl=ia([{name:"a_pos_3",components:3,type:"Int16"}]);var vl=ia([{name:"a_pos",type:"Int16",components:2}]);class _l{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=$s(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=Cs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=Cs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Cs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=r*r+i*i+o*o,u=2*(a*r+s*i+l*o),h=u*u-4*c*(a*a+s*s+l*l-t*t);if(h<0){const e=Math.max(-u/2,0),c=a+r*e,h=s+i*e,d=l+o*e,p=Math.hypot(c,h,d);return n[0]=c*t/p,n[1]=h*t/p,n[2]=d*t/p,!1}{const e=(-u-Math.sqrt(h))/(2*c);if(e<0){const e=Math.hypot(a,s,l);return n[0]=a*t/e,n[1]=s*t/e,n[2]=l*t/e,!1}return n[0]=a+r*e,n[1]=s+i*e,n[2]=l+o*e,!0}}}class bl{constructor(e,t,n,r,i){this.TL=e,this.TR=t,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(e,t,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=tl(r,r,e),l=tl(i,i,e),c=tl(o,o,e),u=tl(a,a,e);return new bl(s,l,c,u,t/n)}}class xl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=cl([],n,e),a=1/o[3]/t*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Qs([],el([],il([],o[e[0]],o[e[1]]),il([],o[e[2]],o[e[1]]))),n=-$s(t,o[e[1]]);return t.concat(n)}));return new xl(o,a)}}class wl{static fromPoints(e){const t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of e)Xs(t,t,r),Ks(n,n,r);return new wl(t,n)}static applyTransform(e,t){const n=e.getCorners();for(let r=0;r<n.length;++r)tl(n[r],n[r],t);return wl.fromPoints(n)}constructor(e,t){this.min=e,this.max=t,this.center=Ys([],Gs([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=Vs(this.min),r=Vs(this.max);for(let i=0;i<t.length;i++)n[i]=t[i]?this.min[i]:this.center[i],r[i]=t[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new wl(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let r=0;r<e.planes.length;r++){const i=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=$s(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let r=0;r<3;r++){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][r]-this.min[r];t=Math.min(t,o),n=Math.max(n,o)}if(n<0||t>this.max[r]-this.min[r])return 0}return 1}}const Sl=As/Math.PI/2,El=64,Al=[El,32,16],Tl=-Sl,Cl=Sl,kl=[new wl([Tl,Tl,Tl],[Cl,Cl,Cl]),new wl([Tl,Tl,Tl],[0,0,Cl]),new wl([0,Tl,Tl],[Cl,0,Cl]),new wl([Tl,0,Tl],[0,Cl,Cl]),new wl([0,0,Tl],[Cl,Cl,Cl])];function Il(e){return e*Sl/ec}function Pl(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=Ys([],e._camera.position,e.worldSize),o=[t,n,1,1];cl(o,o,e.pixelMatrixInverse),sl(o,o,1/o[3]);const a=Qs([],il([],o,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=il([],l,i),u=Zs(c),h=Qs([],c),d=e.worldSize/(2*Math.PI),p=$s(h,a),f=Math.asin(d/u);if(f<Math.acos(p)){if(!r)return null;const e=[],t=[];Ys(e,a,u/p),Qs(t,il(t,e,c)),Qs(a,Gs(a,c,Ys(a,t,Math.tan(f)*u)))}const m=[];new _l(i,a).closestPointOnSphere(l,d,m);const g=Qs([],K(s,0)),y=Qs([],K(s,1)),v=Qs([],K(s,2)),b=$s(g,m),x=$s(y,m),w=$s(v,m),S=_(Math.asin(-x/d));let A=_(Math.atan2(b,w));A=e.center.lng+function(e,t){const n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,A);const T=ic(A),C=E(oc(S),0,1);return new dc(T,C)}class Ll{constructor(e,t,n){this.a=il([],e,n),this.b=il([],t,n),this.center=n;const r=Qs([],this.a),i=Qs([],this.b);this.angle=Math.acos($s(r,i))}}function Ml(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,r){const i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,E(n,0,1))+e.center[t]}function Ol(e){if(e.z<=1)return kl[e.z+2*e.y+e.x];const t=zl(jl(e));return wl.fromPoints(t)}function Nl(e,t,n){return Ys(e,e,1-n),Js(e,e,t,n)}function Rl(e,t){const n=Xl(t.zoom);if(0===n)return Ol(e);const r=jl(e),i=zl(r),o=ic(r.getWest())*t.worldSize,a=ic(r.getEast())*t.worldSize,s=oc(r.getNorth())*t.worldSize,l=oc(r.getSouth())*t.worldSize,c=[o,s,0],u=[a,s,0],h=[o,l,0],d=[a,l,0],p=Ms([],t.globeMatrix);return tl(c,c,p),tl(u,u,p),tl(h,h,p),tl(d,d,p),i[0]=Nl(i[0],h,n),i[1]=Nl(i[1],d,n),i[2]=Nl(i[2],u,n),i[3]=Nl(i[3],c,n),wl.fromPoints(i)}function Dl(e,t,n){for(const r of e)tl(r,r,t),Ys(r,r,n)}function Fl(e,t,n){const r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){const e=Ol(n).getCorners();return Dl(e,i,r),wl.fromPoints(e)}const o=jl(n),a=zl(o);Dl(a,i,r);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(o.contains(e.center)){for(const e of a)Xs(c,c,e),Ks(l,l,e);l[2]=0;const t=e.point,n=[t.x*r,t.y*r,0];return Xs(c,c,n),Ks(l,l,n),new wl(c,l)}const u=[i[12]*r,i[13]*r,i[14]*r],h=o.getCenter(),d=E(e.center.lat,-uc,uc),p=E(h.lat,-uc,uc),f=ic(e.center.lng),m=oc(d);let g=f-ic(h.lng);const y=m-oc(p);g>.5?g-=1:g<-.5&&(g+=1);let _=0;Math.abs(g)>Math.abs(y)?_=g>=0?1:3:(_=y>=0?0:2,Js(u,u,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(v(y>=0?o.getSouth():o.getNorth()))*Sl));const b=a[_],x=a[(_+1)%4],w=new Ll(b,x,u),S=[Ml(w,0)||b[0],Ml(w,1)||b[1],Ml(w,2)||b[2]],A=Xl(e.zoom);if(A>0){const r=function(e,t,n,r,i){let{x:o,y:a,z:s}=e;const l=1/(1<<s);let c=o*l,u=c+l,h=a*l,d=h+l,p=0;const f=(c+u)/2-r;return f>.5?p=-1:f<-.5&&(p=1),c=((c+p)*t-(r*=t))*n+r,u=((u+p)*t-r)*n+r,h=(h*t-(i*=t))*n+i,d=(d*t-i)*n+i,[[c,d,0],[u,d,0],[u,h,0],[c,h,0]]}(n,t,e._pixelsPerMercatorPixel,f,m);for(let e=0;e<a.length;e++)Nl(a[e],r[e],A);const i=Gs([],r[_],r[(_+1)%4]);Ys(i,i,.5),Nl(S,i,A)}for(const v of a)Xs(c,c,v),Ks(l,l,v);return c[2]=Math.min(b[2],x[2]),Xs(c,c,S),Ks(l,l,S),new wl(c,l)}function jl(e){let{x:t,y:n,z:r}=e;const i=1/(1<<r),o=new nc(sc(t*i),lc((n+1)*i)),a=new nc(sc((t+1)*i),lc(n*i));return new Ts(o,a)}function zl(e){const t=v(e.getNorth()),n=v(e.getSouth()),r=Math.cos(t),i=Math.cos(n),o=Math.sin(t),a=Math.sin(n),s=e.getWest(),l=e.getEast();return[Bl(i,a,s),Bl(i,a,l),Bl(r,o,l),Bl(r,o,s)]}function Bl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sl;return n=v(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function Ul(e,t,n){return Bl(Math.cos(v(e)),Math.sin(v(e)),t,n)}function Vl(e,t,n,r){const i=1<<n.z,o=(e/As+n.x)/i;return Ul(lc((t/As+n.y)/i),sc(o),r)}function Zl(e){let{min:t,max:n}=e;return 16383/Math.max(n[0]-t[0],n[1]-t[1],n[2]-t[2])}const ql=new Float64Array(16);function Gl(e){const t=Zl(e),n=js(ql,[t,t,t]);return Ns(n,n,((r=[])[0]=-(i=e.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Wl(e){const t=(r=e.min,(n=ql)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Zl(e);return Rs(t,t,[i,i,i])}function Hl(e,t,n,r,i){const o=function(e){const t=As/(2*Math.PI);return e/(2*Math.PI)/t}(n),a=[e,t,-n/(2*Math.PI)],s=Ls(new Float64Array(16));return Ns(s,s,a),Rs(s,s,[o,o,o]),Ds(s,s,v(-i)),Fs(s,s,v(-r)),s}function Xl(e){return A(5,6,e)}function Kl(e,t){const n=Ul(t.lat,t.lng),r=function(e){const t=Ul(e._center.lat,e._center.lng);let n=el([],qs(0,1,0),t);const r=zs([],-e.angle,t);n=tl(n,n,r),zs(r,-e._pitch,n);const i=Qs([],t);return Ys(i,i,Il(e.cameraToCenterDistance/e.pixelsPerMeter)),tl(i,i,r),Gs([],t,i)}(e);return a=(i=Ws([],r,n))[0],s=i[1],l=i[2],c=(o=n)[0],u=o[1],h=o[2],p=(d=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+h*h))&&$s(i,o)/d,Math.acos(Math.min(Math.max(p,-1),1));var i,o,a,s,l,c,u,h,d,p}function Yl(e,t){return Kl(e,t)>Math.PI/2*1.01}const Jl=v(85),Ql=Math.cos(Jl),$l=Math.sin(Jl),ec=6371008.8,tc=2*Math.PI*ec;class nc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(t,")"));if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new nc(T(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return ec*Math.acos(Math.min(i,1))}toBounds(){const e=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,t=e/Math.cos(Math.PI/180*this.lat);return new Ts(new nc(this.lng-t,this.lat-e),new nc(this.lng+t,this.lat+e))}toEcef(e){const t=Il(e);return Ul(this.lat,this.lng,Sl+t)}static convert(e){if(e instanceof nc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new nc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new nc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function rc(e){return tc*Math.cos(e*Math.PI/180)}function ic(e){return(180+e)/360}function oc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ac(e,t){return e/rc(t)}function sc(e){return 360*e-180}function lc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function cc(e,t){return e*rc(lc(t))}const uc=85.051129;function hc(e){return 1/Math.cos(e*Math.PI/180)}class dc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=nc.convert(e);return new dc(ic(n.lng),oc(n.lat),ac(t,n.lat))}toLngLat(){return new nc(sc(this.x),lc(this.y))}toAltitude(){return cc(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/tc*hc(lc(this.y))}}function pc(e,t,n,r,i,o,a,s,l){const c=(t+r)/2,u=(n+i)/2,h=new f(c,u);s(h),function(e,t,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-t)*a-(n-e)*s)/Math.hypot(a,s)}(h.x,h.y,o.x,o.y,a.x,a.y)>=l?(pc(e,t,n,c,u,o,h,s,l),pc(e,c,u,r,i,h,a,s,l)):e.push(a)}function fc(e,t,n){let r=e[0],i=r.x,o=r.y;t(r);const a=[r];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),pc(a,i,o,c,u,r,l,t,n),i=c,o=u,r=l}return a}function mc(e,t,n,r){if(r(t,n)){const i=t.add(n)._mult(.5);mc(e,t,i,r),mc(e,i,n,r)}else e.push(n)}function gc(e,t){let n=e[0];const r=[n];for(let i=1;i<e.length;i++){const o=e[i];mc(r,n,o,t),n=o}return r}const yc=Math.pow(2,14)-1,vc=-yc-1;function _c(e,t){const n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=E(n,vc,yc),e.y=E(r,vc,yc),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&U("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function bc(e,t,n){const r=e.loadGeometry(),i=e.extent,o=As/i;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:c}=n,u=e=>{const n=sc((t.x+e.x/i)/o),r=lc((t.y+e.y/i)/o),u=c.project(n,r);e.x=(u.x*a-s)*i,e.y=(u.y*a-l)*i};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=fc(r[t],u,1);else{const e=[];for(const n of r[t])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),e.push(n));r[t]=e}}for(const a of r)for(const e of a)_c(e,o);return r}function xc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?bc(e):[]}}function wc(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function Sc(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class Ec{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new aa,this.indexArray=new wa,this.segments=new Es,this.programConfigurations=new fs(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=xc(l,e);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),t,n))continue;const i=a?a.evaluate(t,{},n):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:e?t.geometry:bc(l,n,r),patterns:{},sortKey:i};o.push(s)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new pa,s=r.projection);for(const l of o){const{geometry:r,index:i,sourceLayerIndex:o}=l,a=e[i].feature;this.addFeature(l,r,i,t.availableImages,n,s),t.featureIndex.insert(a,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ws.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Ss.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,r,i,o){for(const a of t)for(const t of a){const n=t.x,r=t.y;if(n<0||n>=As||r<0||r>=As)continue;if(o){const e=o.projectTilePoint(n,r,i),t=o.upVector(i,n,r),a=this.globeExtVertexArray;Sc(a,e,t),Sc(a,e,t),Sc(a,e,t),Sc(a,e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;wc(this.layoutVertexArray,n,r,-1,-1),wc(this.layoutVertexArray,n,r,1,-1),wc(this.layoutVertexArray,n,r,1,1),wc(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}function Ac(e,t){for(let n=0;n<e.length;n++)if(Nc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Nc(e,t[n]))return!0;return!!Ic(e,t)}function Tc(e,t,n){return!!Nc(e,t)||!!Lc(t,e,n)}function Cc(e,t){if(1===e.length)return Oc(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(Nc(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(Oc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ic(e,t[n]))return!0;return!1}function kc(e,t,n){if(e.length>1){if(Ic(e,t))return!0;for(let r=0;r<t.length;r++)if(Lc(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(Lc(e[r],t,n))return!0;return!1}function Ic(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(Pc(r,i,t[e],t[e+1]))return!0}return!1}function Pc(e,t,n,r){return V(e,n,r)!==V(t,n,r)&&V(e,t,n)!==V(e,t,r)}function Lc(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(Mc(e,t[i-1],t[i])<r)return!0;return!1}function Mc(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function Oc(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function Nc(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Rc(e,t,n,r,i){for(const a of e)if(t<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new f(t,n),new f(t,i),new f(r,i),new f(r,n)];if(e.length>2)for(const a of o)if(Nc(e,a))return!0;for(let a=0;a<e.length-1;a++)if(Dc(e[a],e[a+1],o))return!0;return!1}function Dc(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=V(e,t,n[0]);return o!==V(e,t,n[1])||o!==V(e,t,n[2])||o!==V(e,t,n[3])}function Fc(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function jc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function zc(e,t,n,r,i){if(!t[0]&&!t[1])return e;const o=f.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<e.length;s++)a.push(e[s].sub(o));return a}function Bc(e,t,n,r){const i=f.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}Vi(Ec,"CircleBucket",{omit:["layers"]});const Uc=new $o({"circle-sort-key":new Jo(Ye.layout_circle["circle-sort-key"])});var Vc={paint:new $o({"circle-radius":new Jo(Ye.paint_circle["circle-radius"]),"circle-color":new Jo(Ye.paint_circle["circle-color"]),"circle-blur":new Jo(Ye.paint_circle["circle-blur"]),"circle-opacity":new Jo(Ye.paint_circle["circle-opacity"]),"circle-translate":new Yo(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new Yo(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yo(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yo(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jo(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jo(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jo(Ye.paint_circle["circle-stroke-opacity"])}),layout:Uc};function Zc(e,t,n,r,i,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const h of t)for(const t of h){const h=t.add(s),d=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,p=n.projection.projectTilePoint(h.x,h.y,c);if(d>0){const e=n.projection.upVector(c,h.x,h.y);p.x+=e[0]*u*d,p.y+=e[1]*u*d,p.z+=e[2]*u*d}const f=o?h:qc(p.x,p.y,p.z,r),m=o?e.tilespaceRays.map((e=>Hc(e,d))):e.queryGeometry.screenGeometry,g=cl([],[p.x,p.y,p.z,1],r);if(!a&&o?l*=g[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/g[3]),o){const e=lc((t.y/As+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(e,1)/ac(1,e)}if(Tc(m,f,l))return!0}return!1}function qc(e,t,n,r){const i=cl([],[e,t,n,1],r);return new f(i[0]/i[3],i[1]/i[3])}const Gc=qs(0,0,0),Wc=qs(0,0,1);function Hc(e,t){const n=Us();return Gc[2]=t,e.intersectsPlane(Gc,Wc,n),new f(n[0],n[1])}class Xc extends Ec{}function Kc(e,t,n,r){let{width:i,height:o}=t;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function Yc(e,t,n){const{width:r,height:i}=t;r===e.width&&i===e.height||(Jc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function Jc(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}Vi(Xc,"HeatmapBucket",{omit:["layers"]});class Qc{constructor(e,t){Kc(this,e,1,t)}resize(e){Yc(this,new Qc(e),1)}clone(){return new Qc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Jc(e,t,n,r,i,1)}}class $c{constructor(e,t){Kc(this,e,4,t)}resize(e){Yc(this,new $c(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new $c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Jc(e,t,n,r,i,4)}}Vi(Qc,"AlphaImage"),Vi($c,"RGBAImage");var eu={paint:new $o({"heatmap-radius":new Jo(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jo(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yo(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qo(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yo(Ye.paint_heatmap["heatmap-opacity"])})};function tu(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new $c({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let t=0,r=0;t<n;t++,r+=4){const i=t/(n-1),{start:l,end:c}=e.clips[a];o(s,r,l*(1-i)+c*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}var nu={paint:new $o({"hillshade-illumination-direction":new Yo(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yo(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yo(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yo(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yo(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yo(Ye.paint_hillshade["hillshade-accent-color"])})};const ru=ia([{name:"a_pos",components:2,type:"Int16"}],4),{members:iu}=ru;var ou={};function au(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,d=su(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=su(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(vu(a));for(s.sort(fu),i=0;i<s.length;i++)n=mu(s[i],n);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var f=n;f<h;f+=n)(s=e[f])<r&&(r=s),(l=e[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?32767/c:0}return cu(d,p,n,r,i,c,0),p}function su(e,t,n,r,i){var o,a;if(i===Lu(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ku(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ku(o,e[o],e[o+1],a);return a&&wu(a,a.next)&&(Iu(a),a=a.next),a}function lu(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!wu(r,r.next)&&0!==xu(r.prev,r,r.next))r=r.next;else{if(Iu(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function cu(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=yu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?hu(e,r,i,o):uu(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Iu(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?cu(e=du(lu(e),t,n),t,n,r,i,o,2):2===a&&pu(e,t,n,r,i,o):cu(lu(e),t,n,r,i,o,1);break}}}function uu(e){var t=e.prev,n=e,r=e.next;if(xu(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=i>o?i>a?i:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&_u(i,s,o,l,a,c,f.x,f.y)&&xu(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function hu(e,t,n,r){var i=e.prev,o=e,a=e.next;if(xu(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,d=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=yu(p,f,t,n,r),v=yu(m,g,t,n,r),_=e.prevZ,b=e.nextZ;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==a&&_u(s,u,l,h,c,d,_.x,_.y)&&xu(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&_u(s,u,l,h,c,d,b.x,b.y)&&xu(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==a&&_u(s,u,l,h,c,d,_.x,_.y)&&xu(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&_u(s,u,l,h,c,d,b.x,b.y)&&xu(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function du(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!wu(i,o)&&Su(i,r,r.next,o)&&Tu(i,o)&&Tu(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),Iu(r),Iu(r.next),r=e=o),r=r.next}while(r!==e);return lu(r)}function pu(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&bu(a,s)){var l=Cu(a,s);return a=lu(a,a.next),l=lu(l,l.next),cu(a,t,n,r,i,o,0),void cu(l,t,n,r,i,o,0)}s=s.next}a=a.next}while(a!==e)}function fu(e,t){return e.x-t.x}function mu(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&_u(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Tu(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&gu(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=Cu(n,e);return lu(r,r.next),lu(n,n.next)}function gu(e,t){return xu(e.prev,e,t.prev)<0&&xu(t.next,e,e.next)<0}function yu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function _u(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function bu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Su(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Tu(e,t)&&Tu(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(xu(e.prev,e,t.prev)||xu(e,t.prev,t))||wu(e,t)&&xu(e.prev,e,e.next)>0&&xu(t.prev,t,t.next)>0)}function xu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function wu(e,t){return e.x===t.x&&e.y===t.y}function Su(e,t,n,r){var i=Au(xu(e,t,n)),o=Au(xu(e,t,r)),a=Au(xu(n,r,e)),s=Au(xu(n,r,t));return i!==o&&a!==s||!(0!==i||!Eu(e,n,t))||!(0!==o||!Eu(e,r,t))||!(0!==a||!Eu(n,e,r))||!(0!==s||!Eu(n,t,r))}function Eu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Au(e){return e>0?1:e<0?-1:0}function Tu(e,t){return xu(e.prev,e,e.next)<0?xu(e,t,e.next)>=0&&xu(e,e.prev,t)>=0:xu(e,t,e.prev)<0||xu(e,e.next,t)<0}function Cu(e,t){var n=new Pu(e.i,e.x,e.y),r=new Pu(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ku(e,t,n,r){var i=new Pu(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Iu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Pu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lu(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function Mu(e,t,n,r,i){Ou(e,t,n||0,r||e.length-1,i||Ru)}function Ou(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Ou(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}var u=e[t],h=n,d=r;for(Nu(e,n,t),i(e[r],u)>0&&Nu(e,n,r);h<d;){for(Nu(e,h,d),h++,d--;i(e[h],u)<0;)h++;for(;i(e[d],u)>0;)d--}0===i(e[n],u)?Nu(e,n,d):Nu(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function Nu(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ru(e,t){return e<t?-1:e>t?1:0}function Du(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let a=0;a<n;a++){const t=Z(e[a]);0!==t&&(e[a].area=Math.abs(t),void 0===o&&(o=t<0),o===t<0?(i&&r.push(i),i=[e[a]]):i.push(e[a]))}if(i&&r.push(i),t>1)for(let a=0;a<r.length;a++)r[a].length<=t||(Mu(r[a],t,1,r[a].length-1,Fu),r[a]=r[a].slice(0,t));return r}function Fu(e,t){return t.area-e.area}function ju(e,t,n){const r=n.patternDependencies;let i=!1;for(const o of t){const t=o.paint.get("".concat(e,"-pattern"));t.isConstant()||(i=!0);const n=t.constantOr(null);n&&(i=!0,r[n]=!0)}return i}function zu(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get("".concat(e,"-pattern")).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r},n,{},i.availableImages);e=e&&e.name?e.name:e,o[e]=!0,n.patterns[a.id]=e}}return n}({get exports(){return ou},set exports(e){ou=e}}).exports=au,ou.default=au,au.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(Lu(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(Lu(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},au.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n};class Bu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new aa,this.indexArray=new wa,this.indexArray2=new ka,this.programConfigurations=new fs(e.layers,e.zoom),this.segments=new Es,this.segments2=new Es,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,n,r){this.hasPattern=ju("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=xc(a,e);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,t.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:bc(a,n,r),patterns:{},sortKey:h};o.push(d)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const e=zu("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,r,i,n,{},t.availableImages);t.featureIndex.insert(e[i].feature,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,iu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];for(const a of Du(t,500)){let e=0;for(const s of a)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),r.push(s[n].x),r.push(s[n].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const o=ou(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);t.vertexLength+=e,t.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}Vi(Bu,"FillBucket",{omit:["layers","patternFeatures"]});const Uu=new $o({"fill-sort-key":new Jo(Ye.layout_fill["fill-sort-key"])});var Vu={paint:new $o({"fill-antialias":new Yo(Ye.paint_fill["fill-antialias"]),"fill-opacity":new Jo(Ye.paint_fill["fill-opacity"]),"fill-color":new Jo(Ye.paint_fill["fill-color"]),"fill-outline-color":new Jo(Ye.paint_fill["fill-outline-color"]),"fill-translate":new Yo(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new Yo(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jo(Ye.paint_fill["fill-pattern"])}),layout:Uu};const Zu=ia([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),qu=ia([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Gu=ia([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Wu}=Zu;var Hu={},Xu=f,Ku=Yu;function Yu(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Ju,this,t)}function Ju(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Qu(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}Yu.types=["Unknown","Point","LineString","Polygon"],Yu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new Xu(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Yu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Yu.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Yu.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Qu(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var $u=Ku,eh=th;function th(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(nh,this,t),this.length=this._features.length}function nh(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}th.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new $u(this._pbf,t,this.extent,this._keys,this._values)};var rh=eh;function ih(e,t,n){if(3===e){var r=new rh(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var oh=Hu.VectorTile=function(e,t){this.layers=e.readFields(ih,{},t)},ah=Hu.VectorTileFeature=Ku;function sh(e,t,n,r){const i=[],o=0===r?(e,t,n,r,i,o)=>{e.push(new f(o,n+(o-t)/(r-t)*(i-n)))}:(e,t,n,r,i,o)=>{e.push(new f(t+(o-n)/(i-n)*(r-t),o))};for(const a of e){const e=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let e=0;e<i.length-1;e++){const s=i[e].x,l=i[e].y,c=i[e+1].x,u=i[e+1].y,h=0===r?s:l,d=0===r?c:u;h<t?d>t&&o(a,s,l,c,u,t):h>n?d<n&&o(a,s,l,c,u,n):a.push(i[e]),d<t&&h>=t&&o(a,s,l,c,u,t),d>n&&h<=n&&o(a,s,l,c,u,n)}let s=i[i.length-1];const l=0===r?s.x:s.y;l>=t&&l<=n&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&i.push(e)}return i}Hu.VectorTileLayer=eh;const lh=ah.types,ch=Math.pow(2,13);function uh(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*ch)<<1)+i,Math.round(s))}function hh(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class dh{constructor(){this.acc=new f(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new f(e.x,e.y),this.max=new f(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===As)&&e.x===t.x)!=((0===e.y||e.y===As)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,kn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>As!=e.x>As&&this.addBorderIntersection(1,kn(t.y,e.y,(As-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,kn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>As!=e.y>As&&this.addBorderIntersection(3,kn(t.x,e.x,(As-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new f(0,0)}span(){return new f(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class ph{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new la,this.centroidVertexArray=new Ua,this.indexArray=new wa,this.programConfigurations=new fs(e.layers,e.zoom),this.segments=new Es,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n,r){this.features=[],this.hasPattern=ju("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/As/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=xc(i,e);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:bc(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(zu("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,n,{},t.availableImages,r),t.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(e,t,n,r,i){for(const o of this.features){const{geometry:e}=o;this.addFeature(o,e,o.index,t,n,r,i)}this.sortBorders()}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Wu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Gu.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,qu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i,o,a){const s=[new f(0,0),new f(As,As)],l=a.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new dh:null,h="Polygon"===lh[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new pa);const d=Du(t,500);for(let f=d.length-1;f>=0;f--){const e=d[f];(0===e.length||(p=e[0]).every((e=>e.x<=0))||p.every((e=>e.x>=As))||p.every((e=>e.y<=0))||p.every((e=>e.y>=As)))&&d.splice(f,1)}var p;let m;if(c)m=xh(d,s,r);else{m=[];for(const e of d)m.push({polygon:e,bounds:s})}const g=h?this.edgeRadius:0;for(const{polygon:f,bounds:y}of m){let e=0,t=0;for(const r of f)h&&!r[0].equals(r[r.length-1])&&r.push(r[0]),t+=h?r.length-1:r.length;const n=this.segments.prepareSegment((h?5:4)*t,this.layoutVertexArray,this.indexArray);if(h){const t=[],i=[];e=n.vertexLength;for(const e of f){let o,a;e.length&&e!==f[0]&&i.push(t.length/2),o=e[1].sub(e[0])._perp()._unit();for(let i=1;i<e.length;i++){const s=e[i],u=e[i===e.length-1?1:i+1];let{x:h,y:d}=s;if(g){a=u.sub(s)._perp()._unit();const e=o.add(a)._unit(),t=g*Math.min(4,1/(o.x*e.x+o.y*e.y));h+=t*e.x,d+=t*e.y,o=a}uh(this.layoutVertexArray,h,d,0,0,1,1,0),n.vertexLength++,t.push(s.x,s.y),c&&hh(this.layoutVertexExtArray,l.projectTilePoint(h,d,r),l.upVector(r,h,d))}}const o=ou(t,i);for(let r=0;r<o.length;r+=3)this.indexArray.emplaceBack(e+o[r],e+o[r+2],e+o[r+1]),n.primitiveLength++}for(const i of f){u&&i.length&&u.startRing(i[0]);let t,o,a,s=i.length>4&&vh(i[i.length-2],i[0],i[1]),d=g?mh(i[i.length-2],i[0],i[1],g):0;o=i[1].sub(i[0])._perp()._unit();let p=!0;for(let f=1,m=0;f<i.length;f++){let v=i[f-1],_=i[f];const b=i[f===i.length-1?1:f+1];if(u&&h&&u.currentPolyCount.top++,yh(_,v,y)){g&&(o=b.sub(_)._perp()._unit(),p=!p);continue}u&&u.append(_,v);const x=_.sub(v)._perp(),w=x.x/(Math.abs(x.x)+Math.abs(x.y)),S=x.y>0?1:0,E=v.dist(_);if(m+E>32768&&(m=0),g){a=b.sub(_)._perp()._unit();let e=gh(v,_,b,fh(o,a),g);isNaN(e)&&(e=0);const t=_.sub(v)._unit();v=v.add(t.mult(d))._round(),_=_.add(t.mult(-e))._round(),d=e,o=a}const A=n.vertexLength,T=i.length>4&&vh(v,_,b);let C=_h(m,s,p);if(uh(this.layoutVertexArray,v.x,v.y,w,S,0,0,C),uh(this.layoutVertexArray,v.x,v.y,w,S,0,1,C),m+=E,C=_h(m,T,!p),s=T,uh(this.layoutVertexArray,_.x,_.y,w,S,0,0,C),uh(this.layoutVertexArray,_.x,_.y,w,S,0,1,C),n.vertexLength+=4,this.indexArray.emplaceBack(A+0,A+1,A+2),this.indexArray.emplaceBack(A+1,A+3,A+2),n.primitiveLength+=2,g){const r=e+(1===f?i.length-2:f-2),o=1===f?e:r+1;if(this.indexArray.emplaceBack(A+1,r,A+3),this.indexArray.emplaceBack(r,o,A+3),n.primitiveLength+=2,void 0===t&&(t=A),!yh(b,i[f],y)){const e=f===i.length-1?t:n.vertexLength;this.indexArray.emplaceBack(A+2,A+3,e),this.indexArray.emplaceBack(A+3,e+1,e),this.indexArray.emplaceBack(A+3,o,e+1),n.primitiveLength+=3}p=!p}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(v.x,v.y,r),n=l.projectTilePoint(_.x,_.y,r),i=l.upVector(r,v.x,v.y),o=l.upVector(r,_.x,_.y);hh(e,t,i),hh(e,t,i),hh(e,n,o),hh(e,n,o)}}h&&(e+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t){let n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){const i=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(i.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else n=Math.ceil(7*(e.x+450)),r=0;else n=0,r=+i;let o=i?this.centroidVertexArray.length:t.vertexArrayOffset;for(const a of t.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let e=0;e<a.top;e++)this.centroidVertexArray.emplace(o++,n,r);for(let e=0;e<2*a.edges;e++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,n,r)}}}function fh(e,t){const n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function mh(e,t,n,r){const i=t.sub(e)._perp()._unit(),o=n.sub(t)._perp()._unit();return gh(e,t,n,fh(i,o),r)}function gh(e,t,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*o/r)}function yh(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function vh(e,t,n){if(e.x<0||e.x>=As||t.x<0||t.x>=As||n.x<0||n.x>=As)return!1;const r=n.sub(t),i=r.perp(),o=e.sub(t);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function _h(e,t,n){const r=t?2|e:-3&e;return n?1|r:-2&r}function bh(){const e=Math.PI/32,t=Math.tan(e),n=ec;return n*Math.sqrt(1+2*t*t)-n}function xh(e,t,n){const r=1<<n.z,i=sc(n.x/r),o=sc((n.x+1)/r),a=lc(n.y/r),s=lc((n.y+1)/r);return function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=[];if(!e.length||!n||!r)return a;const s=(e,t)=>{for(const n of e)a.push({polygon:n,bounds:t})},l=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(r)),u=l-c,h=[];for(let f=0;f<Math.abs(u);f++)h.push(u>0?0:1);for(let f=0;f<Math.min(l,c);f++)h.push(0),h.push(1);let d=e;if(d=sh(d,t[0].y-i,t[1].y+i,1),d=sh(d,t[0].x-i,t[1].x+i,0),!d.length)return a;const p=[];for(h.length?p.push({polygons:d,bounds:t,depth:0}):s(d,t);p.length;){const e=p.pop(),t=e.depth,n=h[t],r=e.bounds[0],a=e.bounds[1],l=0===n?r.x:r.y,c=0===n?a.x:a.y,u=o?o(n,l,c):.5*(l+c),d=sh(e.polygons,l-i,u+i,n),m=sh(e.polygons,u-i,c+i,n);if(d.length){const e=[r,new f(0===n?u:a.x,1===n?u:a.y)];h.length>t+1?p.push({polygons:d,bounds:e,depth:t+1}):s(d,e)}if(m.length){const e=[new f(0===n?u:r.x,1===n?u:r.y),a];h.length>t+1?p.push({polygons:m,bounds:e,depth:t+1}):s(m,e)}}return a}(e,t,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=lc((n.y+t/As)/r);return(oc(.5*(lc((n.y+i/As)/r)+e))*r-n.y)*As}}))}Vi(ph,"FillExtrusionBucket",{omit:["layers","features"]}),Vi(dh,"PartMetadata");const wh=new $o({"fill-extrusion-edge-radius":new Yo(Ye["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Sh={paint:new $o({"fill-extrusion-opacity":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jo(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jo(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jo(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jo(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:wh};function Eh(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class Ah{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=kh(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var r=Eh(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Eh(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class Th{constructor(e,t){this.wrap=e,this.canonical=t,this.key=kh(e,t.z,t.z,t.x,t.y)}}class Ch{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new Ah(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:kh(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Ch(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ch(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return kh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return kh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Ch(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Ch(t,this.wrap,t,n,r),new Ch(t,this.wrap,t,n+1,r),new Ch(t,this.wrap,t,n,r+1),new Ch(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ch(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ch(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Th(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}function kh(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}Vi(Ah,"CanonicalTileID"),Vi(Ch,"OverscaledTileID",{omit:["projMatrix"]});class Ih extends f{constructor(e,t,n){super(e,t),this.z=n}}function Ph(e,t){return e.x*t.x+e.y*t.y}function Lh(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=Ph(s,s),h=Ph(s,l),d=Ph(l,l),p=Ph(c,s),f=Ph(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Mh(e,t,n,r,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=e.tileCoordToPixel(r,i),d=2*c+1,p=2*u+1,f=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),v=Math.min(.25,.5*l*(m+g)/d),_=Math.min(.25,.5*l*y/p);return s+Math.max(v*o,_*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const Oh=ia([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Nh}=Oh,Rh=ia([{name:"a_packed",components:4,type:"Float32"}]),{members:Dh}=Rh,Fh=ah.types,jh=Math.cos(Math.PI/180*37.5);class zh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new ca,this.layoutVertexArray2=new ua,this.indexArray=new wa,this.programConfigurations=new fs(e.layers,e.zoom),this.segments=new Es,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=ju("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:c,id:u,index:h,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=xc(c,e);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),t,n))continue;const a=i?i.evaluate(t,{},n):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:d,index:h,geometry:e?t.geometry:bc(c,n,r),patterns:{},sortKey:a};o.push(s)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const c of o){const{geometry:r,index:i,sourceLayerIndex:o}=c;if(l&&this.addFeatureDashes(c,a),this.hasPattern){const e=zu("line",this.layers,c,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(c,r,i,n,a.positions,t.availableImages);s.insert(e[i].feature,r,i,o,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)t=!0;else{const t=i.value,n=r.value;if(!n)continue;e.addDash(n,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:n},e);s="constant"===o.kind?o.value:o.evaluate({zoom:n},e),t.addDash(a,s),e.patterns[r.id]=t.getKey(a,s)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Dh)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Nh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const h of t)this.addLine(h,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Fh[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),h&&(d=h),h=e[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const y=f.x*m.x+f.y*m.y,v=t.x*m.x+t.y*m.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<jh&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&g>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const S=d&&p;let E=S?n:a?"butt":r;if(S&&"round"===E&&(_<o?E="miter":_<=2&&(E="fakeround")),"miter"===E&&_>i&&(E="bevel"),"bevel"===E&&(_>2&&(E="flipbevel"),_<i&&(E="miter")),d&&this.updateDistance(d,h),"miter"===E)t._mult(_),this.addCurrentVertex(h,t,0,0,u);else if("flipbevel"===E){if(_>100)t=m.mult(-1);else{const e=_*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(h,t,0,0,u),this.addCurrentVertex(h,t.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(_*_-1),t=w?e:0,n=w?0:e;if(d&&this.addCurrentVertex(h,f,t,n,u),"fakeround"===E){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===E)this.addCurrentVertex(h,t,0,0,u);else if("square"===E){const e=d?1:-1;d||this.addCurrentVertex(h,t,e,e,u),this.addCurrentVertex(h,t,0,0,u),d&&this.addCurrentVertex(h,t,e,e,u)}else"round"===E&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&g<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex(e,t,n,r,i,o,a){let{x:s,y:l}=e;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),i?this.e2=c:this.e1=c}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Vi(zh,"LineBucket",{omit:["layers","patternFeatures"]});const Bh=new $o({"line-cap":new Jo(Ye.layout_line["line-cap"]),"line-join":new Jo(Ye.layout_line["line-join"]),"line-miter-limit":new Yo(Ye.layout_line["line-miter-limit"]),"line-round-limit":new Yo(Ye.layout_line["line-round-limit"]),"line-sort-key":new Jo(Ye.layout_line["line-sort-key"])});var Uh={paint:new $o({"line-opacity":new Jo(Ye.paint_line["line-opacity"]),"line-color":new Jo(Ye.paint_line["line-color"]),"line-translate":new Yo(Ye.paint_line["line-translate"]),"line-translate-anchor":new Yo(Ye.paint_line["line-translate-anchor"]),"line-width":new Jo(Ye.paint_line["line-width"]),"line-gap-width":new Jo(Ye.paint_line["line-gap-width"]),"line-offset":new Jo(Ye.paint_line["line-offset"]),"line-blur":new Jo(Ye.paint_line["line-blur"]),"line-dasharray":new Jo(Ye.paint_line["line-dasharray"]),"line-pattern":new Jo(Ye.paint_line["line-pattern"]),"line-gradient":new Qo(Ye.paint_line["line-gradient"]),"line-trim-offset":new Yo(Ye.paint_line["line-trim-offset"])}),layout:Bh};const Vh=new class extends Jo{possiblyEvaluate(e,t){return t=new Uo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=I({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(Uh.paint.properties["line-width"].specification);function Zh(e,t){return t>0?t+2*e:e}Vh.useIntegerZoom=!0;const qh=ia([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gh=ia([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Wh=ia([{name:"a_projected_pos",components:4,type:"Float32"}],4);ia([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hh=ia([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Xh=ia([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kh=ia([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yh=ia([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ia([{name:"triangle",components:3,type:"Uint16"}]),ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ia([{type:"Float32",name:"offsetX"}]),ia([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Jh=24;const Qh=128;function $h(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Uo(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Uo(a)),maxSize:n.evaluate(new Uo(s)),interpolationType:r}}}function ed(e,t,n){let{uSize:r,uSizeT:i}=t,{lowerSize:o,upperSize:a}=n;return"source"===e.kind?o/Qh:"composite"===e.kind?kn(o/Qh,a/Qh,i):r}function td(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?E(Kn.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=kn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var nd=Object.freeze({__proto__:null,getSizeData:$h,evaluateSizeForFeature:ed,evaluateSizeForZoom:td,SIZE_PACK_FACTOR:Qh});function rd(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Bo.applyArabicShaping&&(e=Bo.applyArabicShaping(e)),e}(e.text,t,n)})),e}const id={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function od(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function ad(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var sd=ud,ld=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},cd=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*m};function ud(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}ud.Varint=0,ud.Fixed64=1,ud.Bytes=2,ud.Fixed32=5;var hd=4294967296,dd=1/hd,pd="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function fd(e){return e.type===ud.Bytes?e.readVarint()+e.pos:e.pos+1}function md(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function gd(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function yd(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function vd(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function _d(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function bd(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function xd(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function wd(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Sd(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Ed(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ad(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Td(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Cd(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function kd(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Id(e,t,n){t.glyphs=[],1===e&&n.readMessage(Pd,t)}function Pd(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(Ld,{});t.glyphs.push({id:e,bitmap:new Qc({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Ld(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Md(e){let t=0,n=0;for(const a of e)t+=a.w*a.h,n=Math.max(n,a.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const a of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===t.w&&a.h===t.h){const t=r.pop();e<r.length&&(r[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(r.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}ud.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Td(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=kd(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Td(this.buf,this.pos)+Td(this.buf,this.pos+4)*hd;return this.pos+=8,e},readSFixed64:function(){var e=Td(this.buf,this.pos)+kd(this.buf,this.pos+4)*hd;return this.pos+=8,e},readFloat:function(){var e=ld(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ld(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return md(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return md(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return md(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return md(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return md(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return md(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&pd?function(e,t,n){return pd.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ud.Bytes)return e.push(this.readVarint(t));var n=fd(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ud.Bytes)return e.push(this.readSVarint());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ud.Bytes)return e.push(this.readBoolean());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ud.Bytes)return e.push(this.readFloat());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ud.Bytes)return e.push(this.readDouble());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ud.Bytes)return e.push(this.readFixed32());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ud.Bytes)return e.push(this.readSFixed32());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ud.Bytes)return e.push(this.readFixed64());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ud.Bytes)return e.push(this.readSFixed64());var t=fd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===ud.Varint)for(;this.buf[this.pos++]>127;);else if(t===ud.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ud.Fixed32)this.pos+=4;else{if(t!==ud.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Cd(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Cd(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Cd(this.buf,-1&e,this.pos),Cd(this.buf,Math.floor(e*dd),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Cd(this.buf,-1&e,this.pos),Cd(this.buf,Math.floor(e*dd),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&gd(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),cd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),cd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&gd(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,ud.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,yd,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,vd,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,xd,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,_d,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,bd,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,wd,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Sd,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Ed,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Ad,t)},writeBytesField:function(e,t){this.writeTag(e,ud.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ud.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ud.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ud.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ud.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ud.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ud.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ud.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ud.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ud.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Od{constructor(e,t){let{pixelRatio:n,version:r,stretchX:i,stretchY:o,content:a}=t;this.paddedRect=e,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nd{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=Md(i),s=new $c({width:o||1,height:a||1});for(const l in e){const t=e[l],r=n[l].paddedRect;$c.copy(t.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},t.data)}for(const l in t){const e=t[l],n=r[l].paddedRect,i=n.x+1,o=n.y+1,a=e.data.width,c=e.data.height;$c.copy(e.data,s,{x:0,y:0},{x:i,y:o},e.data),$c.copy(e.data,s,{x:0,y:c-1},{x:i,y:o-1},{width:a,height:1}),$c.copy(e.data,s,{x:0,y:0},{x:i,y:o+c},{width:a,height:1}),$c.copy(e.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:c}),$c.copy(e.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new Od(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}Vi(Od,"ImagePosition"),Vi(Nd,"ImageAtlas");const Rd={horizontal:1,vertical:2,horizontalOnly:3};class Dd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Dd;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Dd;return t.imageName=e,t}}class Fd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Fd;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;n+=!t&&(i&&Ao(i)&&!id[e[r+1]]||o&&Ao(o)&&!id[e[r-1]])||!id[e[r]]?e[r]:id[e[r]]}return n}(this.text,e)}trim(){let e=0;for(let n=0;n<this.text.length&&zd[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&zd[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Fd;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Dd.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void U("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Dd.forImage(t)),this.sectionIndex.push(this.sections.length-1)):U("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function jd(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f){const m=Fd.fromFeature(e,i);h===Rd.vertical&&m.verticalizePunctuation(d);let g=[];const y=function(e,t,n,r,i,o){if(!e)return[];const a=[],s=function(e,t,n,r,i,o){let a=0;for(let s=0;s<e.length();s++){const n=e.getSection(s);a+=Ud(e.getCharCode(s),n,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,o),l=e.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<e.length();h++){const n=e.getSection(h),d=e.getCharCode(h);if(zd[d]||(c+=Ud(d,n,r,i,t,o)),h<e.length()-1){const t=!((u=d)<11904||!(ro(u)||no(u)||yo(u)||fo(u)||so(u)||Yi(u)||io(u)||$i(u)||lo(u)||co(u)||ao(u)||bo(u)||eo(u)||Qi(u)||Ji(u)||oo(u)||to(u)||go(u)||ho(u)||uo(u)));(Bd[d]||t||n.imageName)&&a.push(qd(h+1,c,s,a,Zd(d,e.getCharCode(h+1),t&&l),!1))}}var u;return Gd(qd(e.length(),c,s,a,0,!0))}(m,c,o,t,r,p),{processBidirectionalText:v,processStyledBidirectionalText:_}=Bo;if(v&&1===m.sections.length){const e=v(m.toString(),y);for(const t of e){const e=new Fd;e.text=t,e.sections=m.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);g.push(e)}}else if(_){const e=_(m.text,m.sectionIndex,y);for(const t of e){const e=new Fd;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,g.push(e)}}else g=function(e,t){const n=[],r=e.text;let i=0;for(const o of t)n.push(e.substring(i,o)),i=o;return i<r.length&&n.push(e.substring(i,r.length)),n}(m,y);const b=[],x={positionedLines:b,text:m.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const w of i){const e=w.getSections();for(const n of e){if(n.imageName)continue;const e=t[n.fontStack];if(e&&(g=void 0!==e.ascender&&void 0!==e.descender,!g))break}if(!g)break}let y=0;for(const w of i){w.trim();const i=w.getMaxScale(),a=(i-1)*Jh,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=s;const _=s.positionedGlyphs;let b=0;if(!w.length()){p+=o,++y;continue}let x=0,S=0;for(let o=0;o<w.length();o++){const a=w.getSection(o),s=w.getSectionIndex(o),f=w.getCharCode(o);let m=a.scale,y=null,E=null,A=null,T=Jh,C=0;const k=!(l===Rd.horizontal||!u&&!Eo(f)||u&&(zd[f]||(v=f,Hi(v)||Xi(v)||Ki(v)||mo(v)||_o(v))));if(a.imageName){const t=r[a.imageName];if(!t)continue;A=a.imageName,e.iconsInText=e.iconsInText||!0,E=t.paddedRect;const n=t.displaySize;m=m*Jh/h,y={width:n[0],height:n[1],left:1,top:-3,advance:k?n[1]:n[0],localGlyph:!1},C=g?-y.height*m:i*Jh-17-n[1]*m,T=y.advance;const o=(k?n[0]:n[1])*m-Jh*i;o>0&&o>b&&(b=o)}else{const e=n[a.fontStack];if(!e)continue;e[f]&&(E=e[f]);const r=t[a.fontStack];if(!r)continue;const o=r.glyphs[f];if(!o)continue;if(y=o.metrics,T=8203!==f?Jh:0,g){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,n=(e+t)*m;x<n&&(x=n,S=(e-t)/2*m),C=-e*m}else C=(i-m)*Jh-17}k?(e.verticalizable=!0,_.push({glyph:f,imageName:A,x:d,y:p+C,vertical:k,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:E}),d+=T*m+c):(_.push({glyph:f,imageName:A,x:d,y:p+C,vertical:k,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:E}),d+=y.advance*m+c)}0!==_.length&&(f=Math.max(d-c,f),g?Hd(_,m,b,S,o*i/2):Hd(_,m,b,0,o/2)),d=0;const E=o*i+b;s.lineOffset=Math.max(b,a),p+=E,++y}var v;const _=p,{horizontalAlign:b,verticalAlign:x}=Wd(a);(function(e,t,n,r,i,o){const a=(t-n)*i,s=-o*r;for(const l of e)for(const e of l.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,b,x,f,_),e.top+=-x*_,e.bottom=e.top+_,e.left+=-b*f,e.right=e.left+f,e.hasBaseline=g}(x,t,n,r,g,a,s,l,h,c,d,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&x}const zd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ud(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*Jh/o+i:0}{const r=n[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function Vd(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Zd(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function qd(e,t,n,r,i,o){let a=null,s=Vd(t,n,i,o);for(const l of r){const e=Vd(t-l.x,n,i,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function Gd(e){return e?Gd(e.priorBreak).concat(e.index):[]}function Wd(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Hd(e,t,n,r,i){if(!(t||n||r||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let l=0;l<=o;l++)e[l].x-=s,e[l].y+=n+r+i}function Xd(e,t,n){const{horizontalAlign:r,verticalAlign:i}=Wd(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Kd(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+f-r[0],d=i[1]+m+r[2]):(u=i[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}class Yd extends f{constructor(e,t,n,r,i){super(e,t),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Yd(this.x,this.y,this.z,this.angle,this.segment)}}function Jd(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function Qd(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function $d(e,t,n){return e?.6*t*n:0}function ep(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function tp(e,t,n,r,i,o){const a=$d(n,i,o),s=ep(n,r)*o;let l=0;const c=Qd(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],r=e[u+1],i=n.dist(r);if(l+i>c){const o=(c-l)/i,h=kn(n.x,r.x,o),d=kn(n.y,r.y,o),p=new Yd(h,d,0,r.angleTo(n),u);return!a||Jd(e,p,s,a,t)?p:void 0}l+=i}}function np(e,t,n,r,i,o,a,s,l){const c=$d(r,o,a),u=ep(r,i),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),rp(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,d,!1,l)}function rp(e,t,n,r,i,o,a,s,l){const c=o/2,u=Qd(e);let h=0,d=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;d+n<h+s;){d+=n;const g=(d-h)/s,y=kn(t.x,a.x,g),v=kn(t.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-c>=0&&d+c<=u){const t=new Yd(y,v,0,m,f);t._round(),r&&!Jd(e,t,o,r,i)||p.push(t)}}h+=s}return s||p.length||a||(p=rp(e,h/2,n,r,i,o,a,!0,l)),p}function ip(e,t,n,r,i){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new f(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new f(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new f(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new f(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new f(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new f(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new f(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new f(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}Vi(Yd,"Anchor");const op=1e20;function ap(e,t,n,r,i,o,a,s,l){for(let c=t;c<t+r;c++)sp(e,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)sp(e,c*o+t,1,r,a,s,l)}function sp(e,t,n,r,i,o,a){o[0]=0,a[0]=-op,a[1]=op,i[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[l];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=op}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*n]=i[r]+c*c}}const lp={none:0,ideographs:1,all:2};class cp{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const r in e)for(const t of e[r])n.push({stack:r,id:t});C(n,((e,t)=>{let{stack:n,id:r}=e,i=this.entries[n];i||(i=this.entries[n]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let o=i.glyphs[r];if(void 0!==o)return void t(null,{stack:n,id:r,glyph:o});if(o=this._tinySDF(i,n,r),o)return i.glyphs[r]=o,void t(null,{stack:n,id:r,glyph:o});const a=Math.floor(r/256);if(256*a>65535)return void t(new Error("glyphs > 65535 not supported"));if(i.ranges[a])return void t(null,{stack:n,id:r,glyph:o});let s=i.requests[a];s||(s=i.requests[a]=[],cp.loadGlyphRange(n,a,this.url,this.requestManager,((e,t)=>{if(t){i.ascender=t.ascender,i.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(i.glyphs[+e]=t.glyphs[+e]);i.ranges[a]=!0}for(const n of s)n(e,t);delete i.requests[a]}))),s.push(((e,i)=>{e?t(e):i&&t(null,{stack:n,id:r,glyph:i.glyphs[r]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==lp.none&&(this.localGlyphMode===lp.all?!!this.localFontFamily:!!this.localFontFamily&&(co(e)||po(e)||eo(e)||to(e)||$i(e)))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new cp.TinySDF({fontFamily:r,fontWeight:n,fontSize:48,buffer:6,radius:16}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:p}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new Qc({width:s,height:l},a),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}function up(e,t,n,r){const i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,h=o.stretchX||[[0,s]],d=o.stretchY||[[0,l]],p=(e,t)=>e+t[1]-t[0],m=h.reduce(p,0),g=d.reduce(p,0),y=s-m,v=l-g;let _=0,b=m,x=0,w=g,S=0,E=y,A=0,T=v;if(o.content&&r){const e=o.content;_=hp(h,0,e[0]),x=hp(d,0,e[1]),b=hp(h,e[0],e[2]),w=hp(d,e[1],e[3]),S=e[0]-_,A=e[1]-x,E=e[2]-e[0]-b,T=e[3]-e[1]-w}const C=(r,i,s,l)=>{const h=pp(r.stretch-_,b,c,e.left),d=fp(r.fixed-S,E,r.stretch,m),p=pp(i.stretch-x,w,u,e.top),y=fp(i.fixed-A,T,i.stretch,g),v=pp(s.stretch-_,b,c,e.left),C=fp(s.fixed-S,E,s.stretch,m),k=pp(l.stretch-x,w,u,e.top),I=fp(l.fixed-A,T,l.stretch,g),P=new f(h,p),L=new f(v,p),M=new f(v,k),O=new f(h,k),N=new f(d/a,y/a),R=new f(C/a,I/a),D=t*Math.PI/180;if(D){const e=Math.sin(D),t=Math.cos(D),n=[t,-e,e,t];P._matMult(n),L._matMult(n),O._matMult(n),M._matMult(n)}const F=r.stretch+r.fixed,j=i.stretch+i.fixed;return{tl:P,tr:L,bl:O,br:M,tex:{x:o.paddedRect.x+1+F,y:o.paddedRect.y+1+j,w:s.stretch+s.fixed-F,h:l.stretch+l.fixed-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:R,minFontScaleX:E/a/c,minFontScaleY:T/a/u,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const e=dp(h,y,m),t=dp(d,v,g);for(let n=0;n<e.length-1;n++){const r=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)i.push(C(r,t[e],o,t[e+1]))}}else i.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function hp(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function dp(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[i,o]of e){const e=r[r.length-1];r.push({fixed:i-e.stretch,stretch:e.stretch}),r.push({fixed:i-e.stretch,stretch:e.stretch+(o-i)})}return r.push({fixed:t+1,stretch:n}),r}function pp(e,t,n,r){return e/t*n+r}function fp(e,t,n,r){return e-t*n/r}function mp(e,t,n,r){const i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}cp.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(o,"-").concat(a)),oe.Glyphs);ce(s,((e,t)=>{if(e)i(e);else if(t){const e={},n=function(e){return new sd(e).readFields(Id,{})}(t);for(const t of n.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}}))},cp.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(e,"px ").concat(i),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const v=f.getImageData(m,m,s,l);y.fill(op,0,h),g.fill(0,0,h);for(let _=0;_<l;_++)for(let e=0;e<s;e++){const t=v.data[4*(_*s+e)+3]/255;if(0===t)continue;const n=(_+m)*c+e+m;if(1===t)y[n]=0,g[n]=op;else{const e=.5-t;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}ap(y,0,0,c,u,c,this.f,this.v,this.z),ap(g,m,m,s,l,c,this.f,this.v,this.z);for(let _=0;_<h;_++){const e=Math.sqrt(y[_])-Math.sqrt(g[_]);d[_]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class gp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yp;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function yp(e,t){return e<t?-1:e>t?1:0}function vp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0;const s=e[0];for(let p=0;p<s.length;p++){const e=s[p];(!p||e.x<r)&&(r=e.x),(!p||e.y<i)&&(i=e.y),(!p||e.x>o)&&(o=e.x),(!p||e.y>a)&&(a=e.y)}const l=Math.min(o-r,a-i);let c=l/2;const u=new gp([],_p);if(0===l)return new f(r,i);for(let p=r;p<o;p+=l)for(let t=i;t<a;t+=l)u.push(new bp(p+c,t+c,c,e));let h=function(e){let t=0,n=0,r=0;const i=e[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const e=i[o],a=i[s],l=e.x*a.y-a.x*e.y;n+=(e.x+a.x)*l,r+=(e.y+a.y)*l,t+=3*l}return new bp(n/t,r/t,0,e)}(e),d=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,d)),r.max-h.d<=t||(c=r.h/2,u.push(new bp(r.p.x-c,r.p.y-c,c,e)),u.push(new bp(r.p.x+c,r.p.y-c,c,e)),u.push(new bp(r.p.x-c,r.p.y+c,c,e)),u.push(new bp(r.p.x+c,r.p.y+c,c,e)),d+=4)}return n&&(console.log("num probes: ".concat(d)),console.log("best distance: ".concat(h.d))),h.p}function _p(e,t){return t.max-e.max}class bp{constructor(e,t,n,r){this.p=new f(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,Mc(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const xp=Number.POSITIVE_INFINITY,wp=Math.sqrt(2);function Sp(e,t){let[n,r]=t,i=0,o=0;if(r===xp){n<0&&(n=0);const t=n/wp;switch(e){case"top-right":case"top-left":o=t-7;break;case"bottom-right":case"bottom-left":o=7-t;break;case"bottom":o=7-n;break;case"top":o=n-7}switch(e){case"top-right":case"bottom-right":i=-t;break;case"top-left":case"bottom-left":i=t;break;case"left":i=n;break;case"right":i=-n}}else{switch(n=Math.abs(n),r=Math.abs(r),e){case"top-right":case"top-left":case"top":o=r-7;break;case"bottom-right":case"bottom-left":case"bottom":o=7-r}switch(e){case"top-right":case"bottom-right":case"right":i=-n;break;case"top-left":case"bottom-left":case"left":i=n}}return[i,o]}function Ep(e,t,n,r,i,o,a,s,l,c){e.createArrays(),e.tilePixelRatio=As/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,d={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;d.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Uo(t),s),h["text-size"].possiblyEvaluate(new Uo(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;d.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Uo(t),s),h["icon-size"].possiblyEvaluate(new Uo(n),s)]}d.layoutTextSize=h["text-size"].possiblyEvaluate(new Uo(l+1),s),d.layoutIconSize=h["icon-size"].possiblyEvaluate(new Uo(l+1),s),d.textMaxSize=h["text-size"].possiblyEvaluate(new Uo(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const m of e.features){const o=u.get("text-font").evaluate(m,{},s).join(","),l=f.evaluate(m,{},s),h=d.layoutTextSize.evaluate(m,{},s),g=(d.layoutIconSize.evaluate(m,{},s),{horizontal:{},vertical:void 0}),y=m.text;let v,_=[0,0];if(y){const r=y.toString(),a=u.get("text-letter-spacing").evaluate(m,{},s)*Jh,c=u.get("text-line-height").evaluate(m,{},s)*Jh,d=wo(r)?a:0,f=u.get("text-anchor").evaluate(m,{},s),v=u.get("text-variable-anchor");if(!v){const e=u.get("text-radial-offset").evaluate(m,{},s);_=e?Sp(f,[e*Jh,xp]):u.get("text-offset").evaluate(m,{},s).map((e=>e*Jh))}let b=p?"center":u.get("text-justify").evaluate(m,{},s);const x="point"===u.get("symbol-placement"),w=x?u.get("text-max-width").evaluate(m,{},s)*Jh:1/0,S=a=>{e.allowVerticalPlacement&&xo(r)&&(g.vertical=jd(y,t,n,i,o,w,c,f,a,d,_,Rd.vertical,!0,h,l))};if(!p&&v){const e="auto"===b?v.map((e=>Ap(e))):[b];let r=!1;for(let a=0;a<e.length;a++){const s=e[a];if(!g.horizontal[s])if(r)g.horizontal[s]=g.horizontal[0];else{const e=jd(y,t,n,i,o,w,c,"center",s,d,_,Rd.horizontal,!1,h,l);e&&(g.horizontal[s]=e,r=1===e.positionedLines.length)}}S("left")}else{if("auto"===b&&(b=Ap(f)),x||u.get("text-writing-mode").indexOf("horizontal")>=0||!xo(r)){const e=jd(y,t,n,i,o,w,c,f,b,d,_,Rd.horizontal,!1,h,l);e&&(g.horizontal[b]=e)}S(x?"left":b)}}let b=!1;if(m.icon&&m.icon.name){const t=r[m.icon.name];t&&(v=Xd(i[m.icon.name],u.get("icon-offset").evaluate(m,{},s),u.get("icon-anchor").evaluate(m,{},s)),b=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Ip(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!x&&x.iconsInText),(x||v)&&Tp(e,m,g,v,r,d,h,0,_,b,a,s,c)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Ap(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Tp(e,t,n,r,i,o,a,s,l,c,u,h,d){let p=o.textMaxSize.evaluate(t,{},h);void 0===p&&(p=a);const f=e.layers[0].layout,m=f.get("icon-offset").evaluate(t,{},h),g=Ip(n.horizontal)||n.vertical,y="globe"===d.name,_=a/24,b=e.tilePixelRatio*p/24,x=(I=e.overscaling,e.zoom>18&&I>2&&(I>>=1),Math.max(As/(512*I),1)*f.get("symbol-spacing")),w=f.get("text-padding")*e.tilePixelRatio,S=f.get("icon-padding")*e.tilePixelRatio,E=v(f.get("text-max-angle")),A="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),T="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),C=f.get("symbol-placement"),k=x/2;var I;const P=f.get("icon-text-fit");let L;r&&"none"!==P&&(e.allowVerticalPlacement&&n.vertical&&(L=Kd(r,n.vertical,P,f.get("icon-text-fit-padding"),m,_)),g&&(r=Kd(r,g,P,f.get("icon-text-fit-padding"),m,_)));const M=(a,s,p)=>{if(s.x<0||s.x>=As||s.y<0||s.y>=As)return;let f=null;if(y){const{x:e,y:t,z:n}=d.projectTilePoint(s.x,s.y,p);f={anchor:new Yd(e,t,n,0,void 0),up:d.upVector(p,s.x,s.y)}}!function(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,S,E){const A=e.addToLineVertexArray(t,r);let T,C,k,I,P,L,M,O=0,N=0,R=0,D=0,F=-1,j=-1;const z={};let B=qa("");const V=n?n.anchor:t;let Z=0,q=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[Z,q]=l.layout.get("text-offset").evaluate(b,{},E).map((e=>e*Jh)):(Z=l.layout.get("text-radial-offset").evaluate(b,{},E)*Jh,q=xp),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(f)L=Lp(e),s&&(M=Lp(s));else{const n=l.layout.get("text-rotate").evaluate(b,{},E)+90;k=Pp(c,V,t,u,h,d,e,p,n,m),s&&(I=Pp(c,V,t,u,h,d,s,y,n))}}if(o){const r=l.layout.get("icon-rotate").evaluate(b,{},E),i="none"!==l.layout.get("icon-text-fit"),a=up(o,r,w,i),p=s?up(s,r,w,i):void 0;C=Pp(c,V,t,u,h,d,o,y,r),O=4*a.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[Qh*l.layout.get("icon-size").evaluate(b,{},E)],m[0]>Cp&&U("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[Qh*x.compositeIconSizes[0].evaluate(b,{},E),Qh*x.compositeIconSizes[1].evaluate(b,{},E)],(m[0]>Cp||m[1]>Cp)&&U("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))),e.addSymbols(e.icon,a,m,_,v,b,!1,n,t,A.lineStartIndex,A.lineLength,-1,S,E),F=e.icon.placedSymbolArray.length-1,p&&(N=4*p.length,e.addSymbols(e.icon,p,m,_,v,b,Rd.vertical,n,t,A.lineStartIndex,A.lineLength,-1,S,E),j=e.icon.placedSymbolArray.length-1)}for(const U in i.horizontal){const r=i.horizontal[U];T||(B=qa(r.text),f?P=Lp(r):T=Pp(c,V,t,u,h,d,r,p,l.layout.get("text-rotate").evaluate(b,{},E),m));const o=1===r.positionedLines.length;if(R+=kp(e,n,t,r,a,l,f,b,m,A,i.vertical?Rd.horizontal:Rd.horizontalOnly,o?Object.keys(i.horizontal):[U],z,F,x,S,E),o)break}i.vertical&&(D+=kp(e,n,t,i.vertical,a,l,f,b,m,A,Rd.vertical,["vertical"],z,j,x,S,E));let G=-1;const W=(e,t)=>e?Math.max(e,t):t;G=W(P,G),G=W(L,G),G=W(M,G);const H=G>-1?1:0;e.glyphOffsetArray.length>=hf.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(V.x,V.y,V.z,t.x,t.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical>=0?z.vertical:-1,F,j,B,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,void 0!==k?k:e.collisionBoxArray.length,void 0!==k?k+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,I||e.collisionBoxArray.length,I?I+1:e.collisionBoxArray.length,u,R,D,O,N,H,0,Z,q,G)}(e,s,f,a,n,r,i,L,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,w,A,l,0,S,T,m,t,o,c,u,h)};if("line"===C)for(const v of ip(t.geometry,0,0,As,As)){const t=np(v,x,E,n.vertical||g,r,24,b,e.overscaling,As);for(const n of t){const t=g;t&&Mp(e,t.text,k,n)||M(v,n,h)}}else if("line-center"===C){for(const v of t.geometry)if(v.length>1){const e=tp(v,E,n.vertical||g,r,24,b);e&&M(v,e,h)}}else if("Polygon"===t.type)for(const v of Du(t.geometry,0)){const e=vp(v,16);M(v[0],new Yd(e.x,e.y,0,0,void 0),h)}else if("LineString"===t.type)for(const v of t.geometry)M(v,new Yd(v[0].x,v[0].y,0,0,void 0),h);else if("Point"===t.type)for(const v of t.geometry)for(const e of v)M([e],new Yd(e.x,e.y,0,0,void 0),h)}const Cp=32640;function kp(e,t,n,r,i,o,a,s,l,c,u,h,d,p,m,g,y){const v=function(e,t,n,r,i,o,a,s){const l=[];if(0===t.positionedLines.length)return l;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(e){const t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let h=Math.abs(t.top-t.bottom);for(const f of t.positionedLines)h-=f.lineOffset;const d=t.positionedLines.length,p=h/d;let m=t.top-n[1];for(let g=0;g<d;++g){const e=t.positionedLines[g];m=mp(t,p,m,g);for(const r of e.positionedGlyphs){if(!r.rect)continue;const e=r.rect||{};let o=4,h=!0,d=1,p=0;if(r.imageName){const e=a[r.imageName];if(!e)continue;if(e.sdf){U("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,d=e.pixelRatio,o=1/d}const g=(i||s)&&r.vertical,y=r.metrics.advance*r.scale/2,v=r.metrics,_=r.rect;if(null===_)continue;s&&t.verticalizable&&(p=r.imageName?y-r.metrics.width*r.scale/2:0);const b=i?[r.x+y,r.y]:[0,0];let x=[0,0],w=[0,0],S=!1;i||(g?(w=[r.x+y+u[0],r.y+u[1]-p],S=!0):x=[r.x+y+n[0],r.y+n[1]-p]);const E=_.w*r.scale/(d*(r.localGlyph?2:1)),A=_.h*r.scale/(d*(r.localGlyph?2:1));let T,C,k,I;if(g){const e=r.y-m,t=new f(-y,y-e),n=-Math.PI/2,i=new f(...w);T=new f(-y+x[0],x[1]),T._rotateAround(n,t)._add(i),T.x+=-e+y,T.y-=(v.left-o)*r.scale;const a=r.imageName?v.advance*r.scale:Jh*r.scale,s=String.fromCharCode(r.glyph);od(s)?T.x+=(1-o)*r.scale:ad(s)?T.x+=a-v.height*r.scale+(-o-1)*r.scale:T.x+=r.imageName||v.width+2*o===_.w&&v.height+2*o===_.h?(a-A)/2:(a-(v.height+2*o)*r.scale)/2,C=new f(T.x,T.y-E),k=new f(T.x+A,T.y),I=new f(T.x+A,T.y-E)}else{const e=(v.left-o)*r.scale-y+x[0],t=(-v.top-o)*r.scale+x[1],n=e+E,i=t+A;T=new f(e,t),C=new f(n,t),k=new f(e,i),I=new f(n,i)}if(c){let e;e=i?new f(0,0):S?new f(u[0],u[1]):new f(n[0],n[1]),T._rotateAround(c,e),C._rotateAround(c,e),k._rotateAround(c,e),I._rotateAround(c,e)}const P=new f(0,0),L=new f(0,0);l.push({tl:T,tr:C,bl:k,br:I,tex:e,writingMode:t.writingMode,glyphOffset:b,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:P,pixelOffsetBR:L,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,l,o,a,s,i,e.allowVerticalPlacement),_=e.textSizeData;let b=null;"source"===_.kind?(b=[Qh*o.layout.get("text-size").evaluate(s,{},y)],b[0]>Cp&&U("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))):"composite"===_.kind&&(b=[Qh*m.compositeTextSizes[0].evaluate(s,{},y),Qh*m.compositeTextSizes[1].evaluate(s,{},y)],(b[0]>Cp||b[1]>Cp)&&U("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))),e.addSymbols(e.text,v,b,l,a,s,u,t,n,c.lineStartIndex,c.lineLength,p,g,y);for(const f of h)d[f]=e.text.placedSymbolArray.length-1;return 4*v.length}function Ip(e){for(const t in e)return e[t];return null}function Pp(e,t,n,r,i,o,a,s,l,c){let u=a.top,h=a.bottom,d=a.left,p=a.right;const m=a.collisionPadding;if(m&&(d-=m[0],u-=m[1],p+=m[2],h+=m[3]),l){const e=new f(d,u),t=new f(p,u),n=new f(d,h),r=new f(p,h),i=v(l);let o=new f(0,0);c&&(o=new f(c[0],c[1])),e._rotateAround(i,o),t._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),d=Math.min(e.x,t.x,n.x,r.x),p=Math.max(e.x,t.x,n.x,r.x),u=Math.min(e.y,t.y,n.y,r.y),h=Math.max(e.y,t.y,n.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,d,u,p,h,s,r,i,o),e.length-1}function Lp(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Mp(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}function Op(e,t){const n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}function Np(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,o=e.y*n,a=(e.y+1)*n,s=sc(r),l=sc(i),c=lc(o),u=lc(a),h=t.project(s,c),d=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(h.x,d.x,p.x,f.x),g=Math.min(h.y,d.y,p.y,f.y),y=Math.max(h.x,d.x,p.x,f.x),v=Math.max(h.y,d.y,p.y,f.y);const _=n/16;function b(e,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=t.project(sc(s),lc(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-v);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>_&&(b(e,c,r,i,s,l),b(c,n,s,l,o,a))}b(h,d,r,o,i,o),b(d,p,i,o,i,a),b(p,f,i,a,r,a),b(f,h,r,a,r,o),m-=_,g-=_,y+=_,v+=_;const x=1/Math.max(y-m,v-g);return{scale:x,x:m*x,y:g*x,x2:y*x,y2:v*x,projection:t}}const Rp=Ls(new Float32Array(16));class Dp{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new nc(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),n)}pixelsPerMeter(e,t){return ac(1,e)*t}pixelSpaceConversion(e,t,n){return 1}farthestPixelDistance(e){return Op(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,r){const i=e.horizonLineFromTop(!1),o=new f(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,r))}pointCoordinate3D(e,t,n){const r=new f(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);{const t=this.pointCoordinate(e,r.x,r.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const n=e.horizonLineFromTop();return t.y<n}createInversionMatrix(e,t){return Rp}createTileMatrix(e,t,n){let r,i,o;const a=n.canonical,s=Ls(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Np(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,Rs(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return Ns(s,s,[i,o,0]),Rs(s,s,[r/As,r/As,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1}}}class Fp extends Dp{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],r=Math.sin(v(t));this.n=(r+Math.sin(v(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:n,c:r,r0:i}=this,o=v(e-this.center[0]),a=v(t),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(e,t){const{n:n,c:r,r0:i}=this,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=v(this.center[0])*n;a=T(a,-Math.PI-s,Math.PI-s);const l=E(_(a/n)+this.center[0],-180,180),c=Math.asin(E((r-(e*e+o*o)*n*n)/(2*n),-1,1)),u=E(_(c),-uc,uc);return new nc(l,u)}}const jp=1.340264,zp=-.081106,Bp=893e-6,Up=.003796,Vp=Math.sqrt(3)/2;class Zp extends Dp{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Vp*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Vp*(jp+3*zp*r+i*(7*Bp+9*Up*r)))/Math.PI+.5),y:1-.5*(n*(jp+zp*r+i*(Bp+Up*r))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=n*n,i=r*r*r;for(let c,u,h,d=0;d<12&&(u=n*(jp+zp*r+i*(Bp+Up*r))-t,h=jp+3*zp*r+i*(7*Bp+9*Up*r),c=u/h,n=E(n-c,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(c)<1e-12));++d);const o=Vp*e*(jp+3*zp*r+i*(7*Bp+9*Up*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Vp),s=E(180*o/Math.PI,-180,180),l=E(180*a/Math.PI,-uc,uc);return new nc(s,l)}}class qp extends Dp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),r=E(360*(.5-t),-uc,uc);return new nc(n,r)}}const Gp=Math.PI/2;function Wp(e){return Math.tan((Gp+e)/2)}class Hp extends Dp{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30];let r=v(t),i=v(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),a=Wp(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Wp(i)/a),this.f=o*Math.pow(Wp(r),this.n)/this.n}project(e,t){t=v(t),this.southernCenter&&(t=-t),e=v(e-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?t<-Gp+n&&(t=-Gp+n):t>Gp-n&&(t=Gp-n);const o=i/Math.pow(Wp(t),r);let a=o*Math.sin(r*e),s=i-o*Math.cos(r*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:n,f:r}=this,i=r-t,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(e)*o);const l=E(_(s/n)+this.center[0],-180,180),c=E(_(2*Math.atan(Math.pow(r/a,1/n))-Gp),-uc,uc);return new nc(l,this.southernCenter?-c:c)}}class Xp extends Dp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:ic(e),y:oc(t),z:0}}unproject(e,t){const n=sc(e),r=lc(t);return new nc(n,r)}}const Kp=v(uc);class Yp extends Dp{project(e,t){const n=(t=v(t))*t,r=n*n;return{x:.5*((e=v(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const e=o*o;i=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=E(n-i,-Kp,Kp)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=E(_(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=_(n);return new nc(a,s)}}const Jp=v(uc);class Qp extends Dp{project(e,t){t=v(t),e=v(e);const n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*r+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,h=Math.cos(n/2),d=Math.sin(n/2),p=2*h*d,f=d*d,m=1-u*h*h,g=m?1/m:0,y=m?Math.acos(i*h)*Math.sqrt(1/m):0,v=.5*(2*y*i*d+2*n/Math.PI)-e,_=.5*(y*o+r)-t,b=.5*g*(u*f+y*i*h*c)+1/Math.PI,x=g*(p*l/4-y*o*d),w=.125*g*(l*d-y*o*u*p),S=.5*g*(c*h+y*f*i)+.5,A=x*w-S*b;a=(_*x-v*S)/A,s=(v*w-_*b)/A,n=E(n-a,-Math.PI,Math.PI),r=E(r-s,-Jp,Jp)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new nc(_(n),_(r))}}class $p extends Dp{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(v(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:r}=this;return{x:v(e)*r*n+.5,y:-Math.sin(v(t))/r*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:r}=this,i=-(t-.5)/n,o=E(_((e-.5)/n)/r,-180,180),a=Math.asin(E(i*r,-1,1)),s=E(_(a),-uc,uc);return new nc(o,s)}}class ef extends Xp{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,n){const r=Vl(e,t,n);return tl(r,r,Gl(Ol(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(e,t){const n=Ul(t.lat,t.lng),r=Qs([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Js(n,n,r,ac(1,0)*As*i);const o=Ls(new Float64Array(16));return Os(o,e.pixelMatrix,e.globeMatrix),tl(n,n,o),new f(n[0],n[1])}pixelsPerMeter(e,t){return ac(1,0)*t}pixelSpaceConversion(e,t,n){const r=ac(1,e)*t,i=kn(ac(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,n){const r=Wl(Ol(n.canonical));return Os(new Float64Array(16),e.globeMatrix,r)}createInversionMatrix(e,t){const{center:n}=e,r=Gl(Ol(t));return Fs(r,r,v(n.lng)),Ds(r,r,v(n.lat)),Rs(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(e,t,n,r){return Pl(e,t,n,!0)||new dc(0,0)}pointCoordinate3D(e,t,n){const r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(e,t){return!Pl(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const n=e.cameraToCenterDistance,r=e._centerAltitude*t,i=e._camera,o=e._camera.forward(),a=Gs([],Ys([],o,-n),[0,0,r]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),h=Ys([],i.up(),u),d=Ys([],i.right(),u*c),p=Qs([],Gs([],Gs([],o,h),d)),f=[];let m;if(new _l(a,p).closestPointOnSphere(l,s,f)){const t=Gs([],f,l),n=il([],t,a);m=Math.cos(e.fovAboveCenter)*Zs(n)}else{const e=il([],a,l),t=il([],l,a);Qs(t,t);const n=Zs(e)-s;m=Math.sqrt(n*(n+2*s));const r=Math.acos(m/(s+n))-Math.acos($s(o,t));m*=Math.cos(r)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=Xl(e.zoom);if(n>0){const r=Op(e,ac(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return kn(t,r+i*(1-Math.cos(o)),Math.pow(n,10))}return t}upVector(e,t,n){return Vl(t,n,e,1)}upVectorScale(e){return{metersToTile:Il(Zl(Ol(e)))}}}function tf(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Xp(e);case"equirectangular":return new qp(e);case"naturalEarth":return new Yp(e);case"equalEarth":return new Zp(e);case"winkelTripel":return new Qp(e);case"albers":return n?new $p(e):new Fp(e);case"lambertConformalConic":return n?new $p(e):new Hp(e);case"globe":return new ef(e)}throw new Error("Invalid projection name: ".concat(e.name))}const nf=ah.types,rf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function of(e,t,n,r,i,o,a,s,l,c,u,h,d){const p=s?Math.min(Cp,Math.round(s[0])):0,f=s?Math.min(Cp,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function af(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,a)}function sf(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function lf(e){for(const t of e.sections)if(ko(t.text))return!0;return!1}class cf{constructor(e){this.layoutVertexArray=new fa,this.indexArray=new wa,this.programConfigurations=e,this.segments=new Es,this.dynamicLayoutVertexArray=new ua,this.opacityVertexArray=new ga,this.placedSymbolArray=new Na,this.globeExtVertexArray=new ma}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Wh.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,rf,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Gh.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Vi(cf,"SymbolBuffers");class uf{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Es,this.collisionVertexArray=new ba,this.collisionVertexArrayExt=new xa}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Hh.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Xh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Vi(uf,"CollisionBuffers");class hf{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ls([]),this.placementViewportMatrix=Ls([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$h(this.zoom,t["text-size"]),this.iconSizeData=$h(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((e=>Rd[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new cf(new fs(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new cf(new fs(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Fa,this.lineVertexArray=new ja,this.symbolInstances=new Da}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,r&&i){const n=id[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,n,r){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Pt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),h="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,d=o.get("symbol-sort-key");if(this.features=[],!u&&!h)return;const p=t.iconDependencies,f=t.glyphDependencies,m=t.availableImages,g=new Uo(this.zoom);for(const{feature:y,id:v,index:_,sourceLayerIndex:b}of e){const e=i._featureFilter.needGeometry,t=xc(y,e);if(!i._featureFilter.filter(g,t,n))continue;if(e||(t.geometry=bc(y,n,r)),a&&1!==y.type&&n.z<=5){const e=t.geometry,r=.98078528056,i=(e,t)=>$s(Vl(e.x,e.y,n,1),Vl(t.x,t.y,n,1))<r;for(let t=0;t<e.length;t++)e[t]=gc(e[t],i)}let l,c;if(u){const e=i.getValueAndResolveTokens("text-field",t,n,m),r=Pt.factory(e);lf(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===jo()||this.hasRTLText&&Bo.isParsed())&&(l=rd(r,i,t))}if(h){const e=i.getValueAndResolveTokens("icon-image",t,n,m);c=e instanceof Lt?e:Lt.fromString(e)}if(!l&&!c)continue;const x=this.sortFeaturesByKey?d.evaluate(t,{},n):void 0;if(this.features.push({id:v,text:l,icon:c,index:_,sourceLayerIndex:b,geometry:t.geometry,properties:y.properties,type:nf[y.type],sortKey:x}),c&&(p[c.name]=!0),l){const e=s.evaluate(t,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Rd.vertical)>=0;for(const t of l.sections)if(t.image)p[t.image.name]=!0;else{const n=xo(l.toString()),i=t.fontStack||e,o=f[i]=f[i]||{};this.calculateGlyphDependencies(t.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=s(p,f,h),i=a(p,f,r[e].geometry);delete t[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?a(p,f,h):f in t?s(p,f,h):(o(c),t[p]=i-1,n[f]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=tf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:r,y:i}of t)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,l,c,u,h,d,p){const f=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,_=y.vertexLength,b=this.allowVerticalPlacement&&a===Rd.vertical?Math.PI/2:0,x=o.text&&o.text.sections;for(let S=0;S<t.length;S++){const{tl:r,tr:i,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:v,minFontScaleX:_,minFontScaleY:w,glyphOffset:E,isSDF:A,sectionIndex:T}=t[S],C=y.vertexLength,k=E[1];if(of(m,l.x,l.y,r.x,k+r.y,u.x,u.y,n,A,h.x,h.y,_,w),of(m,l.x,l.y,i.x,k+i.y,u.x+u.w,u.y,n,A,v.x,h.y,_,w),of(m,l.x,l.y,a.x,k+a.y,u.x,u.y+u.h,n,A,h.x,v.y,_,w),of(m,l.x,l.y,c.x,k+c.y,u.x+u.w,u.y+u.h,n,A,v.x,v.y,_,w),s){const{x:t,y:n,z:r}=s.anchor,[i,o,a]=s.up;af(g,t,n,r,i,o,a),af(g,t,n,r,i,o,a),af(g,t,n,r,i,o,a),af(g,t,n,r,i,o,a),sf(e.dynamicLayoutVertexArray,t,n,r,b)}else sf(e.dynamicLayoutVertexArray,l.x,l.y,l.z,b);f.emplaceBack(C,C+1,C+2),f.emplaceBack(C+1,C+2,C+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),S!==t.length-1&&T===t[S+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,o,o.index,{},d,p,x&&x[T])}const w=s?s.anchor:l;e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,v,this.glyphOffsetArray.length-v,_,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,h,0)}_commitLayoutVertex(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,n,r,i,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let d=0;d<4;d++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new f(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new f(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new f(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new f(e.x1,e.y2)),s.vertexLength+=4;const h=n.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uf(va,Kh.members,ka),this.iconCollisionBox=new uf(va,Kh.members,ka);const n=td(this.iconSizeData,e),r=td(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=ed(this.textSizeData,e,i)/Jh;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=ed(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=td(this.iconSizeData,e),r=td(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const c={};if(t<n){const{x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(t);c.textBox={x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.textFeatureIndex=p}if(r<i){const{x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(r);c.verticalTextBox={x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.verticalTextFeatureIndex=p}if(o<a){const{x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(o);c.iconBox={x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.iconFeatureIndex=p}if(s<l){const{x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(s);c.verticalIconBox={x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.verticalIconFeatureIndex=p}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);r.push(0|Math.round(t*e.tileAnchorX+n*e.tileAnchorY)),i.push(e.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=t;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Vi(hf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),hf.MAX_GLYPHS=65535,hf.addDynamicAttributes=sf;const df=new $o({"symbol-placement":new Yo(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new Yo(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yo(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jo(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yo(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yo(Ye.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Yo(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yo(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yo(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jo(Ye.layout_symbol["icon-size"]),"icon-text-fit":new Yo(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yo(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jo(Ye.layout_symbol["icon-image"]),"icon-rotate":new Jo(Ye.layout_symbol["icon-rotate"]),"icon-padding":new Yo(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new Yo(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Jo(Ye.layout_symbol["icon-offset"]),"icon-anchor":new Jo(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yo(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yo(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yo(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new Jo(Ye.layout_symbol["text-field"]),"text-font":new Jo(Ye.layout_symbol["text-font"]),"text-size":new Jo(Ye.layout_symbol["text-size"]),"text-max-width":new Jo(Ye.layout_symbol["text-max-width"]),"text-line-height":new Jo(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Jo(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new Jo(Ye.layout_symbol["text-justify"]),"text-radial-offset":new Jo(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yo(Ye.layout_symbol["text-variable-anchor"]),"text-anchor":new Jo(Ye.layout_symbol["text-anchor"]),"text-max-angle":new Yo(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new Yo(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new Jo(Ye.layout_symbol["text-rotate"]),"text-padding":new Yo(Ye.layout_symbol["text-padding"]),"text-keep-upright":new Yo(Ye.layout_symbol["text-keep-upright"]),"text-transform":new Jo(Ye.layout_symbol["text-transform"]),"text-offset":new Jo(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new Yo(Ye.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Yo(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new Yo(Ye.layout_symbol["text-optional"])});var pf={paint:new $o({"icon-opacity":new Jo(Ye.paint_symbol["icon-opacity"]),"icon-color":new Jo(Ye.paint_symbol["icon-color"]),"icon-halo-color":new Jo(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jo(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jo(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new Yo(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yo(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jo(Ye.paint_symbol["text-opacity"]),"text-color":new Jo(Ye.paint_symbol["text-color"],{runtimeType:lt,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Jo(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new Jo(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Jo(Ye.paint_symbol["text-halo-blur"]),"text-translate":new Yo(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new Yo(Ye.paint_symbol["text-translate-anchor"])}),layout:df};class ff{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:it,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Vi(ff,"FormatSectionOverride",{omit:["defaultValue"]});class mf extends xs{constructor(e){super(e,pf)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||qr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new hf(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of pf.paint.overridableProperties){if(!mf.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new ff(t),r=new Zr(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Wr("source",r):new Hr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Xo(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&mf.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=pf.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Pt)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof Ft&&Nt(t.value)===dt?o(t.value.sections):t instanceof Vt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new ps(this,e)}}var gf={paint:new $o({"background-color":new Yo(Ye.paint_background["background-color"]),"background-pattern":new Yo(Ye.paint_background["background-pattern"]),"background-opacity":new Yo(Ye.paint_background["background-opacity"])})},yf={paint:new $o({"raster-opacity":new Yo(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yo(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yo(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yo(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new Yo(Ye.paint_raster["raster-saturation"]),"raster-contrast":new Yo(Ye.paint_raster["raster-contrast"]),"raster-resampling":new Yo(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new Yo(Ye.paint_raster["raster-fade-duration"])})};class vf extends xs{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var _f={paint:new $o({"sky-type":new Yo(Ye.paint_sky["sky-type"]),"sky-atmosphere-sun":new Yo(Ye.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Yo(Ye.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Yo(Ye.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Yo(Ye.paint_sky["sky-gradient-radius"]),"sky-gradient":new Qo(Ye.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Yo(Ye.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Yo(Ye.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Yo(Ye.paint_sky["sky-opacity"])})};function bf(e,t,n){const r=[0,0,1],i=hl([]);return pl(i,i,n?-v(e)+Math.PI:v(e)),dl(i,i,-v(t)),nl(r,r,i),Qs(r,r)}const xf={circle:class extends xs{constructor(e){super(e,Vc)}createBucket(e){return new Ec(e)}queryRadius(e){const t=e;return Fc("circle-radius",this,t)+Fc("circle-stroke-width",this,t)+jc(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=Bc(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return Zc(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new ps(this,e)}},heatmap:class extends xs{createBucket(e){return new Xc(e)}constructor(e){super(e,eu),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return Fc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(t,n);return Zc(e,r,o,a,s,!0,!0,new f(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new ps(this,e)}},hillshade:class extends xs{constructor(e){super(e,nu)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends xs{constructor(e){super(e,Vu)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new ps(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Bu(e)}queryRadius(){return jc(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&Cc(zc(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends xs{constructor(e){super(e,Sh)}createBucket(e){return new ph(e)}queryRadius(){return jc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new ps(this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s,l){const c=Bc(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),d=[0,0],p=s&&o.elevation,m=o.elevation?o.elevation.exaggeration():1,g=e.tile.getBucket(this);if(p&&g instanceof ph){const e=g.centroidVertexArray,t=l+1;t<e.length&&(d[0]=e.geta_centroid_pos0(t),d[1]=e.geta_centroid_pos1(t))}if(0===d[0]&&1===d[1])return!1;"globe"===o.projection.name&&(r=xh([r],[new f(0,0),new f(As,As)],e.tileID.canonical).map((e=>e.polygon)).flat());const y=p?s:null,[v,_]=function(e,t,n,r,i,o,a,s,l,c,u){return"globe"===e.projection.name?function(e,t,n,r,i,o,a,s,l,c,u){const h=[],d=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(e,t,n,r)=>{e[0]=t,e[1]=n,e[2]=r,e[3]=1},y=bh();n>0&&(n+=y),r+=y;for(const v of t){const t=[],y=[];for(const h of v){const d=h.x+i.x,v=h.y+i.y,_=e.projection.projectTilePoint(d,v,u),b=e.projection.upVector(u,h.x,h.y);let x=n,w=r;if(a){const e=Mh(d,v,n,r,a,s,l,c);x+=e.base,w+=e.top}0!==n?g(f,_.x+b[0]*p*x,_.y+b[1]*p*x,_.z+b[2]*p*x):g(f,_.x,_.y,_.z),g(m,_.x+b[0]*p*w,_.y+b[1]*p*w,_.z+b[2]*p*w),tl(f,f,o),tl(m,m,o),t.push(new Ih(f[0],f[1],f[2])),y.push(new Ih(m[0],m[1],m[2]))}h.push(t),d.push(y)}return[h,d]}(e,t,n,r,i,o,a,s,l,c,u):a?function(e,t,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of e){const e=[],p=[];for(const c of d){const u=c.x+r.x,d=c.y+r.y,f=Mh(u,d,t,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,cl(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new Ih(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,cl(h,h,i),h[3]=Math.max(h[3],1e-5);const g=new Ih(h[0]/h[3],h[1]/h[3],h[2]/h[3]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(t,n,r,i,o,a,s,l,c):function(e,t,n,r,i){const o=[],a=[],s=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,h=i[8]*n,d=i[9]*n,p=i[10]*n,f=i[11]*n;for(const m of e){const e=[],t=[];for(const n of m){const o=n.x+r.x,a=n.y+r.y,m=i[0]*o+i[4]*a+i[12],g=i[1]*o+i[5]*a+i[13],y=i[2]*o+i[6]*a+i[14],v=i[3]*o+i[7]*a+i[15],_=m+s,b=g+l,x=y+c,w=Math.max(v+u,1e-5),S=m+h,E=g+d,A=y+p,T=Math.max(v+f,1e-5);e.push(new Ih(_/w,b/w,x/w)),t.push(new Ih(S/T,E/T,A/T))}o.push(e),a.push(t)}return[o,a]}(t,n,r,i,o)}(o,r,h,u,c,a,y,d,m,o.center.lat,e.tileID.canonical),b=e.queryGeometry;return function(e,t,n){let r=1/0;Cc(n,t)&&(r=Lh(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];Ac(n,i)&&(r=Math.min(r,Lh(n,i)))}}return r!==1/0&&r}(v,_,b.isPointQuery()?b.screenBounds:b.screenGeometry)}},line:class extends xs{constructor(e){super(e,Uh),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Cn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Vh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new zh(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new ps(this,e)}queryRadius(e){const t=e,n=Zh(Fc("line-width",this,t),Fc("line-gap-width",this,t)),r=Fc("line-offset",this,t);return n/2+Math.abs(r)+jc(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,i,o){if(e.queryGeometry.isAboveHorizon)return!1;const a=zc(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Zh(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=function(e,t){const n=[],r=new f(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const n=o[e-1],i=o[e],s=o[e+1],l=0===e?r:i.sub(n)._unit()._perp(),c=e===o.length-1?r:s.sub(i)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(t)._add(i))}n.push(a)}return n}(r,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(Nc(e,i[t]))return!0;if(kc(e,i,n))return!0}return!1}(a,r,s)}isTileClipped(){return!0}},symbol:mf,background:class extends xs{constructor(e){super(e,gf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends xs{constructor(e){super(e,yf)}getProgramIds(){return["raster"]}},sky:class extends xs{constructor(e){super(e,_f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=tu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&U("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?bf(o.azimuthal,90-o.polar,t):bf(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return bf(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class wf{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,n,r){const{width:i,height:o}=e,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:h,ImageBitmap:d}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:t,y:n}=r||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof h||d&&e instanceof d?s.texSubImage2D(s.TEXTURE_2D,0,t,n,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,n,i,o,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,o],e instanceof l||e instanceof c||e instanceof u||e instanceof h||d&&e instanceof d?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Sf{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ef{constructor(){this.tasks={},this.taskQueue=[],R(["process"],this),this.invoker=new Sf(this.process),this.nextId=0}add(e,t){const n=this.nextId++,r=function(e){let{type:t,isSymbolTile:n,zoom:r}=e;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}(t);if(0===r){q();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){q();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}class Af{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Tf=["tile","layer","source","sourceLayer","state"];class Cf{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of Tf)void 0!==this[t]&&(e[t]=this[t]);return e}}const kf=32,If=33,Pf=new Uint16Array(8184);for(let _m=0;_m<2046;_m++){let e=_m+2,t=0,n=0,r=0,i=0,o=0,a=0;for(1&e?r=i=o=kf:t=n=a=kf;(e>>=1)>1;){const s=t+r>>1,l=n+i>>1;1&e?(r=t,i=n,t=o,n=a):(t=r,n=i,r=o,i=a),o=s,a=l}const s=4*_m;Pf[s+0]=t,Pf[s+1]=n,Pf[s+2]=r,Pf[s+3]=i}const Lf=new Uint16Array(2178),Mf=new Uint8Array(1089),Of=new Uint16Array(1089);function Nf(e){return 0===e?-.03125:32===e?.03125:0}var Rf=ia([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Df={type:2,extent:As,loadGeometry:()=>[[new f(0,0),new f(8193,0),new f(8193,8193),new f(0,8193),new f(0,0)]]};class Ff{constructor(e,t,n,r,i){this.tileID=e,this.uid=L(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<qe.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Np(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof hf){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof hf&&t.hasRTLText){this.hasRTLText=!0,Bo.isLoading()||Bo.isLoaded()||"deferred"!==jo()||zo();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Ma}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new wf(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new wf(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new wf(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=ai(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let h=0;h<o.length;h++){const t=o.feature(h);if(a.needGeometry){const e=xc(t,!0);if(!a.filter(new Uo(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new Uo(this.tileID.overscaledZ),t))continue;const r=n.getId(t,i),d=new Cf(t,s,l,c,r);d.tile=u,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=G(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof zh||o instanceof Bu){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qe.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=qe.now()+e}setTexture(e,t){const n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new wf(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}setDependencies(e,t){const n={};for(const r of t)n[r]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=bc(Df,this.tileID.canonical,this.tileTransform)[0],r=new aa,i=new Ia;for(let o=0;o<n.length;o++){const{x:e,y:t}=n[o];r.emplaceBack(e,t),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,vl.members),this._tileDebugSegments=Es.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=bc(Df,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const e=function(e,t){const n=Np(e,t),r=Math.pow(2,e.z);for(let c=0;c<If;c++)for(let i=0;i<If;i++){const o=sc((e.x+(i+Nf(i))/kf)/r),a=lc((e.y+(c+Nf(c))/kf)/r),s=t.project(o,a),l=c*If+i;Lf[2*l+0]=Math.round((s.x*n.scale-n.x)*As),Lf[2*l+1]=Math.round((s.y*n.scale-n.y)*As)}Mf.fill(0),Of.fill(0);for(let c=2045;c>=0;c--){const e=4*c,t=Pf[e+0],n=Pf[e+1],r=Pf[e+2],i=Pf[e+3],o=t+r>>1,a=n+i>>1,s=o+a-n,l=a+t-o,u=n*If+t,h=i*If+r,d=a*If+o,p=Math.hypot((Lf[2*u+0]+Lf[2*h+0])/2-Lf[2*d+0],(Lf[2*u+1]+Lf[2*h+1])/2-Lf[2*d+1])>=16;if(Mf[d]=Mf[d]||(p?1:0),c<1022){const e=(n+l>>1)*If+(t+s>>1),o=(i+l>>1)*If+(r+s>>1);Mf[d]=Mf[d]||Mf[e]||Mf[o]}}const i=new la,o=new wa;let a=0;function s(e,t){const n=t*If+e;return 0===Of[n]&&(i.emplaceBack(Lf[2*n+0],Lf[2*n+1],e*As/kf,t*As/kf),Of[n]=++a),Of[n]-1}function l(e,t,n,r,i,a){const c=e+n>>1,u=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Mf[u*If+c])l(i,a,e,t,c,u),l(n,r,i,a,c,u);else{const l=s(e,t),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,kf,kf,kf,0),l(kf,kf,0,0,0,kf),{vertices:i,indices:o}}(this.tileID.canonical,t);r=e.vertices,i=e.indices}else{r=new la,i=new wa;for(const{x:t,y:i}of n)r.emplaceBack(t,i,0,0);const e=ou(r.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,Rf.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=Es.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const n=t.projection;if(!n||"globe"!==n.name||t.freezeTileCoverage)return;const r=this.tileID.canonical,i=Gl(Rl(r,t)),o=Xl(t.zoom);let a;o>0&&(a=Ms(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,r,t,i,a,o),this._makeGlobeTileDebugTextBuffer(e,r,t,i,a,o)}_globePoint(e,t,n,r,i,o,a){let s=Vl(e,t,n);if(o){const i=1<<n.z,l=ic(r.center.lng),c=oc(r.center.lat),u=(n.x+.5)/i-l;let h=0;u>.5?h=-1:u<-.5&&(h=1);let d=(e/As+n.x)/i+h,p=(t/As+n.y)/i;d=(d-l)*r._pixelsPerMercatorPixel+l,p=(p-c)*r._pixelsPerMercatorPixel+c;const f=[d*r.worldSize,p*r.worldSize,0];tl(f,f,o),s=Nl(s,f,a)}return tl(s,s,i)}_makeGlobeTileDebugBorderBuffer(e,t,n,r,i,o){const a=new aa,s=new Ia,l=new sa,c=(e,c,u,h,d)=>{const p=(u-e)/(d-1),f=(h-c)/(d-1),m=a.length;for(let g=0;g<d;g++){const u=e+g*p,h=c+g*f;a.emplaceBack(u,h);const d=this._globePoint(u,h,t,n,r,i,o);l.emplaceBack(d[0],d[1],d[2]),s.emplaceBack(m+g)}},u=As;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(a,vl.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,yl.members),this._tileDebugSegments=Es.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,n,r,i,o){const a=new aa,s=new wa,l=new sa,c=25;s.reserve(32),a.reserve(c),l.reserve(c);const u=(e,t)=>c*e+t;for(let h=0;h<c;h++){const e=2048*h;for(let s=0;s<c;s++){const c=2048*s;a.emplaceBack(c,e);const u=this._globePoint(c,e,t,n,r,i,o);l.emplaceBack(u[0],u[1],u[2])}}for(let h=0;h<4;h++)for(let e=0;e<4;e++){const t=u(h,e),n=u(h,e+1),r=u(h+1,e),i=u(h+1,e+1);s.emplaceBack(t,n,r),s.emplaceBack(r,n,i)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(a,vl.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(l,yl.members),this._tileDebugTextSegments=Es.simpleSegment(0,0,c,32)}}class jf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},I(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const i in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][i]&&delete this.deletedStates[e][r][i]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=I({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const t in this.stateChanges[r])this.state[r][t]||(this.state[r][t]={}),I(this.state[r][t],this.stateChanges[r][t]),e[t]=this.state[r][t];n[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else if(this.state[r][t])for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}n[r]=n[r]||{},I(n[r],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class zf{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Bf(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-n[a])*s,c=(t[a]-n[a])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function Uf(e,t,n,r,i,o,a,s,l,c,u){const h=r-e,d=i-t,p=o-n,f=a-e,m=s-t,g=l-n,y=u[1]*g-u[2]*m,v=u[2]*f-u[0]*g,_=u[0]*m-u[1]*f,b=h*y+d*v+p*_;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-e,S=c[1]-t,E=c[2]-n,A=(w*y+S*v+E*_)*x;if(A<0||A>1)return null;const T=S*p-E*d,C=E*h-w*p,k=w*d-S*h,I=(u[0]*T+u[1]*C+u[2]*k)*x;return I<0||A+I>1?null:(f*T+m*C+g*k)*x}function Vf(e,t,n){return(e-t)/(n-t)}function Zf(e,t,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,d=(e+1)/c*u+r,p=(t+0)/c*h+i,f=(t+1)/c*h+i;s[0]=(e+0)/c*u+r,s[1]=p,l[0]=d,l[1]=f}class qf{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,l=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=l};let a=new zf(r);const s=[];for(let l=0;l<r*r;l++){o(l%r,Math.floor(l/r),i,!1,s);const t=Wf(s[0],s[1],e),n=Wf(s[2],s[1],e),c=Wf(s[2],s[3],e),u=Wf(s[0],s[3],e);a.minimums.push(Math.min(t,n,c,u)),a.maximums.push(Math.max(t,n,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new zf(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),h=e.isLeaf(s[2],s[1]),d=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Bf([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Zf(f,m,g,e,t,n,r,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,y=(m+1)/s,v=Wf(l,d,this.dem)*a,_=Wf(c,d,this.dem)*a,b=Wf(c,y,this.dem)*a,x=Wf(l,y,this.dem)*a,w=Uf(u[0],u[1],v,h[0],u[1],_,h[0],h[1],b,i,o),S=Uf(h[0],h[1],b,u[0],h[1],x,u[0],u[1],v,i,o),E=Math.min(null!==w?w:Number.MAX_VALUE,null!==S?S:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const e=Js([],i,o,p);if(Gf(v,_,x,b,Vf(e[0],u[0],h[0]),Vf(e[1],u[1],h[1]))>=e[2])return p}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){Zf((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,e,t,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=Bf(u,h,i,o);if(null!=p){const e=p;l[d]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,d),t=!0);t||(c[y]=d),y++}}for(let e=0;e<y;e++){const t=c[e];d.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const e=2*t+this._siblingOffset[c][0],r=2*n+this._siblingOffset[c][1],i=a.getElevation(e,r),o=a.isLeaf(e,r),u=this._addNode(i.min,i.max,o);o&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(e,2*t+this._siblingOffset[c][0],2*n+this._siblingOffset[c][1],o,l+c)}}function Gf(e,t,n,r,i,o){return kn(kn(e,n,o),kn(t,r,o),i)}function Wf(e,t,n){const r=n.dim,i=E(e*r-.5,0,r-1),o=E(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Gf(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const Hf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Xf(e,t,n){return(256*e*256+256*t+n)/10-1e4}function Kf(e,t,n){return 256*e+t+n/256-32768}class Yf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return U('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=t.height;const o=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(o,e)]=a[this._idx(o-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,o)]=a[this._idx(e,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new qf(this)}get(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=E(e,-1,this.dim),t=E(t,-1,this.dim));const n=4*this._idx(e,t);return("terrarium"===this.encoding?Kf:Xf)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(e){return Hf[e]}get unpackVector(){return Hf[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const n=[0,0,0,0],r=Yf.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new $c({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let c=o;c<a;c++)for(let t=r;t<i;t++){const n=4*this._idx(t,c),r=4*this._idx(t+s,c+l);this.pixels[n+0]=e.pixels[r+0],this.pixels[n+1]=e.pixels[r+1],this.pixels[n+2]=e.pixels[r+2],this.pixels[n+3]=e.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Vi(Yf,"DEMData"),Vi(qf,"DemMinMaxQuadTree",{omit:["dem"]});class Jf{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const n of t)this.remove(n.value.tileID,n)}}class Qf{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Qf.ReadOnly=!1,Qf.ReadWrite=!0,Qf.disabled=new Qf(519,Qf.ReadOnly,[0,1]);const $f=7680;class em{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}em.disabled=new em({func:519,mask:0},0,0,$f,$f,$f);class tm{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}tm.Replace=[1,0],tm.disabled=new tm(tm.Replace,Ct.transparent,[!1,!1,!1,!1]),tm.unblended=new tm(tm.Replace,Ct.transparent,[!0,!0,!0,!0]),tm.alphaBlended=new tm([1,771],Ct.transparent,[!0,!0,!0,!0]);const nm=1029,rm=2305;class im{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}im.disabled=new im(!1,nm,rm),im.backCCW=new im(!0,nm,rm),im.backCW=new im(!0,nm,2304),im.frontCW=new im(!0,1028,2304),im.frontCCW=new im(!0,1028,rm);class om extends Ke{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Jf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new jf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return k(this._tiles).map((e=>e.tileID)).sort(am).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,r=t.tileID,i=new f(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new f(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(am).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new Xe(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=qe.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new He("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new Ch(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(sm(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=qe.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-om.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const r in this._tiles){const e=this._tiles[r];if(i[r]||!e.hasData())continue;let n=e.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&t[n.key]){i[r]=e.tileID;break}}}for(const r in e)i[r]||(this._coveredTiles[r]=!0,i[r]=e[r])}for(const a in i)this._tiles[a].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const a of o){const e=this._tiles[a];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-om.maxOverzooming,this._source.minzoom),a=Math.max(i+om.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);t[l.key]=l,e.hasData()||r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,t);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let r=e.wasRequested();for(let i=l.overscaledZ-1;i>=o;--i){const o=l.scaledTo(i);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&r&&(e=this._addTile(o)),e&&(t[o.key]=o,r=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new Ff(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new He("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,a=ic(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(o){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(E(a,...lm(e,-1))-a),Math.abs(E(a,...lm(e,1))-a)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(E(a,...lm(e,-1))-a),Math.abs(E(a,...lm(e,0))-a),Math.abs(E(a,...lm(e,1))-a)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const n of c){const o=e.containsTile(l,i,t,n);o&&r.push(o)}}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const n of t)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(sm(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=qe.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}_preloadTiles(e,t){const n=new Map,r=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const a of r){const e=a.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)n.set(t.key,t);this.usedForTerrain&&a.updateElevation(!1)}C(Array.from(n.values()),((e,t)=>{const n=new Ff(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)}))}),t)}}function am(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function sm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function lm(e,t){const n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}om.maxOverzooming=10,om.maxUnderzooming=3;class cm{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new cm(r,r.tileSize/As/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new f(r,i)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?kn(kn(l.get(a,s,r),l.get(a,s+1,r),o-s),kn(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*ac(1,e)*this._dem.stride}}class um{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new zi(As,16,0),this.featureIndexArray=new Ba,this.promoteId=t}insert(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<As&&n[1]<As&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new oh(new sd(this.rawTileData)).layers,this.sourceLayerCoder=new Af(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,r){var i=this;this.loadVTLayers();const o=e.params||{},a=ai(o.filter),s=e.tileResult,l=e.transform,c=s.bufferedTilespaceBounds,u=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,((e,t,n,r)=>Rc(s.bufferedTilespaceGeometry,e,t,n,r)));u.sort(dm);let h=null;l.elevation&&u.length>0&&(h=cm.create(l.elevation,this.tileID));const d={};let p;for(let f=0;f<u.length;f++){const l=u[f];if(l===p)continue;p=l;const c=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(d,c,a,o.layers,o.availableImages,t,n,r,(function(t,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=bc(t,i.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(s,t,r,m,i.z,e.transform,e.pixelPosMatrix,h,o)}))}return d}loadMatchingFeature(e,t,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=t,p=this.bucketLayerIDs[u];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(n.needGeometry){const e=xc(m,!0);if(!n.filter(new Uo(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new Uo(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let y=0;y<p.length;y++){const t=p[y];if(r&&r.indexOf(t)<0)continue;const n=o[t];if(!n)continue;let u={};void 0!==g&&s&&(u=s.getState(n.sourceLayer||"_geojsonTileLayer",g));const h=I({},a[t]);h.paint=hm(h.paint,n.paint,m,u,i),h.layout=hm(h.layout,n.layout,m,u,i);const f=!l||l(m,n,u,d);if(!f)continue;const v=new Cf(m,this.z,this.x,this.y,g);v.layer=h;let _=e[t];void 0===_&&(_=e[t]=[]),_.push({featureIndex:c,feature:v,intersectionZ:f})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=ai(i);for(const u of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:u,layoutVertexArrayOffset:0},c,o,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];const o=this.vtLayers[r].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function hm(e,t,n,r,i){return F(e,((e,o)=>{const a=t instanceof Ko?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function dm(e,t){return t-e}Vi(um,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class pm{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new Qc({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=O(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];i=s*n,s+=t,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===t})}return r}addRoundDash(e,t,n){const r=t/2;for(let i=-n;i<=n;i++){const t=this.width*(this.nextRow+n+i);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=i/n*(r+1);if(a.isDash){const e=r-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+d*d);this.image.data[t+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],n=e[s+1];t.zeroLength?e.splice(s,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(s,1))}const n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const n=Math.abs(s-a.left),r=Math.abs(s-a.right),l=Math.min(n,r);this.image.data[i+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const r="round"===t,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return U("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let c=0;c<e.length;c++)e[c]<0&&(U("Negative value is found in line dasharray, replacing values with 0"),e[c]=0),a+=e[c];if(0!==a){const n=this.width/a,o=this.getDashRanges(e,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}Vi(pm,"LineAtlas");class fm{constructor(e){const t={},n=[];for(const a in e){const r=e[a],i=t[a]={};for(const e in r.glyphs){const t=r.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o=t.metrics.localGlyph?2:1,a={x:0,y:0,w:t.bitmap.width+2*o,h:t.bitmap.height+2*o};n.push(a),i[e]=a}}const{w:r,h:i}=Md(n),o=new Qc({width:r||1,height:i||1});for(const a in e){const n=e[a];for(const e in n.glyphs){const r=n.glyphs[+e];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const i=t[a][e],s=r.metrics.localGlyph?2:1;Qc.copy(r.bitmap,o,{x:0,y:0},{x:i.x+s,y:i.y+s},r.bitmap)}}this.image=o,this.positions=t}}Vi(fm,"GlyphAtlas");class mm{constructor(e){this.tileID=new Ch(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Np(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new Ma;const o=new Af(Object.keys(e.layers).sort()),a=new um(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new pm(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=t.familiesBySource[this.source];for(const b in u){const t=e.layers[b];if(!t)continue;let r=!1,i=!1;for(const e of u[b])"symbol"===e[0].type?r=!0:i=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!i)continue;1===t.version&&U('Vector tile source "'.concat(this.source,'" layer "').concat(b,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const l=o.encode(b),h=[];for(let e=0;e<t.length;e++){const n=t.feature(e),r=a.getId(n,b);h.push({feature:n,id:r,index:e,sourceLayerIndex:l})}for(const e of u[b]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(gm(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(h,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let h,d,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=F(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(g).length?r.send("getGlyphs",{uid:this.uid,stacks:g},((e,t)=>{h||(h=e,d=t,_.call(this))}),void 0,!1,m):d={};const y=Object.keys(c.iconDependencies);y.length?r.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{h||(h=e,p=t,_.call(this))}),void 0,!1,m):p={};const v=Object.keys(c.patternDependencies);function _(){if(h)return i(h);if(d&&p&&f){const e=new fm(d),t=new Nd(p,f);for(const r in s){const i=s[r];i instanceof hf?(gm(i.layers,this.zoom,n),Ep(i,d,e.positions,p,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof zh||i instanceof Bu||i instanceof ph)&&(gm(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:k(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{h||(h=e,f=t,_.call(this))}),void 0,!1,m):f={},_.call(this)}}function gm(e,t,n){const r=new Uo(t);for(const i of e)i.recalculate(r,n)}class ym{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function vm(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=ce(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new oh(new sd(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}e.ARRAY_TYPE=ks,e.AUTH_ERR_MSG=me,e.Aabb=wl,e.Actor=class{constructor(e,n,r){this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},R(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?e:t,this.scheduler=new Ef}send(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=H(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Gi(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||q()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Wi(t.error)):n(null,Wi(t.data)))}else{const n=H(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Gi(t):null,data:Gi(r,n)},n)}:e=>{},i=Wi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error("Could not find function ".concat(t.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Ah,e.Color=Ct,e.ColorMode=tm,e.CullFaceMode=im,e.DEMData=Yf,e.DataConstantProperty=Yo,e.DedupedRequest=ym,e.DepthMode=Qf,e.EXTENT=As,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),o=Math.floor((e.x-i)*r),a=Math.floor(e.y*r),s=this.findDEMTileFor(new Ch(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}getAtPoint(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,l=new Ch(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(e.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(n?this.exaggeration():1)*kn(kn(u.get(f,m),u.get(f,m+1),p-m),kn(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPointOrZero(new dc(e.wrap+(e.canonical.x+t/As)/r,(e.canonical.y+n/As)/r))}getAtTileOffsetFunc(e,t,n,r){return i=>{const o=this.getAtTileOffset(e,i.x,i.y),a=r.upVector(e.canonical,i.x,i.y);return Ys(a,a,o*r.upVectorScale(e.canonical,t,n).metersToTile),a}}getForTilePoints(e,t,n,r){if(this.isUsingMockSource())return!1;const i=cm.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let l=0;l<e.canonical.z-r.canonical.z&&!n.leaves[s];l++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Xe,e.EvaluationParameters=Uo,e.Event=He,e.Evented=Ke,e.FillExtrusionBucket=ph,e.Frustum=xl,e.FrustumCorners=bl,e.GLOBE_RADIUS=Sl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const n=new aa,r=new wa,i=[],o=e+1+2,a=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,n)=>{let r=e===o-1?e-2:0===e?e:e-1;return r+=n?24575:0,[r,t]};for(let c=0;c<o;++c)n.emplaceBack(...l(c,0,!0));for(let c=0;c<a;++c)for(let e=0;e<o;++e)n.emplaceBack(...l(e,c,(0===e||e===o-1)&&!0));for(let c=0;c<t.length;++c){const e=t[c];for(let t=0;t<o;++t)n.emplaceBack(...l(t,e,!0))}for(let c=0;c<t.length;++c){const e=r.length,a=t[c]+1+2,l=new wa;for(let n=0;n<a-1;n++){const e=n===a-2,i=e?o*(s-t.length+c-n):o;for(let t=0;t<o-1;t++){const a=n*o+t;0===n||e||0===t||t===o-2?(l.emplaceBack(a+1,a,a+i),l.emplaceBack(a+i,a+i+1,a+1)):(r.emplaceBack(a+1,a,a+i),r.emplaceBack(a+i,a+i+1,a+1))}}const u=Es.simpleSegment(0,e,n.length,r.length-e);for(let t=0;t<l.uint16.length;t+=3)r.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const h=Es.simpleSegment(0,e,n.length,r.length-e);i.push({withoutSkirts:u,withSkirts:h})}return{vertices:n,indices:r,segments:i}}_createGrid(e){const t=this._fillGridMeshWithLods(El,Al);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,vl.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new wa;for(let i=0;i<=El;i++)t.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new Ta,r=new Ta;this._poleSegments=[];for(let i=0,o=0;i<5;i++){const e=360/(1<<i);n.emplaceBack(0,-Sl,0,.5,0),r.emplaceBack(0,-Sl,0,.5,1);for(let t=0;t<=El;t++){const i=t/El,o=kn(0,e,i),[a,s,l]=Bl(Ql,$l,o,Sl);n.emplaceBack(a,s,l,i,0),r.emplaceBack(a,s,l,i,1)}this._poleSegments.push(Es.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,gl,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,gl,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new ka,n=El,r=n+1+2,i=1;this._wireframeSegments=[];for(let e=0,o=0;e<Al.length;e++){const a=Al[e];for(let e=i;e<a+i;e++)for(let o=i;o<n+i;o++){const n=e*r+o;t.emplaceBack(n,n+1),t.emplaceBack(n,n+r),t.emplaceBack(n,n+r+1)}const s=a*n*3;this._wireframeSegments.push(Es.simpleSegment(0,o,(a+1)*r,s)),o+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=cp,e.ImagePosition=Od,e.LivePerformanceUtils=De,e.LngLat=nc,e.LngLatBounds=Ts,e.LocalGlyphMode=lp,e.MAX_MERCATOR_LATITUDE=uc,e.MercatorCoordinate=dc,e.ONE_EM=Jh,e.OverscaledTileID=Ch,e.PerformanceMarkers=Re,e.Properties=$o,e.RGBAImage=$c,e.Ray=_l,e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",h,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!ge(e))return e;const n=we(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!ge(e))return e;const n=we(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t,n,r){if(!ge(e))return e;const i=we(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=we(e);return ge(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),Se(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ge(e))return e;const r=we(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(o.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(i.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(i.TILE_URL_VERSION).concat(r.path));const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,a)}canonicalizeTileURL(e,t){const n=we(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(i.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(i.TILE_URL_VERSION,"/"),""));let o=n.params;return t&&(o=o.filter((e=>!e.match(/^access_token=/)))),o.length&&(r+="?".concat(o.join("&"))),r}canonicalizeTileset(e,t){const n=!!t&&ge(t),r=[];for(const i of e.tiles||[])ye(i)?r.push(this.canonicalizeTileURL(i,n)):r.push(i);return r}_makeAPIURL(e,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=we(i.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!i.REQUIRE_ACCESS_TOKEN)return Se(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push("access_token=".concat(t||"")),Se(e)}},e.ResourceType=oe,e.SegmentVector=Es,e.SourceCache=om,e.StencilMode=em,e.StructArrayLayout1ui2=Ia,e.StructArrayLayout2f1f2i16=_a,e.StructArrayLayout2i4=aa,e.StructArrayLayout2ui4=ka,e.StructArrayLayout3f12=xa,e.StructArrayLayout3ui6=wa,e.StructArrayLayout4i8=la,e.StructArrayLayout5f20=Ta,e.Texture=wf,e.Tile=Ff,e.Transitionable=qo,e.Uniform1f=ts,e.Uniform1i=class extends es{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},e.Uniform2f=class extends es{constructor(e){super(e),this.current=[0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},e.Uniform3f=class extends es{constructor(e){super(e),this.current=[0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},e.Uniform4f=ns,e.UniformColor=rs,e.UniformMatrix2f=class extends es{constructor(e){super(e),this.current=as}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},e.UniformMatrix3f=class extends es{constructor(e){super(e),this.current=os}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},e.UniformMatrix4f=class extends es{constructor(e){super(e),this.current=is}set(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},e.UnwrappedTileID=Th,e.ValidationError=Jr,e.VectorTileFeature=ah,e.VectorTileWorkerSource=class extends Ke{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||vm,this.loading={},this.loaded={},this.deduped=new ym(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=e&&e.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new mm(e);o.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),t(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new oh(new sd(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);const o={};if(i){const e=ze(r);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,I({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Np(e.tileID.canonical,e.projection);const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=Rd,e.ZoomDependentExpression=Hr,e.add=Gs,e.addDynamicAttributes=sf,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e},e.asyncAll=C,e.bezier=w,e.bindAll=R,e.boundsAttributes=Rf,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=T(r-1,-1,e.length-1),o=T(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(a.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){ie++,ie>ee&&(e.getActor().send("enforceCacheSizeLimit",$),ie=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:n,y:r}=e.point,i=Hl(n,r,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Os(i,i,Wl(Ol(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:n}=e.point,{lng:r,lat:i}=e._center;return Hl(t,n,e.worldSize,r,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,n=t/ac(1,e.center.lat),r=Ls(new Float64Array(16));return Ns(r,r,[e.point.x,e.point.y,0]),Rs(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=rc,e.clamp=E,e.clearTileCache=function(e){if(!te())return;const n=t.caches.delete(Y);e&&n.catch(e).then((()=>e()))},e.clipLine=ip,e.clone=function(e){var t=new ks(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=z,e.collisionCircleLayout=Yh,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new ks(16);return ks!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Is,e.createExpression=Gr,e.createLayout=ia,e.createStyleLayer=function(e){return"custom"===e.type?new vf(e):new xf[e.type](e)},e.cross=el,e.degToRad=v,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=$s,e.earthRadius=ec,e.ease=S,e.easeCubicInOut=x,e.ecefToLatLng=function(e){let[t,n,r]=e;const i=Math.hypot(t,n,r),o=Math.atan2(t,r),a=.5*Math.PI-Math.acos(-n/i);return new nc(_(o),_(a))},e.emitValidationErrors=ji,e.endsWith=D,e.enforceCacheSizeLimit=function(e){ne(),J&&J.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=ed,e.evaluateSizeForZoom=td,e.evaluateVariableOffset=Sp,e.evented=Fo,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=qe,e.exported$1=o,e.extend=I,e.extend$1=Je,e.fillExtrusionHeightLift=bh,e.filterObject=j,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,p=i*s,f=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-h-f,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=js,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return b[t]},e.getAABBPointSquareDist=function(e,t,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;e[i]>o&&(r+=(e[i]-o)*(e[i]-o)),t[i]<o&&(r+=(o-t[i])*(o-t[i]))}return r},e.getAnchorAlignment=Wd,e.getAnchorJustification=Ap,e.getBounds=function(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new f(t,n),max:new f(r,i)}},e.getColumn=K,e.getGridMatrix=function(e,t,n,r){const i=t.getNorth(),o=t.getSouth(),a=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-a,u=i-o,h=c/El,d=-u/Al[n],p=[0,h,0,d,0,0,i,a,0];if(e.z>0){const e=180/r;Ps(p,p,[e/c+1,0,0,0,e/u+1,0,-.5*e/h,.5*e/d,1])}return p[2]=l,p[5]=e.x,p[8]=e.y,p},e.getImage=fe,e.getJSON=function(e,t){return le(I(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=uc-5;e=E(e,-t,t)/t*90;const n=Math.pow(Math.abs(Math.sin(v(e))),3);return Math.round(n*(Al.length-1))},e.getMapSessionAPI=Oe,e.getPerformanceMeasurement=ze,e.getProjection=tf,e.getRTLTextPluginStatus=jo,e.getReferrer=se,e.getTilePoint=function(e,t){let{x:n,y:r}=t;return new f(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*As,(r*e.scale-e.y)*As)},e.getTileVec3=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qs(((t.x-n)*e.scale-e.x)*As,(t.y*e.scale-e.y)*As,cc(t.z,t.y))},e.getVideo=function(e,n){const r=t.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let i=0;i<e.length;i++){const n=t.document.createElement("source");ue(e[i])||(r.crossOrigin="Anonymous"),n.src=e[i],r.appendChild(n)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],n=Ls(new Float64Array(16));return Os(n,e.pixelMatrix,e.globeMatrix),tl(t,t,n),new f(t[0],t[1])},e.globeDenormalizeECEF=Wl,e.globeECEFOrigin=function(e,t){const n=[0,0,0];return tl(n,n,Gl(Ol(t.canonical))),tl(n,n,e),n},e.globeMetersToEcef=Il,e.globeNormalizeECEF=Gl,e.globePixelsToTileUnits=function(e,t){return As/(512*Math.pow(2,e))*Zl(Ol(t))},e.globePoleMatrixForTile=function(e,t,n){const r=Ls(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Fs(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=Ol,e.globeTiltAtLngLat=Kl,e.globeToMercatorTransition=Xl,e.globeUseCustomAntiAliasing=function(e,t,n){const r=Xl(n.zoom),i=e.style.map._antialias,o=!!t.extStandardDerivatives,a=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},e.identity=Ls,e.identity$1=hl,e.invert=Ms,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Yl,e.isMapAuthenticated=function(e){return Ne.has(e)},e.isMapboxURL=ge,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!H(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=lc,e.latLngToECEF=Ul,e.len=al,e.length=Zs,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=sc,e.loadVectorTile=vm,e.makeRequest=le,e.mapValue=function(e,t,n,r,i){return E((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=hc,e.mercatorXfromLng=ic,e.mercatorYfromLat=oc,e.mercatorZfromAltitude=ac,e.mul=Bs,e.mul$1=ol,e.multiply=Os,e.multiply$1=Ps,e.multiply$2=Hs,e.nextPowerOfTwo=O,e.normalize=Qs,e.normalize$1=fl,e.normalize$2=ll,e.number=kn,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.pbf=sd,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Bo,e.pointGeometry=f,e.polesInViewport=function(e){const t=Ls(new Float64Array(16));Os(t,e.pixelMatrix,e.globeMatrix);const n=[0,Tl,0],r=[0,Cl,0];return tl(n,n,t),tl(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Yl(e,new nc(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Yl(e,new nc(e.center.lat,-90))]},e.polygonContainsPoint=Nc,e.polygonIntersectsBox=Rc,e.polygonIntersectsPolygon=Ac,e.polygonizeBounds=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=new f(n,n),o=e.sub(i),a=t.add(i),s=[o,new f(a.x,o.y),a,new f(o.x,a.y)];return r&&s.push(o.clone()),s},e.posAttributes=vl,e.postMapLoadEvent=Ie,e.postPerformanceEvent=Le,e.postTurnstileEvent=Ce,e.potpack=Md,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=_,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Oo,pluginURL:No}),Fo.on("pluginStateChange",e),e},e.removeAuthState=function(e){Ne.delete(e)},e.renderColorRamp=tu,e.resample=fc,e.rotateX=Ds,e.rotateX$1=dl,e.rotateY=Fs,e.rotateY$1=pl,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=Rs,e.scale$1=sl,e.scale$2=Ys,e.scaleAndAdd=Js,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){$=e,ee=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oo===Io||Oo===Po||Oo===Lo)throw new Error("setRTLTextPlugin cannot be called multiple times.");No=qe.resolveURL(e),Oo=Io,Mo=t,Do(),n||zo()},e.smoothstep=A,e.spec=Ye,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?Ne.add(e):Ne.delete(e)},e.sub=il,e.subtract=Ws,e.symbolSize=nd,e.tileAABB=function(e,t,n,r,i,o,a,s,l){if("globe"===l.name)return Fl(e,t,new Ah(n,r,i));const c=Np({z:n,x:r,y:i},l);return new wl([(o+c.x/c.scale)*t,t*(c.y/c.scale),a],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=jl,e.tileTransform=Np,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=tl,e.transformMat4$1=cl,e.transformQuat=nl,e.transitionTileAABBinECEF=Rl,e.translate=Ns,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Ro,e.uniqueId=L,e.updateGlobeVertexNormal=function(e,t,n,r,i){const o=5*t+2;e.float32[o+0]=n,e.float32[o+1]=r,e.float32[o+2]=i},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=e=>Fi(vi(e)),e.validateFog=e=>Fi(Pi(e)),e.validateLayer=e=>Fi(Si(e)),e.validateLight=e=>Fi(ki(e)),e.validateSource=e=>Fi(Ti(e)),e.validateStyle=Ni,e.validateTerrain=e=>Fi(Ii(e)),e.values=k,e.vectorTile=Hu,e.version=n,e.warnOnce=U,e.window=t,e.wrap=T})),r(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+="".concat(t(r),",");return"".concat(n,"]")}let n="{";for(const r of Object.keys(e).sort())n+="".concat(r,":").concat(t(e[r]),",");return"".concat(n,"}")}function n(n){let r="";for(const i of e.refProperties)r+="/".concat(t(n[i]));return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let o=0;o<e.length;o++){const i=t&&t[e[o].id]||n(e[o]);t&&(t[e[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(e[o])}const i=[];for(const n in r)i.push(r[n]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{loadTile(t,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=t,l=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,a):o;n(null,new e.DEMData(r,l,i,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}var o=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)a(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)a(t.coordinates[r],n);return t};function a(e,t){if(0!==e.length){s(e[0],t);for(var n=1;n<e.length;n++)s(e[n],!t)}}function s(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}const l=e.VectorTileFeature.prototype.toGeoJSON;class c{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.pointGeometry(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.pointGeometry(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}class u{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new c(this._features[e])}}var h={},d={get exports(){return h},set exports(e){h=e}},p=e.pointGeometry,f=e.vectorTile.VectorTileFeature,m=g;function g(e,t){this.options=t||{},this.features=e,this.length=e.length}function y(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}g.prototype.feature=function(e){return new y(this.features[e],this.options.extent)},y.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new p(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},y.prototype.toGeoJSON=f.prototype.toGeoJSON;var v=e.pbf,_=m;function b(e){var t=new v;return function(e,t){for(var n in e.layers)t.writeMessage(3,x,e.layers[n])}(e,t),t.finish()}function x(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,w,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,C,o[n])}function w(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,S,e),t.writeVarintField(3,n.type),t.writeMessage(4,T,n)}function S(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(i.push(l),a[h]=d=i.length-1),t.writeVarint(d)}}}function E(e,t){return(t<<3)+(7&e)}function A(e){return e<<1^e>>31}function T(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(E(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(E(2,u-1));var d=l[h].x-i,p=l[h].y-o;t.writeVarint(A(d)),t.writeVarint(A(p)),i+=d,o+=p}3===r&&t.writeVarint(E(7,1))}}function C(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function k(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;I(e,t,a,r,i,o%2),k(e,t,n,r,a-1,o+1),k(e,t,n,a+1,i,o+1)}function I(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);I(e,t,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=r,l=i;for(P(e,t,r,n),t[2*i+o]>a&&P(e,t,r,i);s<l;){for(P(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?P(e,t,r,l):(l++,P(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function P(e,t,n,r){L(e,n,r),L(t,2*n,2*r),L(t,2*n+1,2*r+1)}function L(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function M(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}d.exports=b,h.fromVectorTileJs=b,h.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new _(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return b({layers:n})},h.GeoJSONWrapper=_;const O=e=>e[0],N=e=>e[1];class R{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let l=0;l<e.length;l++)a[l]=l,s[2*l]=t(e[l]),s[2*l+1]=n(e[l]);k(a,s,r,0,a.length-1,0)}range(e,t,n,r){return function(e,t,n,r,i,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=t[2*a],u=t[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[a]);continue}const f=Math.floor((p+d)/2);c=t[2*f],u=t[2*f+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[f]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return function(e,t,n,r,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)M(t[2*i],t[2*i+1],n,r)<=l&&s.push(e[i]);continue}const d=Math.floor((h+u)/2),p=t[2*d],f=t[2*d+1];M(p,f,n,r)<=l&&s.push(e[d]);const m=(c+1)%2;(0===c?n-i<=p:r-i<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+i>=p:r+i>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}const D={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},F=Math.fround||(j=new Float32Array(1),e=>(j[0]=+e,j[0]));var j;class z{constructor(e){this.options=H(Object.create(D),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:r,nodeSize:i}=this.options;t&&console.time("total time");const o="prepare ".concat(e.length," points");t&&console.time(o),this.points=e;let a=[];for(let s=0;s<e.length;s++)e[s].geometry&&a.push(U(e[s],s));this.trees[r+1]=new R(a,X,K,i,Float32Array),t&&console.timeEnd(o);for(let s=r;s>=n;s--){const e=+Date.now();a=this._cluster(a,s),this.trees[s]=new R(a,X,K,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(q(n),G(o),q(i),G(r)),l=[];for(const c of s){const e=a.points[c];l.push(e.numPoints?V(e):this.points[e.index])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const c of s){const t=i.points[c];t.parentId===e&&l.push(t.numPoints?V(t):this.points[t.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.points,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(a),e.length===n)break}return i}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=t[a],s=e.numPoints;let l,c,u;if(s)l=Z(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=q(t.geometry.coordinates[0]),u=G(t.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;s?d=e.id:this.options.generateId?d=e.index:this.points[e.index].id&&(d=this.points[e.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,t));for(let l=0;l<e.length;l++){const r=e[l];if(r.zoom<=t)continue;r.zoom=t;const i=this.trees[t+1],c=i.within(r.x,r.y,s),u=r.numPoints||1;let h=u;for(const e of c){const n=i.points[e];n.zoom>t&&(h+=n.numPoints||1)}if(h>u&&h>=a){let e=r.x*u,a=r.y*u,s=o&&u>1?this._map(r,!0):null;const d=(l<<5)+(t+1)+this.points.length;for(const n of c){const l=i.points[n];if(l.zoom<=t)continue;l.zoom=t;const c=l.numPoints||1;e+=l.x*c,a+=l.y*c,l.parentId=d,o&&(s||(s=this._map(r,!0)),o(s,this._map(l)))}r.parentId=d,n.push(B(e/h,a/h,d,h,s))}else if(n.push(r),h>1)for(const e of c){const r=i.points[e];r.zoom<=t||(r.zoom=t,n.push(r))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?H({},e.properties):e.properties;const n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?H({},r):r}}function B(e,t,n,r,i){return{x:F(e),y:F(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function U(e,t){const[n,r]=e.geometry.coordinates;return{x:F(q(n)),y:F(G(r)),zoom:1/0,index:t,parentId:-1}}function V(e){return{type:"Feature",id:e.id,properties:Z(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),W(e.y)]}};var t}function Z(e){const t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return H(H({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function q(e){return e/360+.5}function G(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function W(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function H(e,t){for(const n in t)e[n]=t[n];return e}function X(e){return e.x}function K(e){return e.y}function Y(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],c=e[t+1],u=e[n],h=e[n+1],d=t+3;d<n;d+=3){var p=J(e[d],e[d+1],l,c,u,h);if(p>o)i=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(i=d,s=f)}}o>r&&(i-t>3&&Y(e,t,i,r),e[i+2]=o,n-i>3&&Y(e,i,n,r))}function J(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function Q(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)$(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)$(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)$(e,t[r][i])}(i),i}function $(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ee(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)te(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)te(i[c],s);else if("LineString"===o)ne(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)ne(i[c],s=[],a,!1),e.push(Q(l,"LineString",s,t.properties));return}re(i,s,a,!1)}else if("Polygon"===o)re(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)ee(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];re(i[c],u,a,!0),s.push(u)}}e.push(Q(l,o,s,t.properties))}}function te(e,t){t.push(ie(e[0])),t.push(oe(e[1])),t.push(0)}function ne(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=ie(e[s][0]),c=oe(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,Y(t,0,u,n),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function re(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ne(e[i],o,n,r),t.push(o)}}function ie(e){return e/360+.5}function oe(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ae(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=n&&f<r)l.push(u);else if(!(f<n||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)se(h,m,n,r,i);else if("LineString"===d)le(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)ue(h,m,n,r,i,!1);else if("Polygon"===d)ue(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];ue(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(Q(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(Q(u.id,d,m,u.tags))}}}return l.length?l:null}function se(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function le(e,t,n,r,i,o,a){for(var s,l,c=ce(e),u=0===i?de:pe,h=e.start,d=0;d<e.length-3;d+=3){var p=e[d],f=e[d+1],m=e[d+2],g=e[d+3],y=e[d+4],v=0===i?p:f,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),v<n?_>n&&(l=u(c,p,f,g,y,n),a&&(c.start=h+s*l)):v>r?_<r&&(l=u(c,p,f,g,y,r),a&&(c.start=h+s*l)):he(c,p,f,m),_<n&&v>=n&&(l=u(c,p,f,g,y,n),b=!0),_>r&&v<=r&&(l=u(c,p,f,g,y,r),b=!0),!o&&b&&(a&&(c.end=h+s*l),t.push(c),c=ce(e)),a&&(h+=s)}var x=e.length-3;p=e[x],f=e[x+1],m=e[x+2],(v=0===i?p:f)>=n&&v<=r&&he(c,p,f,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&he(c,c[0],c[1],c[2]),c.length&&t.push(c)}function ce(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ue(e,t,n,r,i,o){for(var a=0;a<e.length;a++)le(e[a],t,n,r,i,o,!1)}function he(e,t,n,r){e.push(t),e.push(n),e.push(r)}function de(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function pe(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function fe(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=me(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(me(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(me(o.geometry[s][c],t));i.push(l)}n.push(Q(o.id,a,i,o.tags))}return n}function me(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function ge(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(ye(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(ye(c[r][i],c[r][i+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function ye(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ve(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,_e(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function _e(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)be(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)be(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)be(a,c[s],e,n,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function be(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function xe(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ee(n,e.features[r],t,r);else ee(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=ae(e,1,-1-n,n,0,-1,2,t),o=ae(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ae(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=fe(i,1).concat(r)),o&&(r=r.concat(fe(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function we(e,t,n){return 32*((1<<e)*n+t)+e}function Se(e,t){const n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);const i=new u(r.features);let o=h(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xe.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=we(t,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=ve(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(n!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,E=1+x;m=g=y=v=null,_=ae(e,u,n-x,n+S,0,d.minX,d.maxX,l),b=ae(e,u,n+w,n+E,0,d.minX,d.maxX,l),e=null,_&&(m=ae(_,u,r-x,r+S,1,d.minY,d.maxY,l),g=ae(_,u,r+w,r+E,1,d.minY,d.maxY,l),_=null),b&&(y=ae(b,u,r-x,r+S,1,d.minY,d.maxY,l),v=ae(b,u,r+w,r+E,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},xe.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=we(e,t=(t%a+a)%a,n);if(this.tiles[s])return ge(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[we(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ge(this.tiles[s],i):null):null};class Ee extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,Se),i&&(this.loadGeoJSON=i)}loadData(t,n){const r=t&&t.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(t,((a,s)=>{if(a||!s)return n(a);if("object"!=typeof s)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));{o(s,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));const r=s.features.filter((e=>n.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new z(function(t){let{superclusterOptions:n,clusterProperties:r}=t;if(!r||!n)return n;const i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const c of l){const[t,n]=r[c],a=e.createExpression(n),s=e.createExpression("string"==typeof t?[t,["accumulated"],["get",c]]:t);i[c]=a.value,o[c]=s.value}return n.map=e=>{s.properties=e;const t={};for(const n of l)t[n]=i[n].evaluate(a,s);return t},n.reduce=(e,t)=>{s.properties=t;for(const n of l)a.accumulated=e[n],e[n]=o[n].evaluate(a,s)},n}(t)).load(s.features):function(e,t){return new xe(e,t)}(s,t.geojsonVtOptions)}catch(a){return n(a)}this.loaded={};const l={};if(i){const n=e.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Ae{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Ee},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(t)),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,o,a)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](r,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ae(self)),Ae})),r(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n}var n=r;function r(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function o(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(t,n,r){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))i.setAttributeNS(null,e,n[e]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function h(){s&&l&&(s[l]=c)}function d(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",d,!0)}function p(){e.window.addEventListener("click",d,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",d,!0)}),0)}function f(e,t){const n=e.getBoundingClientRect();return y(e,n,t)}function m(e,t){const n=e.getBoundingClientRect(),r=[];for(let i=0;i<t.length;i++)r.push(y(e,n,t[i]));return r}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,n,r){const i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function _(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class b extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?r[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce('Image "'.concat(i,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:t}=this.patterns[o],n=t.x+1,r=t.y+1,a=this.images[o].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];_(e)&&this.updateImage(t,e)}}}const x=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function(t){let[n,r,i]=t;const o=e.degToRad(r+90),a=e.degToRad(i);return{x:n*Math.cos(o)*Math.sin(a),y:n*Math.sin(o)*Math.sin(a),z:n*Math.cos(a),azimuthal:r,polar:i}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),w="-transition";class S extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(x),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(const r in t){const n=t[r];e.endsWith(r,w)?this._transitionable.setTransition(r.slice(0,-w.length),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const E=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),A="-transition";class T extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(E),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,A)?this._transitionable.setTransition(n.slice(0,-A.length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}function C(t,n,r,i){const o=e.smoothstep(45,65,r),[a,s]=k(t,i),l=e.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function k(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const I=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),P="-transition";class L extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(I),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[e.number(o[0],i[0],r),e.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,n)){for(const n of Object.keys(e.spec.fog))t&&void 0===t[n]&&(t[n]=e.spec.fog[n].default);for(const n in t){const r=t[n];e.endsWith(n,P)?this._transitionable.setTransition(n.slice(0,-P.length),r):this._transitionable.setValue(n,r)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,r){const i=e.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,r.mercatorFogMatrix),C(t,a,r.pitch,r._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?k(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class M{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new M.Actor(r[e],n,this.id);t.name="Worker ".concat(e),this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function O(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}M.Actor=e.Actor;class N{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.pointGeometry||"number"==typeof t[0]){const o=e.pointGeometry.convert(t);r=[o],i=n.isPointAboveHorizon(o)}else{const o=e.pointGeometry.convert(t[0]),a=e.pointGeometry.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new N(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=t.tileID.wrap+(a.unwrapped?i:0);const l=a.polygon.map((n=>e.getTilePoint(t.tileTransform,n,s)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((n=>e.getTileVec3(t.tileTransform,n,s))),u=c.map((t=>new e.pointGeometry(t[0],t[1]))),h=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),d=e.getTileVec3(t.tileTransform,h,s),p=c.map((t=>{const n=e.sub(t,t,d);return e.normalize(n,n),new e.Ray(d,n)})),f=O(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(e,t){const n=F(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=F(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(t,n){const r=function(t,n){const r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],o=[0,e.GLOBE_RADIUS,0,1],a=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(o,o,r),e.transformMat4$1(a,a,r);const s=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),l=new e.pointGeometry(o[0]/o[3],o[1]/o[3]),c=e.polygonContainsPoint(t,s)&&i[3]<a[3],u=e.polygonContainsPoint(t,l)&&o[3]<a[3];if(!c&&!u)return null;const h=function(e,t,n){for(let r=1;r<e.length;r++){const i=D(t.pointCoordinate3D(e[r-1]).x),o=D(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(t,n,c?-1:1);if(!h)return null;const{idx:d,t:p}=h;let f=d>1?R(t.slice(0,d),n):[],m=d<t.length?R(t.slice(d),n):[];f=f.map((t=>new e.pointGeometry(D(t.x),t.y))),m=m.map((t=>new e.pointGeometry(D(t.x),t.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=e.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,p);let v;return v=c?[new e.pointGeometry(0,y),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,y)]:[new e.pointGeometry(1,y),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,y)],g.push(...v),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,n);if(r)return r;const i=function(t,n){let r=!1,i=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const n=(o+e)%(t.length-1),i=t[n],a=t[n+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===n&&(t[t.length-1].x+=1)):(a.x+=1,n+1===t.length-1&&(t[0].x+=1)),r=!0)}const a=e.mercatorXfromLng(n.center.lng);return r&&a<Math.abs(a-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:r}}(R(t,n).map((t=>new e.pointGeometry(D(t.x),t.y))),n);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function R(t,n){return e.resample(t,(e=>{const t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function D(e){return e<0?1+e%1:e%1}function F(e){return 100*e|0}function j(t,n,r,i,o){const a=function(r,i){if(r)return o(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const r=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((e=>e.id))),r.tiles=n.canonicalizeTileset(r,t.url),o(null,r)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class z{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class B{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class V{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[U[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Z{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class q extends Z{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class G extends Z{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends Z{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class H extends Z{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class X extends Z{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class K extends Z{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Y extends Z{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class J extends Z{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Q extends Z{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class $ extends Z{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ee extends Z{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class te extends Z{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ne extends Z{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class re extends Z{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class ie extends Z{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class oe extends Z{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ae extends Z{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class se extends Z{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class le extends Z{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class ce extends Z{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class ue extends Z{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class he extends Z{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class de extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class pe extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class fe extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class me extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ge extends Z{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ye extends Z{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ve extends Z{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class _e extends Z{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class be extends Z{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class xe extends Z{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class we extends xe{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Se extends xe{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ee extends Se{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ae{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,i),r&&(this.depthAttachment=new Se(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Te{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new q(this),this.clearDepth=new G(this),this.clearStencil=new W(this),this.colorMask=new H(this),this.depthMask=new X(this),this.stencilMask=new K(this),this.stencilFunc=new Y(this),this.stencilOp=new J(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ne(this),this.blendFunc=new re(this),this.blendColor=new ie(this),this.blendEquation=new oe(this),this.cullFace=new ae(this),this.cullFaceSide=new se(this),this.frontFace=new le(this),this.program=new ce(this),this.activeTexture=new ue(this),this.viewport=new he(this),this.bindFramebuffer=new de(this),this.bindRenderbuffer=new pe(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new me(this),this.bindElementBuffer=new ge(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ye(this),this.pixelStoreUnpack=new ve(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new B(this,e,t)}createVertexBuffer(e,t,n){return new V(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new Ae(this,e,t,n)}clear(e){let{color:t,depth:n,stencil:r}=e;const i=this.gl;let o=0;t&&(o|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(o|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(o)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ce extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=j(this._options,this.map._requestManager,n,r,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(n)),r&&2!==r.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(r)),this.fire(new e.ErrorEvent(i))):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new z(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ke extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=j(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new z(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let Ie;function Pe(t,n,r,i,o,a,s,l){const c=[t,r,o,n,i,a,1,1,1],u=[s,l,1],h=e.adjoint([],c),[d,p,f]=e.transformMat3(u,u,e.transpose(h,h));return e.multiply$1(c,[d,0,0,0,p,0,0,0,f],c)}class Le extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t,this._dirty=!1}load(t,n){this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=e.window;this.image=r instanceof n?e.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((t=>{const r=n.projection.project(t[0],t[1]);return e.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(t,n,r,i,o,a,s,l,c,u){const h=Pe(0,0,t,0,0,n,t,n),d=Pe(r,i,o,a,s,l,c,u);return e.multiply$1(d,e.adjoint(h,h),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*n/e.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Me={vector:Ce,raster:ke,"raster-dem":class extends ke{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==Ie&&(Ie=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Ie),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?o:e.exported.getImageData(o,r),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),t,((t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Le{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Le,canvas:class extends Le{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(this.id," custom source")))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(this.id," custom source")))),this._implementation.bounds&&(this.tileBounds=new z(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:r}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:r,y:i,z:o}=t.tileID.canonical,a=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=()=>a.abort()}loadTileData(e,t){ke.loadTileData(e,t,this._map.painter)}unloadTileData(e){ke.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:r}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:r})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Oe=function(t,n,r,i){const o=new Me[n.type](t,n,r,i);if(o.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(o.id));return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Ne(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Re(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=e.tilesIn(r,a,s);l.sort(Fe);const c=[];for(const h of l)c.push({wrappedTileID:h.tile.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,n,e._state,h,i,o,Ne(e.transform,h.tile.tileID),s)});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const h in u)u[h].forEach((t=>{const n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return u}function De(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let o=0;o<n.length;o++){const e=n[o],a=e.tileID.canonical.key;i[a]||(i[a]=!0,e.querySourceFeatures(r,t))}return r}function Fe(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function je(){return null!=go.workerClass?new go.workerClass:new e.window.Worker(go.workerUrl)}const ze="mapboxgl_preloaded_worker_pool";class Be{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Be.workerCount;)this.workers.push(new je);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}let Ue;function Ve(){return Ue||(Ue=new Be),Ue}function Ze(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function qe(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Ze(e[n],t[e[n].ref]));return e}Be.workerCount=2;const Ge={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function We(e,t,n){n.push({command:Ge.addSource,args:[e,t[e]]})}function He(e,t,n){t.push({command:Ge.removeSource,args:[e]}),n[e]=!0}function Xe(e,t,n,r){He(e,n,r),We(e,t,n)}function Ke(e,n,r){let i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function Ye(e,n,r,i,o,a){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Je(e){return e.id}function Qe(e,t){return e[t.id]=t,e}class $e{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class et{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[u],t=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}const tt=Math.tan(85*Math.PI/180);function nt(t,n,r,i,o,a,s){const l=e.create();if(r)if("globe"===a.name){const t=e.calculateGlobeLabelMatrix(o,n);e.multiply(l,l,t)}else{const t=v([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],i||e.rotateZ(l,l,o.angle)}else e.multiply(l,o.labelPlaneMatrix,t);return l}function rt(e,t,n,r,i,o,a){const s=nt(e,t,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function it(t,n,r,i,o,a,s){if(r){if("globe"===a.name){const l=nt(t,n,r,i,o,a,s);return e.invert(l,l),e.multiply(l,t,l),l}{const n=e.clone(t),r=e.identity([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],e.multiply(n,n,r),i||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function ot(t,n,r,i){const o=[t,n,r,1];r?e.transformMat4$1(o,o,i):gt(o,o,i);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function at(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function lt(t,n,r,i,o,a,s,l,c,u){const h=r.transform,d=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(d,r.transform.zoom),f="globe"===h.projection.name,m=[256/r.width*2+1,256/r.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,_=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,b=r.transform.width/r.transform.height;let x,w=!1;for(let S=0;S<_.length;S++){const i=_.get(S),{numGlyphs:f,writingMode:E}=i;if(E!==e.WritingMode.vertical||w||x===e.WritingMode.horizontal||(w=!0),x=E,(i.hidden||E===e.WritingMode.vertical)&&!w){mt(f,g);continue}w=!1;const A=new e.pointGeometry(i.tileAnchorX,i.tileAnchorY);let{x:T,y:C,z:k}=h.projection.projectTilePoint(A.x,A.y,u.canonical);if(c){const[e,t,n]=c(A);T+=e,C+=t,k+=n}const I=[T,C,k,1];if(e.transformMat4$1(I,I,n),!st(I,m)){mt(f,g);continue}const P=at(r.transform.cameraToCenterDistance,I[3]),L=e.evaluateSizeForFeature(d,p,i),M=s?L/P:L*P,O=ot(T,C,k,o);if(O[3]<=0){mt(f,g);continue}let N={};const R=s?null:c,D=ht(i,M,!1,l,n,o,a,t.glyphOffsetArray,v,g,y,O,A,N,b,R,h.projection,u,s);w=D.useVertical,R&&D.needsFlipping&&(N={}),(D.notEnoughRoom||w||D.needsFlipping&&ht(i,M,!0,l,n,o,a,t.glyphOffsetArray,v,g,y,O,A,N,b,R,h.projection,u,s).notEnoughRoom)&&mt(f,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function ct(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=s,_=y+s.numGlyphs,b=g+s.lineLength,x=t.getoffsetX(y),w=t.getoffsetX(_-1),S=ft(e*x,n,r,i,o,a,v,g,b,l,c,u,h,d,!0,p,f,m);if(!S)return null;const E=ft(e*w,n,r,i,o,a,v,g,b,l,c,u,h,d,!0,p,f,m);return E?{first:S,last:E}:null}function ut(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:0!==n&&function(e,t){return 0===e||Math.abs(t/e)>tt}(r,i)?1===n?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ht(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_){const b=n/24,x=t.lineOffsetX*b,w=t.lineOffsetY*b,{lineStartIndex:S,glyphStartIndex:E,numGlyphs:A,segment:T,writingMode:C,flipState:k}=t,I=S+t.lineLength,P=t=>{if(h){const[n,r,i]=t.up,o=u.length;e.updateGlobeVertexNormal(h,o+0,n,r,i),e.updateGlobeVertexNormal(h,o+1,n,r,i),e.updateGlobeVertexNormal(h,o+2,n,r,i),e.updateGlobeVertexNormal(h,o+3,n,r,i)}const[n,r,i]=t.point;e.addDynamicAttributes(u,n,r,i,t.angle)};if(A>1){const e=ct(b,l,x,w,r,d,p,t,c,a,f,g,!1,y,v,_);if(!e)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=e.first.point,[o,a,l]=e.last.point;[n,r]=ot(n,r,i,s),[o,a]=ot(o,a,l,s);const c=ut(C,k,(o-n)*m,a-r);if(t.flipState=c&&c.needsFlipping?1:2,c)return c}P(e.first);for(let t=E+1;t<E+A-1;t++){const e=ft(b*l.getoffsetX(t),x,w,r,d,p,T,S,I,c,a,f,g,!1,!1,y,v,_);if(!e)return u.length-=4*(t-E),{notEnoughRoom:!0};P(e)}P(e.last)}else{if(i&&!r){const n=ot(p.x,p.y,0,o),r=S+T+1,i=new e.pointGeometry(c.getx(r),c.gety(r)),a=ot(i.x,i.y,0,o),s=a[3]>0?a:pt(p,i,n,1,o,void 0,y,v.canonical),l=ut(C,k,(s[0]-n[0])*m,s[1]-n[1]);if(t.flipState=l&&l.needsFlipping?1:2,l)return l}const n=ft(b*l.getoffsetX(E),x,w,r,d,p,T,S,I,c,a,f,g,!1,!1,y,v,_);if(!n)return{notEnoughRoom:!0};P(n)}return{}}function dt(e,t,n,r,i){const{x:o,y:a,z:s}=r.projectTilePoint(e.x,e.y,t);if(!i)return ot(o,a,s,n);const[l,c,u]=i(e);return ot(o+l,a+c,s+u,n)}function pt(t,n,r,i,o,a,s,l){const c=dt(t.sub(n)._unit()._add(t),l,o,s,a);return e.sub(c,r,c),e.normalize(c,c),e.scaleAndAdd(c,r,c,i)}function ft(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v){const _=i?t-n:t+n;let b=_>0?1:-1,x=0;i&&(b*=-1,x=Math.PI),b<0&&(x+=Math.PI);let w=l+s+(b>0?0:1)|0,S=o,E=o,A=0,T=0;const C=Math.abs(_),k=[],I=[];let P=a,L=P;const M=()=>pt(L,P,E,C-A+1,h,p,g,y.canonical);for(;A+T<=C;){if(w+=b,w<l||w>=c)return null;if(E=S,L=P,k.push(E),f&&I.push(L),P=new e.pointGeometry(u.getx(w),u.gety(w)),S=d[w],!S){const e=dt(P,y.canonical,h,g,p);S=e[3]>0?d[w]=e:M()}A+=T,T=e.distance(E,S)}m&&p&&(d[w]&&(S=M(),T=e.distance(E,S)),d[w]=S);const O=(C-A)/T,N=P.sub(L)._mult(O)._add(L),R=e.sub([],S,E),D=e.scaleAndAdd([],E,R,O);let F=[0,0,1],j=R[0],z=R[1];if(v&&(F=g.upVector(y.canonical,N.x,N.y),0!==F[0]||0!==F[1]||1!==F[2])){const t=[F[2],0,-F[0]],n=e.cross([],F,t);e.normalize(t,t),e.normalize(n,n),j=e.dot(R,t),z=e.dot(R,n)}if(r){const t=e.cross([],F,R);e.normalize(t,t),e.scaleAndAdd(D,D,t,r*b)}const B=x+Math.atan2(z,j);return k.push(D),f&&I.push(N),{point:D,angle:B,path:k,tilePath:I,up:F}}function mt(e,t){const n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function gt(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const yt=100;class vt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new et(e.width+200,e.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new et(e.width+200,e.height+200,25);this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+yt,this.screenBottomBoundary=e.height+yt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,r,i,o,a,s){let l=n.projectedAnchorX,c=n.projectedAnchorY,u=n.projectedAnchorZ;const h=n.elevation,d=n.tileID,p=e.getProjection();if(h&&d){const[e,t,r]=p.upVector(d.canonical,n.tileAnchorX,n.tileAnchorY),i=p.upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*h*i,c+=t*h*i,u+=r*h*i}const f=this.projectAndGetPerspectiveRatio(a,l,c,u,n.tileID,"globe"===p.name||!!h||this.transform.pitch>0,p),m=o*f.perspectiveRatio,g=(n.x1*t+r.x-n.padding)*m+f.point.x,y=(n.y1*t+r.y-n.padding)*m+f.point.y,v=(n.x2*t+r.x+n.padding)*m+f.point.x,_=(n.y2*t+r.y+n.padding)*m+f.point.y,b=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,y,v,_)||!i&&this.grid.hitTest(g,y,v,_,s)||b?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,y,v,_],offscreen:this.isOffscreen(g,y,v,_),occluded:!1}}placeCollisionCircles(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=[],y=this.transform.elevation,v=t.getProjection(),_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,b=new e.pointGeometry(r.tileAnchorX,r.tileAnchorY);let{x:x,y:w,z:S}=v.projectTilePoint(b.x,b.y,m.canonical);if(_){const[e,t,n]=_(b);x+=e,w+=t,S+=n}const E="globe"===v.name,A=this.projectAndGetPerspectiveRatio(s,x,w,S,m,E||!!y||this.transform.pitch>0,v),{perspectiveRatio:T}=A,C=(h?a/T:a*T)/e.ONE_EM,k=ot(x,w,S,l),I=A.signedDistanceFromCamera>0?ct(C,o,r.lineOffsetX*C,r.lineOffsetY*C,!1,k,b,r,i,l,{},y&&!h?_:null,h&&!!y,v,m,h):null;let P=!1,L=!1,M=!0;if(I&&!A.occluded){const t=.5*p*T+f,r=new e.pointGeometry(-100,-100),i=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new $e,{first:a,last:s}=I,l=a.path.length;let h=[];for(let e=l-1;e>=1;e--)h.push(a.path[e]);for(let e=1;e<s.path.length;e++)h.push(s.path[e]);const m=2.5*t;c&&(h=h.map(((e,t)=>{let[n,r,i]=e;return _&&!E&&(i=_(t<l-1?a.tilePath[l-1-t]:s.tilePath[t-l+2])[2]),ot(n,r,i,c)})),h.some((e=>e[3]<=0))&&(h=[]));let y=[];if(h.length>0){let t=1/0,n=-1/0,o=1/0,a=-1/0;for(const e of h)t=Math.min(t,e[0]),o=Math.min(o,e[1]),n=Math.max(n,e[0]),a=Math.max(a,e[1]);n>=r.x&&t<=i.x&&a>=r.y&&o<=i.y&&(y=[h.map((t=>new e.pointGeometry(t[0],t[1])))],(t<r.x||n>i.x||o<r.y||a>i.y)&&(y=e.clipLine(y,r.x,r.y,i.x,i.y)))}for(const e of y){o.reset(e,.25*t);let r=0;r=o.length<=.5*t?1:Math.ceil(o.paddedLength/m)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+yt,l=a.y+yt;g.push(s,l,t,0);const c=s-t,h=l-t,p=s+t,f=l+t;if(M=M&&this.isOffscreen(c,h,p,f),L=L||this.isInsideGrid(c,h,p,f),!n&&this.grid.hitTestCircle(s,l,t,d)&&(P=!0,!u))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}return{circles:!u&&P||!L?[]:g,offscreen:M,collisionDetected:P,occluded:A.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const u of t){const t=new e.pointGeometry(u.x+yt,u.y+yt);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const u of s){const t=u.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const r=[new e.pointGeometry(u.x1,u.y1),new e.pointGeometry(u.x2,u.y1),new e.pointGeometry(u.x2,u.y2),new e.pointGeometry(u.x1,u.y2)];e.polygonIntersectsPolygon(n,r)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,n,r,i,o,a,s){const l=[n,r,i,1];let c=!1;if(i||this.transform.pitch>0){e.transformMat4$1(l,l,t);const a="globe"===s.name;if(this.fogState&&o&&!a){const t=function(t,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return e.transformMat4(l,l,s),C(t,l,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);c=t>.9}}else gt(l,l,t);const u=l[3];return{point:new e.pointGeometry((l[0]/u+1)/2*this.transform.width+yt,(-l[1]/u+1)/2*this.transform.height+yt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:a&&l[2]>u||c}}isOffscreen(e,t,n,r){return n<yt||e>=this.screenRightBoundary||r<yt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function _t(t,n,r){const i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function bt(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;const r=n.clone();return r.setProjection(t.projection),_t(r,t.getProjection(),e)}function xt(e,t,n){return t.name===n.projection.name?e.projMatrix:_t(n,t,e)}class wt{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class St{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new wt(e?e.text:null,t,n,i),this.icon=new wt(e?e.icon:null,t,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Et{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=e,this.icon=t,this.skipFade=n,this.clipped=r}}class At{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Tt{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Ct{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function kt(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry(l+u[0]*o,c+u[1]*o)}function It(t,n,r,i,o){const a=new e.pointGeometry(t,n);return r&&a._rotate(i?o:-o),a}class Pt{constructor(e,t,n,r,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new vt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Ct(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const d=(p=r.tileID,f=o.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(p.toUnwrapped()):_t(m,f,p));var p,f,m;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),_=n.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(r),x=rt(d,r.tileID.canonical,g,y,this.transform,o.getProjection(),b);let w=null;if(g){const t=it(d,r.tileID.canonical,g,y,this.transform,o.getProjection(),b);w=e.multiply([],this.transform.labelPlaneMatrix,t)}let S=null;v&&r.latestFeatureIndex&&(S={unwrappedTileID:h,dynamicFilter:v,dynamicFilterNeedsFeature:_,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Tt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const E={bucket:o,layout:s,posMatrix:d,textLabelPlaneMatrix:x,labelToScreenMatrix:w,clippingData:S,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:E})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:E})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y){const{textOffset0:v,textOffset1:_,crossTileID:b}=h,x=[v,_],w=kt(e,n,r,x,i),S=this.collisionIndex.placeCollisionBox(p,i,t,It(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate);if(m){const e=p.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,m,It(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(S.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[b]&&this.prevPlacement.placements[b]&&this.prevPlacement.placements[b].text&&(t=this.prevPlacement.variableOffsets[b].anchor),this.variableOffsets[b]={textOffset:x,width:n,height:r,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(p,e,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[b]=f),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(t,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:d,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),_=a.get("text-allow-overlap"),b=a.get("icon-allow-overlap"),x="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),S="none"!==a.get("icon-text-fit"),E="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let A=_&&(b||!o.hasIconData()||v),T=b&&(_||!o.hasTextData()||y);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,p);const C=(t,i,p)=>{const{crossTileID:E,numVerticalGlyphVertices:C}=t;if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[E]=new Et(!1,!1,!1,!0),void(n[E]=!0)}if(n[E])return;if(d)return void(this.placements[E]=new Et(!1,!1,!1));let k=!1,I=!1,P=!0,L=!1,M=!1,O=null,N={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},D=null,F=null,j=null,z=0,B=0,U=0;p.textFeatureIndex?z=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(z=t.featureIndex),p.verticalTextFeatureIndex&&(B=p.verticalTextFeatureIndex);const V=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},Z=p.textBox;if(Z){V(Z);const n=n=>{let r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[E];e&&(this.placedOrientations[E]=e,r=e,this.markUsedOrientation(o,r,t))}return r},r=(t,n)=>{if(o.allowVerticalPlacement&&C>0&&p.verticalTextBox){for(const r of o.writingModes)if(r===e.WritingMode.vertical?(N=n(),R=N):N=t(),N&&N.box&&N.box.length)break}else N=t()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E]){const e=this.prevPlacement.variableOffsets[E];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,n,r)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),c=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,d=S&&!b?n:null;d&&V(d);let p={box:[],offscreen:!1,occluded:!1};const y=_?2*l.length:l.length;for(let v=0;v<y;++v){const n=this.attemptAnchorPlacement(l[v%l.length],e,c,u,a,x,w,h,s,g,v>=l.length,t,i,o,r,d,f,m);if(n&&(p=n.placedGlyphBoxes,p&&p.box&&p.box.length)){k=!0,O=n.shift;break}}return p};r((()=>c(Z,p.iconBox,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return t&&V(t),o.allowVerticalPlacement&&!(N&&N.box&&N.box.length)&&C>0&&t?c(t,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),N&&(k=N.box,P=N.offscreen,L=N.occluded);const u=n(N&&N.box);if(!k&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[E];e&&(this.variableOffsets[E]=e,this.markUsedJustification(o,e.anchor,t,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,a,n,new e.pointGeometry(0,0),_,h,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,t),this.placedOrientations[E]=r),l};r((()=>a(Z,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return o.allowVerticalPlacement&&C>0&&t?(V(t),a(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(N&&N.box&&N.box.length)}}if(D=N,k=D&&D.box&&D.box.length>0,P=D&&D.offscreen,L=D&&D.occluded,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,f,n),u=a.get("text-padding");F=this.collisionIndex.placeCollisionCircles(o,_,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,w,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),k=_||F.circles.length>0&&!F.collisionDetected,P=P&&F.offscreen,L=F.occluded}if(p.iconFeatureIndex&&(U=p.iconFeatureIndex),p.iconBox){const n=n=>{V(n);const r=S&&O?It(O.x,O.y,x,w,this.transform.angle):new e.pointGeometry(0,0),i=o.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,b,h,s,g.predicate)};R&&R.box&&R.box.length&&p.verticalIconBox?(j=n(p.verticalIconBox),I=j.box.length>0):(j=n(p.iconBox),I=j.box.length>0),P=P&&j.offscreen,M=j.occluded}const q=y||0===t.numHorizontalGlyphVertices&&0===C,G=v||0===t.numIconVertices;if(q||G?G?q||(I=I&&k):k=I&&k:I=k=I&&k,k&&D&&D.box&&this.collisionIndex.insertCollisionBox(D.box,a.get("text-ignore-placement"),o.bucketInstanceId,R&&R.box&&B?B:z,g.ID),I&&j&&this.collisionIndex.insertCollisionBox(j.box,a.get("icon-ignore-placement"),o.bucketInstanceId,U,g.ID),F&&(k&&this.collisionIndex.insertCollisionCircles(F.circles,a.get("text-ignore-placement"),o.bucketInstanceId,z,g.ID),r)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new At);for(let n=0;n<F.circles.length;n+=4)t.circles.push(F.circles[n+0]),t.circles.push(F.circles[n+1]),t.circles.push(F.circles[n+2]),t.circles.push(F.collisionDetected?1:0)}const W="globe"!==o.projection.name;A=A&&(W||!L),T=T&&(W||!M),this.placements[E]=new Et(k||A,I||T,P||o.justReloaded),n[E]=!0};if(E){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];C(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)C(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=r,u=e.getAnchorJustification(n),h=i===e.WritingMode.vertical?l:"left"===u?o:"center"===u?a:"right"===u?s:-1;o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=h>=0&&l!==h?0:c)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=r,u=t.text.placedSymbolArray;a>=0&&(u.get(a).placedOrientation=i),s>=0&&(u.get(s).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=i[s];t?(this.opacities[s]=new St(t,r,e.text,e.icon,null,e.clipped),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new St(null,r,e.text,e.icon,e.skipFade,e.clipped),n=n||e.text||e.icon)}for(const s in i){const e=i[s];if(!this.opacities[s]){const t=new St(e,r,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new St(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),d="none"!==i.get("icon-text-fit"),p=new St(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const f=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};let m=0;for(let g=0;g<t.symbolInstances.length;g++){const r=t.symbolInstances.get(g),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:y}=r;let v=this.opacities[l];n[l]?v=a:v||(v=p,this.opacities[l]=v),n[l]=!0;const _=i>0||s>0,b=y>0,x=this.placedOrientations[l],w=x===e.WritingMode.vertical,S=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;if(!_&&!b||v.isHidden()||m++,_){const e=zt(v.text);f(t.text,i,w?Bt:e),f(t.text,s,S?Bt:e);const n=v.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:u}=r,h=t.text.placedSymbolArray,d=n||w?1:0;o>=0&&(h.get(o).hidden=d),a>=0&&(h.get(a).hidden=d),c>=0&&(h.get(c).hidden=d),u>=0&&(h.get(u).hidden=n||S?1:0);const p=this.variableOffsets[l];p&&this.markUsedJustification(t,p.anchor,r,x);const m=this.placedOrientations[l];m&&(this.markUsedJustification(t,"left",r,m),this.markUsedOrientation(t,m,r))}if(b){const e=zt(v.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,o=t.icon.placedSymbolArray,a=v.icon.isHidden()?1:0;n>=0&&(f(t.icon,y,w?Bt:e),o.get(n).hidden=a),i>=0&&(f(t.icon,r.numVerticalIconVertices,S?Bt:e),o.get(i).hidden=a)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[g];if(n){let r=new e.pointGeometry(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[l];e?(r=kt(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!v.clipped),n.textBox&&Lt(t.textCollisionBox.collisionVertexArray,v.text.placed,!i||w,r.x,r.y),n.verticalTextBox&&Lt(t.textCollisionBox.collisionVertexArray,v.text.placed,!i||S,r.x,r.y)}const a=i&&Boolean(!S&&n.verticalIconBox);n.iconBox&&Lt(t.iconCollisionBox.collisionVertexArray,v.icon.placed,a,d?r.x:0,d?r.y:0),n.verticalIconBox&&Lt(t.iconCollisionBox.collisionVertexArray,v.icon.placed,!a,d?r.x:0,d?r.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Lt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const Mt=Math.pow(2,25),Ot=Math.pow(2,24),Nt=Math.pow(2,17),Rt=Math.pow(2,16),Dt=Math.pow(2,9),Ft=Math.pow(2,8),jt=Math.pow(2,1);function zt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Mt+t*Ot+n*Nt+t*Rt+n*Dt+t*Ft+n*jt+t}const Bt=0;class Ut{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Vt{constructor(e,t,n,r,i,o,a,s){this.placement=new Pt(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Zt=512/e.EXTENT/2;class qt{constructor(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let r=0;r<t.length;r++){const n=t.get(r),i=n.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,e)})}}getScaledCoordinates(t,n){const r=Zt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Gt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],r={};for(const n in e){const i=e[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=n[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=n.generate(),r[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new qt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[n])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class Ht{constructor(){this.layerIndexes={},this.crossTileIDs=new Gt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new Wt);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const Xt=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),Kt=e.pick(Ge,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Yt=e.pick(Ge,["setCenter","setZoom","setBearing","setPitch"]),Jt={version:8,layers:[],sources:{}},Qt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class $t extends e.Evented{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=t,this.dispatcher=new M(Ve(),this),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Ht,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=$t.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const n in this._layers){const e=this._layers[n];e.source===t.id&&this._validateLayer(e)}}))}loadURL(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Jt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Xt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=qe(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const i of r){const t=e.createStyleLayer(i);t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new S(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,u())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,u())}));function u(){if(a)r(a);else if(i&&o){const t=e.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=i[r],f=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Qt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const i in r){const t=this._sourceCaches[i];r[i]!==t.used&&t.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),Xt(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=qe(n.layers);const r=function(e,n){if(!e)return[{command:Ge.setStyle,args:[n]}];let r=[];try{if(!t(e.version,n.version))return[{command:Ge.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:Ge.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:Ge.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:Ge.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:Ge.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:Ge.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:Ge.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:Ge.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:Ge.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:Ge.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:Ge.setProjection,args:[n.projection]});const i={},o=[];!function(e,n,r,i){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||He(o,r,i));for(o in n){if(!n.hasOwnProperty(o))continue;const a=n[o];e.hasOwnProperty(o)?t(e[o],a)||("geojson"===e[o].type&&"geojson"===a.type&&Ke(e,n,o)?r.push({command:Ge.setGeoJSONSourceData,args:[o,a.data]}):Xe(o,n,r,i)):We(o,n,r)}}(e.sources,n.sources,o,i);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?r.push({command:Ge.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&i[s.source]&&(r.push({command:Ge.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),t(s,n.terrain)||r.push({command:Ge.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];const i=(e=e||[]).map(Je),o=n.map(Je),a=e.reduce(Qe,{}),s=n.reduce(Qe,{}),l=i.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<i.length;u++)d=i[u],s.hasOwnProperty(d)?h++:(r.push({command:Ge.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(r.push({command:Ge.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],r.push({command:Ge.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!t(p,f))if(t(p.source,f.source)&&t(p["source-layer"],f["source-layer"])&&t(p.type,f.type)){for(g in Ye(p.layout,f.layout,r,d,null,Ge.setLayoutProperty),Ye(p.paint,f.paint,r,d,null,Ge.setPaintProperty),t(p.filter,f.filter)||r.push({command:Ge.setFilter,args:[d,f.filter]}),t(p.minzoom,f.minzoom)&&t(p.maxzoom,f.maxzoom)||r.push({command:Ge.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(p[g],f[g],r,d,g.slice(6),Ge.setPaintProperty):t(p[g],f[g])||r.push({command:Ge.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(p[g],f[g],r,d,g.slice(6),Ge.setPaintProperty):t(p[g],f[g])||r.push({command:Ge.setLayerProperty,args:[d,g,f[g]]}))}else r.push({command:Ge.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],r.push({command:Ge.addLayer,args:[f,m]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Ge.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((e=>!(e.command in Yt)));if(0===r.length)return!1;const i=r.filter((e=>!(e.command in Kt)));if(i.length>0)throw new Error("Unimplemented: ".concat(i.map((e=>e.command)).join(", "),"."));return r.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Oe(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(i,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));const r=this._getSourceCaches(t);for(const i of r)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}addLayer(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));let o;if("custom"===t.type){if(Xt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,"layers.".concat(i),t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}setFilter(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const o=this.getLayer(n);if(o){if(!t(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,"layers.".concat(o.id,".filter"),r,{layerType:o.type},i)||(o.filter=e.clone$1(r),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(n,r,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(n);a?t(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}setPaintProperty(n,r,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(n);a?t(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(!i)return void this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(t(i)){n[i]=o;for(const t of e){const e=t[i];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be queried for features.")))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=N.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(Re(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(Fe);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],r=n[e];r.sort(((e,t)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e)}}for(const u in s)s[u].forEach((t=>{const r=t.feature,i=n(e[u]);if(!i)return;const o=i.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(De(e,n));return i}addSourceType(e,t,n){return $t.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):($t.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in e)if(!t(e[a],r[a])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=n;if(1===r){if("object"==typeof i.source){const t="terrain-dem-src";this.addSource(t,i.source),i=e.clone$1(i),i=e.extend(i,{source:t})}if(this._validate(e.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{const n=this.terrain,r=n.get();for(const t of Object.keys(e.spec.terrain))!i.hasOwnProperty(t)&&e.spec.terrain[t].default&&(i[t]=e.spec.terrain[t].default);for(const e in i)if(!t(i[e],r[e])){n.set(i),this.stylesheet.terrain=i;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new L(e,this.map.transform);this.stylesheet.fog=e;const n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(e).length&&n.set(e);for(const i in e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const n=this.terrain=new T(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&Xt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const n of t)n.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const n of t)n.resume(),n.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Vt(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):n.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}$t.getSourceType=function(e){return Me[e]},$t.setSourceType=function(e,t){Me[e]=t},$t.registerForPluginStateChange=e.registerForPluginStateChange;var en="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",rn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",on="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let an={},sn={};const ln=[];pn(en,ln),pn(nn,ln),pn(rn,ln),pn(on,ln),an=fn("",nn),sn=fn(on,rn);const cn=fn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),un=en,hn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var dn={background:fn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:fn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:fn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:fn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:fn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:fn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:fn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:fn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:fn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:fn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:fn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:fn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:fn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:fn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:fn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:fn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:fn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:fn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxGradient:fn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxCapture:fn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:fn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:fn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function pn(e,t){const n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of n)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=r.split(" ");for(const n of e)t.includes(n)||t.push(n)}}function fn(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...ln];return pn(e,o),pn(t,o),{fragmentSource:e=e.replace(n,((e,t,n,r,o)=>(i[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nvarying ").concat(n," ").concat(r," ").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n")))),vertexSource:t=t.replace(n,((e,t,n,r,o)=>{const a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nuniform lowp float u_").concat(o,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(o,";\nvarying ").concat(n," ").concat(r," ").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(o," = a_").concat(o,";\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(o," = unpack_mix_").concat(s,"(a_").concat(o,", u_").concat(o,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nuniform lowp float u_").concat(o,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = a_").concat(o,";\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = unpack_mix_").concat(s,"(a_").concat(o,", u_").concat(o,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n")})),staticAttributes:r,usedDefines:o}}class mn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,n,r,i,o,a){this.context=e;let s=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!s&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let c=0;!l&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(t,n,r,i,o,a);else{e.bindVertexArrayOES.set(this.vao);for(const e of a)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,n,r,i,o){let a;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(let e=s;e<a;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const u of n)u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,i);for(const u of o)u&&(u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,i));r&&r.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gn(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function yn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.fbo;if(!u)return;t.prepareDrawTile();const h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:gn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,h,n.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getTileBoundsBuffers(r);h.draw(l,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,d,i.id,p,f,m)}function vn(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function _n(t,n,r,i,o,a){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),vn(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(t.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,d,p,f),n.needsHillshadePrepare=!1}const bn=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),xn=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),wn=(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:h,u_viewport:d,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9),u_skirt_height:p});function Sn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const En=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},An={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Tn(e){return 6*Math.pow(1.5,22-e)}function Cn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const kn=e=>({u_matrix:e});function In(t,n,r,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class Pn extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new M(Ve(),null),r=Oe("mock-dem",t,n,e.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Ln extends e.SourceCache{constructor(e){const t=Oe("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new M(Ve(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Mn extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class On extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let c=-o;c<s;c+=o)for(let t=-o;t<s;t+=o){const r=t<0||t>a||c<0||c>a?24575:0,i=e.clamp(Math.round(t),0,e.EXTENT),o=e.clamp(Math.round(c),0,e.EXTENT);n.emplaceBack(i+r,o)}const l=(e,t)=>{const n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ln(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Pn(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const n=a[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((e=>new Mn(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),vn(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n["u_dem_tl".concat(a)]=[i.x*o%1,i.y*o%1],n["u_dem_scale".concat(a)]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(c=e),this._prepareDemTileUniforms(t,n,a)&&(l=n))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,e)}}globeUniformValues(t,n,r){const i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,o){if("globe"===t.transform.projection.name)!function(t,n,r,i,o){const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=t.transform,d=e.globeUseCustomAntiAliasing(t,a,h),p=(e,n)=>{if(c===e)return;const r=[An[e],"PROJECTION_GLOBE_VIEW"];d&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(An[u]),l=t.useProgram("globeRaster",null,r),c=e},f=t.colorModeForRenderPass(),m=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);En.update(o);const g=e.calculateGlobeMercatorMatrix(h),y=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],v=u?[!1,!0]:[!1],_=t.globeSharedBuffers,b=[h.width*e.exported.devicePixelRatio,h.height*e.exported.devicePixelRatio],x=Float32Array.from(h.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((u=>{const h=t.transform,d=Tn(h.zoom)*n.exaggeration();c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),S=e.StencilMode.disabled,E=n.prevTerrainTileForTile[c.key],A=n.terrainTileForTile[c.key];Sn(E,A)&&En.newMorphing(c.key,E,A,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const T=En.getMorphValuesForProxy(c.key),C=T?1:0;T&&e.extend$1(w,{morphing:{srcDemTile:T.from,dstDemTile:T.to,phase:e.easeCubicInOut(T.phase)}});const k=e.tileCornersToBounds(c.canonical),I=e.getLatitudinalLod(k.getCenter().lat),P=e.getGridMatrix(c.canonical,k,I,h.worldSize/h._pixelsPerMercatorPixel),L=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),M=wn(h.projMatrix,x,g,L,e.globeToMercatorTransition(h.zoom),y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,b,d,P);if(p(C,u),n.setupElevationDraw(i,l,w),t.prepareDrawProgram(a,l,c.toUnwrapped()),_){const[n,r,i]=u?_.getWirefameBuffers(t.context,I):_.getGridBuffers(I,0!==d);l.draw(a,v,m,S,f,e.CullFaceMode.backCCW,M,"globe_raster",n,r,i)}}})),_){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];d&&o.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,o);for(const c of i){const{x:i,y:o,z:u}=c.canonical,d=0===o,p=o===(1<<u)-1,[g,v,x,S]=_.getPoleBuffers(u);if(S&&(d||p)){const o=r.getTile(c);a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let _=e.globePoleMatrixForTile(u,i,h);const E=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),A=(t,n)=>t.draw(a,s.TRIANGLES,m,e.StencilMode.disabled,f,e.CullFaceMode.disabled,wn(h.projMatrix,_,_,E,0,y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,b,0),"globe_pole_raster",n,x,S);n.setupElevationDraw(o,l,w),t.prepareDrawProgram(a,l,c.toUnwrapped()),d&&A(l,g),p&&(_=e.scale(e.create(),_,[1,-1,1]),A(l,v))}}}}(t,n,r,i,o);else{const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=(e,n)=>{if(c===e)return;const r=[An[e]];n&&r.push(An[u]),l=t.useProgram("terrainRaster",null,r),c=e},d=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);En.update(o);const f=t.transform,m=Tn(f.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),_=e.StencilMode.disabled,b=n.prevTerrainTileForTile[c.key],x=n.terrainTileForTile[c.key];Sn(b,x)&&En.newMorphing(c.key,b,x,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=En.getMorphValuesForProxy(c.key),S=w?1:0;let E;w&&(E={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const A=xn(c.projMatrix,Cn(c.canonical,f.renderWorldCopies)?m/10:m);h(S,u),n.setupElevationDraw(i,l,E),t.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,_,d,e.CullFaceMode.backCCW,A,"terrain_raster",n.gridBuffer,y,v)}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,d=void 0!==h?i.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;r.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),d.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(d,o,t,i),f=i?i.id:null),n.renderLayer(n,i,t,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new Ee(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!n&&t.shouldRedrape():!n&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Ce){t=!0;break}if(!t)return;const n={};for(let r=0;r<this._style.order.length;++r){const t=this._style._layers[this._style.order[r]],i=this._style._getLayerSourceCache(t);if(i&&!n[i.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ZoomDependentExpression){n[i.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t)this._clearRenderCacheForTile(i.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof ke){e=!0;break}if(!e)return;const t={};for(let n=0;n<this._style.order.length;++n){const e=this._style._layers[this._style.order[n]],r=this._style._getLayerSourceCache(e);if(!r||t[r.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const i=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=In(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let o=n.length-1;o>=0;o--){const i=n[o];if(t.getTileByID(i.key),void 0!==t.proxyCachedFBO[i.key]){const n=e[i.key],o=this.proxyToSource[i.key];let a=0;for(const e in o){const t=o[e],i=n[e];if(!i||i.length!==t.length||t.some(((t,n)=>t!==i[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[i.key])t.renderCache[t.proxyCachedFBO[i.key][e]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const o of i)for(const e of n){if(t.proxyCachedFBO[e.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][o.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,kn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const c of i){const t=r.getTile(c),i=xn(c.projMatrix,0);n.setupElevationDraw(t,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,i,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Le)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let a=0;a<i.length;a++){const t=i[a],o=this._findTileCoveringTileID(t,e);if(o){const i=this._createProxiedId(t,o,n[t.key]&&n[t.key][e.id]);r.push(i),this.proxyToSource[t.key][e.id]=[i]}}let o=!1;for(let a=0;a<t.length;a++){const i=e.getTile(t[a]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,i,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],r.push(a),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new Mn(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=n.getTile(a))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):r=n.getTileByID(t)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const r=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*i+t,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===e&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Nn{static cacheKey(e,t,n,r){let i="".concat(t).concat(r?r.cacheKey:"");for(const o of n)e.usedDefines.includes(o)&&(i+="/".concat(o));return i}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let h=i?i.defines():[];h=h.concat(a.map((e=>"#define ".concat(e))));const d=t.isWebGL2?"#version 300 es\n":"",p=d+h.concat(t.extStandardDerivatives&&0===d.length?"#extension GL_OES_standard_derivatives : enable\n".concat(hn):hn,hn,un,cn.fragmentSource,sn.fragmentSource,r.fragmentSource).join("\n"),f=d+h.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",un,cn.vertexSource,sn.vertexSource,an.vertexSource,r.vertexSource).join("\n"),m=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,f),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(m),this.fixedUniforms=o(t),this.binderUniforms=i?i.getUniforms(t):[],a.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(this.program,e,t[e])}}draw(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,a[y]);p&&p.setUniforms(this.program,e,this.binderUniforms,h,{zoom:d});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const y of u.get()){const n=y.vaos||(y.vaos={});(n[s]||(n[s]=new mn)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,y.vertexOffset,f||[]),m.drawElements(t,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Rn(e,t){const n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),o=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/O(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const Dn=e.create(),Fn=(t,n,r,i,o,a,s,l,c,u,h)=>{const d=n.style.light,p=d.properties.get("position"),f=[p.x,p.y,p.z],m=e.create$1();"viewport"===d.properties.get("anchor")&&(e.fromRotation(m,-n.transform.angle),e.transformMat3(f,f,m));const g=d.properties.get("color"),y=n.transform,v={u_matrix:t,u_lightpos:f,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=h,v.u_merc_center=u,v.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),v.u_height_lift=l),v},jn=(t,n,r,i,o,a,s,l,c,u,h,d)=>{const p=Fn(t,n,r,i,o,a,s,c,u,h,d),f={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(p,Rn(n,l),f)},zn=e=>({u_matrix:e}),Bn=(t,n,r)=>e.extend(zn(t),Rn(n,r)),Un=(e,t)=>({u_matrix:e,u_world:t}),Vn=(t,n,r,i)=>e.extend(Bn(t,n,r),{u_world:i}),Zn=e.create(),qn=(t,n,r,i,o,a)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(r);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Zn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return u},Gn=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Wn=(t,n,r,i)=>{const o=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},Hn=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Xn=e.create(),Kn=(t,n,r,i,o,a,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:O(r,1,a),h={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Xn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return h},Yn=(e,t,n,r,i,o,a)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:$n(e,t,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:er(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Qn(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Jn=(e,t,n,r,i)=>{const o=e.transform;return{u_matrix:$n(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Qn(t,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Qn(e,t){return 1/O(e,1,t.tileZoom)}function $n(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function er(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const tr=(e,t,n,r,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:nr(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function nr(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const rr=e.create(),ir=(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g)=>{const y=o.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:rr,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],v.u_zoom_transition=d,v.u_inv_rot_matrix=f,v.u_merc_center=p,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=m),v},or=(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y)=>e.extend(ir(t,n,r,i,o,a,s,l,c,u,d,p,f,m,g,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h}),ar=(t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g)=>e.extend(or(t,n,r,i,o,a,s,l,!0,c,!0,h,d,p,f,m,g),{u_texsize_icon:u,u_texture_icon:1}),sr=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),lr=(t,n,r,i,o)=>e.extend(function(e,t,n){const r=t.imageManager.getPattern(e.toString()),{width:i,height:o}=t.imageManager.getPixelSize(),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,t.transform.tileZoom)/a,l=s*(n.tileID.canonical.x+n.tileID.wrap*a),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/O(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,r,o),{u_matrix:t,u_opacity:n}),cr={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:bn,terrainDepth:bn,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ur;function hr(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,h=t.useProgram("collisionBox"),d=[];let p=0,f=0;for(let x=0;x<i.length;x++){const m=i[x],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;const v=bt(m,y,u);let _=v;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(v,g,o,a));const b=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){const t=e.create(),n=_;e.mul(t,y.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,y.placementViewportMatrix),d.push({circleArray:w,circleOffset:f,transform:n,invTransform:t,projection:y.getProjection()}),p+=w.length/4,f=p}b&&(t.terrain&&t.terrain.setupElevationDraw(g,h),h.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Wn(_,u,g,y.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,u.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!s||!d.length)return;const m=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*p),g._trim();let y=0;for(const e of d)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];g.emplace(y++,r,i,o,a,0),g.emplace(y++,r,i,o,a,1),g.emplace(y++,r,i,o,a,2),g.emplace(y++,r,i,o,a,3)}(!ur||ur.length<2*p)&&(ur=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(p));const v=l.createIndexBuffer(ur,!0),_=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const x of d){const n={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(b=u).getCameraToCenterDistance(x.projection),u_viewport_size:[b.width,b.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,n,r.id,_,v,e.SegmentVector.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,u.zoom)}var b;_.destroy(),v.destroy()}const dr=e.create();function pr(t,n){let{width:r,height:i,anchor:o,textOffset:a,textScale:s}=t;const{horizontalAlign:l,verticalAlign:c}=e.getAnchorAlignment(o),u=-(l-.5)*r,h=-(c-.5)*i,d=e.evaluateVariableOffset(o,a);return new e.pointGeometry((u/s+d[0])*n,(h/s+d[1])*n)}function fr(t,n,r,i,o,a,s,l,c,u,h){const d=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={},g=t.getProjection(),y=xt(l,g,a),v=a.elevation,_=g.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;p.clear();for(let b=0;b<d.length;b++){const f=d.get(b),{tileAnchorX:x,tileAnchorY:w,numGlyphs:S}=f,E=t.allowVerticalPlacement&&!f.placedOrientation,A=f.hidden||!f.crossTileID||E?null:i[f.crossTileID];if(A){let i=0,d=0,b=0;if(v){const e=v?v.getAtTileOffset(l,x,w):0,[t,n,r]=g.upVector(l.canonical,x,w);i=e*t*_,d=e*n*_,b=e*r*_}let[E,T,C,k]=ot(f.projectedAnchorX+i,f.projectedAnchorY+d,f.projectedAnchorZ+b,r?y:s);const I=at(a.getCameraToCenterDistance(g),k);let P=o.evaluateSizeForFeature(t.textSizeData,u,f)*I/e.ONE_EM;r&&(P*=t.tilePixelRatio/c);const L=pr(A,P);r?(({x:E,y:T,z:C}=g.projectTilePoint(x+L.x,w+L.y,l.canonical)),[E,T,C]=ot(E+i,T+d,C+b,s)):(n&&L._rotate(-a.angle),E+=L.x,T+=L.y,C=0);const M=t.allowVerticalPlacement&&f.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<S;t++)e.addDynamicAttributes(p,E,T,C,M);h&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={x:E,y:T,z:C,angle:M})}else mt(S,p)}if(h){f.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t),{numGlyphs:i}=r,o=m[t];if(r.hidden||!o)mt(i,f);else{const{x:t,y:n,z:r,angle:a}=o;for(let o=0;o<i;o++)e.addDynamicAttributes(f,t,n,r,a)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function mr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function gr(t,n,r,i,o,a,s,l,c,u,h,d){const p=t.context,f=p.gl,m=t.transform,g="map"===l,y="map"===c,v=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),S=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],E=r.layout.get("text-variable-anchor"),A="globe"===m.projection.name,T=[],C=[0,-1,0];let k=C;!A&&!m.mercatorFromTransition||g||(k=function(t){const n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return e.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],e.normalize(i,i),i}(m));for(const I of i){const i=n.getTile(I),l=i.getBucket(r);if(!l)continue;if("mercator"===l.projection.name&&A)continue;const c=o?l.text:l.icon;if(!c||l.fullyClipped||!c.segments.get().length)continue;const h=c.programConfigurations.get(r.id),d=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,P=e.evaluateSizeForZoom(p,m.zoom);let L,M,O,N,R=[0,0],D=null;if(o){if(M=i.glyphAtlasTexture,O=f.LINEAR,L=i.glyphAtlasTexture.size,l.iconsInText){R=i.imageAtlasTexture.size,D=i.imageAtlasTexture;const e="composite"===p.kind||"camera"===p.kind;N=w||t.options.rotating||t.options.zooming||e?f.LINEAR:f.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;M=i.imageAtlasTexture,O=d||t.options.rotating||t.options.zooming||e||w?f.LINEAR:f.NEAREST,L=i.imageAtlasTexture.size}const F="globe"===l.projection.name,j=F?k:C,z=F?e.globeToMercatorTransition(m.zoom):0,B=xt(I,l.getProjection(),m),U=m.calculatePixelsToTileUnitsMatrix(i),V=nt(B,i.tileID.canonical,y,g,m,l.getProjection(),U),Z=t.terrain&&y&&v?e.invert(e.create(),V):dr,q=it(B,i.tileID.canonical,y,g,m,l.getProjection(),U),G=E&&l.hasTextData(),W="none"!==r.layout.get("icon-text-fit")&&G&&l.hasIconData();if(v){const e=m.elevation,n=e?e.getAtTileOffsetFunc(I,m.center.lat,m.worldSize,l.getProjection()):null,r=rt(B,i.tileID.canonical,y,g,m,l.getProjection(),U);lt(l,B,t,o,r,q,y,u,n,I)}const H=v||o&&E||W,X=t.translatePosMatrix(B,i,a,s),K=H?dr:V,Y=t.translatePosMatrix(q,i,a,s,!0),J=l.getProjection().createInversionMatrix(m,I.canonical),Q=[];t.terrainRenderModeElevated()&&y&&Q.push("PITCH_WITH_MAP_TERRAIN"),F&&Q.push("PROJECTION_GLOBE_VIEW"),H&&Q.push("PROJECTED_POS_ON_VIEWPORT");const $=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=d?l.iconsInText?ar(p.kind,P,_,y,t,X,K,Y,L,R,I,z,S,J,j,l.getProjection()):or(p.kind,P,_,y,t,X,K,Y,o,L,!0,I,z,S,J,j,l.getProjection()):ir(p.kind,P,_,y,t,X,K,Y,o,L,I,z,S,J,j,l.getProjection());const te={program:t.useProgram(mr(d,o,l),h,Q),buffers:c,uniformValues:ee,atlasTexture:M,atlasTextureIcon:D,atlasInterpolation:O,atlasInterpolationIcon:N,isSDF:d,hasHalo:$,tile:i,labelPlaneMatrixInv:Z};if(b&&l.canOverlap){x=!0;const t=c.segments.get();for(const n of t)T.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:te})}else T.push({segments:c.segments,sortKey:0,state:te})}x&&T.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of T){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!A,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,yr(n.buffers,e.segments,r,t,n.program,w,h,d,i)),i.u_is_halo=0}yr(n.buffers,e.segments,r,t,n.program,w,h,d,n.uniformValues)}}function yr(t,n,r,i,o,a,s,l,c){const u=i.context,h=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),h)}function vr(t,n,r,i,o,a,s){const l=t.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1);let h,d,p,f,m;s?(d=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=l.LINES):(d=u?"fillPattern":"fill",h=l.TRIANGLES);for(const g of i){const i=n.getTile(g);if(u&&!i.patternsLoaded())continue;const y=i.getBucket(r);if(!y)continue;t.prepareDrawTile();const v=y.programConfigurations.get(r.id),_=t.useProgram(d,v);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const b=c.constantOr(null);if(b&&i.imageAtlas){const e=i.imageAtlas.patternPositions[b.toString()];e&&v.setConstantPatternPositions(e)}const x=t.translatePosMatrix(g.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){f=y.indexBuffer2,m=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===d&&u?Vn(x,t,i,e):Un(x,e)}else f=y.indexBuffer,m=y.segments,p=u?Bn(x,t,i):zn(x);t.prepareDrawProgram(t.context,_,g.toUnwrapped()),_.draw(t.context,h,o,t.stencilModeForClipping(g),a,e.CullFaceMode.disabled,p,r.id,y.layoutVertexBuffer,f,m,r.paint,t.transform.zoom,v)}}function _r(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,h=r.paint.get("fill-extrusion-pattern"),d=h.constantOr(1),p=r.paint.get("fill-extrusion-opacity"),f=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],m=r.layout.get("fill-extrusion-edge-radius"),g="globe"===u.projection.name?e.fillExtrusionHeightLift():0,y="globe"===u.projection.name,v=y?e.globeToMercatorTransition(u.zoom):0,_=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],b=[];y&&b.push("PROJECTION_GLOBE_VIEW"),f[0]>0&&b.push("FAUX_AO");for(const x of i){const i=n.getTile(x),w=i.getBucket(r);if(!w||w.projection.name!==u.projection.name)continue;const S=w.programConfigurations.get(r.id),E=t.useProgram(d?"fillExtrusionPattern":"fillExtrusion",S,b);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,E,{useMeterToDem:!0});else{if(!w.enableTerrain)continue;if(e.setupElevationDraw(i,E,{useMeterToDem:!0}),br(l,n,x,w,r,e),!w.centroidVertexBuffer){const e=E.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}d&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),S.updatePaintBuffers());const A=h.constantOr(null);if(A&&i.imageAtlas){const e=i.imageAtlas.patternPositions[A.toString()];e&&S.setConstantPatternPositions(e)}const T=t.translatePosMatrix(x.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),C=u.projection.createInversionMatrix(u,x.canonical),k=r.paint.get("fill-extrusion-vertical-gradient"),I=d?jn(T,t,k,p,f,m,x,i,g,v,_,C):Fn(T,t,k,p,f,m,x,g,v,_,C);t.prepareDrawProgram(l,E,x.toUnwrapped());const P=[];t.terrain&&P.push(w.centroidVertexBuffer),y&&P.push(w.layoutVertexExtBuffer),E.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,I,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,t.transform.zoom,S,P)}}function br(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().minzoom,r=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},i=[0,-1,1];for(const n of i){if(e.overscaledZ+n<t)continue;const i=r(e.calculateScaledKey(e.overscaledZ+n));if(i)return i}},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),h=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),d=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>h(e,t),(e,t)=>h(t,e)],p=new e.pointGeometry(0,0);let f,m,g;const y=(t,n,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let v=0;v<4;v++){const t=(v<2?1:5)-v,n=i.borders[v];if(0===n.length)continue;const o=g=s[v](r),c=l(o);if(!(c&&c instanceof e.FillExtrusionBucket&&c.enableTerrain))continue;if(i.borderDoneWithNeighborZ[v]===c.canonical.z&&c.borderDoneWithNeighborZ[t]===i.canonical.z)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!f){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;f=e}const u=c.borders[t];let h=0;const _=c.borderDoneWithNeighborZ[t]!==i.canonical.z;if(i.canonical.z===c.canonical.z){for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[v];let s;for(;h<u.length&&(s=c.featuresOnBorder[u[h]],!(s.borders[t][1]>a[0]+3));)_&&c.encodeCentroid(void 0,s,!1),h++;if(s&&h<u.length){const n=h;let r=0;for(;!(s.borders[t][0]>a[1]-3)&&(r++,++h!==u.length);)s=c.featuresOnBorder[u[h]];if(s=c.featuresOnBorder[u[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(h=n),i.encodeCentroid(void 0,o,!1),_&&c.encodeCentroid(void 0,s,!1);continue}const l=d[v](o,s),f=v%2?e.EXTENT-1:0;p.x=y(l[0],Math.min(e.EXTENT-1,l[1]),f,v<2,l[2]),p.y=0,i.encodeCentroid(p,o,!1),_&&c.encodeCentroid(p,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0,_&&(c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0)}else{for(const e of n)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(_){for(const e of u)c.encodeCentroid(void 0,c.featuresOnBorder[e],!1);c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const xr=new e.Color(1,0,0,1),wr=new e.Color(0,1,0,1),Sr=new e.Color(0,0,1,1),Er=new e.Color(1,0,1,1),Ar=new e.Color(0,1,1,1);function Tr(t,n,r){const i=t.context,o=t.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=r.projMatrix;if(s&&e.globeToMercatorTransition(o.zoom)>0){const t=e.transitionTileAABBinECEF(r.canonical,o),n=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),o.globeMatrix,n),e.multiply(c,o.projMatrix,c)}const u=t.useProgram("debug",null,l),h=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(h,u);const d=e.DepthMode.disabled,p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="$debug";i.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?h._makeGlobeTileDebugBuffers(t.context,o):h._makeDebugTileBoundsBuffers(t.context,o.projection);const g=h._tileDebugBuffer||t.debugBuffer,y=h._tileDebugIndexBuffer||t.debugIndexBuffer,v=h._tileDebugSegments||t.debugSegments;u.draw(i,a.LINE_STRIP,d,p,f,e.CullFaceMode.disabled,Hn(c,e.Color.red),m,g,y,v,null,null,null,[h._globeTileDebugBorderBuffer]);const _=h.latestRawTileData,b=Math.floor((_&&_.byteLength||0)/1024),x=n.getTile(r).tileSize,w=512/Math.min(x,512)*(r.overscaledZ/o.zoom)*.5;let S=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(S+=" => ".concat(r.overscaledZ)),S+=" ".concat(b,"kb"),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,S);const E=h._tileDebugTextBuffer||t.debugBuffer,A=h._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,T=h._tileDebugTextSegments||t.debugSegments;u.draw(i,a.TRIANGLES,d,p,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Hn(c,e.Color.transparent,w),m,E,A,T,null,null,null,[h._globeTileDebugTextBuffer])}function Cr(e,t,n,r){Ir(e,0,t+n/2,e.transform.width,n,r)}function kr(e,t,n,r){Ir(e,t-n/2,0,n,e.transform.height,r)}function Ir(t,n,r,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const Pr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Lr}=Pr;function Mr(e,t,n,r){e.emplaceBack(t,n,r)}class Or{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Mr(this.vertexArray,-1,-1,1),Mr(this.vertexArray,1,-1,1),Mr(this.vertexArray,-1,1,1),Mr(this.vertexArray,1,1,1),Mr(this.vertexArray,-1,-1,-1),Mr(this.vertexArray,1,-1,-1),Mr(this.vertexArray,-1,1,-1),Mr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Lr),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Nr(t,n,r,i,o,a){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Rr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Dr{constructor(t){const n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new e.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(n,Rr.members),this.indexBuffer=t.createIndexBuffer(r),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Fr={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const h of t){const t=i.getTile(h),n=t.getBucket(r);if(!n||!n.text||!n.text.segments.get().length)continue;const o=e.evaluateSizeForZoom(n.textSizeData,l.zoom),a=xt(h,n.getProjection(),l),d=l.calculatePixelsToTileUnitsMatrix(t),p=nt(a,t.tileID.canonical,u,c,l,n.getProjection(),d),f="none"!==r.layout.get("icon-text-fit")&&n.hasIconData();if(o){const r=Math.pow(2,l.zoom-t.tileID.overscaledZ);fr(n,c,u,s,e.symbolSize,l,p,h,r,o,f)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&gr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&gr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(hr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),hr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.transform,d=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="globe"===h.projection.name,g=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[];for(let _=0;_<i.length;_++){const o=i[_],a=n.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==h.projection.name)continue;const c=s.programConfigurations.get(r.id),u=Gn(r);m&&u.push("PROJECTION_GLOBE_VIEW");const d=t.useProgram("circle",c,u),p=s.layoutVertexBuffer,f=s.globeExtVertexBuffer,v=s.indexBuffer,b=h.projection.createInversionMatrix(h,o.canonical),x={programConfiguration:c,program:d,layoutVertexBuffer:p,globeExtVertexBuffer:f,indexBuffer:v,uniformValues:qn(t,o,a,b,g,r),tile:a};if(l){const t=s.segments.get();for(const n of t)y.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:x})}else y.push({segments:s.segments,sortKey:0,state:x})}l&&y.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!m};for(const _ of y){const{programConfiguration:n,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:m}=_.state,g=_.segments;t.terrain&&t.terrain.setupElevationDraw(m,i,v),t.prepareDrawProgram(c,i,m.tileID.toUnwrapped()),i.draw(c,u.TRIANGLES,d,p,f,e.CullFaceMode.disabled,l,r.id,o,s,g,r.paint,h.zoom,n,[a])}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){const i=e.gl,o=t.width*r,a=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,o,a]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(o,a,!1),function(e,t,n,r,i,o){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?a.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,t,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,r,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,d=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,p=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let f=0;f<i.length;f++){const m=i[f];if(n.hasRenderableParent(m))continue;const g=n.getTile(m),y=g.getBucket(r);if(!y||y.projection.name!==c.projection.name)continue;const v=y.programConfigurations.get(r.id),_=t.useProgram("heatmap",v,h),{zoom:b}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,_),t.prepareDrawProgram(o,_,m.toUnwrapped());const x=c.projection.createInversionMatrix(c,m.canonical);_.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,d,Kn(t,m,g,x,p,b,r.paint.get("heatmap-intensity")),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,t.transform.zoom,v,u?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=r.paint.get("line-dasharray"),h=u.constantOr(1),d=r.layout.get("line-cap"),p=r.paint.get("line-pattern"),f=p.constantOr(1),m=r.paint.get("line-gradient"),g=f?"linePattern":"line",y=t.context,v=y.gl,_=(e=>{const t=[];er(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");const r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(r);let b=_.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(b=!1);for(const x of i){const i=n.getTile(x);if(f&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;t.prepareDrawTile();const a=o.programConfigurations.get(r.id),w=t.useProgram(g,a,_),S=p.constantOr(null);if(S&&i.imageAtlas){const e=i.imageAtlas.patternPositions[S.toString()];e&&a.setConstantPatternPositions(e)}const E=u.constantOr(null),A=d.constantOr(null);if(!f&&E&&A&&i.lineAtlas){const e=i.lineAtlas.getDash(E,A);e&&a.setConstantPatternPositions(e)}let[T,C]=r.paint.get("line-trim-offset");if("round"===A||"square"===A){const e=1;T!==C&&(0===T&&(T-=e),1===C&&(C+=e))}const k=t.terrain?x.projMatrix:null,I=f?Jn(t,i,r,k,c):Yn(t,i,r,k,o.lineClipsArray.length,c,[T,C]);if(m){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=x.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-x.canonical.z):1;s=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(y,i.gradient,v.RGBA),i.version=r.gradientVersion,a=i.texture}y.activeTexture.set(v.TEXTURE1),a.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}h&&(y.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),a.updatePaintBuffers()),f&&(y.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers()),t.prepareDrawProgram(y,w,x.toUnwrapped());const P=n=>{w.draw(y,v.TRIANGLES,s,n,l,e.CullFaceMode.disabled,I,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,a,[o.layoutVertexBuffer2])};if(b){const n=t.stencilModeForClipping(x).ref;0===n&&t.terrain&&y.clear({stencil:0});const r={func:v.EQUAL,mask:255};I.u_alpha_discard_threshold=.8,P(new e.StencilMode(r,n,255,v.KEEP,v.KEEP,v.INVERT)),I.u_alpha_discard_threshold=0,P(new e.StencilMode(r,n,255,v.KEEP,v.KEEP,v.KEEP))}else P(t.stencilModeForClipping(x))}b&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);vr(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);vr(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))_r(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),_r(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();_r(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const h of u){const i=n.getTile(h);if(i.needsHillshadePrepare&&"offscreen"===t.renderPass)_n(t,i,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(h):c[h.overscaledZ];yn(t,h,i,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),h=t.colorModeForRenderPass(),d=t.terrain&&t.terrain.renderingToTexture,[p,f]=c instanceof Le||d?[{},i]:t.stencilConfigForOverlap(i),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const y of f){const i=d?e.DepthMode.disabled:t.depthModeForSublayer(y.overscaledZ-m,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),o=y.toUnwrapped(),f=n.getTile(y);if(d&&(!f||!f.hasData()))continue;const v=d?y.projMatrix:t.transform.calculateProjMatrix(o,g),_=t.terrain&&d?t.terrain.stencilModeForRTTOverlap(y):p[y.overscaledZ],b=a?0:r.paint.get("raster-fade-duration");f.registerFadeDuration(b);const x=n.findLoadedParent(y,0),w=In(f,x,n,t.transform,b);let S,E;t.terrain&&t.terrain.prepareDrawTile();const A="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),f.texture.bind(A,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(A,l.CLAMP_TO_EDGE),S=Math.pow(2,x.tileID.overscaledZ-f.tileID.overscaledZ),E=[f.tileID.canonical.x*S%1,f.tileID.canonical.y*S%1]):f.texture.bind(A,l.CLAMP_TO_EDGE),f.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const T=tr(v,E||[0,0],S||1,w,r,c instanceof Le?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,o),c instanceof Le)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,i,e.StencilMode.disabled,h,e.CullFaceMode.disabled,T,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:a}=t.getTileBoundsBuffers(f);u.draw(s,l.TRIANGLES,i,_,h,e.CullFaceMode.disabled,T,r.id,n,o,a)}}t.resetStencilClippingMasks()},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(t.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const p=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background");let y,v=i;v||(y=t.getBackgroundTiles(),v=Object.values(y).map((e=>e.tileID))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const _ of v){const d=_.toUnwrapped(),v=i?_.projMatrix:t.transform.calculateProjMatrix(d);t.prepareDrawTile();const b=n?n.getTile(_):y?y[_.key]:new e.Tile(_,u,c.zoom,t),x=h?lr(v,a,t,h,{tileID:_,tileSize:u}):sr(v,a,o);t.prepareDrawProgram(s,g,d);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:S,tileBoundsSegments:E}=t.getTileBoundsBuffers(b);g.draw(s,l.TRIANGLES,f,p,m,e.CullFaceMode.disabled,x,r.id,w,S,E)}},sky:function(t,n,r){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,l=r.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Or(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Nr(o,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Nr(o,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Nr(o,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Nr(o,n,c,u,l,3),e.identity(u),Nr(o,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Nr(o,n,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Or(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u)},debug:function(e,t,n){for(let r=0;r<n.length;r++)Tr(e,t,n[r])},custom:function(t,n,r,i){const o=t.context,a=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){const n=a.prerender;if(n){if(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;n.call(a,o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else n.call(a,o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const n=a.renderToTile;if(n){const r=i[0].canonical,s=new e.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(e.DepthMode.disabled),o.setStencilMode(e.StencilMode.disabled),o.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),n.call(a,o.gl,s),o.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(e.StencilMode.disabled);const n="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;a.render(o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else a.render(o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class jr{constructor(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context=new Te(t,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ht,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new On(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=t.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Dr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,kn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,r){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of r)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of r){const t=n.getTile(s),r=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(t);a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},r,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,kn(s.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){const r=t.context,i=r.gl,o=t.transform,a=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(o.zoom),c=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),d=e.identity$1([]);e.rotateY$1(d,d,-e.degToRad(o._center.lng)),e.rotateX$1(d,d,e.degToRad(o._center.lat)),e.rotateZ$1(d,d,o.angle),e.rotateX$1(d,d,-o._pitch);const p=e.fromQuat(new Float32Array(16),d),f=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=e.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),y=e.globeUseCustomAntiAliasing(t,r,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,v=t.frameCounter/1e3%1,_=e.length(o.globeCenterInViewSpace),b=Math.sqrt(Math.pow(_,2)-Math.pow(y,2)),x=Math.acos(b/_),w=((t,n,r,i,o,a,s,l,c,u,h,d,p,f)=>({u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:h,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:d,u_horizon_angle:p,u_rotation_matrix:f}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,c,u,h,f,v,x,p);t.prepareDrawProgram(r,s);const S=t.atmosphereBuffer;S&&s.draw(r,i.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",S.vertexBuffer,S.indexBuffer,S.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Fr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Cr(e,e.transform.height-(t.top||0),3,xr),Cr(e,t.bottom||0,3,wr),kr(e,t.left||0,3,Sr),kr(e,e.transform.width-(t.right||0),3,Er);const n=e.transform.centerPoint;!function(e,t,n,r){Ir(e,t-1,n-10,2,20,r),Ir(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Ar)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Fr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let n=0;for(const r of e)n+=t.getQueryObjectEXT(r,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(r);return n}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:O(n,r[0],this.transform.zoom),o?r[1]:O(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=Nn.cacheKey(dn[e],e,i,t);return this.cache[o]||(this.cache[o]=new Nn(this.context,e,dn[e],t,cr[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((t,n,r,i,o,a,s,l,c,u,h)=>{const d=t.transform,p=n.properties.get("color").toArray01();p[3]=i;const f=t.frameCounter/1e3%1;return{u_fog_matrix:r?d.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(d._fov),u_fog_color:p,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:h,u_globe_transition:e.globeToMercatorTransition(d.zoom),u_is_globe:+("globe"===d.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,a)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new zr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Br(t,n){const r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function Ur(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function Vr(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Ur(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Zr{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,o=e.MercatorCoordinate.fromLngLat(t,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Vr(a,n)}setPitchBearing(t,n){this.orientation=Ur(e.degToRad(t),e.degToRad(-n))}}class qr{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Br(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Ur(e,t),Br(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCameraPosition(t,n,r){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[r,r,r]),e.translate(o,o,i),o[10]*=n,o}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}getDistanceToElevation(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new qr([...this.position],[...this.orientation])}}function Gr(t,n){const r=Hr(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,o){const a=new e.LngLat(r.lng-180*Xr,r.lat),s=new e.LngLat(r.lng+180*Xr,r.lat),l=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=e.MercatorCoordinate.fromLngLat(r);h.y=e.clamp(h.y,-.999975,.999975);const d=h.toLngLat(),p=t.project(d.lng,d.lat),f=e.MercatorCoordinate.fromLngLat(d);f.x+=Xr;const m=f.toLngLat(),g=t.project(m.lng,m.lat),y=Yr(g.x-p.x,g.y-p.y,u),v=e.MercatorCoordinate.fromLngLat(d);v.y+=Xr;const _=v.toLngLat(),b=t.project(_.lng,_.lat),x=Yr(b.x-p.x,b.y-p.y,u),w=Math.abs(y.x)/Math.abs(x.y),S=e.identity([]);e.rotateZ(S,S,-u*(1-(o?0:i)));const E=e.identity([]);return e.scale(E,E,[1,1-(1-w)*i,1]),E[4]=-x.x/x.y*i,e.rotateZ(E,E,u),e.multiply(E,S,E),E}(t.projection,0,t.center,r,n),o=Wr(t);return e.scale(i,i,[o,o,1]),i}function Wr(t){const n=t.projection,r=Hr(t.projection,t.zoom,t.width,t.height),i=Kr(n,t.center),o=Kr(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Hr(t,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const a=t.range;if(!a)return 0;const s=Math.min(o,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(a[0]+l,a[1]+l,n)}const Xr=1/4e4;function Kr(t,n){const r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*Xr,r),o=new e.LngLat(n.lng+180*Xr,r),a=t.project(i.lng,r),s=t.project(o.lng,r),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,d=c.x-l.x,p=c.y-l.y,f=Math.sqrt((d*d+p*p)/(u*u+h*h));return Math.log(f)/Math.LN2}function Yr(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}class Jr{constructor(t,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new qr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Jr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const n=t!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new e.pointGeometry(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Zr;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=Vr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new e.UnwrappedTileID(u,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,h=!u,d=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,h),p=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(h?1:f)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,_=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=t.isTerrainDEM?-_:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?Wr(this):1,w=t=>{const n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*d)*x/n},S=t=>{const n=_,r=b;return{aabb:e.tileAABB(this,l,0,0,0,t,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},E=[];let A=[];const T=n,C=t.reparseOverscaled?r:n,k=e=>e*e,I=k((m-this._centerAltitude)*f),P=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=L(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},L=t=>{if(t.zoom<v)return!0;if(t.zoom===T)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(g),o=t.aabb.distanceY(g);let a=I,l=1;if(u){a=k(t.aabb.distanceZ(g));const n=Math.pow(2,t.zoom),r=e.latFromMercatorY((t.y+1)/n),i=e.latFromMercatorY(t.y/n),o=Math.min(Math.max(s,r),i),c=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===T-1&&c>=.9)return!0}else if(i&&(a=k(t.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,t.zoom),r=w(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));l=r>.85?1:r}const c=n*n+o*o+a,h=k((1<<T-t.zoom)*y*l*((e,t)=>{if(t*k(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,I),c));return c<h};if(this.renderWorldCopies)for(let e=1;e<=3;e++)E.push(S(-e)),E.push(S(e));for(E.push(S(0));E.length>0;){const r=E.pop(),a=r.x,s=r.y;let h=r.fullyVisible;if(!h){const e=r.aabb.intersects(d);if(0===e)continue;h=2===e}if(r.zoom!==T&&L(r))for(let t=0;t<4;t++){const n=(a<<1)+t%2,c=(s<<1)+(t>>1),d={aabb:o?r.aabb.quadrant(t):e.tileAABB(this,l,r.zoom+1,n,c,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:c,wrap:r.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!u&&(d.tileID=new e.OverscaledTileID(r.zoom+1===T?C:r.zoom+1,r.wrap,r.zoom+1,n,c),P(d)),E.push(d)}else{const i=r.zoom===T?C:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=c[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),l=c[1]-.5-s,u=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,a,s);A.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();A=A.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:b,max:_});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c}))}return A.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;r=(n.x-o.x)/e,i=(n.y-o.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(o);r=e.x-t.x,i=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-r,a.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const o=.02*i,a=t.clone();for(let s=0;s<10&&i-r>o;s++){a.y=e.number(r,i,.66);const t=this.projection.pointCoordinate3D(this,a.x,a.y);t?(i=a.y,n=t):r=a.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.pointGeometry(n,t)),a=this.pointLocation3D(new e.pointGeometry(i,t)),s=this.pointLocation3D(new e.pointGeometry(i,r)),l=this.pointLocation3D(new e.pointGeometry(n,r));let c=Math.min(o.lng,a.lng,s.lng,l.lng),u=Math.max(o.lng,a.lng,s.lng,l.lng),h=Math.min(o.lat,a.lat,s.lat,l.lat),d=Math.max(o.lat,a.lat,s.lat,l.lat);const p=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,m=(t,n,r,i,o)=>{const a=(t+r)/2,s=(n+i)/2,l=new e.pointGeometry(a,s),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,c-g,h-y,g-u,y-d);c=Math.min(c,g),u=Math.max(u,g),h=Math.min(h,y),d=Math.max(d,y),(o<f||v>p)&&(m(t,n,a,s,o+1),m(a,s,r,i,o+1))};if(m(n,t,i,t,1),m(i,t,i,r,1),m(i,r,n,r,1),m(n,r,n,t,1),"globe"===this.projection.name){const[t,n]=e.polesInViewport(this);t?(d=90,u=180,c=-180):n&&(h=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,h),new e.LngLat(u,d))}_getBoundsRectangular(t,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new e.pointGeometry(i,r),l=new e.pointGeometry(a,r),c=new e.pointGeometry(a,o),u=new e.pointGeometry(i,o);let h=this.pointCoordinate(s,t),d=this.pointCoordinate(l,t);const p=this.pointCoordinate(c,n),f=this.pointCoordinate(u,n),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return h.y>1&&d.y>=0?h=new e.MercatorCoordinate((1-f.y)/m(f,h)+f.x,1):h.y<0&&d.y<=1&&(h=new e.MercatorCoordinate(-f.y/m(f,h)+f.x,0)),d.y>1&&h.y>=0?d=new e.MercatorCoordinate((1-p.y)/m(p,d)+p.x,1):d.y<0&&h.y<=1&&(d=new e.MercatorCoordinate(-p.y/m(p,d)+p.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*t.wrap)*s,c=i.y*s,u=this.point;u.x*=a/this.worldSize,u.y*=a/this.worldSize;const h=this.angle,d=Math.sin(-h),p=-Math.cos(-h);return r[n]={bearing:[d,p],center:[(u.x-l)*o,(u.y-c)*o],scale:s/e.EXTENT*o},r[n]}calculateFogTileMatrix(t){const n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(t,n){const{scale:r}=t.tileTransform,i=r*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],d=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*d,o[3]=u*d,o;var o,a,s,l,c,u,h,d}(t,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(r,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],r,i,a),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new e.MercatorCoordinate(...i)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=i[2]-a;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],t.z-i[2]],r=e.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=e.length(n);if(0===o)return;e.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],t.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,a=r,s=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(i-c<u&&(s=u+c),i+c>h&&(s=h-c),h-u<this.height&&(o=Math.max(o,this.height/(h-u)),s=(h+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,n=this.worldSize/2-(e+t)/2;a=(r+n+this.worldSize)%this.worldSize-n,a-l<e&&(a=e+l),a+l>t&&(a=t-l),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),a=(t+e)/2)}a===r&&s===i||(this.center=this.unproject(new e.pointGeometry(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const r=Hr(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;let s=e.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(n,n,Gr(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=Gr(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+h)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const d=this.point,p=d.x,f=d.y,m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),b=p-Math.round(p)+y*m+_*g,x=f-Math.round(f)+y*g+_*m,w=new Float64Array(s);if(e.translate(w,w,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedProjMatrix=w,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,n];e.scale$2(o,o,i),e.scale$2(r,r,-1),e.multiply$2(r,r,o);const a=e.create();e.translate(a,a,r),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const e=n+.5*(r-n),a=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,a),l=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-l);c<o&&(o=c,i=e),e<l?n=e:r=e}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.pointGeometry(r,o),new e.pointGeometry(i,a),new e.pointGeometry(r,a),new e.pointGeometry(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function(t,n){let[r,i,o]=t;const a=[r,i,o,1];e.transformMat4$1(a,a,n);const s=a[3]=Math.max(a[3],1e-6);return a[0]/=s,a[1]/=s,a[2]/=s,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}getCameraToCenterDistance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize;const r=Hr(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Qr(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return()=>(n=!0,r||i(),r)}class $r{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Qr(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const n=ei(t);if(this._hashName){const t=this._hashName;let r=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(r=!0,"".concat(i,"=").concat(n)):e})).filter((e=>e));return r||i.push("".concat(t,"=").concat(n)),"#".concat(i.join("&"))}return"#".concat(n)}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function ei(e,t){const n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=e.getBearing(),c=e.getPitch();let u=t?"/".concat(a,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(a);return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/".concat(Math.round(c))),u}const ti={linearity:.3,easing:e.bezier(0,0,.3,1)},ni=e.extend({deceleration:2500,maxSpeed:1400},ti),ri=e.extend({deceleration:20,maxSpeed:1400},ti),ii=e.extend({deceleration:1e3,maxSpeed:360},ti),oi=e.extend({deceleration:1e3,maxSpeed:90},ti);class ai{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(e.exported.prefersReducedMotion)return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=li(n.pan.mag(),r,e.extend({},ni,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,si(i,o)}if(n.zoom){const e=li(n.zoom,r,ri);i.zoom=this._map.transform.zoom+e.amount,si(i,e)}if(n.bearing){const t=li(n.bearing,r,ii);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),si(i,t)}if(n.pitch){const e=li(n.pitch,r,oi);i.pitch=this._map.transform.pitch+e.amount,si(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function si(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function li(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class ci extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=f(n.getCanvasContainer(),r),a=n.unproject(o);super(t,e.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class ui extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,o=m(n.getCanvasContainer(),i),a=o.map((e=>n.unproject(e))),s=o.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.pointGeometry(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class hi extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class di{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new hi(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ci(e.type,this._map,e))}mouseup(e){this._map.fire(new ci(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new ci(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ci(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new ci(e.type,this._map,e))}mouseover(e){this._map.fire(new ci(e.type,this._map,e))}mouseout(e){this._map.fire(new ci(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ui(e.type,this._map,e))}touchmove(e){this._map.fire(new ui(e.type,this._map,e))}touchend(e){this._map.fire(new ui(e.type,this._map,e))}touchcancel(e){this._map.fire(new ui(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new ci(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ci(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),l=Math.min(r.y,n.y),c=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform="translate(".concat(a,"px,").concat(l,"px)"),this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(t,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===t.button){if(this.reset(),p(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),h(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function mi(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class gi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.pointGeometry(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=mi(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=mi(n,t);for(const i in this.touches){const e=this.touches[i],t=r[i];(!t||t.dist(e)>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class yi{constructor(e){this.singleTap=new gi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class vi{constructor(){this._zoomIn=new yi({numTouches:1,numTaps:2}),this._zoomOut=new yi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _i={0:1,2:2};class bi{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=g(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=_i[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xi extends bi{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class wi extends bi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class Si extends bi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class Ei{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=mi(r,n),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ai{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const r=this._firstTwoTouches;if(!r)return;e.preventDefault();const[i,o]=r,a=Ti(n,t,i),s=Ti(n,t,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Ti(n,t,r),a=Ti(n,t,i);o&&a||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ti(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Ci(e,t){return Math.log(e/t)/Math.LN2}class ki extends Ai{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ci(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ci(this._distance,n),pinchAround:t}}}function Ii(e,t){return 180*e.angleWith(t)/Math.PI}class Pi extends Ai{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ii(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=Ii(e,n);return Math.abs(r)<t}}function Li(e){return Math.abs(e.y)>Math.abs(e.x)}class Mi extends Ai{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Li(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,n,r){const i=this._lastPoints;if(!i)return;const o=t[0].sub(i[0]),a=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Li(e)&&Li(t)&&o}}const Oi={panStep:100,bearingStep:15,pitchStep:10};class Ni{constructor(){const e=Oi;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Ri,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ri(e){return e*(2-e)}const Di=4.000244140625;class Fi{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Di==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=f(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Di?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class ji{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(){this._tap=new yi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ui{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vi{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zi{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qi=e=>e.zoom||e.drag||e.pitch||e.rotate;class Gi extends e.Event{}class Wi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function Hi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Xi{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ai(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Wi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[i,o,a]of this._listeners)i.addEventListener(o,i===e.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,n,r]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new di(t,e));const r=t.boxZoom=new fi(t,e);this._add("boxZoom",r);const i=new vi,o=new zi;t.doubleClickZoom=new ji(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Bi;this._add("tapDragZoom",a);const s=t.touchPitch=new Mi(t);this._add("touchPitch",s);const l=new wi(e),c=new Si(e);t.dragRotate=new Vi(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new xi(e),h=new Ei(t,e);t.dragPan=new Ui(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Pi,p=new ki;t.touchZoomRotate=new Zi(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new pi(t));const f=t.scrollZoom=new Fi(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Ni;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[g]&&t[g].enable(e[g])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,"".concat(e.type,"Window"))}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,r=n?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):n?void 0:f(this._el,e);for(const{handlerName:h,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let n;this._blockedByActive(a,p,h)?d.reset():d[t||e.type]&&(n=d[t||e.type](e,l,s),this.mergeHandlerResult(i,o,n,h,r),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||d.isActive())&&(a[h]=d)}const c={};for(const h in this._previousActiveHandlers)a[h]||(c[h]=r);this._previousActiveHandlers=a,(Object.keys(c).length||Hi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||Hi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Hi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!Hi(t))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=t;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==p&&(h=p),(l||(e=>n.drag&&!this._eventsInProgress.drag)())&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(s)).dir);f[0]=t[0]-e[0],f[1]=t[1]-e[1]}else{const t=o.pointCoordinate(h);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;f[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*n,f[1]=-s.y*e.mercatorScale(o.center.lat)*n}else{const e=o.pointCoordinate(h.sub(s));t&&e&&(f[0]=e.x-t.x,f[1]=e.y-t.y)}}const m=o.zoom,g=[0,0,0];if(l){const t=a(d||o.pointCoordinate3D(h)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,r)}}const y=e.add(f,f,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=qi(this._eventsInProgress),o=qi(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a["".concat(e,"start")]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s["".concat(e,"end")]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=qi(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Gi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ki="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Yi extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_minimumAABBFrustumDistance(e,t){const n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,n,r,i,o,a){const s=t.clone(),l=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;const c=e.LngLat.convert(n),u=e.LngLat.convert(r),h=.5*(c.lat+u.lat),d=.5*(c.lng+u.lng),p=e.latLngToECEF(h,d),f=e.normalize([],p),m=e.normalize([],e.cross([],f,[0,1,0])),g=e.cross([],m,f),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],v=[p,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(h,c.lng),e.latLngToECEF(h,u.lng),e.latLngToECEF(c.lat,d),e.latLngToECEF(u.lat,d)];let _=e.Aabb.fromPoints(v.map((t=>[e.dot(m,t),e.dot(g,t),e.dot(f,t)])));const b=e.transformMat4([],_.center,y);0===e.squaredLength(b)&&e.set(b,0,0,1),e.normalize(b,b),e.scale$2(b,b,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(b);const x=s.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),x);_=e.Aabb.applyTransform(_,e.multiply([],x,y)),e.transformMat4(b,b,x);const S=.5*(_.max[2]-_.min[2]),E=this._minimumAABBFrustumDistance(s,_),A=e.scale$2([],[0,0,1],S),T=e.add(A,b,A),C=E+(0===s.pitch?0:e.distance(b,T)),k=s.globeCenterInViewSpace,I=e.sub([],b,[k[0],k[1],k[2]]);e.normalize(I,I),e.scale$2(I,I,C);const P=e.add([],b,I);e.transformMat4(P,P,w);const L=e.earthRadius/e.GLOBE_RADIUS,M=e.length(P),O=e.mercatorZfromAltitude(Math.max(M*L-e.earthRadius,Number.EPSILON),0),N=Math.min(s.zoomFromMercatorZAdjusted(O),l.maxZoom);return N>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=N,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:N,bearing:i,pitch:o}}queryTerrainElevation(t,n){const r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}_cameraForBounds(t,n,r,i,o,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,o,a);const s=t.clone(),l=this._extendCameraOptions(a),c=s.padding;s.bearing=i,s.pitch=o;const u=e.LngLat.convert(n),h=e.LngLat.convert(r),d=new e.LngLat(u.lng,h.lat),p=new e.LngLat(h.lng,u.lat),f=s.project(u),m=s.project(h),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(h),v=this.queryTerrainElevation(d),_=this.queryTerrainElevation(p),b=[[f.x,f.y,Math.min(g||0,y||0,v||0,_||0)],[m.x,m.y,Math.max(g||0,y||0,v||0,_||0)]];let x=e.Aabb.fromPoints(b);const w=s.getWorldToCameraMatrix(),S=e.invert(new Float64Array(16),w);x=e.Aabb.applyTransform(x,w);const E=e.sub([],x.max,x.min),A=c.left||0,T=c.right||0,C=c.bottom||0,k=c.top||0,{left:I,right:P,top:L,bottom:M}=l.padding,O=.5*(A+T),N=.5*(k+C),R=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(A+T+I+P))/E[0],(s.height-(C+k+M+L))/E[1])),l.maxZoom),D=s.scale/s.zoomScale(R);x=new e.Aabb([x.min[0]-(I+O)*D,x.min[1]-(M+N)*D,x.min[2]],[x.max[0]+(P+O)*D,x.max[1]+(L+N)*D,x.max[2]]);const F=.5*E[2],j=this._minimumAABBFrustumDistance(s,x),z=[0,0,1,0];e.transformMat4$1(z,z,w),e.normalize$2(z,z);const B=e.scale$2([],z,j+F),U=e.add([],x.center,B),V=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.pointGeometry(l.offset.x,l.offset.y):e.pointGeometry.convert(l.offset)).rotate(-e.degToRad(i));x.center[0]-=V.x*D,x.center[1]+=V.y*D,e.transformMat4(x.center,x.center,S),e.transformMat4(U,U,S);const Z=[x.center[0],x.center[1],U[2]*s.pixelsPerMeter];e.scale$2(Z,Z,1/s.worldSize);const q=e.lngFromMercatorX(Z[0]),G=e.latFromMercatorY(Z[1]),W=Math.min(s._zoomFromMercatorZ(Z[2]),l.maxZoom),H=new e.LngLat(q,G);return s.mercatorFromTransition&&W<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=W,this._cameraForBounds(s,n,r,i,o,a)):{center:H,zoom:W,bearing:i,pitch:o}}fitBounds(e,t,n){const r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}fitScreenCoordinates(t,n,r,i,o){const a=e.pointGeometry.convert(t),s=e.pointGeometry.convert(n),l=new e.pointGeometry(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new e.pointGeometry(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(c),d=this.transform.pointLocation3D(new e.pointGeometry(l.x,c.y)),p=this.transform.pointLocation3D(new e.pointGeometry(c.x,l.y)),f=[Math.min(u.lng,h.lng,d.lng,p.lng),Math.min(u.lat,h.lat,d.lat,p.lat)],m=[Math.max(u.lng,h.lng,d.lng,p.lng),Math.max(u.lat,h.lat,d.lat,p.lat)],g=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,m,r,g,i);return this._fitInternal(y,i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Ki),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(Ki),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,d=e.pointGeometry.convert(t.offset);let p,f,m;if("globe"===r.projection.name){const n=e.MercatorCoordinate.fromLngLat(r.center),i=d.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=e.LngLat.convert(t.center||o);this._normalizeCenter(a),p=r.centerPoint.add(i),f=new e.pointGeometry(n.x,n.y).mult(r.worldSize),m=new e.pointGeometry(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(f)}else{p=r.centerPoint.add(d);const n=r.pointLocation(p),i=e.LngLat.convert(t.center||n);this._normalizeCenter(i),f=r.project(n),m=r.project(i).sub(f)}const g=r.zoomScale(l-i);let y,v;t.around&&(y=e.LngLat.convert(t.around),v=r.locationPoint(y));const _=this._zooming||l!==i,b=this._rotating||o!==c,x=this._pitching||u!==a,w=!r.isPaddingEqual(h),S=r=>S=>{if(_&&(r.zoom=e.number(i,l,S)),b&&(r.bearing=e.number(o,c,S)),x&&(r.pitch=e.number(a,u,S)),w&&(r.interpolatePadding(s,h,S),p=r.centerPoint.add(d)),y)r.setLocationAtPoint(y,v);else{const e=r.zoomScale(r.zoom-i),t=l>i?Math.min(2,g):Math.max(.5,g),n=Math.pow(t,1-S),o=r.unproject(f.add(m.mult(S*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}return t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(S,t.duration,r);return this._preloadTiles(e),this}const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_,this._rotating=b,this._pitching=x,this._padding=w,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,E),this._ease(S(r),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(!t.essential&&e.exported.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,d=r.zoomScale(l-i),p=e.pointGeometry.convert(t.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=t.curve;const b=Math.max(r.width,r.height),x=b/d,w=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const S=_*_;function E(e){const t=(x*x-b*b+(e?-1:1)*S*S*w*w)/(2*(e?x:b)*S*w);return Math.log(Math.sqrt(t*t+1)-t)}function A(e){return(Math.exp(e)-Math.exp(-e))/2}function T(e){return(Math.exp(e)+Math.exp(-e))/2}const C=E(0);let k=function(e){return T(C)/T(C+_*e)},I=function(e){return b*((T(C)*(A(t=C+_*e)/T(t))-A(C))/S)/w;var t},P=(E(1)-C)/_;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(b-x)<1e-6)return this.easeTo(t,n);const e=x<b?-1:1;P=Math.abs(Math.log(x/b))/_,I=function(){return 0},k=function(t){return Math.exp(e*_*t)}}t.duration="duration"in t?+t.duration:1e3*P/("screenSpeed"in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const L=o!==c,M=u!==a,O=!r.isPaddingEqual(h),N=r=>d=>{const m=d*P,_=1/k(m);r.zoom=1===d?l:i+r.scaleZoom(_),L&&(r.bearing=e.number(o,c,d)),M&&(r.pitch=e.number(a,u,d)),O&&(r.interpolatePadding(s,h,d),f=r.centerPoint.add(p));const b=1===d?g:r.unproject(y.add(v.mult(I(m))).mult(_));return r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,f),r._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(N,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=L,this._pitching=M,this._padding=O,this._prepareEase(n,!1),this._ease(N(r),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_emulate(e,t,n){const r=Math.ceil(15*t/1e3),i=[],o=e(n.clone());for(let a=0;a<=r;a++){const e=o(a/r);i.push(e.clone())}return i}}class Ji{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<n.length-1?"&":"")),e)),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(r,"#").concat(ei(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const n=t[r];if(n.used){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Qi{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class $i{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const r of n)if(r.id===e)return void(r.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function eo(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const to={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class no extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:"0 0 ".concat(r," ").concat(n)},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const r=this._element.classList;for(const e in to)r.remove("mapboxgl-marker-anchor-".concat(e));r.add("mapboxgl-marker-anchor-".concat(this._anchor)),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)return void this._clearFadeTimer();const r=t.unproject(n);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(r),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity="".concat(i),this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(to[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}_calculateXYTransform(){const t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){const e=n.getPitch();return e?"rotateX(".concat(e,"deg)"):""}const i=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return"rotateX(".concat(-o.y*s,"deg) rotateY(").concat(o.x*s,"deg)")}_calculateZTransform(){const t=this._pos,n=this._map;if(!n||!t)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const t=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);r=e.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,n.getZoom()),o=e.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const a=t.sub(o),s=e.radToDeg(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-i)}return r+=this._rotation,r?"rotateZ(".concat(r,"deg)"):""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=eo(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ro={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},io=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.pointGeometry(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(r,r);case"top-right":return new e.pointGeometry(-r,r);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(r,-r);case"bottom-right":return new e.pointGeometry(-r,-r);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}class ao{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const so={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},lo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},co={showCompass:!0,showZoom:!0,visualizePitch:!1};class uo{constructor(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=n,this.mouseRotate=new wi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new Si({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){h(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),f(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,f(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ho={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},po={maxWidth:100,unit:"metric"};function fo(e,t,n){const r=mo(t),i=r/t,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[n];this._map._requestDomTask((()=>{this._container.style.width=e*i+"px",this._container.innerHTML="".concat(r,"&nbsp;").concat(o)}))}function mo(e){const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}const go={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Yi{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},lo,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Jr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new $i,this._domRenderTaskQueue=new $i,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},so,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ao(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Xi(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new $r("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Ji({customAttribution:t.customAttribution})),this._logoControl=new Qi,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event("".concat(t.dataType,"data"),t))})),this.on("dataloading",(t=>{this.fire(new e.Event("".concat(t.dataType,"dataloading"),t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,n=t.projection.name;let r;"globe"===n&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),r=!0):"mercator"===n&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new ci(e,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new ci(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new ci(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter((e=>this.getLayer(e))),i=r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const r=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===n&&r(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new $t(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new $t(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: ".concat(r.message||r.error||r,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n){let{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(o,", ").concat(a,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,r)=>{n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(r=t.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{r[e]=o("div","mapboxgl-ctrl-".concat(e),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",t),i=r||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this._useWebGL2&&!r&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(i,!0),this.painter=new jr(i,this.transform,!!r),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const r=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,r=e.exported.now(),i=new e.EvaluationParameters(t,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const t=e.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Qi&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,((e,n)=>e._preloadTiles(t,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},co,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(e.transform.pitch,"deg) rotateZ(").concat(e.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(e.transform.angle*(180/Math.PI),"deg)");e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uo(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=o("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},ho,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Qr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){var n=this;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>r("denied"!==e.state))).catch((()=>r())):r()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new no({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new no({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ji,ScaleControl:class{constructor(t){this.options=e.extend({},po,t),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=fo.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),o=t.unproject([r+e,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,n){const r=mo(t),i=r/t;this._map._requestDomTask((()=>{this._container.style.width=e*i+"px",this._container.innerHTML="nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:n}).format(r):"".concat(r,"&nbsp;nm")}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(ro),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<o)return a?"top-left":s?"top-right":"top";if(r.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=eo(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),r=oo(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=oo(this.options.offset,i),a=e.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform="".concat(to[i]," translate(").concat(a.x,"px,").concat(a.y,"px)"))}))}if(!this._marker&&n._showingGlobe()){const t=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(io);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:no,Style:$t,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Zr,Evented:e.Evented,config:e.config,prewarm:function(){Ve().acquire(ze)},clearPrewarmedResources:function(){const e=Ue;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(ze),Ue=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Be.workerCount},set workerCount(e){Be.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return go})),n}()},4501:(e,t,n)=>{const r=n(3684),i=n(1676),o=n(2427),a=n(6939);e.exports={CircleMode:r,DragCircleMode:i,DirectMode:o,SimpleSelectMode:a}},3684:(e,t,n)=>{const r=n(1252),i=n(9132),o=n(1619),a=n(9230).default,s={...r.modes.draw_polygon};s.onSetup=function(e){const t=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:i.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POLYGON),this.setActionableState({trash:!0}),{initialRadiusInKm:e.initialRadiusInKm||2,polygon:t,currentVertexPosition:0}},s.clickAnywhere=function(e,t){if(0===e.currentVertexPosition){e.currentVertexPosition++;const n=[t.lngLat.lng,t.lngLat.lat],r=a(n,e.initialRadiusInKm);e.polygon.incomingCoords(r.geometry.coordinates),e.polygon.properties.center=n,e.polygon.properties.radiusInKm=e.initialRadiusInKm}return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},e.exports=s},2427:(e,t,n)=>{const r=n(1252),i=n(3221),o=n(4722),a=n(9132),s=n(688),l=n(1272).Z,c=n(1949),u=n(9230).default,h=n(5528),d=r.modes.direct_select;d.dragFeature=function(e,t,n){o(this.getSelected(),n),this.getSelected().filter((e=>e.properties.isCircle)).map((e=>e.properties.center)).forEach((e=>{e[0]+=n.lng,e[1]+=n.lat})),e.dragMoveLocation=t.lngLat},d.dragVertex=function(e,t,n){if(e.feature.properties.isCircle){const n=e.feature.properties.center,r=[t.lngLat.lng,t.lngLat.lat],i=l(c.point(n),c.point(r),{units:"kilometers"}),o=u(n,i);e.feature.incomingCoords(o.geometry.coordinates),e.feature.properties.radiusInKm=i}else{const t=e.selectedCoordPaths.map((t=>e.feature.getCoordinate(t))),r=t.map((e=>({type:a.geojsonTypes.FEATURE,properties:{},geometry:{type:a.geojsonTypes.POINT,coordinates:e}}))),i=s(r,n);for(let n=0;n<t.length;n++){const r=t[n];e.feature.updateCoordinate(e.selectedCoordPaths[n],r[0]+i.lng,r[1]+i.lat)}}},d.toDisplayFeatures=function(e,t,n){if(e.featureId===t.properties.id){t.properties.active=a.activeStates.ACTIVE,n(t);(t.properties.user_isCircle?h(t):i(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths})).forEach(n)}else t.properties.active=a.activeStates.INACTIVE,n(t);this.fireActionable(e)},e.exports=d},1676:(e,t,n)=>{const r=n(1252),i=n(9132),o=n(1619),a=n(1363),s=n(9230).default,l=n(1272).Z,c=n(1949),u={...r.modes.draw_polygon};u.onSetup=function(e){const t=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:i.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),o.disable(this),a.disable(this),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},u.onMouseDown=u.onTouchStart=function(e,t){0===e.polygon.properties.center.length&&(e.polygon.properties.center=[t.lngLat.lng,t.lngLat.lat])},u.onDrag=u.onMouseMove=function(e,t){const n=e.polygon.properties.center;if(n.length>0){const r=l(c.point(n),c.point([t.lngLat.lng,t.lngLat.lat]),{units:"kilometers"}),i=s(n,r);e.polygon.incomingCoords(i.geometry.coordinates),e.polygon.properties.radiusInKm=r}},u.onMouseUp=u.onTouchEnd=function(e,t){return a.enable(this),this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},u.onClick=u.onTap=function(e,t){e.polygon.properties.center=[]},u.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.polygon.id;return t.properties.active=r?i.activeStates.ACTIVE:i.activeStates.INACTIVE,n(t)},e.exports=u},6939:(e,t,n)=>{const r=n(1252),i=n(3221),o=n(4722),a=n(9132),s=n(5528),l=r.modes.simple_select;l.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};o(this.getSelected(),n),this.getSelected().filter((e=>e.properties.isCircle)).map((e=>e.properties.center)).forEach((e=>{e[0]+=n.lng,e[1]+=n.lat})),e.dragMoveLocation=t.lngLat},l.toDisplayFeatures=function(e,t,n){if(t.properties.active=this.isSelected(t.properties.id)?a.activeStates.ACTIVE:a.activeStates.INACTIVE,n(t),this.fireActionable(),t.properties.active!==a.activeStates.ACTIVE||t.geometry.type===a.geojsonTypes.POINT)return;(t.properties.user_isCircle?s(t):i(t)).forEach(n)},e.exports=l},9132:e=>{e.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},688:(e,t,n)=>{const r=n(5182),i=n(9132),{LAT_MIN:o,LAT_MAX:a,LAT_RENDERED_MIN:s,LAT_RENDERED_MAX:l,LNG_MIN:c,LNG_MAX:u}=i;e.exports=function(e,t){let n=o,i=a,h=o,d=a,p=u,f=c;e.forEach((e=>{const t=r(e),o=t[1],a=t[3],s=t[0],l=t[2];o>n&&(n=o),a<i&&(i=a),a>h&&(h=a),o<d&&(d=o),s<p&&(p=s),l>f&&(f=l)}));const m=t;return n+m.lat>l&&(m.lat=l-n),h+m.lat>a&&(m.lat=a-h),i+m.lat<s&&(m.lat=s-i),d+m.lat<o&&(m.lat=o-d),p+m.lng<=c&&(m.lng+=360*Math.ceil(Math.abs(m.lng)/360)),f+m.lng>=u&&(m.lng-=360*Math.ceil(Math.abs(m.lng)/360)),m}},4939:(e,t,n)=>{const r=n(9132);e.exports=function(e,t,n,i){const o=t.geometry.coordinates,a=n.geometry.coordinates;if(o[1]>r.LAT_RENDERED_MAX||o[1]<r.LAT_RENDERED_MIN||a[1]>r.LAT_RENDERED_MAX||a[1]<r.LAT_RENDERED_MIN)return null;const s=i.project([o[0],o[1]]),l=i.project([a[0],a[1]]),c=i.unproject([(s.x+l.x)/2,(s.y+l.y)/2]);return{type:r.geojsonTypes.FEATURE,properties:{meta:r.meta.MIDPOINT,parent:e,lng:c.lng,lat:c.lat,coord_path:n.properties.coord_path},geometry:{type:r.geojsonTypes.POINT,coordinates:[c.lng,c.lat]}}}},3221:(e,t,n)=>{const r=n(9961),i=n(4939),o=n(9132);e.exports=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{type:s,coordinates:l}=t.geometry,c=t.properties&&t.properties.id;let u=[];function h(e,t){let o="",a=null;e.forEach(((e,s)=>{const l=void 0!==t&&null!==t?"".concat(t,".").concat(s):String(s),h=r(c,e,l,d(l));if(n.midpoints&&a){const e=i(c,a,h,n.map);e&&u.push(e)}a=h;const p=JSON.stringify(e);o!==p&&u.push(h),0===s&&(o=p)}))}function d(e){return!!n.selectedPaths&&-1!==n.selectedPaths.indexOf(e)}function p(){const r=s.replace(o.geojsonTypes.MULTI_PREFIX,"");l.forEach(((i,a)=>{const s={type:o.geojsonTypes.FEATURE,properties:t.properties,geometry:{type:r,coordinates:i}};u=u.concat(e(s,n,a))}))}return s===o.geojsonTypes.POINT?u.push(r(c,l,a,d(a))):s===o.geojsonTypes.POLYGON?l.forEach(((e,t)=>{h(e,null!==a?"".concat(a,".").concat(t):String(t))})):s===o.geojsonTypes.LINE_STRING?h(l,a):0===s.indexOf(o.geojsonTypes.MULTI_PREFIX)&&p(),u}},5528:(e,t,n)=>{const r=n(9961);e.exports=function(e){const{properties:t,geometry:n}=e;if(!t.user_isCircle)return null;const i=[],o=n.coordinates[0].slice(0,-1);for(let a=0;a<o.length;a+=Math.round(o.length/4))i.push(r(t.id,o[a],"0.".concat(a),!1));return i}},9961:(e,t,n)=>{const r=n(9132);e.exports=function(e,t,n,i){return{type:r.geojsonTypes.FEATURE,properties:{meta:r.meta.VERTEX,parent:e,coord_path:n,active:i?r.activeStates.ACTIVE:r.activeStates.INACTIVE},geometry:{type:r.geojsonTypes.POINT,coordinates:t}}}},1619:e=>{e.exports={enable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}}},1363:e=>{e.exports={enable(e){setTimeout((()=>{e.map&&e.map.dragPan&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("dragPan")&&e.map.dragPan.enable()}),0)},disable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e.map.dragPan.disable()}),0)}}},4722:(e,t,n)=>{const r=n(688),i=n(9132);e.exports=function(e,t){const n=r(e.map((e=>e.toGeoJSON())),t);e.forEach((e=>{const t=e.getCoordinates(),r=e=>{const t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},o=e=>e.map((e=>r(e))),a=e=>e.map((e=>o(e)));let s;e.type===i.geojsonTypes.POINT?s=r(t):e.type===i.geojsonTypes.LINE_STRING||e.type===i.geojsonTypes.MULTI_POINT?s=t.map(r):e.type===i.geojsonTypes.POLYGON||e.type===i.geojsonTypes.MULTI_LINE_STRING?s=t.map(o):e.type===i.geojsonTypes.MULTI_POLYGON&&(s=t.map(a)),e.incomingCoords(s)}))}},1252:function(e,t,n){e.exports=function(){"use strict";var e=function(e,t){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(e,t,r){if(void 0===n[e])throw new Error("Invalid event type: "+e);n[e].push({selector:t,fn:r})},render:function(e){t.store.featureChanged(e)}},i=function(e,i){for(var o=n[e],a=o.length;a--;){var s=o[a];if(s.selector(i)){s.fn.call(r,i)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(e){i("drag",e)},click:function(e){i("click",e)},mousemove:function(e){i("mousemove",e)},mousedown:function(e){i("mousedown",e)},mouseup:function(e){i("mouseup",e)},mouseout:function(e){i("mouseout",e)},keydown:function(e){i("keydown",e)},keyup:function(e){i("keyup",e)},touchstart:function(e){i("touchstart",e)},touchmove:function(e){i("touchmove",e)},touchend:function(e){i("touchend",e)},tap:function(e){i("tap",e)}}},t=6378137;function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(i(e[n]))}return t}function i(e){var n,r,i,a,s,l,c=0,u=e.length;if(u>2){for(l=0;l<u;l++)l===u-2?(i=u-2,a=u-1,s=0):l===u-1?(i=u-1,a=0,s=1):(i=l,a=l+1,s=l+2),n=e[i],r=e[a],c+=(o(e[s][0])-o(n[0]))*Math.sin(o(r[1]));c=c*t*t/2}return c}function o(e){return e*Math.PI/180}var a={geometry:function e(t){var n,i=0;switch(t.type){case"Polygon":return r(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)i+=r(t.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)i+=e(t.geometries[n]);return i}},ring:i},s="mapboxgl-ctrl",l="mapbox-gl-draw_ctrl-draw-btn",c="mapbox-gl-draw_line",u="mapbox-gl-draw_polygon",h="mapbox-gl-draw_point",d="mapbox-gl-draw_trash",p="mapbox-gl-draw_combine",f="mapbox-gl-draw_uncombine",m="mapboxgl-ctrl-group",g="active",y="mapbox-gl-draw_boxselect",v="mapbox-gl-draw-hot",_="mapbox-gl-draw-cold",b="add",x="move",w="drag",S="pointer",E="none",A={POLYGON:"polygon",LINE:"line_string",POINT:"point"},T="Feature",C="Polygon",k="LineString",I="Point",P="FeatureCollection",L="Multi",M="MultiPoint",O="MultiLineString",N="MultiPolygon",R={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},D="draw.create",F="draw.delete",j="draw.update",z="draw.selectionchange",B="draw.modechange",U="draw.actionable",V="draw.render",Z="draw.combine",q="draw.uncombine",G="move",W="change_coordinates",H="feature",X="midpoint",K="vertex",Y="true",J="false",Q=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],$={Point:0,LineString:1,Polygon:2};function ee(e,t){var n=$[e.geometry.type]-$[t.geometry.type];return 0===n&&e.geometry.type===C?e.area-t.area:n}function te(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,n=e.length;t<n;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}te.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},te.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},te.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},te.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(n){t.push({k:n,v:e._items[n]})})),Object.keys(this._nums).forEach((function(n){t.push({k:JSON.parse(n),v:e._nums[n]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},te.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ne=[H,X,K],re={click:function(e,t,n){return ie(e,t,n,n.options.clickBuffer)},touch:function(e,t,n){return ie(e,t,n,n.options.touchBuffer)}};function ie(e,t,n,r){if(null===n.map)return[];var i=e?function(e,t){return void 0===t&&(t=0),[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}(e,r):t,o={};n.options.styles&&(o.layers=n.options.styles.map((function(e){return e.id})));var s=n.map.queryRenderedFeatures(i,o).filter((function(e){return-1!==ne.indexOf(e.properties.meta)})),l=new te,c=[];return s.forEach((function(e){var t=e.properties.id;l.has(t)||(l.add(t),c.push(e))})),function(e){return e.map((function(e){return e.geometry.type===C&&(e.area=a.geometry({type:T,property:{},geometry:e.geometry})),e})).sort(ee).map((function(e){return delete e.area,e}))}(c)}function oe(e,t){var n=re.click(e,null,t),r={mouse:E};return n[0]&&(r.mouse=n[0].properties.active===Y?x:S,r.feature=n[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(r.mouse=b),t.ui.queueMapClasses(r),t.ui.updateMapClasses(),n[0]}function ae(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function se(e,t,n){void 0===n&&(n={});var r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var a=ae(e.point,t.point);return a<r||a<i&&t.time-e.time<o}function le(e,t,n){void 0===n&&(n={});var r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,ae(e.point,t.point)<r&&t.time-e.time<i}function ce(e,t){return e(t={exports:{}},t.exports),t.exports}var ue=ce((function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(n),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,e/i))/Math.log(n)*i;var o=r-Math.floor(r),a="";for(i=0;i<Math.floor(r);i++)a=Math.floor(Math.random()*n).toString(n)+a;if(o){var s=Math.pow(n,o);a=Math.floor(Math.random()*s).toString(n)+a}var l=parseInt(a,n);return l!==1/0&&l>=Math.pow(2,e)?t(e,n):a};t.rack=function(e,n,r){var i=function(i){var a=0;do{if(a++>10){if(!r)throw new Error("too many ID collisions, use more bits");e+=r}var s=t(e,n)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=n||16,i}})),he=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||ue(),this.type=t.geometry.type};he.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},he.prototype.incomingCoords=function(e){this.setCoordinates(e)},he.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},he.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},he.prototype.setProperty=function(e,t){this.properties[e]=t},he.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:T,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},he.prototype.internal=function(e){var t={id:this.id,meta:H,"meta:type":this.type,active:J,mode:e};if(this.ctx.options.userProperties)for(var n in this.properties)t["user_"+n]=this.properties[n];return{type:T,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var de=function(e,t){he.call(this,e,t)};(de.prototype=Object.create(he.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},de.prototype.updateCoordinate=function(e,t,n){this.coordinates=3===arguments.length?[t,n]:[e,t],this.changed()},de.prototype.getCoordinate=function(){return this.getCoordinates()};var pe=function(e,t){he.call(this,e,t)};(pe.prototype=Object.create(he.prototype)).isValid=function(){return this.coordinates.length>1},pe.prototype.addCoordinate=function(e,t,n){this.changed();var r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])},pe.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},pe.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},pe.prototype.updateCoordinate=function(e,t,n){var r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};var fe=function(e,t){he.call(this,e,t),this.coordinates=this.coordinates.map((function(e){return e.slice(0,-1)}))};(fe.prototype=Object.create(he.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(e){return e.length>2}))},fe.prototype.incomingCoords=function(e){this.coordinates=e.map((function(e){return e.slice(0,-1)})),this.changed()},fe.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},fe.prototype.addCoordinate=function(e,t,n){this.changed();var r=e.split(".").map((function(e){return parseInt(e,10)}));this.coordinates[r[0]].splice(r[1],0,[t,n])},fe.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},fe.prototype.getCoordinate=function(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},fe.prototype.getCoordinates=function(){return this.coordinates.map((function(e){return e.concat([e[0]])}))},fe.prototype.updateCoordinate=function(e,t,n){this.changed();var r=e.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[t,n]};var me={MultiPoint:de,MultiLineString:pe,MultiPolygon:fe},ge=function(e,t,n,r,i){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return e[a][t](s,r,i)},ye=function(e,t){if(he.call(this,e,t),delete this.coordinates,this.model=me[t.geometry.type],void 0===this.model)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function ve(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(ye.prototype=Object.create(he.prototype))._coordinatesToFeatures=function(e){var t=this,n=this.model.bind(this);return e.map((function(e){return new n(t.ctx,{id:ue(),type:T,properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})}))},ye.prototype.isValid=function(){return this.features.every((function(e){return e.isValid()}))},ye.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},ye.prototype.getCoordinate=function(e){return ge(this.features,"getCoordinate",e)},ye.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(e){return e.type===C?e.getCoordinates():e.coordinates}))))},ye.prototype.updateCoordinate=function(e,t,n){ge(this.features,"updateCoordinate",e,t,n),this.changed()},ye.prototype.addCoordinate=function(e,t,n){ge(this.features,"addCoordinate",e,t,n),this.changed()},ye.prototype.removeCoordinate=function(e){ge(this.features,"removeCoordinate",e),this.changed()},ye.prototype.getFeatures=function(){return this.features},ve.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},ve.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce((function(e,n){return void 0===e[n.feature_id]&&(e[n.feature_id]=!0,t._ctx.store.get(n.feature_id).changed()),e}),{})},ve.prototype.getSelected=function(){return this._ctx.store.getSelected()},ve.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},ve.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},ve.prototype.getFeature=function(e){return this._ctx.store.get(e)},ve.prototype.select=function(e){return this._ctx.store.select(e)},ve.prototype.deselect=function(e){return this._ctx.store.deselect(e)},ve.prototype.deleteFeature=function(e,t){return void 0===t&&(t={}),this._ctx.store.delete(e,t)},ve.prototype.addFeature=function(e){return this._ctx.store.add(e)},ve.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},ve.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},ve.prototype.setActionableState=function(e){void 0===e&&(e={});var t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},ve.prototype.changeMode=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this._ctx.events.changeMode(e,t,n)},ve.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},ve.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},ve.prototype.featuresAt=function(e,t,n){if(void 0===n&&(n="click"),"click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return re[n](e,t,this._ctx)},ve.prototype.newFeature=function(e){var t=e.geometry.type;return t===I?new de(this._ctx,e):t===k?new pe(this._ctx,e):t===C?new fe(this._ctx,e):new ye(this._ctx,e)},ve.prototype.isInstanceOf=function(e,t){if(e===I)return t instanceof de;if(e===k)return t instanceof pe;if(e===C)return t instanceof fe;if("MultiFeature"===e)return t instanceof ye;throw new Error("Unknown feature class: "+e)},ve.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},ve.prototype.onSetup=function(){},ve.prototype.onDrag=function(){},ve.prototype.onClick=function(){},ve.prototype.onMouseMove=function(){},ve.prototype.onMouseDown=function(){},ve.prototype.onMouseUp=function(){},ve.prototype.onMouseOut=function(){},ve.prototype.onKeyUp=function(){},ve.prototype.onKeyDown=function(){},ve.prototype.onTouchStart=function(){},ve.prototype.onTouchMove=function(){},ve.prototype.onTouchEnd=function(){},ve.prototype.onTap=function(){},ve.prototype.onStop=function(){},ve.prototype.onTrash=function(){},ve.prototype.onCombineFeature=function(){},ve.prototype.onUncombineFeature=function(){},ve.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var _e={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},be=Object.keys(_e);function xe(e){var t=Object.keys(e);return function(n,r){void 0===r&&(r={});var i={},o=t.reduce((function(t,n){return t[n]=e[n],t}),new ve(n));return{start:function(){var t=this;i=o.onSetup(r),be.forEach((function(n){var r,a=_e[n],s=function(){return!1};e[a]&&(s=function(){return!0}),t.on(n,s,(r=a,function(e){return o[r](i,e)}))}))},stop:function(){o.onStop(i)},trash:function(){o.onTrash(i)},combineFeatures:function(){o.onCombineFeatures(i)},uncombineFeatures:function(){o.onUncombineFeatures(i)},render:function(e,t){o.toDisplayFeatures(i,e,t)}}}}function we(e){return[].concat(e).filter((function(e){return void 0!==e}))}function Se(){var e=this;if(!e.ctx.map||void 0===e.ctx.map.getSource(v))return l();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var n=[],r=[];e.isDirty?r=e.getAllIds():(n=e.getChangedIds().filter((function(t){return void 0!==e.get(t)})),r=e.sources.hot.filter((function(t){return t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)})).map((function(e){return e.properties.id}))),e.sources.hot=[];var i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((function(e){var t=e.properties.id||e.properties.parent;return-1===n.indexOf(t)}));var o=i!==e.sources.cold.length||r.length>0;function a(n,r){var i=e.get(n).internal(t);e.ctx.events.currentModeRender(i,(function(t){e.sources[r].push(t)}))}if(n.forEach((function(e){return a(e,"hot")})),r.forEach((function(e){return a(e,"cold")})),o&&e.ctx.map.getSource(_).setData({type:P,features:e.sources.cold}),e.ctx.map.getSource(v).setData({type:P,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(z,{features:e.getSelected().map((function(e){return e.toGeoJSON()})),points:e.getSelectedCoordinates().map((function(e){return{type:T,properties:{},geometry:{type:I,coordinates:e.coordinates}}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var s=e._deletedFeaturesToEmit.map((function(e){return e.toGeoJSON()}));e._deletedFeaturesToEmit=[],e.ctx.map.fire(F,{features:s})}function l(){e.isDirty=!1,e.clearChangedIds()}l(),e.ctx.map.fire(V,{})}function Ee(e){var t,n=this;this._features={},this._featureIds=new te,this._selectedFeatureIds=new te,this._selectedCoordinates=[],this._changedFeatureIds=new te,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame((function(){t=null,Se.call(n)})))},this.isDirty=!1}function Ae(e,t){var n=e._selectedCoordinates.filter((function(t){return e._selectedFeatureIds.has(t.feature_id)}));e._selectedCoordinates.length===n.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=n}Ee.prototype.createRenderBatch=function(){var e=this,t=this.render,n=0;return this.render=function(){n++},function(){e.render=t,n>0&&e.render()}},Ee.prototype.setDirty=function(){return this.isDirty=!0,this},Ee.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},Ee.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ee.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ee.prototype.getAllIds=function(){return this._featureIds.values()},Ee.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},Ee.prototype.delete=function(e,t){var n=this;return void 0===t&&(t={}),we(e).forEach((function(e){n._featureIds.has(e)&&(n._featureIds.delete(e),n._selectedFeatureIds.delete(e),t.silent||-1===n._deletedFeaturesToEmit.indexOf(n._features[e])&&n._deletedFeaturesToEmit.push(n._features[e]),delete n._features[e],n.isDirty=!0)})),Ae(this,t),this},Ee.prototype.get=function(e){return this._features[e]},Ee.prototype.getAll=function(){var e=this;return Object.keys(this._features).map((function(t){return e._features[t]}))},Ee.prototype.select=function(e,t){var n=this;return void 0===t&&(t={}),we(e).forEach((function(e){n._selectedFeatureIds.has(e)||(n._selectedFeatureIds.add(e),n._changedFeatureIds.add(e),t.silent||(n._emitSelectionChange=!0))})),this},Ee.prototype.deselect=function(e,t){var n=this;return void 0===t&&(t={}),we(e).forEach((function(e){n._selectedFeatureIds.has(e)&&(n._selectedFeatureIds.delete(e),n._changedFeatureIds.add(e),t.silent||(n._emitSelectionChange=!0))})),Ae(this,t),this},Ee.prototype.clearSelected=function(e){return void 0===e&&(e={}),this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},Ee.prototype.setSelected=function(e,t){var n=this;return void 0===t&&(t={}),e=we(e),this.deselect(this._selectedFeatureIds.values().filter((function(t){return-1===e.indexOf(t)})),{silent:t.silent}),this.select(e.filter((function(e){return!n._selectedFeatureIds.has(e)})),{silent:t.silent}),this},Ee.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},Ee.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ee.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ee.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map((function(t){return e.get(t)}))},Ee.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map((function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}}))},Ee.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},Ee.prototype.setFeatureProperty=function(e,t,n){this.get(e).setProperty(t,n),this.featureChanged(e)},Ee.prototype.storeMapConfig=function(){var e=this;Q.forEach((function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())}))},Ee.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach((function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()}))},Ee.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};var Te=function(){for(var e=arguments,t={},n=0;n<arguments.length;n++){var r=e[n];for(var i in r)Ce.call(r,i)&&(t[i]=r[i])}return t},Ce=Object.prototype.hasOwnProperty,ke=["mode","feature","mouse"];function Ie(t){var n=null,r=null,i={onRemove:function(){return t.map.off("load",i.connect),clearInterval(r),i.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,n&&n.parentNode&&n.parentNode.removeChild(n),n=null,this},connect:function(){t.map.off("load",i.connect),clearInterval(r),i.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(o){var a=o.fire;return o.fire=function(e,t){var n=arguments;return 1===a.length&&1!==arguments.length&&(n=[Te({},{type:e},t)]),a.apply(o,n)},t.map=o,t.events=function(t){var n=Object.keys(t.options.modes).reduce((function(e,n){return e[n]=xe(t.options.modes[n]),e}),{}),r={},i={},o={},a=null,s=null;o.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:w}),s.drag(e)):e.originalEvent.stopPropagation()},o.mousedrag=function(e){o.drag(e,(function(e){return!se(r,e)}))},o.touchdrag=function(e){o.drag(e,(function(e){return!le(i,e)}))},o.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return o.mousedrag(e);var n=oe(e,t);e.featureTarget=n,s.mousemove(e)},o.mousedown=function(e){r={time:(new Date).getTime(),point:e.point};var n=oe(e,t);e.featureTarget=n,s.mousedown(e)},o.mouseup=function(e){var n=oe(e,t);e.featureTarget=n,se(r,{point:e.point,time:(new Date).getTime()})?s.click(e):s.mouseup(e)},o.mouseout=function(e){s.mouseout(e)},o.touchstart=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){i={time:(new Date).getTime(),point:e.point};var n=re.touch(e,null,t)[0];e.featureTarget=n,s.touchstart(e)}},o.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return s.touchmove(e),o.touchdrag(e)},o.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var n=re.touch(e,null,t)[0];e.featureTarget=n,le(i,{time:(new Date).getTime(),point:e.point})?s.tap(e):s.touchend(e)}};var l=function(e){return!(8===e||46===e||e>=48&&e<=57)};function c(r,i,o){void 0===o&&(o={}),s.stop();var l=n[r];if(void 0===l)throw new Error(r+" is not valid");a=r;var c=l(t,i);s=e(c,t),o.silent||t.map.fire(B,{mode:r}),t.store.setDirty(),t.store.render()}o.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?l(e.keyCode)?s.keydown(e):49===e.keyCode&&t.options.controls.point?c(R.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?c(R.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&c(R.DRAW_POLYGON):(e.preventDefault(),s.trash()))},o.keyup=function(e){l(e.keyCode)&&s.keyup(e)},o.zoomend=function(){t.store.changeZoom()},o.data=function(e){if("style"===e.dataType){var n=t.setup,r=t.map,i=t.options,o=t.store;i.styles.some((function(e){return r.getLayer(e.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var u={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){a=t.options.defaultMode,s=e(n[a](t),t)},changeMode:c,actionable:function(e){var n=!1;Object.keys(e).forEach((function(t){if(void 0===u[t])throw new Error("Invalid action type");u[t]!==e[t]&&(n=!0),u[t]=e[t]})),n&&t.map.fire(U,{actions:u})},currentModeName:function(){return a},currentModeRender:function(e,t){return s.render(e,t)},fire:function(e,t){o[e]&&o[e](t)},addEventListeners:function(){t.map.on("mousemove",o.mousemove),t.map.on("mousedown",o.mousedown),t.map.on("mouseup",o.mouseup),t.map.on("data",o.data),t.map.on("touchmove",o.touchmove),t.map.on("touchstart",o.touchstart),t.map.on("touchend",o.touchend),t.container.addEventListener("mouseout",o.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",o.keydown),t.container.addEventListener("keyup",o.keyup))},removeEventListeners:function(){t.map.off("mousemove",o.mousemove),t.map.off("mousedown",o.mousedown),t.map.off("mouseup",o.mouseup),t.map.off("data",o.data),t.map.off("touchmove",o.touchmove),t.map.off("touchstart",o.touchstart),t.map.off("touchend",o.touchend),t.container.removeEventListener("mouseout",o.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",o.keydown),t.container.removeEventListener("keyup",o.keyup))},trash:function(e){s.trash(e)},combineFeatures:function(){s.combineFeatures()},uncombineFeatures:function(){s.uncombineFeatures()},getMode:function(){return a}}}(t),t.ui=function(e){var t={},n=null,r={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function o(e){i=Te(i,e)}function a(){var t,n;if(e.container){var o=[],a=[];ke.forEach((function(e){i[e]!==r[e]&&(o.push(e+"-"+r[e]),null!==i[e]&&a.push(e+"-"+i[e]))})),o.length>0&&(t=e.container.classList).remove.apply(t,o),a.length>0&&(n=e.container.classList).add.apply(n,a),r=Te(r,i)}}function y(e,t){void 0===t&&(t={});var r=document.createElement("button");return r.className=l+" "+t.className,r.setAttribute("title",t.title),t.container.appendChild(r),r.addEventListener("click",(function(r){if(r.preventDefault(),r.stopPropagation(),r.target===n)return v(),void t.onDeactivate();_(e),t.onActivate()}),!0),r}function v(){n&&(n.classList.remove(g),n=null)}function _(e){v();var r=t[e];r&&r&&"trash"!==e&&(r.classList.add(g),n=r)}return{setActiveButton:_,queueMapClasses:o,updateMapClasses:a,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var n=e.options.controls,r=document.createElement("div");return r.className=m+" "+s,n?(n[A.LINE]&&(t[A.LINE]=y(A.LINE,{container:r,className:c,title:"LineString tool "+(e.options.keybindings?"(l)":""),onActivate:function(){return e.events.changeMode(R.DRAW_LINE_STRING)},onDeactivate:function(){return e.events.trash()}})),n[A.POLYGON]&&(t[A.POLYGON]=y(A.POLYGON,{container:r,className:u,title:"Polygon tool "+(e.options.keybindings?"(p)":""),onActivate:function(){return e.events.changeMode(R.DRAW_POLYGON)},onDeactivate:function(){return e.events.trash()}})),n[A.POINT]&&(t[A.POINT]=y(A.POINT,{container:r,className:h,title:"Marker tool "+(e.options.keybindings?"(m)":""),onActivate:function(){return e.events.changeMode(R.DRAW_POINT)},onDeactivate:function(){return e.events.trash()}})),n.trash&&(t.trash=y("trash",{container:r,className:d,title:"Delete",onActivate:function(){e.events.trash()}})),n.combine_features&&(t.combine_features=y("combineFeatures",{container:r,className:p,title:"Combine",onActivate:function(){e.events.combineFeatures()}})),n.uncombine_features&&(t.uncombine_features=y("uncombineFeatures",{container:r,className:f,title:"Uncombine",onActivate:function(){e.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(t).forEach((function(e){var n=t[e];n.parentNode&&n.parentNode.removeChild(n),delete t[e]}))}}}(t),t.container=o.getContainer(),t.store=new Ee(t),n=t.ui.addButtons(),t.options.boxSelect&&(o.boxZoom.disable(),o.dragPan.disable(),o.dragPan.enable()),o.loaded()?i.connect():(o.on("load",i.connect),r=setInterval((function(){o.loaded()&&i.connect()}),16)),t.events.start(),n},addLayers:function(){t.map.addSource(_,{data:{type:P,features:[]},type:"geojson"}),t.map.addSource(v,{data:{type:P,features:[]},type:"geojson"}),t.options.styles.forEach((function(e){t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach((function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(_)&&t.map.removeSource(_),t.map.getSource(v)&&t.map.removeSource(v)}};return t.setup=i,i}function Pe(e){return function(t){var n=t.featureTarget;return!!n&&!!n.properties&&n.properties.meta===e}}function Le(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===Y&&e.featureTarget.properties.meta===H}function Me(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===J&&e.featureTarget.properties.meta===H}function Oe(e){return void 0===e.featureTarget}function Ne(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===K}function Re(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function De(e){return 27===e.keyCode}function Fe(e){return 13===e.keyCode}var je=ze;function ze(e,t){this.x=e,this.y=t}function Be(e,t){var n=t.getBoundingClientRect();return new je(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function Ue(e,t,n,r){return{type:T,properties:{meta:K,parent:e,coord_path:n,active:r?Y:J},geometry:{type:I,coordinates:t}}}function Ve(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r,i=e.geometry,o=i.type,a=i.coordinates,s=e.properties&&e.properties.id,l=[];function c(e,n){var r="",i=null;e.forEach((function(e,o){var a=null!=n?n+"."+o:String(o),c=Ue(s,e,a,u(a));if(t.midpoints&&i){var h=function(e,t,n){var r=t.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<-85||i[1]>85||i[1]<-85)return null;var o={lng:(r[0]+i[0])/2,lat:(r[1]+i[1])/2};return{type:T,properties:{meta:X,parent:e,lng:o.lng,lat:o.lat,coord_path:n.properties.coord_path},geometry:{type:I,coordinates:[o.lng,o.lat]}}}(s,i,c);h&&l.push(h)}i=c;var d=JSON.stringify(e);r!==d&&l.push(c),0===o&&(r=d)}))}function u(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return o===I?l.push(Ue(s,a,n,u(n))):o===C?a.forEach((function(e,t){c(e,null!==n?n+"."+t:String(t))})):o===k?c(a,n):0===o.indexOf(L)&&(r=o.replace(L,""),a.forEach((function(n,i){var o={type:T,properties:e.properties,geometry:{type:r,coordinates:n}};l=l.concat(Ve(o,t,i))}))),l}ze.prototype={clone:function(){return new ze(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ze.convert=function(e){return e instanceof ze?e:Array.isArray(e)?new ze(e[0],e[1]):e};var Ze=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},qe=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)},Ge=function(e){if(!e||!e.type)return null;var t=We[e.type];return t?"geometry"===t?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===t?{type:"FeatureCollection",features:[e]}:"featurecollection"===t?e:void 0:null},We={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function He(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,t){return e.concat(He(t))}),[]),e;case"Feature":return e.geometry?He(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):[e];case"MultiPoint":return e.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return e.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return e.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return e.geometries.map(He).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}var Xe=function(e){if(!e)return[];var t=He(Ge(e)),n=[];return t.features.forEach((function(e){e.geometry&&(n=n.concat(function e(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}(e.geometry.coordinates)))})),n},Ke=ce((function(e){var t=e.exports=function(e){return new n(e)};function n(e){this.value=e}function r(e,t,n){var r=[],a=[],u=!0;return function e(h){var d=n?i(h):h,p={},f=!0,m={node:d,node_:h,path:[].concat(r),parent:a[a.length-1],parents:a,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){m.isRoot||(m.parent.node[m.key]=e),m.node=e,t&&(f=!1)},delete:function(e){delete m.parent.node[m.key],e&&(f=!1)},remove:function(e){s(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],e&&(f=!1)},keys:null,before:function(e){p.before=e},after:function(e){p.after=e},pre:function(e){p.pre=e},post:function(e){p.post=e},stop:function(){u=!1},block:function(){f=!1}};if(!u)return m;function g(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=o(m.node)),m.isLeaf=0==m.keys.length;for(var e=0;e<a.length;e++)if(a[e].node_===h){m.circular=a[e];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}g();var y=t.call(m,m.node);return void 0!==y&&m.update&&m.update(y),p.before&&p.before.call(m,m.node),f?("object"!=typeof m.node||null===m.node||m.circular||(a.push(m),g(),l(m.keys,(function(t,i){r.push(t),p.pre&&p.pre.call(m,m.node[t],t);var o=e(m.node[t]);n&&c.call(m.node,t)&&(m.node[t]=o.node),o.isLast=i==m.keys.length-1,o.isFirst=0==i,p.post&&p.post.call(m,o),r.pop()})),a.pop()),p.after&&p.after.call(m,m.node),m):m}(e).node}function i(e){if("object"==typeof e&&null!==e){var t;if(s(e))t=[];else if("[object Date]"===a(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===a(e)}(e))t=new RegExp(e);else if(function(e){return"[object Error]"===a(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===a(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===a(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===a(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=n,t=new r}return l(o(e),(function(n){t[n]=e[n]})),t}return e}n.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!c.call(t,r)){t=void 0;break}t=t[r]}return t},n.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!c.call(t,r))return!1;t=t[r]}return!0},n.prototype.set=function(e,t){for(var n=this.value,r=0;r<e.length-1;r++){var i=e[r];c.call(n,i)||(n[i]={}),n=n[i]}return n[e[r]]=t,t},n.prototype.map=function(e){return r(this.value,e,!0)},n.prototype.forEach=function(e){return this.value=r(this.value,e,!1),this.value},n.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach((function(t){this.isRoot&&n||(r=e.call(this,r,t))})),r},n.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},n.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},n.prototype.clone=function(){var e=[],t=[];return function n(r){for(var a=0;a<e.length;a++)if(e[a]===r)return t[a];if("object"==typeof r&&null!==r){var s=i(r);return e.push(r),t.push(s),l(o(r),(function(e){s[e]=n(r[e])})),e.pop(),t.pop(),s}return r}(this.value)};var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function a(e){return Object.prototype.toString.call(e)}var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};l(o(n.prototype),(function(e){t[e]=function(t){var r=[].slice.call(arguments,1),i=new n(t);return i[e].apply(i,r)}}));var c=Object.hasOwnProperty||function(e,t){return t in e}})),Ye=Je;function Je(e){if(!(this instanceof Je))return new Je(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}Je.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},Je.prototype.equals=function(e){var t;return t=e instanceof Je?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},Je.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Je.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof Je?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},Je.prototype.bbox=function(){return this._valid?this._bbox:null},Je.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n},Je.prototype.intersect=function(e){return this._valid?(t=e instanceof Je?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},Je.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},Je.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Qe={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},$e=Object.keys(Qe),et=function(e){return tt(e).bbox()};function tt(e){for(var t=Ye(),n=Xe(e),r=0;r<n.length;r++)t.include(n[r]);return t}function nt(e,t){var n=-90,r=90,i=-90,o=90,a=270,s=-270;e.forEach((function(e){var t=et(e),l=t[1],c=t[3],u=t[0],h=t[2];l>n&&(n=l),c<r&&(r=c),c>i&&(i=c),l<o&&(o=l),u<a&&(a=u),h>s&&(s=h)}));var l=t;return n+l.lat>85&&(l.lat=85-n),i+l.lat>90&&(l.lat=90-i),r+l.lat<-85&&(l.lat=-85-r),o+l.lat<-90&&(l.lat=-90-o),a+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l}function rt(e,t){var n=nt(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,r=e.getCoordinates(),i=function(e){var t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},o=function(e){return e.map((function(e){return i(e)}))};e.type===I?t=i(r):e.type===k||e.type===M?t=r.map(i):e.type===C||e.type===O?t=r.map(o):e.type===N&&(t=r.map((function(e){return e.map((function(e){return o(e)}))}))),e.incomingCoords(t)}))}et.polygon=function(e){return tt(e).polygon()},et.bboxify=function(e){return Ke(e).map((function(e){e&&$e.some((function(t){return!!e[t]&&-1!==Qe[t].indexOf(e.type)}))&&(e.bbox=tt(e).bbox(),this.update(e))}))};var it={onSetup:function(e){var t=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(j,{action:G,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),n=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),r=!1;if(t.length>1){r=!0;var i=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=t.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new te).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){Ze(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};it.onTap=it.onClick=function(e,t){return Oe(t)?this.clickAnywhere(e,t):Pe(K)(t)?this.clickOnVertex(e,t):function(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===H}(t)?this.clickOnFeature(e,t):void 0},it.clickAnywhere=function(e){var t=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(e){return t.doRender(e)}))),Ze(this),this.stopExtendedInteractions(e)},it.clickOnVertex=function(e,t){this.changeMode(R.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:x})},it.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},it.clickOnFeature=function(e,t){var n=this;qe(this),this.stopExtendedInteractions(e);var r=Re(t),i=this.getSelectedIds(),o=t.featureTarget.properties.id,a=this.isSelected(o);if(!r&&a&&this.getFeature(o).type!==I)return this.changeMode(R.DIRECT_SELECT,{featureId:o});a&&r?(this.deselect(o),this.updateUIClasses({mouse:S}),1===i.length&&Ze(this)):!a&&r?(this.select(o),this.updateUIClasses({mouse:x})):a||r||(i.forEach((function(e){return n.doRender(e)})),this.setSelected(o),this.updateUIClasses({mouse:x})),this.doRender(o)},it.onMouseDown=function(e,t){return Le(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&0===e.originalEvent.button}(t)?this.startBoxSelect(e,t):void 0},it.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=Be(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},it.onTouchStart=function(e,t){if(Le(t))return this.startOnActiveFeature(e,t)},it.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},it.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:b}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(y),this.map.getContainer().appendChild(e.boxSelectElement));var n=Be(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),i=Math.max(e.boxSelectStartLocation.x,n.x),o=Math.min(e.boxSelectStartLocation.y,n.y),a=Math.max(e.boxSelectStartLocation.y,n.y),s="translate("+r+"px, "+o+"px)";e.boxSelectElement.style.transform=s,e.boxSelectElement.style.WebkitTransform=s,e.boxSelectElement.style.width=i-r+"px",e.boxSelectElement.style.height=a-o+"px"},it.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};rt(this.getSelected(),n),e.dragMoveLocation=t.lngLat},it.onMouseUp=function(e,t){var n=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var r=[e.boxSelectStartLocation,Be(t.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(e){return!n.isSelected(e)}));o.length&&(this.select(o),o.forEach((function(e){return n.doRender(e)})),this.updateUIClasses({mouse:x}))}this.stopExtendedInteractions(e)},it.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?Y:J,n(t),this.fireActionable(),t.properties.active===Y&&t.geometry.type!==I&&Ve(t).forEach(n)},it.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},it.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],n=[],r=e[0].type.replace("Multi",""),i=0;i<e.length;i++){var o=e[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(e){t.push(e)})):t.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:T,properties:n[0].properties,geometry:{type:"Multi"+r,coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(Z,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},it.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var n=[],r=[],i=function(i){var o=t[i];e.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(t){e.addFeature(t),t.properties=o.properties,n.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<t.length;o++)i(o);n.length>1&&this.map.fire(q,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};var ot=Pe(K),at=Pe(X),st={fireUpdate:function(){this.map.fire(j,{action:W,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);Re(t)||-1!==r?Re(t)&&-1===r&&e.selectedCoordPaths.push(n.coord_path):e.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,n){rt(this.getSelected(),n),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),i=nt(r.map((function(e){return{type:T,properties:{},geometry:{type:I,coordinates:e}}})),n),o=0;o<r.length;o++){var a=r[o];e.feature.updateCoordinate(e.selectedCoordPaths[o],a[0]+i.lng,a[1]+i.lat)}},clickNoTarget:function(){this.changeMode(R.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(R.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===I)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),qe(this),this.setActionableState({trash:!0}),r},onStop:function(){Ze(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,n){e.featureId===t.properties.id?(t.properties.active=Y,n(t),Ve(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=J,n(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(R.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var n=Le(t),r=ot(t),i=0===e.selectedCoordPaths.length;return n&&i||r&&!i?this.updateUIClasses({mouse:x}):this.updateUIClasses({mouse:E}),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};st.onTouchStart=st.onMouseDown=function(e,t){return ot(t)?this.onVertex(e,t):Le(t)?this.onFeature(e,t):at(t)?this.onMidpoint(e,t):void 0},st.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat}},st.onClick=function(e,t){return Oe(t)?this.clickNoTarget(e,t):Le(t)?this.clickActiveFeature(e,t):Me(t)?this.clickInactive(e,t):void this.stopDragging(e)},st.onTap=function(e,t){return Oe(t)?this.clickNoTarget(e,t):Le(t)?this.clickActiveFeature(e,t):Me(t)?this.clickInactive(e,t):void 0},st.onTouchEnd=st.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var lt={};function ct(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}lt.onSetup=function(){var e=this.newFeature({type:T,properties:{},geometry:{type:I,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b}),this.activateUIButton(A.POINT),this.setActionableState({trash:!0}),{point:e}},lt.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)},lt.onTap=lt.onClick=function(e,t){this.updateUIClasses({mouse:x}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(D,{features:[e.point.toGeoJSON()]}),this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.point.id]})},lt.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},lt.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.point.id;if(t.properties.active=r?Y:J,!r)return n(t)},lt.onTrash=lt.stopDrawingAndRemove,lt.onKeyUp=function(e,t){if(De(t)||Fe(t))return this.stopDrawingAndRemove(e,t)};var ut={onSetup:function(){var e=this.newFeature({type:T,properties:{},geometry:{type:C,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),qe(this),this.updateUIClasses({mouse:b}),this.activateUIButton(A.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&ct(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:b}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Ne(t)&&this.updateUIClasses({mouse:S})}};ut.onTap=ut.onClick=function(e,t){return Ne(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},ut.onKeyUp=function(e,t){De(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)):Fe(t)&&this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},ut.onStop=function(e){this.updateUIClasses({mouse:E}),Ze(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(D,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT,{},{silent:!0})))},ut.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.polygon.id;if(t.properties.active=r?Y:J,!r)return n(t);if(0!==t.geometry.coordinates.length){var i=t.geometry.coordinates[0].length;if(!(i<3)){if(t.properties.meta=H,n(Ue(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=t.geometry.coordinates[0].length-3;n(Ue(e.polygon.id,t.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var a=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:T,properties:t.properties,geometry:{coordinates:a,type:k}}),3===i)return}return n(t)}}},ut.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)};var ht={onSetup:function(e){var t,n,r=(e=e||{}).featureId,i="forward";if(r){if(!(t=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var o=e.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=t.coordinates.length-1;if(t.coordinates[a][0]===o[0]&&t.coordinates[a][1]===o[1])n=a+1,t.addCoordinate.apply(t,[n].concat(t.coordinates[a]));else{if(t.coordinates[0][0]!==o[0]||t.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards",n=0,t.addCoordinate.apply(t,[n].concat(t.coordinates[0]))}}else t=this.newFeature({type:T,properties:{},geometry:{type:k,coordinates:[]}}),n=0,this.addFeature(t);return this.clearSelectedFeatures(),qe(this),this.updateUIClasses({mouse:b}),this.activateUIButton(A.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:n,direction:i}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&ct(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&ct(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:b}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Ne(t)&&this.updateUIClasses({mouse:S})}};ht.onTap=ht.onClick=function(e,t){if(Ne(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},ht.onKeyUp=function(e,t){Fe(t)?this.changeMode(R.SIMPLE_SELECT,{featureIds:[e.line.id]}):De(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT))},ht.onStop=function(e){Ze(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(D,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT,{},{silent:!0})))},ht.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)},ht.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.line.id;if(t.properties.active=r?Y:J,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=H,n(Ue(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),n(t))};var dt={simple_select:it,direct_select:st,draw_point:lt,draw_polygon:ut,draw_line_string:ht},pt={defaultMode:R.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:dt,controls:{},userProperties:!1},ft={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},mt={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function gt(e,t){return e.map((function(e){return e.source?e:Te(e,{id:e.id+"."+t,source:"hot"===t?v:_})}))}var yt=ce((function(e,t){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[a]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,d=u||h||Function("return this")(),p=t&&!t.nodeType&&t,f=p&&e&&!e.nodeType&&e,m=f&&f.exports===p,g=m&&u.process,y=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),v=y&&y.isTypedArray;function _(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function b(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function x(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var w,S,E,A=Array.prototype,T=Function.prototype,C=Object.prototype,k=d["__core-js_shared__"],I=T.toString,P=C.hasOwnProperty,L=(w=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",M=C.toString,O=RegExp("^"+I.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=m?d.Buffer:void 0,R=d.Symbol,D=d.Uint8Array,F=C.propertyIsEnumerable,j=A.splice,z=R?R.toStringTag:void 0,B=Object.getOwnPropertySymbols,U=N?N.isBuffer:void 0,V=(S=Object.keys,E=Object,function(e){return S(E(e))}),Z=ye(d,"DataView"),q=ye(d,"Map"),G=ye(d,"Promise"),W=ye(d,"Set"),H=ye(d,"WeakMap"),X=ye(Object,"create"),K=xe(Z),Y=xe(q),J=xe(G),Q=xe(W),$=xe(H),ee=R?R.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function se(e,t){var n=Ee(e),r=!n&&Se(e),i=!n&&!r&&Ae(e),o=!n&&!r&&!i&&Pe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!P.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||be(c,l))||s.push(c);return s}function le(e,t){for(var n=e.length;n--;)if(we(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":z&&z in Object(e)?function(e){var t=P.call(e,z),n=e[z];try{e[z]=void 0;var r=!0}catch(e){}var i=M.call(e);return r&&(t?e[z]=n:delete e[z]),i}(e):function(e){return M.call(e)}(e)}function ue(e){return Ie(e)&&ce(e)==r}function he(e,t,n,s,l){return e===t||(null==e||null==t||!Ie(e)&&!Ie(t)?e!=e&&t!=t:function(e,t,n,s,l,c){var u=Ee(e),h=Ee(t),d=u?"[object Array]":_e(e),p=h?"[object Array]":_e(t),f=(d=d==r?o:d)==o,m=(p=p==r?o:p)==o,g=d==p;if(g&&Ae(e)){if(!Ae(t))return!1;u=!0,f=!1}if(g&&!f)return c||(c=new ae),u||Pe(e)?fe(e,t,n,s,l,c):function(e,t,n,r,o,s,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new D(e),new D(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return we(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=b;case a:var u=1&r;if(c||(c=x),e.size!=t.size&&!u)return!1;var h=l.get(e);if(h)return h==t;r|=2,l.set(e,t);var d=fe(c(e),c(t),r,o,s,l);return l.delete(e),d;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,d,n,s,l,c);if(!(1&n)){var y=f&&P.call(e,"__wrapped__"),v=m&&P.call(t,"__wrapped__");if(y||v){var _=y?e.value():e,w=v?t.value():t;return c||(c=new ae),l(_,w,n,s,c)}}return!!g&&(c||(c=new ae),function(e,t,n,r,i,o){var a=1&n,s=me(e),l=s.length;if(l!=me(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:P.call(t,u)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var f=e[u=s[c]],m=t[u];if(r)var g=a?r(m,f,u,t,e,o):r(f,m,u,e,t,o);if(!(void 0===g?f===m||i(f,m,n,r,o):g)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,s,l,c))}(e,t,n,s,he,l))}function de(e){return!(!ke(e)||function(e){return!!L&&L in e}(e))&&(Te(e)?O:s).test(xe(e))}function pe(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||C))return V(e);var t,n,r=[];for(var i in Object(e))P.call(e,i)&&"constructor"!=i&&r.push(i);return r}function fe(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,h=!0,d=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var p=e[u],f=t[u];if(r)var m=a?r(f,p,u,t,e,o):r(p,f,u,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!_(t,(function(e,t){if(a=t,!d.has(a)&&(p===e||i(p,e,n,r,o)))return d.push(t);var a}))){h=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function me(e){return function(e,t,n){var r=t(e);return Ee(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Le,ve)}function ge(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return de(n)?n:void 0}ne.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(X){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:P.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():j.call(t,n,1),--this.size,!0)},re.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return le(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=le(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(q||re),string:new ne}},ie.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ge(this,e).get(e)},ie.prototype.has=function(e){return ge(this,e).has(e)},ie.prototype.set=function(e,t){var n=ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var ve=B?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(B(e),(function(t){return F.call(e,t)})))}:function(){return[]},_e=ce;function be(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function xe(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function we(e,t){return e===t||e!=e&&t!=t}(Z&&"[object DataView]"!=_e(new Z(new ArrayBuffer(1)))||q&&_e(new q)!=i||G&&"[object Promise]"!=_e(G.resolve())||W&&_e(new W)!=a||H&&"[object WeakMap]"!=_e(new H))&&(_e=function(e){var t=ce(e),n=t==o?e.constructor:void 0,r=n?xe(n):"";if(r)switch(r){case K:return"[object DataView]";case Y:return i;case J:return"[object Promise]";case Q:return a;case $:return"[object WeakMap]"}return t});var Se=ue(function(){return arguments}())?ue:function(e){return Ie(e)&&P.call(e,"callee")&&!F.call(e,"callee")},Ee=Array.isArray,Ae=U||function(){return!1};function Te(e){if(!ke(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ke(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}var Pe=v?function(e){return function(t){return e(t)}}(v):function(e){return Ie(e)&&Ce(e.length)&&!!c[ce(e)]};function Le(e){return null!=(t=e)&&Ce(t.length)&&!Te(t)?se(e):pe(e);var t}e.exports=function(e,t){return he(e,t)}})),vt={Polygon:fe,LineString:pe,Point:de,MultiPolygon:ye,MultiLineString:ye,MultiPoint:ye};function _t(e,t){return t.modes=R,t.getFeatureIdsAt=function(t){return re.click({point:t},null,e).map((function(e){return e.properties.id}))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:P,features:e.store.getSelectedIds().map((function(t){return e.store.get(t)})).map((function(e){return e.toGeoJSON()}))}},t.getSelectedPoints=function(){return{type:P,features:e.store.getSelectedCoordinates().map((function(e){return{type:T,properties:{},geometry:{type:I,coordinates:e.coordinates}}}))}},t.set=function(n){if(void 0===n.type||n.type!==P||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),o=t.add(n),a=new te(o);return(i=i.filter((function(e){return!a.has(e)}))).length&&t.delete(i),r(),o},t.add=function(t){var n=JSON.parse(JSON.stringify(Ge(t))).features.map((function(t){if(t.id=t.id||ue(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){var n=vt[t.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+t.geometry.type+".");var r=new n(e,t);e.store.add(r)}else{var i=e.store.get(t.id);i.properties=t.properties,yt(i.getCoordinates(),t.geometry.coordinates)||i.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),n},t.get=function(t){var n=e.store.get(t);if(n)return n.toGeoJSON()},t.getAll=function(){return{type:P,features:e.store.getAll().map((function(e){return e.toGeoJSON()}))}},t.delete=function(n){return e.store.delete(n,{silent:!0}),t.getMode()!==R.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(R.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===R.DIRECT_SELECT?e.events.changeMode(R.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(n,r){return void 0===r&&(r={}),n===R.SIMPLE_SELECT&&t.getMode()===R.SIMPLE_SELECT?(i=r.featureIds||[],o=e.store.getSelectedIds(),i.length===o.length&&JSON.stringify(i.map((function(e){return e})).sort())===JSON.stringify(o.map((function(e){return e})).sort())||(e.store.setSelected(r.featureIds,{silent:!0}),e.store.render()),t):(n===R.DIRECT_SELECT&&t.getMode()===R.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:!0}),t);var i,o},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i),t},t}var bt=function(e,t){var n={options:e=function(e){void 0===e&&(e={});var t=Te(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=Te(mt,e.controls):t.controls=Te(ft,e.controls),(t=Te(pt,t)).styles=gt(t.styles,"cold").concat(gt(t.styles,"hot")),t}(e)};t=_t(n,t),n.api=t;var r=Ie(n);return t.onAdd=r.onAdd,t.onRemove=r.onRemove,t.types=A,t.options=e,t};function xt(e){bt(e,this)}return xt.modes=dt,xt}()},8990:(e,t,n)=>{e.exports=n(1875)},5786:(e,t,n)=>{var r=n(9279),i=n(7641),o={};function a(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:r.merge(e,t)}n(8990).forEach((function(e){if("all"===e.polygon)o[e.key]=!0;else{var t="whitelist"===e.polygon?"included_values":"excluded_values",n={};e.values.forEach((function(e){n[e]=!0})),o[e.key]={},o[e.key][t]=n}}));var s;function l(e){for(var t,n,r,i,o,a,s=function(e){return e[0]},l=function(e){return e[e.length-1]},c=function(e,t){return void 0!==e&&void 0!==t&&e.id===t.id},u=[];e.length;)for(t=e.pop().nodes.slice(),u.push(t);e.length&&!c(s(t),l(t));){for(n=s(t),r=l(t),i=0;i<e.length;i++){if(c(r,s(a=e[i].nodes))){o=t.push,a=a.slice(1);break}if(c(r,l(a))){o=t.push,a=a.slice(0,-1).reverse();break}if(c(n,l(a))){o=t.unshift,a=a.slice(0,-1);break}if(c(n,s(a))){o=t.unshift,a=a.slice(1).reverse();break}a=o=null}if(!a)break;e.splice(i,1),o.apply(t,a)}return u}s=function(e,t,n){return t=r.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:o,deduplicator:a},t),"undefined"!==typeof XMLDocument&&e instanceof XMLDocument||"undefined"===typeof XMLDocument&&e.childNodes?function(e){var t,n,i=new Array,o=new Array,a=new Array;function l(e,t,n){e.hasAttribute(n)&&(t[n]=e.getAttribute(n))}function c(e,t){var n=r.clone(e);l(t,n,"lat"),l(t,n,"lon"),n.__is_center_placeholder=!0,i.push(n)}function u(e,t){var n=r.clone(e);function a(e,t,r){var o={type:"node",id:"_"+n.type+"/"+n.id+"bounds"+r,lat:e,lon:t};n.nodes.push(o.id),i.push(o)}n.nodes=[],a(t.getAttribute("minlat"),t.getAttribute("minlon"),1),a(t.getAttribute("maxlat"),t.getAttribute("minlon"),2),a(t.getAttribute("maxlat"),t.getAttribute("maxlon"),3),a(t.getAttribute("minlat"),t.getAttribute("maxlon"),4),n.nodes.push(n.nodes[0]),n.__is_bounds_placeholder=!0,o.push(n)}return r.each(e.getElementsByTagName("node"),(function(e,t){var n={};r.each(e.getElementsByTagName("tag"),(function(e){n[e.getAttribute("k")]=e.getAttribute("v")}));var o={type:"node"};l(e,o,"id"),l(e,o,"lat"),l(e,o,"lon"),l(e,o,"version"),l(e,o,"timestamp"),l(e,o,"changeset"),l(e,o,"uid"),l(e,o,"user"),r.isEmpty(n)||(o.tags=n),i.push(o)})),r.each(e.getElementsByTagName("way"),(function(e,a){var s={},h=[];r.each(e.getElementsByTagName("tag"),(function(e){s[e.getAttribute("k")]=e.getAttribute("v")}));var d=!1;r.each(e.getElementsByTagName("nd"),(function(e,t){var n;(n=e.getAttribute("ref"))&&(h[t]=n),!d&&e.getAttribute("lat")&&(d=!0)}));var p={type:"way"};l(e,p,"id"),l(e,p,"version"),l(e,p,"timestamp"),l(e,p,"changeset"),l(e,p,"uid"),l(e,p,"user"),h.length>0&&(p.nodes=h),r.isEmpty(s)||(p.tags=s),(t=e.getElementsByTagName("center")[0])&&c(p,t),d?function(e,t){function n(e,t,n){var r={type:"node",id:n,lat:e,lon:t};return i.push(r),r.id}r.isArray(e.nodes)||(e.nodes=[],r.each(t,(function(t,n){e.nodes.push("_anonymous@"+t.getAttribute("lat")+"/"+t.getAttribute("lon"))})));r.each(t,(function(t,r){t.getAttribute("lat")&&n(t.getAttribute("lat"),t.getAttribute("lon"),e.nodes[r])}))}(p,e.getElementsByTagName("nd")):(n=e.getElementsByTagName("bounds")[0])&&u(p,n),o.push(p)})),r.each(e.getElementsByTagName("relation"),(function(e,s){var h={},d=[];r.each(e.getElementsByTagName("tag"),(function(e){h[e.getAttribute("k")]=e.getAttribute("v")}));var p=!1;r.each(e.getElementsByTagName("member"),(function(e,t){d[t]={},l(e,d[t],"ref"),l(e,d[t],"role"),l(e,d[t],"type"),(!p&&"node"==d[t].type&&e.getAttribute("lat")||"way"==d[t].type&&e.getElementsByTagName("nd").length>0)&&(p=!0)}));var f={type:"relation"};l(e,f,"id"),l(e,f,"version"),l(e,f,"timestamp"),l(e,f,"changeset"),l(e,f,"uid"),l(e,f,"user"),d.length>0&&(f.members=d),r.isEmpty(h)||(f.tags=h),(t=e.getElementsByTagName("center")[0])&&c(f,t),p?function(e,t){function n(e,t,n){var r={type:"node",id:n,lat:e,lon:t};i.push(r)}function a(e,t){if(!o.some((function(e){return"way"==e.type&&e.id==t}))){var n={type:"way",id:t,nodes:[]};r.each(e,(function(e){e.getAttribute("lat")?a(e.getAttribute("lat"),e.getAttribute("lon")):n.nodes.push(void 0)})),o.push(n)}function a(e,t){var r={type:"node",id:"_anonymous@"+e+"/"+t,lat:e,lon:t};n.nodes.push(r.id),i.push(r)}}r.each(t,(function(t,r){"node"==e.members[r].type?t.getAttribute("lat")&&n(t.getAttribute("lat"),t.getAttribute("lon"),e.members[r].ref):"way"==e.members[r].type&&t.getElementsByTagName("nd").length>0&&(e.members[r].ref="_fullGeom"+e.members[r].ref,a(t.getElementsByTagName("nd"),e.members[r].ref))}))}(f,e.getElementsByTagName("member")):(n=e.getElementsByTagName("bounds")[0])&&u(f,n),a.push(f)})),s(i,o,a)}(e):function(e){var t=new Array,n=new Array,i=new Array;function o(e){var n=r.clone(e);n.lat=e.center.lat,n.lon=e.center.lon,n.__is_center_placeholder=!0,t.push(n)}function a(e){var i=r.clone(e);function o(e,n,r){var o={type:"node",id:"_"+i.type+"/"+i.id+"bounds"+r,lat:e,lon:n};i.nodes.push(o.id),t.push(o)}i.nodes=[],o(i.bounds.minlat,i.bounds.minlon,1),o(i.bounds.maxlat,i.bounds.minlon,2),o(i.bounds.maxlat,i.bounds.maxlon,3),o(i.bounds.minlat,i.bounds.maxlon,4),i.nodes.push(i.nodes[0]),i.__is_bounds_placeholder=!0,n.push(i)}function l(e){r.isArray(e.nodes)||(e.nodes=e.geometry.map((function(e){return null!==e?"_anonymous@"+e.lat+"/"+e.lon:"_anonymous@unknown_location"}))),e.geometry.forEach((function(n,r){n&&function(e,n,r){var i={type:"node",id:r,lat:e,lon:n};t.push(i)}(n.lat,n.lon,e.nodes[r])}))}function c(e){function r(e,r){if(!n.some((function(e){return"way"==e.type&&e.id==r}))){var i={type:"way",id:r,nodes:[]};e.forEach((function(e){e?function(e,n){var r={type:"node",id:"_anonymous@"+e+"/"+n,lat:e,lon:n};i.nodes.push(r.id),t.push(r)}(e.lat,e.lon):i.nodes.push(void 0)})),n.push(i)}}e.members.forEach((function(e,n){"node"==e.type?e.lat&&function(e,n,r){var i={type:"node",id:r,lat:e,lon:n};t.push(i)}(e.lat,e.lon,e.ref):"way"==e.type&&e.geometry&&(e.ref="_fullGeom"+e.ref,r(e.geometry,e.ref))}))}for(var u=0;u<e.elements.length;u++)switch(e.elements[u].type){case"node":var h=e.elements[u];t.push(h);break;case"way":var d=r.clone(e.elements[u]);d.nodes=r.clone(d.nodes),n.push(d),d.center&&o(d),d.geometry?l(d):d.bounds&&a(d);break;case"relation":var p=r.clone(e.elements[u]);p.members=r.clone(p.members),i.push(p);var f=p.members&&p.members.some((function(e){return"node"==e.type&&e.lat||"way"==e.type&&e.geometry&&e.geometry.length>0}));p.center&&o(p),f?c(p):p.bounds&&a(p)}return s(t,n,i)}(e);function s(e,o,a){function s(e,n){if("object"!==typeof n&&(n={}),"function"===typeof t.uninterestingTags)return!t.uninterestingTags(e,n);for(var r in e)if(!0!==t.uninterestingTags[r]&&!0!==n[r]&&n[r]!==e[r])return!0;return!1}function u(e){var t={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(var n in t)void 0===t[n]&&delete t[n];return t}for(var h=new Object,d=new Object,p=0;p<e.length;p++){void 0!==h[(b=e[p]).id]&&(b=t.deduplicator(b,h[b.id])),h[b.id]=b,"undefined"!=typeof b.tags&&s(b.tags)&&(d[b.id]=!0)}for(p=0;p<a.length;p++)if(r.isArray(a[p].members))for(var f=0;f<a[p].members.length;f++)"node"==a[p].members[f].type&&(d[a[p].members[f].ref]=!0);var m=new Object,g=new Object;for(p=0;p<o.length;p++){var y=o[p];if(m[y.id]&&(y=t.deduplicator(y,m[y.id])),m[y.id]=y,r.isArray(y.nodes))for(f=0;f<y.nodes.length;f++)"object"!==typeof y.nodes[f]&&(g[y.nodes[f]]=!0,y.nodes[f]=h[y.nodes[f]])}var v=new Array;for(var _ in h){var b=h[_];g[_]&&!d[_]||v.push(b)}var x=new Array;for(p=0;p<a.length;p++){x[(E=a[p]).id]&&(E=t.deduplicator(E,x[E.id])),x[E.id]=E}var w,S={node:{},way:{},relation:{}};for(var _ in x){var E=x[_];if(r.isArray(E.members))for(f=0;f<E.members.length;f++){var A=E.members[f].type,T=E.members[f].ref;"number"!==typeof T&&(T=T.replace("_fullGeom","")),S[A]?("undefined"===typeof S[A][T]&&(S[A][T]=[]),S[A][T].push({role:E.members[f].role,rel:E.id,reltags:E.tags})):t.verbose&&console.warn("Relation",E.type+"/"+E.id,"member",A+"/"+T,"ignored because it has an invalid type")}else t.verbose&&console.warn("Relation",E.type+"/"+E.id,"ignored because it has no members")}var C=[];for(p=0;p<v.length;p++)if("undefined"!=typeof v[p].lon&&"undefined"!=typeof v[p].lat){var k={type:"Feature",id:v[p].type+"/"+v[p].id,properties:{type:v[p].type,id:v[p].id,tags:v[p].tags||{},relations:S.node[v[p].id]||[],meta:u(v[p])},geometry:{type:"Point",coordinates:[+v[p].lon,+v[p].lat]}};v[p].__is_center_placeholder&&(k.properties.geometry="center"),n?n(k):C.push(k)}else t.verbose&&console.warn("POI",v[p].type+"/"+v[p].id,"ignored because it lacks coordinates");var I=[],P=[];for(p=0;p<a.length;p++)if(x[a[p].id]===a[p]){if("undefined"!=typeof a[p].tags&&("route"==a[p].tags.type||"waterway"==a[p].tags.type)){if(!r.isArray(a[p].members)){t.verbose&&console.warn("Route",a[p].type+"/"+a[p].id,"ignored because it has no members");continue}if(a[p].members.forEach((function(e){m[e.ref]&&!s(m[e.ref].tags)&&(m[e.ref].is_skippablerelationmember=!0)})),!1===(k=L(a[p]))){t.verbose&&console.warn("Route relation",a[p].type+"/"+a[p].id,"ignored because it has invalid geometry");continue}function L(e){var n,i,o=!1;n=(n=e.members.filter((function(e){return"way"===e.type}))).map((function(n){var r=m[n.ref];return void 0===r||void 0===r.nodes?(t.verbose&&console.warn("Route "+e.type+"/"+e.id,"tainted by a missing or incomplete  way",n.type+"/"+n.ref),void(o=!0)):{id:n.ref,role:n.role,way:r,nodes:r.nodes.filter((function(r){return void 0!==r||(o=!0,t.verbose&&console.warn("Route",e.type+"/"+e.id,"tainted by a way",n.type+"/"+n.ref,"with a missing node"),!1)}))}})),i=l(n=r.compact(n));var a;if(a=r.compact(i.map((function(e){return r.compact(e.map((function(e){return[+e.lon,+e.lat]})))}))),0==a.length)return t.verbose&&console.warn("Route",e.type+"/"+e.id,"contains no coordinates"),!1;var s={type:"Feature",id:e.type+"/"+e.id,properties:{type:e.type,id:e.id,tags:e.tags||{},relations:S[e.type][e.id]||[],meta:u(e)},geometry:{type:1===a.length?"LineString":"MultiLineString",coordinates:1===a.length?a[0]:a}};return o&&(t.verbose&&console.warn("Route",e.type+"/"+e.id,"is tainted"),s.properties.tainted=!0),s}n?n(i(k)):P.push(k)}if("undefined"!=typeof a[p].tags&&("multipolygon"==a[p].tags.type||"boundary"==a[p].tags.type)){if(!r.isArray(a[p].members)){t.verbose&&console.warn("Multipolygon",a[p].type+"/"+a[p].id,"ignored because it has no members");continue}var M=0;for(f=0;f<a[p].members.length;f++)"outer"==a[p].members[f].role?M++:t.verbose&&"inner"!=a[p].members[f].role&&console.warn("Multipolygon",a[p].type+"/"+a[p].id,"member",a[p].members[f].type+"/"+a[p].members[f].ref,'ignored because it has an invalid role: "'+a[p].members[f].role+'"');if(a[p].members.forEach((function(e){m[e.ref]&&("outer"!==e.role||s(m[e.ref].tags,a[p].tags)||(m[e.ref].is_skippablerelationmember=!0),"inner"!==e.role||s(m[e.ref].tags)||(m[e.ref].is_skippablerelationmember=!0))})),0==M){t.verbose&&console.warn("Multipolygon relation",a[p].type+"/"+a[p].id,"ignored because it has no outer ways");continue}var O=!1;1!=M||s(a[p].tags,{type:!0})||(O=!0);k=null;if(O){var N=a[p].members.filter((function(e){return"outer"===e.role}))[0];if(void 0===(N=m[N.ref])){t.verbose&&console.warn("Multipolygon relation",a[p].type+"/"+a[p].id,"ignored because outer way",N.type+"/"+N.ref,"is missing");continue}N.is_skippablerelationmember=!0,k=R(N,a[p])}else k=R(a[p],a[p]);if(!1===k){t.verbose&&console.warn("Multipolygon relation",a[p].type+"/"+a[p].id,"ignored because it has invalid geometry");continue}function R(e,n){var i,o,a,s,c=!1,h=O?"way":"relation",d="number"===typeof e.id?e.id:+e.id.replace("_fullGeom","");function p(e){var t,n=function(e,t){for(var n=0;n<t.length;n++)if(i(t[n],e))return!0;return!1},r=function(e){return e.map((function(e){return[+e.lat,+e.lon]}))},i=function(e,t){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o][0],l=t[o][1],c=t[a][0],u=t[a][1];l>r!=u>r&&n<(c-s)*(r-l)/(u-l)+s&&(i=!i)}return i};for(e=r(e),t=0;t<o.length;t++)if(n(r(o[t]),e))return t}i=(i=n.members.filter((function(e){return"way"===e.type}))).map((function(e){var n=m[e.ref];return void 0===n||void 0===n.nodes?(t.verbose&&console.warn("Multipolygon",h+"/"+d,"tainted by a missing or incomplete way",e.type+"/"+e.ref),void(c=!0)):{id:e.ref,role:e.role||"outer",way:n,nodes:n.nodes.filter((function(n){return void 0!==n||(c=!0,t.verbose&&console.warn("Multipolygon",h+"/"+d,"tainted by a way",e.type+"/"+e.ref,"with a missing node"),!1)}))}})),i=r.compact(i),o=l(i.filter((function(e){return"outer"===e.role}))),a=l(i.filter((function(e){return"inner"===e.role}))),s=o.map((function(e){return[e]}));for(var f=0;f<a.length;f++){var g=p(a[f]);void 0!==g?s[g].push(a[f]):t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains an inner ring with no containing outer")}var y=[];if(y=r.compact(s.map((function(e){var n=r.compact(e.map((function(e){if(!(e.length<4))return r.compact(e.map((function(e){return[+e.lon,+e.lat]})));t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains a ring with less than four nodes")})));if(0!=n.length)return n;t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains an empty ring cluster")}))),0==y.length)return t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains no coordinates"),!1;var v="MultiPolygon";1===y.length&&(v="Polygon",y=y[0]);var _={type:"Feature",id:e.type+"/"+d,properties:{type:e.type,id:d,tags:e.tags||{},relations:S[e.type][e.id]||[],meta:u(e)},geometry:{type:v,coordinates:y}};return c&&(t.verbose&&console.warn("Multipolygon",h+"/"+d,"is tainted"),_.properties.tainted=!0),_}n?n(i(k)):P.push(k)}}for(p=0;p<o.length;p++)if(m[o[p].id]===o[p])if(r.isArray(o[p].nodes)){if(!o[p].is_skippablerelationmember){"number"!==typeof o[p].id&&(o[p].id=+o[p].id.replace("_fullGeom","")),o[p].tainted=!1,o[p].hidden=!1;var D=new Array;for(f=0;f<o[p].nodes.length;f++)"object"==typeof o[p].nodes[f]?D.push([+o[p].nodes[f].lon,+o[p].nodes[f].lat]):(t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"is tainted by an invalid node"),o[p].tainted=!0);if(D.length<=1)t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"ignored because it contains too few nodes");else{var F="LineString";"undefined"!=typeof o[p].nodes[0]&&"undefined"!=typeof o[p].nodes[o[p].nodes.length-1]&&o[p].nodes[0].id===o[p].nodes[o[p].nodes.length-1].id&&("undefined"!=typeof o[p].tags&&c(o[p].tags)||o[p].__is_bounds_placeholder)&&(F="Polygon",D=[D]);k={type:"Feature",id:o[p].type+"/"+o[p].id,properties:{type:o[p].type,id:o[p].id,tags:o[p].tags||{},relations:S.way[o[p].id]||[],meta:u(o[p])},geometry:{type:F,coordinates:D}};o[p].tainted&&(t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"is tainted"),k.properties.tainted=!0),o[p].__is_bounds_placeholder&&(k.properties.geometry="bounds"),n?n(i(k)):"LineString"==F?I.push(k):P.push(k)}}}else t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"ignored because it has no nodes");return!!n||((w={type:"FeatureCollection",features:[]}).features=w.features.concat(P),w.features=w.features.concat(I),w.features=w.features.concat(C),t.flatProperties&&w.features.forEach((function(e){e.properties=r.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})})),w=i(w))}function c(e){var n=t.polygonFeatures;if("function"===typeof n)return n(e);if("no"===e.area)return!1;for(var r in e){var i=e[r],o=n[r];if("undefined"!==typeof o&&"no"!==i){if(!0===o)return!0;if(o.included_values&&!0===o.included_values[i])return!0;if(o.excluded_values&&!0!==o.excluded_values[i])return!0}}return!1}},s.toGeojson=s,e.exports=s},9279:function(e,t,n){e=n.nmd(e),function(){var r,i="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",d="[object GeneratorFunction]",p="[object Map]",f="[object Number]",m="[object Object]",g="[object Promise]",y="[object RegExp]",v="[object Set]",_="[object String]",b="[object Symbol]",x="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",A="[object Float64Array]",T="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",I="[object Uint8Array]",P="[object Uint8ClampedArray]",L="[object Uint16Array]",M="[object Uint32Array]",O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,N=/^\w*$/,R=/^\./,D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F=/\\(\\)?/g,j=/\w*$/,z=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,U={};U[E]=U[A]=U[T]=U[C]=U[k]=U[I]=U[P]=U[L]=U[M]=!0,U[a]=U[s]=U[w]=U[l]=U[S]=U[c]=U[u]=U[h]=U[p]=U[f]=U[m]=U[y]=U[v]=U[_]=U[x]=!1;var V={};V[a]=V[s]=V[w]=V[S]=V[l]=V[c]=V[E]=V[A]=V[T]=V[C]=V[k]=V[p]=V[f]=V[m]=V[y]=V[v]=V[_]=V[b]=V[I]=V[P]=V[L]=V[M]=!0,V[u]=V[h]=V[x]=!1;var Z="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,q="object"==typeof self&&self&&self.Object===Object&&self,G=Z||q||Function("return this")(),W=t&&!t.nodeType&&t,H=W&&e&&!e.nodeType&&e,X=H&&H.exports===W,K=X&&Z.process,Y=function(){try{return K&&K.binding("util")}catch(e){}}(),J=Y&&Y.isTypedArray;function Q(e,t){return e.set(t[0],t[1]),e}function $(e,t){return e.add(t),e}function ee(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function te(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function ne(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function re(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function ie(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function oe(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ae(e,t){return function(n){return e(t(n))}}function se(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var le=Array.prototype,ce=Function.prototype,ue=Object.prototype,he=G["__core-js_shared__"],de=function(){var e=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pe=ce.toString,fe=ue.hasOwnProperty,me=pe.call(Object),ge=ue.toString,ye=RegExp("^"+pe.call(fe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=X?G.Buffer:r,_e=G.Symbol,be=G.Uint8Array,xe=ae(Object.getPrototypeOf,Object),we=Object.create,Se=ue.propertyIsEnumerable,Ee=le.splice,Ae=Object.getOwnPropertySymbols,Te=ve?ve.isBuffer:r,Ce=ae(Object.keys,Object),ke=Math.max,Ie=_t(G,"DataView"),Pe=_t(G,"Map"),Le=_t(G,"Promise"),Me=_t(G,"Set"),Oe=_t(G,"WeakMap"),Ne=_t(Object,"create"),Re=!Se.call({valueOf:1},"valueOf"),De=It(Ie),Fe=It(Pe),je=It(Le),ze=It(Me),Be=It(Oe),Ue=_e?_e.prototype:r,Ve=Ue?Ue.valueOf:r,Ze=Ue?Ue.toString:r;function qe(){}function Ge(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function We(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function He(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xe(e){var t=-1,n=e?e.length:0;for(this.__data__=new He;++t<n;)this.add(e[t])}function Ke(e){this.__data__=new We(e)}function Ye(e,t){var n=Nt(e)||Ot(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!fe.call(e,o)||i&&("length"==o||wt(o,r))||n.push(o);return n}function Je(e,t,n){(n!==r&&!Mt(e[t],n)||"number"==typeof t&&n===r&&!(t in e))&&(e[t]=n)}function Qe(e,t,n){var i=e[t];fe.call(e,t)&&Mt(i,n)&&(n!==r||t in e)||(e[t]=n)}function $e(e,t){for(var n=e.length;n--;)if(Mt(e[n][0],t))return n;return-1}function et(e,t,n,i,o,s,u){var g;if(i&&(g=s?i(e,o,s,u):i(e)),g!==r)return g;if(!Bt(e))return e;var x=Nt(e);if(x){if(g=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&fe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return ft(e,g)}else{var O=xt(e),N=O==h||O==d;if(Ft(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(O==m||O==a||N&&!s){if(ie(e))return s?e:{};if(g=function(e){return"function"!=typeof e.constructor||Et(e)?{}:(t=xe(e),Bt(t)?we(t):{});var t}(N?{}:e),!t)return function(e,t){return mt(e,bt(e),t)}(e,function(e,t){return e&&mt(t,Yt(t),e)}(g,e))}else{if(!V[O])return s?e:{};g=function(e,t,n,r){var i=e.constructor;switch(t){case w:return pt(e);case l:case c:return new i(+e);case S:return function(e,t){var n=t?pt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case E:case A:case T:case C:case k:case I:case P:case L:case M:return function(e,t){var n=t?pt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case p:return function(e,t,n){return ne(t?n(oe(e),!0):oe(e),Q,new e.constructor)}(e,r,n);case f:case _:return new i(e);case y:return function(e){var t=new e.constructor(e.source,j.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return function(e,t,n){return ne(t?n(se(e),!0):se(e),$,new e.constructor)}(e,r,n);case b:return o=e,Ve?Object(Ve.call(o)):{}}var o}(e,O,et,t)}}u||(u=new Ke);var R=u.get(e);if(R)return R;if(u.set(e,g),!x)var D=n?function(e){return function(e,t,n){var r=t(e);return Nt(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Yt,bt)}(e):Yt(e);return te(D||e,(function(r,o){D&&(r=e[o=r]),Qe(g,o,et(r,t,n,i,o,e,u))})),g}Ge.prototype.clear=function(){this.__data__=Ne?Ne(null):{}},Ge.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ge.prototype.get=function(e){var t=this.__data__;if(Ne){var n=t[e];return n===i?r:n}return fe.call(t,e)?t[e]:r},Ge.prototype.has=function(e){var t=this.__data__;return Ne?t[e]!==r:fe.call(t,e)},Ge.prototype.set=function(e,t){return this.__data__[e]=Ne&&t===r?i:t,this},We.prototype.clear=function(){this.__data__=[]},We.prototype.delete=function(e){var t=this.__data__,n=$e(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ee.call(t,n,1),!0)},We.prototype.get=function(e){var t=this.__data__,n=$e(t,e);return n<0?r:t[n][1]},We.prototype.has=function(e){return $e(this.__data__,e)>-1},We.prototype.set=function(e,t){var n=this.__data__,r=$e(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},He.prototype.clear=function(){this.__data__={hash:new Ge,map:new(Pe||We),string:new Ge}},He.prototype.delete=function(e){return vt(this,e).delete(e)},He.prototype.get=function(e){return vt(this,e).get(e)},He.prototype.has=function(e){return vt(this,e).has(e)},He.prototype.set=function(e,t){return vt(this,e).set(e,t),this},Xe.prototype.add=Xe.prototype.push=function(e){return this.__data__.set(e,i),this},Xe.prototype.has=function(e){return this.__data__.has(e)},Ke.prototype.clear=function(){this.__data__=new We},Ke.prototype.delete=function(e){return this.__data__.delete(e)},Ke.prototype.get=function(e){return this.__data__.get(e)},Ke.prototype.has=function(e){return this.__data__.has(e)},Ke.prototype.set=function(e,t){var n=this.__data__;if(n instanceof We){var r=n.__data__;if(!Pe||r.length<199)return r.push([e,t]),this;n=this.__data__=new He(r)}return n.set(e,t),this};var tt,nt,rt=(tt=function(e,t){return e&&it(e,t,Yt)},function(e,t){if(null==e)return e;if(!Rt(e))return tt(e,t);for(var n=e.length,r=nt?n:-1,i=Object(e);(nt?r--:++r<n)&&!1!==t(i[r],r,i););return e}),it=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}();function ot(e,t){for(var n=0,i=(t=St(t,e)?[t]:dt(t)).length;null!=e&&n<i;)e=e[kt(t[n++])];return n&&n==i?e:r}function at(e,t){return null!=e&&t in Object(e)}function st(e,t,n,i,o){return e===t||(null==e||null==t||!Bt(e)&&!Ut(t)?e!==e&&t!==t:function(e,t,n,i,o,h){var d=Nt(e),g=Nt(t),x=s,E=s;d||(x=(x=xt(e))==a?m:x);g||(E=(E=xt(t))==a?m:E);var A=x==m&&!ie(e),T=E==m&&!ie(t),C=x==E;if(C&&!A)return h||(h=new Ke),d||Gt(e)?gt(e,t,n,i,o,h):function(e,t,n,r,i,o,a){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!r(new be(e),new be(t)));case l:case c:case f:return Mt(+e,+t);case u:return e.name==t.name&&e.message==t.message;case y:case _:return e==t+"";case p:var s=oe;case v:var h=2&o;if(s||(s=se),e.size!=t.size&&!h)return!1;var d=a.get(e);if(d)return d==t;o|=1,a.set(e,t);var m=gt(s(e),s(t),r,i,o,a);return a.delete(e),m;case b:if(Ve)return Ve.call(e)==Ve.call(t)}return!1}(e,t,x,n,i,o,h);if(!(2&o)){var k=A&&fe.call(e,"__wrapped__"),I=T&&fe.call(t,"__wrapped__");if(k||I){var P=k?e.value():e,L=I?t.value():t;return h||(h=new Ke),n(P,L,i,o,h)}}if(!C)return!1;return h||(h=new Ke),function(e,t,n,i,o,a){var s=2&o,l=Yt(e),c=l.length,u=Yt(t).length;if(c!=u&&!s)return!1;var h=c;for(;h--;){var d=l[h];if(!(s?d in t:fe.call(t,d)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var f=!0;a.set(e,t),a.set(t,e);var m=s;for(;++h<c;){var g=e[d=l[h]],y=t[d];if(i)var v=s?i(y,g,d,t,e,a):i(g,y,d,e,t,a);if(!(v===r?g===y||n(g,y,i,o,a):v)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(f=!1)}return a.delete(e),a.delete(t),f}(e,t,n,i,o,h)}(e,t,st,n,i,o))}function lt(e){return!(!Bt(e)||(t=e,de&&de in t))&&(jt(e)||ie(e)?ye:z).test(It(e));var t}function ct(e){return"function"==typeof e?e:null==e?$t:"object"==typeof e?Nt(e)?function(e,t){if(St(e)&&At(t))return Tt(kt(e),t);return function(n){var i=Xt(n,e);return i===r&&i===t?Kt(n,e):st(t,i,r,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Yt(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,At(i)]}return t}(e);if(1==t.length&&t[0][2])return Tt(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,i){var o=n.length,a=o,s=!i;if(null==e)return!a;for(e=Object(e);o--;){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var c=(l=n[o])[0],u=e[c],h=l[1];if(s&&l[2]){if(u===r&&!(c in e))return!1}else{var d=new Ke;if(i)var p=i(u,h,c,e,t,d);if(!(p===r?st(h,u,i,3,d):p))return!1}}return!0}(n,e,t)}}(e):tn(e)}function ut(e){if(!Bt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Et(e),n=[];for(var r in e)("constructor"!=r||!t&&fe.call(e,r))&&n.push(r);return n}function ht(e,t,n,i,o){if(e!==t){if(!Nt(t)&&!Gt(t))var a=ut(t);te(a||t,(function(s,l){if(a&&(s=t[l=s]),Bt(s))o||(o=new Ke),function(e,t,n,i,o,a,s){var l=e[n],c=t[n],u=s.get(c);if(u)return void Je(e,n,u);var h=a?a(l,c,n+"",e,t,s):r,d=h===r;d&&(h=c,Nt(c)||Gt(c)?Nt(l)?h=l:Dt(l)?h=ft(l):(d=!1,h=et(c,!0)):Vt(c)||Ot(c)?Ot(l)?h=Wt(l):!Bt(l)||i&&jt(l)?(d=!1,h=et(c,!0)):h=l:d=!1);d&&(s.set(c,h),o(h,c,i,a,s),s.delete(c));Je(e,n,h)}(e,t,l,n,ht,i,o);else{var c=i?i(e[l],s,l+"",e,t,o):r;c===r&&(c=s),Je(e,l,c)}}))}}function dt(e){return Nt(e)?e:Ct(e)}function pt(e){var t=new e.constructor(e.byteLength);return new be(t).set(new be(e)),t}function ft(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function mt(e,t,n,i){n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=i?i(n[s],e[s],s,n,e):r;Qe(n,s,l===r?e[s]:l)}return n}function gt(e,t,n,i,o,a){var s=2&o,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var h=-1,d=!0,p=1&o?new Xe:r;for(a.set(e,t),a.set(t,e);++h<l;){var f=e[h],m=t[h];if(i)var g=s?i(m,f,h,t,e,a):i(f,m,h,e,t,a);if(g!==r){if(g)continue;d=!1;break}if(p){if(!re(t,(function(e,t){if(!p.has(t)&&(f===e||n(f,e,i,o,a)))return p.add(t)}))){d=!1;break}}else if(f!==m&&!n(f,m,i,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function yt(){var e=qe.iteratee||en;return e=e===en?ct:e,arguments.length?e(arguments[0],arguments[1]):e}function vt(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function _t(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return lt(n)?n:r}var bt=Ae?ae(Ae,Object):nn,xt=function(e){return ge.call(e)};function wt(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||B.test(e))&&e>-1&&e%1==0&&e<t}function St(e,t){if(Nt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Zt(e))||(N.test(e)||!O.test(e)||null!=t&&e in Object(t))}function Et(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ue)}function At(e){return e===e&&!Bt(e)}function Tt(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Object(n)))}}(Ie&&xt(new Ie(new ArrayBuffer(1)))!=S||Pe&&xt(new Pe)!=p||Le&&xt(Le.resolve())!=g||Me&&xt(new Me)!=v||Oe&&xt(new Oe)!=x)&&(xt=function(e){var t=ge.call(e),n=t==m?e.constructor:r,i=n?It(n):r;if(i)switch(i){case De:return S;case Fe:return p;case je:return g;case ze:return v;case Be:return x}return t});var Ct=Lt((function(e){e=Ht(e);var t=[];return R.test(e)&&t.push(""),e.replace(D,(function(e,n,r,i){t.push(r?i.replace(F,"$1"):n||e)})),t}));function kt(e){if("string"==typeof e||Zt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function It(e){if(null!=e){try{return pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Pt(e,t){return(Nt(e)?te:rt)(e,yt(t,3))}function Lt(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Lt.Cache||He),n}function Mt(e,t){return e===t||e!==e&&t!==t}function Ot(e){return Dt(e)&&fe.call(e,"callee")&&(!Se.call(e,"callee")||ge.call(e)==a)}Lt.Cache=He;var Nt=Array.isArray;function Rt(e){return null!=e&&zt(e.length)&&!jt(e)}function Dt(e){return Ut(e)&&Rt(e)}var Ft=Te||rn;function jt(e){var t=Bt(e)?ge.call(e):"";return t==h||t==d}function zt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Bt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ut(e){return!!e&&"object"==typeof e}function Vt(e){if(!Ut(e)||ge.call(e)!=m||ie(e))return!1;var t=xe(e);if(null===t)return!0;var n=fe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&pe.call(n)==me}function Zt(e){return"symbol"==typeof e||Ut(e)&&ge.call(e)==b}var qt,Gt=J?(qt=J,function(e){return qt(e)}):function(e){return Ut(e)&&zt(e.length)&&!!U[ge.call(e)]};function Wt(e){return mt(e,Jt(e))}function Ht(e){return null==e?"":function(e){if("string"==typeof e)return e;if(Zt(e))return Ze?Ze.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}function Xt(e,t,n){var i=null==e?r:ot(e,t);return i===r?n:i}function Kt(e,t){return null!=e&&function(e,t,n){for(var r,i=-1,o=(t=St(t,e)?[t]:dt(t)).length;++i<o;){var a=kt(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(o=e?e.length:0)&&zt(o)&&wt(a,o)&&(Nt(e)||Ot(e))}(e,t,at)}function Yt(e){return Rt(e)?Ye(e):function(e){if(!Et(e))return Ce(e);var t=[];for(var n in Object(e))fe.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function Jt(e){return Rt(e)?Ye(e,!0):ut(e)}var Qt=function(e){return t=function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(o--,a):r,s&&function(e,t,n){if(!Bt(n))return!1;var r=typeof t;return!!("number"==r?Rt(n)&&wt(t,n.length):"string"==r&&t in n)&&Mt(n[t],e)}(n[0],n[1],s)&&(a=o<3?r:a,o=1),t=Object(t);++i<o;){var l=n[i];l&&e(t,l,i,a)}return t},n=ke(n===r?t.length-1:n,0),function(){for(var e=arguments,r=-1,i=ke(e.length-n,0),o=Array(i);++r<i;)o[r]=e[n+r];r=-1;for(var a=Array(n+1);++r<n;)a[r]=e[r];return a[n]=o,ee(t,this,a)};var t,n}((function(e,t,n){ht(e,t,n)}));function $t(e){return e}function en(e){return ct("function"==typeof e?e:et(e,!0))}function tn(e){return St(e)?(t=kt(e),function(e){return null==e?r:e[t]}):function(e){return function(t){return ot(t,e)}}(e);var t}function nn(){return[]}function rn(){return!1}qe.compact=function(e){for(var t=-1,n=e?e.length:0,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},qe.iteratee=en,qe.keys=Yt,qe.keysIn=Jt,qe.memoize=Lt,qe.merge=Qt,qe.property=tn,qe.toPlainObject=Wt,qe.clone=function(e){return et(e,!1,!0)},qe.eq=Mt,qe.forEach=Pt,qe.get=Xt,qe.hasIn=Kt,qe.identity=$t,qe.isArguments=Ot,qe.isArray=Nt,qe.isArrayLike=Rt,qe.isArrayLikeObject=Dt,qe.isBuffer=Ft,qe.isEmpty=function(e){if(Rt(e)&&(Nt(e)||"string"==typeof e||"function"==typeof e.splice||Ft(e)||Ot(e)))return!e.length;var t=xt(e);if(t==p||t==v)return!e.size;if(Re||Et(e))return!Ce(e).length;for(var n in e)if(fe.call(e,n))return!1;return!0},qe.isFunction=jt,qe.isLength=zt,qe.isObject=Bt,qe.isObjectLike=Ut,qe.isPlainObject=Vt,qe.isSymbol=Zt,qe.isTypedArray=Gt,qe.stubArray=nn,qe.stubFalse=rn,qe.toString=Ht,qe.each=Pt,qe.VERSION="4.15.0",H&&((H.exports=qe)._=qe,W._=qe)}.call(this)},1668:e=>{e.exports=function(e){for(var t=e.split("\n"),n=!0,r=!1,i=!1,o=[],a=[],s=[],l={type:"FeatureCollection",features:[]},c=1;c<t.length;c++)if(0===t[c].indexOf("END")){if(!r){o.push(a);break}r=!1,n=!0,s.length>0&&(a.push(s),s=[])}else n?(n=!1,r=!0,i=0===t[c].indexOf("!"),a.length>0&&!i&&(o.push(a),a=[])):s.push(u(t[c]));function u(e){var t=e.replace(/^\s*|\s*$/g,"").split(/\s+/);return[parseFloat(t[0]),parseFloat(t[1])]}return l.features.push({type:"Feature",properties:{},geometry:{type:function(e){return 1===e.length?"Polygon":"MultiPolygon"}(o),coordinates:function(e){return 1===e.length?e[0]:e}(o)}}),l}},1729:(e,t,n)=>{"use strict";var r=n(9165);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5192:(e,t,n)=>{e.exports=n(1729)()},9165:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},534:(e,t,n)=>{"use strict";var r=n(7313),i=n(7108);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D,F=Object.assign;function j(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case A:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function Z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ee=null;function Ae(e){if(e=_i(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Te(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function ke(e,t){return e(t)}function Ie(){}var Pe=!1;function Le(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return ke(e,t,n)}finally{Pe=!1,(null!==Se||null!==Ee)&&(Ie(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Oe=!1}function Re(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Fe=null,je=!1,ze=null,Be={onError:function(e){De=!0,Fe=e}};function Ue(e,t,n,r,i,o,a,s,l){De=!1,Fe=null,Re.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,Et,At,Tt=!1,Ct=[],kt=null,It=null,Pt=null,Lt=new Map,Mt=new Map,Ot=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void At(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){jt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==kt&&jt(kt)&&(kt=null),null!==It&&jt(It)&&(It=null),null!==Pt&&jt(Pt)&&(Pt=null),Lt.forEach(zt),Mt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Ut(kt,e),null!==It&&Ut(It,e),null!==Pt&&Ut(Pt,e),Lt.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Zt=b.ReactCurrentBatchConfig,qt=!0;function Gt(e,t,n,r){var i=_t,o=Zt.transition;Zt.transition=null;try{_t=1,Ht(e,t,n,r)}finally{_t=i,Zt.transition=o}}function Wt(e,t,n,r){var i=_t,o=Zt.transition;Zt.transition=null;try{_t=4,Ht(e,t,n,r)}finally{_t=i,Zt.transition=o}}function Ht(e,t,n,r){if(qt){var i=Kt(e,t,n,r);if(null===i)qr(e,t,r,Xt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Dt(kt,e,t,n,r,i),!0;case"dragenter":return It=Dt(It,e,t,n,r,i),!0;case"mouseover":return Pt=Dt(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Lt.set(o,Dt(Lt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Mt.set(o,Dt(Mt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&xt(o),null===(o=Kt(e,t,n,r))&&qr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Xt=null;function Kt(e,t,n,r){if(Xt=null,null!==(e=vi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(F({},pn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(vn),bn=on(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function An(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Tn),kn=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Pn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Ln),On=[9,13,27,32],Nn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Rn,Fn=u&&(!Nn||Rn&&8<Rn&&11>=Rn),jn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Xn(e){jr(e,0)}function Kn(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Qn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Kn(Hn)){var t=[];Gn(t,Hn,e,xe(e)),Le(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Hn)}function or(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function Ar(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Ar("animationend"),Cr=Ar("animationiteration"),kr=Ar("animationstart"),Ir=Ar("transitionend"),Pr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<Lr.length;Or++){var Nr=Lr[Or];Mr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Mr(Tr,"onAnimationEnd"),Mr(Cr,"onAnimationIteration"),Mr(kr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Ue.apply(this,arguments),De){if(!De)throw Error(o(198));var u=Fe;De=!1,Fe=null,je||(je=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=l}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Zr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Zr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Zr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Le((function(){var r=o,i=xe(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Tr:case Cr:case kr:l=yn;break;case Ir:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Me(f,d))&&u.push(Gr(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:bi(l),p=null==c?s:bi(c),(s=new u(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,vi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Hr(p))f++;for(p=0,m=d;m;m=Hr(m))p++;for(;0<f-p;)u=Hr(u),f--;for(;0<p-f;)d=Hr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==h&&Xr(a,h,c,u,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yn;else if(qn(s))if(Jn)g=ar;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(Nn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(v=en()):(Qt="value"in(Jt=i)?Jt.value:Jt.textContent,Vn=!0)),0<(y=Wr(r,_)).length&&(_=new bn(_,e,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Un(n))&&(_.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Nn&&Bn(e,t)?(e=en(),$t=Qt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}jr(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Me(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Me(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Me(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=Me(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var wi=[],Si=-1;function Ei(e){return{current:e}}function Ai(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ti(e,t){Si++,wi[Si]=e.current,e.current=t}var Ci={},ki=Ei(Ci),Ii=Ei(!1),Pi=Ci;function Li(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ai(Ii),Ai(ki)}function Ni(e,t,n){if(ki.current!==Ci)throw Error(o(168));Ti(ki,t),Ti(Ii,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,Z(e)||"Unknown",i));return F({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=ki.current,Ti(ki,e),Ti(Ii,Ii.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ri(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ii),Ai(ki),Ti(ki,e)):Ai(Ii),Ti(Ii,n)}var ji=null,zi=!1,Bi=!1;function Ui(e){null===ji?ji=[e]:ji.push(e)}function Vi(){if(!Bi&&null!==ji){Bi=!0;var e=0,t=_t;try{var n=ji;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,zi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He($e,Vi),i}finally{_t=t,Bi=!1}}return null}var Zi=[],qi=0,Gi=null,Wi=0,Hi=[],Xi=0,Ki=null,Yi=1,Ji="";function Qi(e,t){Zi[qi++]=Wi,Zi[qi++]=Gi,Gi=e,Wi=t}function $i(e,t,n){Hi[Xi++]=Yi,Hi[Xi++]=Ji,Hi[Xi++]=Ki,Ki=e;var r=Yi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Yi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function to(e){for(;e===Gi;)Gi=Zi[--qi],Zi[qi]=null,Wi=Zi[--qi],Zi[qi]=null;for(;e===Ki;)Ki=Hi[--Xi],Hi[Xi]=null,Ji=Hi[--Xi],Hi[Xi]=null,Yi=Hi[--Xi],Hi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=Ei(null),_o=null,bo=null,xo=null;function wo(){xo=bo=_o=null}function So(e){var t=vo.current;Ai(vo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){_o=e,xo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function To(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===_o)throw Error(o(308));bo=e,_o.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Co=null;function ko(e){null===Co?Co=[e]:Co.push(e)}function Io(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ko(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,ko(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jo(e,t,n,r){var i=e.updateQueue;Lo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=h}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=No(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,i))&&(nc(t,e,i,r),Do(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=No(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,i))&&(nc(t,e,i,r),Do(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=No(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ro(e,i,r))&&(nc(t,e,r,n),Do(t,e,r))}};function Zo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function qo(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=To(o):(i=Mi(t)?Pi:ki.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Li(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Bo,Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=To(o):(o=Mi(t)?Pi:ki.current,i.context=Li(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),jo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Bo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&Ko(o)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Nc(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case w:return(t=jc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case M:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:h(e,t,n,r,null);Xo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),io&&Qi(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Qi(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Qi(i,m),c}function g(i,s,l,c){var u=R(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=p(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),s=a(_,s,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),io&&Qi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return io&&Qi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Qi(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&Ko(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=Ho(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((o=Rc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Nc(a.type,a.key,a.props,null,r.mode,l)).ref=Ho(r,o,a),l.return=r,r=l)}return s(r);case w:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=jc(a,r.mode,l)).return=r,r=o}return s(r);case M:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(R(a))return g(r,o,a,l);Xo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Jo=Yo(!0),Qo=Yo(!1),$o={},ea=Ei($o),ta=Ei($o),na=Ei($o);function ra(e){if(e===$o)throw Error(o(174));return e}function ia(e,t){switch(Ti(na,t),Ti(ta,e),Ti(ea,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(ea),Ti(ea,t)}function oa(){Ai(ea),Ai(ta),Ai(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Ti(ta,e),Ti(ea,n))}function sa(e){ta.current===e&&(Ai(ea),Ai(ta))}var la=Ei(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function ha(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var da=b.ReactCurrentDispatcher,pa=b.ReactCurrentBatchConfig,fa=0,ma=null,ga=null,ya=null,va=!1,_a=!1,ba=0,xa=0;function wa(){throw Error(o(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ea(e,t,n,r,i,a){if(fa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),_a){a=0;do{if(_a=!1,ba=0,25<=a)throw Error(o(301));a+=1,ya=ga=null,t.updateQueue=null,da.current=cs,e=n(r,i)}while(_a)}if(da.current=as,t=null!==ga&&null!==ga.next,fa=0,ya=ga=ma=null,va=!1,t)throw Error(o(300));return e}function Aa(){var e=0!==ba;return ba=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Ca(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function ka(e,t){return"function"===typeof t?t(e):t}function Ia(e){var t=Ca(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((fa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,ma.lanes|=h,Dl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Dl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Ca(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function La(){}function Ma(e,t){var n=ma,r=Ca(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,qa(Ra.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,za(9,Na.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&fa)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,Da(t)&&Fa(e)}function Ra(e,t,n){return n((function(){Da(t)&&Fa(e)}))}function Da(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fa(e){var t=Po(e,1);null!==t&&nc(t,e,1,-1)}function ja(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return Ca().memoizedState}function Ua(e,t,n,r){var i=Ta();ma.flags|=e,i.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function Va(e,t,n,r){var i=Ca();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=za(t,n,o,r))}ma.flags|=e,i.memoizedState=za(1|t,n,o,r)}function Za(e,t){return Ua(8390656,8,e,t)}function qa(e,t){return Va(2048,8,e,t)}function Ga(e,t){return Va(4,2,e,t)}function Wa(e,t){return Va(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4,4,Ha.bind(null,t,e),n)}function Ka(){}function Ya(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&fa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Dl|=n,e.baseState=!0),t)}function $a(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{_t=n,pa.transition=r}}function es(){return Ca().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Io(e,t,n,r))){nc(n,e,r,ec()),os(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,ko(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Io(e,t,i,r))&&(nc(n,e,r,i=ec()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function is(e,t){_a=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var as={readContext:To,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:To,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:To,useEffect:Za,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ha.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ta();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ta().memoizedState=e},useState:ja,useDebugValue:Ka,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=$a.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=Ta();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&fa)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Za(Ra.bind(null,r,a,e),[e]),r.flags|=2048,za(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ta(),t=Il.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:To,useCallback:Ya,useContext:To,useEffect:qa,useImperativeHandle:Xa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Ja,useReducer:Ia,useRef:Ba,useState:function(){return Ia(ka)},useDebugValue:Ka,useDeferredValue:function(e){return Qa(Ca(),ga.memoizedState,e)},useTransition:function(){return[Ia(ka)[0],Ca().memoizedState]},useMutableSource:La,useSyncExternalStore:Ma,useId:es,unstable_isNewReconciler:!1},cs={readContext:To,useCallback:Ya,useContext:To,useEffect:qa,useImperativeHandle:Xa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Ja,useReducer:Pa,useRef:Ba,useState:function(){return Pa(ka)},useDebugValue:Ka,useDeferredValue:function(e){var t=Ca();return null===ga?t.memoizedState=e:Qa(t,ga.memoizedState,e)},useTransition:function(){return[Pa(ka)[0],Ca().memoizedState]},useMutableSource:La,useSyncExternalStore:Ma,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=No(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Gl=r),ds(0,t)},n}function ms(e,t,n){(n=No(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=No(-1,1)).tag=2,Ro(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=b.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?Qo(t,null,n,r):Jo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=Ea(e,t,n,r,o,i),n=Aa(),null===e||bs?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Mc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qs(e,t,i)}return t.flags|=1,(e=Oc(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,qs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Cs(e,t,n,r,i)}function As(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Ol,Ml),Ml|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Ml),Ml|=r;return xs(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var o=Mi(n)?Pi:ki.current;return o=Li(t,o),Ao(t,i),n=Ea(e,t,n,r,o,i),r=Aa(),null===e||bs?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qs(e,t,i))}function ks(e,t,n,r,i){if(Mi(n)){var o=!0;Di(t)}else o=!1;if(Ao(t,i),null===t.stateNode)Zs(e,t),qo(t,n,r),Wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=Li(t,c=Mi(n)?Pi:ki.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Go(t,a,r,c),Lo=!1;var d=t.memoizedState;a.state=d,jo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Ii.current||Lo?("function"===typeof u&&(Uo(t,n,u,r),l=t.memoizedState),(s=Lo||Zo(t,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yo(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Li(t,l=Mi(n)?Pi:ki.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Go(t,a,r,l),Lo=!1,d=t.memoizedState,a.state=d,jo(t,r,a,i);var f=t.memoizedState;s!==h||d!==f||Ii.current||Lo?("function"===typeof p&&(Uo(t,n,p,r),f=t.memoizedState),(c=Lo||Zo(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,o,i)}function Is(e,t,n,r,i,o){Ts(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),qs(e,t,o);r=t.stateNode,_s.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),ia(e,t.containerInfo)}function Ls(e,t,n,r,i){return fo(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Ms,Os,Ns,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=la.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(la,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Dc(l,i,0,null),e=Rc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Rs,e):js(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=hs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(a=Rc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Rs,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=hs(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),nc(r,e,i,-1))}return mc(),zs(e,t,s,r=hs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Hi[Xi++]=Yi,Hi[Xi++]=Ji,Hi[Xi++]=Ki,Yi=e.id,Ji=e.overflow,Ki=t),(t=js(t,r.children)).flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Oc(r,s):(s=Rc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function js(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function Us(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(la,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Mi(t.type)&&Oi(),Ws(t),null;case 3:return r=t.stateNode,oa(),Ai(Ii),Ai(ki),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ws(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=ra(ea.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)zr(Rr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":W(r),$(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Ms(e,t),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)zr(Rr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=K(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&_(e,a,u,l))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ns(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ws(t),null;case 13:if(Ai(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return oa(),null===e&&Vr(t.stateNode.containerInfo),Ws(t),null;case 10:return So(t.type._context),Ws(t),null;case 19:if(Ai(la),null===(a=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Vl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(t),null}else 2*Je()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=la.current,Ti(la,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Mi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ai(Ii),Ai(ki),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ai(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(la),null;case 4:return oa(),null;case 10:return So(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=K(e,i),r=K(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ns=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||$s(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ys&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,dl(e,t,n),Ys=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),_e(l,s);var u=_e(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(u=Ys)||h,ml(t,e),Ys=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$s(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:$s(p,p.return);break;case 22:if(null!==p.memoizedState){xl(d);continue}}null!==f?(f.return=p,Qs=f):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qs=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ks;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Ks;var c=Ys;if(Ks=a,(Ys=l)&&!c)for(Qs=i;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Qs=l):wl(i);for(;null!==o;)Qs=o,_l(o,t,n),o=o.sibling;Qs=i,Ks=s,Ys=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&il(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function xl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Sl,El=Math.ceil,Al=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,kl=0,Il=null,Pl=null,Ll=0,Ml=0,Ol=Ei(0),Nl=0,Rl=null,Dl=0,Fl=0,jl=0,zl=null,Bl=null,Ul=0,Vl=1/0,Zl=null,ql=!1,Gl=null,Wl=null,Hl=!1,Xl=null,Kl=0,Yl=0,Jl=null,Ql=-1,$l=0;function ec(){return 0!==(6&kl)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Ll?Ll&-Ll:null!==go.transition?(0===$l&&($l=mt()),$l):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(o(185));yt(e,n,r),0!==(2&kl)&&e===Il||(e===Il&&(0===(2&kl)&&(Fl|=n),4===Nl&&sc(e,Ll)),rc(e,r),1===n&&0===kl&&0===(1&t.mode)&&(Vl=Je()+500,zi&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Il?Ll:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai((function(){0===(6&kl)&&Vi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ql=-1,$l=0,0!==(6&kl))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=kl;kl|=2;var a=fc();for(Il===e&&Ll===t||(Zl=null,Vl=Je()+500,dc(e,t));;)try{vc();break}catch(l){pc(e,l)}wo(),Al.current=a,kl=i,null!==Pl?t=0:(Il=null,Ll=0,t=Nl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Rl,dc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=ft(e))&&(r=a,t=oc(e,a))),1===t))throw n=Rl,dc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Bl,Zl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bl,Zl),t);break}xc(e,Bl,Zl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bl,Zl),r);break}xc(e,Bl,Zl);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&kl))throw Error(o(327));wc();var t=dt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Rl,dc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Zl),rc(e,Je()),null}function cc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(Vl=Je()+500,zi&&Vi())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&kl)&&wc();var t=kl;kl|=1;var n=Cl.transition,r=_t;try{if(Cl.transition=null,_t=1,e)return e()}finally{_t=r,Cl.transition=n,0===(6&(kl=t))&&Vi()}}function hc(){Ml=Ol.current,Ai(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Ai(Ii),Ai(ki),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ai(la);break;case 10:So(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Pl=e=Oc(e.current,null),Ll=Ml=t,Nl=0,Rl=null,jl=Fl=Dl=0,Bl=zl=null,null!==Co){for(t=0;t<Co.length;t++)if(null!==(r=(n=Co[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Co=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(wo(),da.current=as,va){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}va=!1}if(fa=0,ya=ga=ma=null,_a=!1,ba=0,Tl.current=null,null===n||null===n.return){Nl=1,Rl=t,Pl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&gs(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,t),mo(us(c,l));break e}}a=c=us(c,l),4!==Nl&&(Nl=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,fs(0,c,t));break e;case 1:l=c;var v=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Wl||!Wl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var e=Al.current;return Al.current=as,null===e?as:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Il||0===(268435455&Dl)&&0===(268435455&Fl)||sc(Il,Ll)}function gc(e,t){var n=kl;kl|=2;var r=fc();for(Il===e&&Ll===t||(Zl=null,dc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(wo(),kl=n,Al.current=r,null!==Pl)throw Error(o(261));return Il=null,Ll=0,Nl}function yc(){for(;null!==Pl;)_c(Pl)}function vc(){for(;null!==Pl&&!Ke();)_c(Pl)}function _c(e){var t=Sl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hs(n,t,Ml)))return void(Pl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Nl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Nl&&(Nl=5)}function xc(e,t,n){var r=_t,i=Cl.transition;try{Cl.transition=null,_t=1,function(e,t,n,r){do{wc()}while(null!==Xl);if(0!==(6&kl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(Pl=Il=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Ic(tt,(function(){return wc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=_t;_t=1;var l=kl;kl|=4,Tl.current=null,function(e,t){if(ei=qt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),kl=l,_t=s,Cl.transition=a}else e.current=n;if(Hl&&(Hl=!1,Xl=e,Kl=i),0===(a=e.pendingLanes)&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Gl,Gl=null,e;0!==(1&Kl)&&0!==e.tag&&wc(),0!==(1&(a=e.pendingLanes))?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Vi()}(e,t,n,r)}finally{Cl.transition=i,_t=r}return null}function wc(){if(null!==Xl){var e=bt(Kl),t=Cl.transition,n=_t;try{if(Cl.transition=null,_t=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Kl=0,0!==(6&kl))throw Error(o(331));var i=kl;for(kl|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(ol(h),h===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qs=v;break e}Qs=a.return}}var _=e.current;for(Qs=_;null!==Qs;){var b=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Qs=b;else e:for(s=_;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Ec(l,l.return,w)}if(l===s){Qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qs=x;break e}Qs=l.return}}if(kl=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{_t=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Ro(e,t=fs(0,t=us(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Ro(t,e=ms(t,e=us(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Ll&n)===n&&(4===Nl||3===Nl&&(130023424&Ll)===Ll&&500>Je()-Ul?dc(e,0):jl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Po(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Ic(e,t){return He(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Pc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Mc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Rc(n.children,i,a,t);case E:s=8,i|=8;break;case A:return(e=Lc(12,n,t,2|i)).elementType=A,e.lanes=a,e;case I:return(e=Lc(13,n,t,i)).elementType=I,e.lanes=a,e;case P:return(e=Lc(19,n,t,i)).elementType=P,e.lanes=a,e;case O:return Dc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case C:s=9;break e;case k:s=11;break e;case L:s=14;break e;case M:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Lc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Lc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Uc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vc(e){if(!e)return Ci;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Ri(e,n,t)}return t}function Zc(e,t,n,r,i,o,a,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=Vc(null),n=e.current,(o=No(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ro(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=No(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ro(i,t,a))&&(nc(e,i,a,o),Do(e,i,a)),a}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),fo();break;case 5:aa(t);break;case 1:Mi(t.type)&&Di(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ti(la,1&la.current),null!==(e=qs(e,t,n))?e.sibling:null);Ti(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n)}return qs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var i=Li(t,ki.current);Ao(t,n),i=Ea(null,t,r,e,i,n);var a=Aa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Wo(t,r,e,n),t=Is(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===L)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),jo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ls(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=Ls(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=qs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ts(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ti(vo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=qs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=No(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Eo(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=To(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Ss(e,t,r,i=yo(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Zs(e,t),t.tag=1,Mi(r)?(e=!0,Di(t)):e=!1,Ao(t,n),qo(t,r,i),Wo(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return As(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Gc(a);s.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Gc(a);o.call(e)}}var a=Zc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[fi]=a.current,Vr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[fi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Gc(a)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&kl)&&(Vl=Je()+500,Vi()))}break;case 13:uc((function(){var t=Po(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},wt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Po(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},Et=function(){return _t},At=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));H(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,Ie=uc;var tu={usingClientEntryPoint:!1,Events:[_i,bi,xi,Te,Ce,cc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return Uc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Zc(t,null,e,1,null!=n?n:null,i,0,a,s),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:(e,t,n)=>{"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},1467:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(w);else{var t=r(u);null!==t&&N(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var o=p;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&N(x,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,A=null,T=-1,C=5,k=-1;function I(){return!(t.unstable_now()-k<C)}function P(){if(null!==A){var e=t.unstable_now();k=e;var n=!0;try{n=A(!0,e)}finally{n?S():(E=!1,A=null)}}else E=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,M=L.port2;L.port1.onmessage=P,S=function(){M.postMessage(null)}}else S=function(){y(P,0)};function O(e){A=e,E||(E=!0,S())}function N(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,N(x,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,O(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7108:(e,t,n)=>{"use strict";e.exports=n(1467)},4561:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return h.default}}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(7313)),o=f(n(5192)),a=f(n(1168)),s=f(n(3061)),l=n(1407),c=n(9873),u=n(3579),h=f(n(4303)),d=f(n(7776)),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(u,e);var t,n,r,o=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),k(T(t=o.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,c.createDraggableData)(T(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),k(T(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var r=(0,c.createDraggableData)(T(t),n),i={x:r.x,y:r.y};if(t.props.bounds){var o=i.x,a=i.y;i.x+=t.state.slackX,i.y+=t.state.slackY;var s=b((0,c.getBoundPosition)(T(t),i.x,i.y),2),l=s[0],u=s[1];i.x=l,i.y=u,i.slackX=t.state.slackX+(o-i.x),i.slackY=t.state.slackY+(a-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-t.state.x,r.deltaY=i.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(i)})),k(T(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(T(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var i=t.props.position,o=i.x,a=i.y;r.x=o,r.y=a}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:_({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=u,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:_({},n)})}}],(n=[{key:"componentDidMount",value:function(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:a.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),r=t.defaultPosition,o=t.defaultClassName,a=t.defaultClassNameDragging,u=t.defaultClassNameDragged,d=t.position,f=t.positionOffset,m=(t.scale,y(t,p)),v={},b=null,x=!Boolean(d)||this.state.dragging,w=d||r,S={x:(0,c.canDragX)(this)&&x?this.state.x:w.x,y:(0,c.canDragY)(this)&&x?this.state.y:w.y};this.state.isElementSVG?b=(0,l.createSVGTransform)(S,f):v=(0,l.createCSSTransform)(S,f);var E=(0,s.default)(n.props.className||"",o,(k(e={},a,this.state.dragging),k(e,u,this.state.dragged),e));return i.createElement(h.default,g({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(n),{className:E,style:_(_({},n.props.style),v),transform:b}))}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Component);t.default=I,k(I,"displayName","Draggable"),k(I,"propTypes",_(_({},h.default.propTypes),{},{axis:o.default.oneOf(["both","x","y","none"]),bounds:o.default.oneOfType([o.default.shape({left:o.default.number,right:o.default.number,top:o.default.number,bottom:o.default.number}),o.default.string,o.default.oneOf([!1])]),defaultClassName:o.default.string,defaultClassNameDragging:o.default.string,defaultClassNameDragged:o.default.string,defaultPosition:o.default.shape({x:o.default.number,y:o.default.number}),positionOffset:o.default.shape({x:o.default.oneOfType([o.default.number,o.default.string]),y:o.default.oneOfType([o.default.number,o.default.string])}),position:o.default.shape({x:o.default.number,y:o.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),k(I,"defaultProps",_(_({},h.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},4303:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(7313)),o=h(n(5192)),a=h(n(1168)),s=n(1407),l=n(9873),c=n(3579),u=h(n(7776));function h(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={start:"touchstart",move:"touchmove",stop:"touchend"},E={start:"mousedown",move:"mousemove",stop:"mouseup"},A=E,T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,r,o=v(c);function c(){var e;m(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(b(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),w(b(e),"mounted",!1),w(b(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"===typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,s.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,s.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var i=(0,s.getTouchIdentifier)(t);e.setState({touchIdentifier:i});var o=(0,l.getControlPosition)(t,i,b(e));if(null!=o){var a=o.x,c=o.y,h=(0,l.createCoreData)(b(e),a,c);(0,u.default)("DraggableCore: handleDragStart: %j",h),(0,u.default)("calling",e.props.onStart),!1!==e.props.onStart(t,h)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:a,lastY:c}),(0,s.addEvent)(r,A.move,e.handleDrag),(0,s.addEvent)(r,A.stop,e.handleDragStop))}}})),w(b(e),"handleDrag",(function(t){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,b(e));if(null!=n){var r=n.x,i=n.y;if(Array.isArray(e.props.grid)){var o=r-e.state.lastX,a=i-e.state.lastY,s=p((0,l.snapToGrid)(e.props.grid,o,a),2);if(o=s[0],a=s[1],!o&&!a)return;r=e.state.lastX+o,i=e.state.lastY+a}var c=(0,l.createCoreData)(b(e),r,i);if((0,u.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:r,lastY:i});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(d){var h=document.createEvent("MouseEvents");h.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(h)}}})),w(b(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,b(e));if(null!=n){var r=n.x,i=n.y;if(Array.isArray(e.props.grid)){var o=r-e.state.lastX||0,a=i-e.state.lastY||0,c=p((0,l.snapToGrid)(e.props.grid,o,a),2);o=c[0],a=c[1],r=e.state.lastX+o,i=e.state.lastY+a}var h=(0,l.createCoreData)(b(e),r,i);if(!1===e.props.onStop(t,h)||!1===e.mounted)return!1;var d=e.findDOMNode();d&&e.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(d.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",h),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),d&&((0,u.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(d.ownerDocument,A.move,e.handleDrag),(0,s.removeEvent)(d.ownerDocument,A.stop,e.handleDragStop))}}})),w(b(e),"onMouseDown",(function(t){return A=E,e.handleDragStart(t)})),w(b(e),"onMouseUp",(function(t){return A=E,e.handleDragStop(t)})),w(b(e),"onTouchStart",(function(t){return A=S,e.handleDragStart(t)})),w(b(e),"onTouchEnd",(function(t){return A=S,e.handleDragStop(t)})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,s.addEvent)(e,S.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,s.removeEvent)(t,E.move,this.handleDrag),(0,s.removeEvent)(t,S.move,this.handleDrag),(0,s.removeEvent)(t,E.stop,this.handleDragStop),(0,s.removeEvent)(t,S.stop,this.handleDragStop),(0,s.removeEvent)(e,S.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:a.default.findDOMNode(this)}},{key:"render",value:function(){return i.cloneElement(i.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.Component);t.default=T,w(T,"displayName","DraggableCore"),w(T,"propTypes",{allowAnyClick:o.default.bool,disabled:o.default.bool,enableUserSelectHack:o.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:o.default.arrayOf(o.default.number),handle:o.default.string,cancel:o.default.string,nodeRef:o.default.object,onStart:o.default.func,onDrag:o.default.func,onStop:o.default.func,onMouseDown:o.default.func,scale:o.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),w(T,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},9461:(e,t,n)=>{"use strict";var r=n(4561),i=r.default,o=r.DraggableCore;e.exports=i,e.exports.default=i,e.exports.DraggableCore=o},1407:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=p,t.addEvent=function(e,t,n,r){if(!e)return;var i=l({capture:!0},r);e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&p(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){var n=d(e,t,"px");return c({},(0,o.browserPrefixToKey)("transform",o.default),n)},t.createSVGTransform=function(e,t){return d(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,i.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,i.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=d,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,i.int)(n.paddingTop),t-=(0,i.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,i.int)(n.paddingLeft),t-=(0,i.int)(n.paddingRight)},t.matchesSelector=h,t.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(h(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:o}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,i.int)(n.borderTopWidth),t+=(0,i.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,i.int)(n.borderLeftWidth),t+=(0,i.int)(n.borderRightWidth)},t.removeClassName=f,t.removeEvent=function(e,t,n,r){if(!e)return;var i=l({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&f(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(n){}};var i=n(3579),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(n(4580));function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u="";function h(e,t){return u||(u=(0,i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,i.isFunction)(e[t])}))),!!(0,i.isFunction)(e[u])&&e[u](t)}function d(e,t,n){var r=e.x,i=e.y,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){var a="".concat("string"===typeof t.x?t.x:t.x+n),s="".concat("string"===typeof t.y?t.y:t.y+n);o="translate(".concat(a,", ").concat(s,")")+o}return o}function p(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function f(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},4580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=r;var n=["Moz","Webkit","O","ms"];function r(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";var o=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!o)return"";if(r in o)return"";for(var a=0;a<n.length;a++)if(i(r,n[a])in o)return n[a];return""}function i(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var o=r();t.default=o},7776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},9873:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var i=e.state,a=!(0,r.isNum)(i.lastX),s=o(e);return a?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-i.lastX,deltaY:n-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var a=e.props.bounds;a="string"===typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);var s=o(e);if("string"===typeof a){var l,c=s.ownerDocument,u=c.defaultView;if(!((l="parent"===a?s.parentNode:c.querySelector(a))instanceof u.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');var h=l,d=u.getComputedStyle(s),p=u.getComputedStyle(h);a={left:-s.offsetLeft+(0,r.int)(p.paddingLeft)+(0,r.int)(d.marginLeft),top:-s.offsetTop+(0,r.int)(p.paddingTop)+(0,r.int)(d.marginTop),right:(0,i.innerWidth)(h)-(0,i.outerWidth)(s)-s.offsetLeft+(0,r.int)(p.paddingRight)-(0,r.int)(d.marginRight),bottom:(0,i.innerHeight)(h)-(0,i.outerHeight)(s)-s.offsetTop+(0,r.int)(p.paddingBottom)-(0,r.int)(d.marginBottom)}}(0,r.isNum)(a.right)&&(t=Math.min(t,a.right));(0,r.isNum)(a.bottom)&&(n=Math.min(n,a.bottom));(0,r.isNum)(a.left)&&(t=Math.max(t,a.left));(0,r.isNum)(a.top)&&(n=Math.max(n,a.top));return[t,n]},t.getControlPosition=function(e,t,n){var r="number"===typeof t?(0,i.getTouch)(e,t):null;if("number"===typeof t&&!r)return null;var a=o(n),s=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,i.offsetXYFromParent)(r||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]};var r=n(3579),i=n(1407);function o(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},3579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"===typeof e&&!isNaN(e)}},1624:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=h,t.Memo=f},6214:(e,t,n)=>{"use strict";e.exports=n(1624)},10:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(7313).createContext(null)},5918:(e,t,n)=>{"use strict";var r=n(7313),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},306:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+k(l,0):o,x(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+k(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+k(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},O={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},7313:(e,t,n)=>{"use strict";e.exports=n(306)},6417:(e,t,n)=>{"use strict";e.exports=n(5918)},3284:function(e){var t,n;t=this,n=function(){var e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function t(t){return t.match(e)||[]}function n(e){return{language:(e=t(e))[1]||"",extlang:e[2]||"",script:e[3]||"",region:e[4]||""}}function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}function i(e,i,o){function a(n){return t(n)[e]||""}r(a,"pattern",i),r(n,o,a)}return i(1,/^[a-zA-Z]{2,3}$/,"language"),i(2,/^[a-zA-Z]{3}$/,"extlang"),i(3,/^[a-zA-Z]{4}$/,"script"),i(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(n,"split",(function(e){return t(e).filter((function(e,t){return e&&t}))})),n},e.exports?e.exports=n():t.subtag=n()},3215:(e,t,n)=>{"use strict";var r=n(1009);e.exports=r,"undefined"!==typeof window&&(window.Suggestions=r)},908:e=>{"use strict";var t=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};t.prototype.show=function(){this.element.style.display="block"},t.prototype.hide=function(){this.element.style.display="none"},t.prototype.add=function(e){this.items.push(e)},t.prototype.clear=function(){this.items=[],this.active=0},t.prototype.isEmpty=function(){return!this.items.length},t.prototype.isVisible=function(){return"block"===this.element.style.display},t.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()}else this.hide()},t.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))},t.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},t.prototype.move=function(e){this.active=e,this.draw()},t.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},t.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},e.exports=t},1009:(e,t,n)=>{"use strict";var r=n(5307),i=n(1507),o=n(908),a=function(e,t,n){return n=n||{},this.options=r({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(e){this.handleKeyUp(e.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(e){this.handleKeyDown(e)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(e){this.handlePaste(e)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};a.prototype.handleKeyUp=function(e){40!==e&&38!==e&&27!==e&&13!==e&&9!==e&&this.handleInputChange(this.el.value)},a.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},a.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},a.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout((function(){t.handleInputChange(e.target.value)}),100)}},a.prototype.handleInputChange=function(e){this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}.bind(this))},a.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},a.prototype.update=function(e){this.data=e,this.handleKeyUp()},a.prototype.clear=function(){this.data=[],this.list.clear()},a.prototype.normalize=function(e){return e=e.toLowerCase()},a.prototype.match=function(e,t){return e.indexOf(t)>-1},a.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")},a.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(e){return this.getItemValue(e)}.bind(this)};e(this.options.filter?i.filter(this.query,this.data,t).map(function(e){return{original:e.original,string:this.render(e.original,e.string)}}.bind(this)):this.data.map(function(e){return{original:e,string:this.render(e)}}.bind(this)))},a.prototype.getItemValue=function(e){return e},a.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),i=r.lastIndexOf(this.query);i>-1;){var o=i+this.query.length;n=n.slice(0,i)+"<strong>"+n.slice(i,o)+"</strong>"+n.slice(o),i=r.slice(0,i).lastIndexOf(this.query)}return n},a.prototype.renderError=function(e){this.list.drawError(e)},e.exports=a},9186:(e,t,n)=>{"use strict";function r(e){return e}function i(e){if(null==e)return r;var t,n,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,r){r||(t=n=0);var l=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*i+a,u[1]=(n+=e[1])*o+s;l<c;)u[l]=e[l],++l;return u}}function o(e){var t,n=i(e.transform),r=1/0,o=r,a=-r,s=-r;function l(e){(e=n(e))[0]<r&&(r=e[0]),e[0]>a&&(a=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1])}function c(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(c);break;case"Point":l(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(l)}}for(t in e.arcs.forEach((function(e){for(var t,i=-1,l=e.length;++i<l;)(t=n(e[i],i))[0]<r&&(r=t[0]),t[0]>a&&(a=t[0]),t[1]<o&&(o=t[1]),t[1]>s&&(s=t[1])})),e.objects)c(e.objects[t]);return[r,o,a,s]}function a(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return s(e,t)}))}:s(e,t)}function s(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=l(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function l(e,t){var n=i(e.transform),r=e.arcs;function o(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function a(e){return n(e)}function s(e){for(var t=[],n=0,r=e.length;n<r;++n)o(e[n],t);return t.length<2&&t.push(t[0]),t}function l(e){for(var t=s(e);t.length<4;)t.push(t[0]);return t}function c(e){return e.map(l)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=a(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(a);break;case"LineString":n=s(t.arcs);break;case"MultiLineString":n=t.arcs.map(s);break;case"Polygon":n=c(t.arcs);break;case"MultiPolygon":n=t.arcs.map(c);break;default:return null}return{type:r,coordinates:n}}(t)}function c(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],l=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=l,o=r[l]){delete r[o.start];var c=o===n?n:n.concat(o);r[c.start=n.start]=i[c.end=o.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var u=o===n?n:o.concat(n);r[u.start=o.start]=i[u.end=n.end]=u}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=l]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o}function u(e){return l(e,h.apply(this,arguments))}function h(e,t,n){var r,i,o;if(arguments.length>1)r=d(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:c(e,r)}}function d(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function l(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(l)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}function p(e){return l(e,f.apply(this,arguments))}function f(e,t){var n={},r=[],i=[];function o(e){e.forEach((function(t){t.forEach((function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)}))})),r.push(e)}function a(t){return function(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[0]*i[1]-t[1]*i[0];return Math.abs(o)}(l(e,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach((function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":o(t.arcs);break;case"MultiPolygon":t.arcs.forEach(o)}})),r.forEach((function(e){if(!e._){var t=[],r=[e];for(e._=1,i.push(t);e=r.pop();)t.push(e),e.forEach((function(e){e.forEach((function(e){n[e<0?~e:e].forEach((function(e){e._||(e._=1,r.push(e))}))}))}))}})),r.forEach((function(e){delete e._})),{type:"MultiPolygon",arcs:i.map((function(t){var r,i=[];if(t.forEach((function(e){e.forEach((function(e){e.forEach((function(e){n[e<0?~e:e].length<2&&i.push(e)}))}))})),(r=(i=c(e,i)).length)>1)for(var o,s,l=1,u=a(i[0]);l<r;++l)(o=a(i[l]))>u&&(s=i[0],i[0]=i[l],i[l]=s,u=o);return i})).filter((function(e){return e.length>0}))}}function m(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function g(e){var t={},n=e.map((function(){return[]}));function r(e,n){e.forEach((function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]}))}function i(e,t){e.forEach((function(e){r(e,t)}))}var o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach((function(e){i(e,t)}))}};for(var a in e.forEach((function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach((function(t){e(t,n)})):t.type in o&&o[t.type](t.arcs,n)})),t)for(var s=t[a],l=s.length,c=0;c<l;++c)for(var u=c+1;u<l;++u){var h,d=s[c],p=s[u];(h=n[d])[a=m(h,p)]!==p&&h.splice(a,0,p),(h=n[p])[a=m(h,d)]!==d&&h.splice(a,0,d)}return n}function y(e){if(null==e)return r;var t,n,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,r){r||(t=n=0);var l=2,c=e.length,u=new Array(c),h=Math.round((e[0]-a)/i),d=Math.round((e[1]-s)/o);for(u[0]=h-t,t=h,u[1]=d-n,n=d;l<c;)u[l]=e[l],++l;return u}}function v(e,t){if(e.transform)throw new Error("already quantized");if(t&&t.scale)l=e.bbox;else{if(!((n=Math.floor(t))>=2))throw new Error("n must be \u22652");var n,r=(l=e.bbox||o(e))[0],i=l[1],a=l[2],s=l[3];t={scale:[a-r?(a-r)/(n-1):1,s-i?(s-i)/(n-1):1],translate:[r,i]}}var l,c,u=y(t),h=e.objects,d={};function p(e){return u(e)}function f(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(f)};break;case"Point":t={type:"Point",coordinates:p(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(p)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}for(c in h)d[c]=f(h[c]);return{type:"Topology",bbox:l,transform:t,objects:d,arcs:e.arcs.map((function(e){var t,n=0,r=1,i=e.length,o=new Array(i);for(o[0]=u(e[0],0);++n<i;)((t=u(e[n],n))[0]||t[1])&&(o[r++]=t);return 1===r&&(o[r++]=[0,0]),o.length=r,o}))}}n.r(t),n.d(t,{bbox:()=>o,feature:()=>a,merge:()=>p,mergeArcs:()=>f,mesh:()=>u,meshArcs:()=>h,neighbors:()=>g,quantize:()=>v,transform:()=>i,untransform:()=>y})},7762:e=>{"use strict";function t(e){return Object.prototype.toString.call(e)}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)}var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},o=Object.prototype.hasOwnProperty||function(e,t){return t in e};function a(e){if("object"===typeof e&&null!==e){var o;if(n(e))o=[];else if("[object Date]"===t(e))o=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===t(e)}(e))o=new RegExp(e);else if(function(e){return"[object Error]"===t(e)}(e))o={message:e.message};else if(function(e){return"[object Boolean]"===t(e)}(e)||function(e){return"[object Number]"===t(e)}(e)||function(e){return"[object String]"===t(e)}(e))o=Object(e);else if(Object.create&&Object.getPrototypeOf)o=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)o={};else{var a=e.constructor&&e.constructor.prototype||e.__proto__||{},s=function(){};s.prototype=a,o=new s}return r(i(e),(function(t){o[t]=e[t]})),o}return e}function s(e,t,s){var l=[],c=[],u=!0;return function e(h){var d=s?a(h):h,p={},f=!0,m={node:d,node_:h,path:[].concat(l),parent:c[c.length-1],parents:c,key:l[l.length-1],isRoot:0===l.length,level:l.length,circular:null,update:function(e,t){m.isRoot||(m.parent.node[m.key]=e),m.node=e,t&&(f=!1)},delete:function(e){delete m.parent.node[m.key],e&&(f=!1)},remove:function(e){n(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],e&&(f=!1)},keys:null,before:function(e){p.before=e},after:function(e){p.after=e},pre:function(e){p.pre=e},post:function(e){p.post=e},stop:function(){u=!1},block:function(){f=!1}};if(!u)return m;function g(){if("object"===typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=i(m.node)),m.isLeaf=0===m.keys.length;for(var e=0;e<c.length;e++)if(c[e].node_===h){m.circular=c[e];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}g();var y=t.call(m,m.node);return void 0!==y&&m.update&&m.update(y),p.before&&p.before.call(m,m.node),f?("object"!==typeof m.node||null===m.node||m.circular||(c.push(m),g(),r(m.keys,(function(t,n){l.push(t),p.pre&&p.pre.call(m,m.node[t],t);var r=e(m.node[t]);s&&o.call(m.node,t)&&(m.node[t]=r.node),r.isLast=n===m.keys.length-1,r.isFirst=0===n,p.post&&p.post.call(m,r),l.pop()})),c.pop()),p.after&&p.after.call(m,m.node),m):m}(e).node}function l(e){this.value=e}function c(e){return new l(e)}l.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!o.call(t,r))return;t=t[r]}return t},l.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!o.call(t,r))return!1;t=t[r]}return!0},l.prototype.set=function(e,t){for(var n=this.value,r=0;r<e.length-1;r++){var i=e[r];o.call(n,i)||(n[i]={}),n=n[i]}return n[e[r]]=t,t},l.prototype.map=function(e){return s(this.value,e,!0)},l.prototype.forEach=function(e){return this.value=s(this.value,e,!1),this.value},l.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach((function(t){this.isRoot&&n||(r=e.call(this,r,t))})),r},l.prototype.paths=function(){var e=[];return this.forEach((function(){e.push(this.path)})),e},l.prototype.nodes=function(){var e=[];return this.forEach((function(){e.push(this.node)})),e},l.prototype.clone=function(){var e=[],t=[];return function n(o){for(var s=0;s<e.length;s++)if(e[s]===o)return t[s];if("object"===typeof o&&null!==o){var l=a(o);return e.push(o),t.push(l),r(i(o),(function(e){l[e]=n(o[e])})),e.pop(),t.pop(),l}return o}(this.value)},r(i(l.prototype),(function(e){c[e]=function(t){var n=[].slice.call(arguments,1),r=new l(t);return r[e].apply(r,n)}})),e.exports=c},1531:(e,t,n)=>{"use strict";var r=n(7313);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),a((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5531:(e,t,n)=>{"use strict";var r=n(7313),i=n(1239);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var p=a(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=p}),[p]),u(p),p}},1239:(e,t,n)=>{"use strict";e.exports=n(1531)},7058:(e,t,n)=>{"use strict";e.exports=n(5531)},5307:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)t.call(r,i)&&(e[i]=r[i])}return e};var t=Object.prototype.hasOwnProperty},4408:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/togeojson.f344f8cfee7f33ed6983.cjs"},8987:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAAF+CAMAAAD5rFIjAAAAM1BMVEVRmeX6w5DVqIBAkuf///9KMitwQTPuuYo7T1zu7u87IxzBlnOWb1hgd5L+T2290OOHrtddWR9FAAAaxklEQVR42uydiZqjKhCFC4wYlfn0/Z92WBUFlVVJOvS9M91x2uXP8VQBJYHXtvXb9tuashW+4DLYdkxa2r9+cAtsHckwtMP0g5t/68TRtoOCa6v6Bzd26zS2HC2DS+SWaaRk+sFN3zpRJlqBlsEdXxwtZawH+oMbu1W+Mo2kXchy4QrY4hXGefnFaXr94HpsfWms/M7nYBeyynGpdAj+/erGXNE/uOfJlsSKOdYdV20K2nyliHUO0TKP+ME93NpzqWqtcqx7sLyRf2QBPmCR+A5Kxj+4L3uL0CklSqmDC6kpXeN7ZhvtivpnC0b+z5Qqbv5VqW6xnpE2Al07/eDKVwRXffMHEj3gTH/ZggBr5QAZ2A6/VExn/23uxjKHJzsRz0ewYmTbTX/iAfU8DdfImorAnf4wXJ3qtz+4ube+Xrgo2j9sC3oktihci+7fgPvqaWm0qvv79+DygZb2jjaQ/q/B7clwD1veA8Z/C+5dsrWt4evh3uK2B9bw7XCn9l60anDsT8Adh9vZGjnZd8OlT7Bdjfeb4bIsoX2mDdJ4vxhu3z7FVhvvrXBvnWuYnmTr6gx/z2D502xvH2q4Ee7zbB10vwTuCz/P1h7I+RK4Uw1s5Xzw18HtK2G7c4bvgEsqYbuj+xVwaTVstzNr3wAX18SWGVT/RXBrCWZ2UPsCuKQutsx28dfAHStjaxjDx8O9Nwvzq+XTxvDxcG/LFCRXQkh7yVdPTXw63GnwQCLKcYfWS+P6Xw66PlqXSbeE0hEjhDp6uaM7xs6Lj+deDY8PjAivzTdeENDM/7cIjd0xkTKejOg4Ytx1HeJN/HU5vawqdz97sPwqxR0oUo3B6XCH923k/+kv3RTHbevELkRDiHpI9/Phngp34GwZC8FFfuPX5O+gziRqtmu68mmJj4Z7IVzJtkRD3VVyLaT72XDfw5l4irFldK+yaz5h+dFwz1OFoSBbRvfSGPCHwz27wLJsr22X+8IHwz3tnA2kKFtuu+d0h6F/fS7c1+vfGduuLFsPuv8+Fu6rn+A4nA0El2YrneHMl94wfSjcCZrmrCK5PFtB97Sr1jQwfSDcfmYnfugKQzvewZbTPesID/+YAOb+0+BytHDsCsNNbDldfNybYHBhg/cT4DJHAN5OOr3dbY2HteHQdHlbvaF+uNxsxUkfuELRjlmg8YKkq/FWXuUozRZO4A7ME+5kK4z3wBoGdabSGyofLOfpl0Z74Aq3xbIN3YNhHGG6oL0hd58iL1xTtgdwn2B73BdWpruKt1q4W9kyV3guv/XvT4BJN3OfIqtywZSt03If0q0y3gu4Am9fJ9ytbN1Z7vAY2wNnGLanDFvxVgN3bnZswTnI2HVV0TUi2uK81cG1ZOuCW3yQMYLu2zptQ7x1wJ0am61luY8Fs5OJtcGGm6/DlgVuPzvYOuCOD7NldK0HMxxw16SsArguS3DEM2YK3eNtbwxDC066UrzPwz1gC+/aTMFtDM5zV9bwOFynJTji2bOZgjHjvjMGOKDLs4aH4fYHsmVtqFC4PGPYSfff0fnzDsWjcKdjtnu4dQiXx7ThNNHdWsODVY5nbPfJAq4E7i6mncCF/VjDrYPlU3PMdge3GuHu07EzuMx4p6fgzidod5nYgwM2DrrEF+62M3wn3HO2O7ikHrbbEj1XF22Dd34A7kma4MjEhrEmuMj0hQu4YIxC3gX3ki1s87CuIribkHalXJPuTXCv2UKl4czKxi7hrnTvgevBdgsX1wXX6AMPLXjTvQXu5MEW7i1oTEh1wZvuHXC92P6r1xV2+QJ40Z3ugevF1oQ7tLgyuF1n5AvgTbc83N6L7QYuqY6t2Y8AT7p9ebiebM3eb3WusDVdiKWbHa4v2w3c+lzBNF3wphs6SBYI15utAbdCV2DJSzhcS7u5qxy92Zpw63MFRvewLMSvJ1xgsNyfrQl3rBHuEtEC4LLLLwd39me7wq1sXMGKaCFwIWwEEvKNMR4pt0LLNSNaGNygEcgAuEFsDeXSL4K70W5GuFMQW0O5Y5VwcRsHF5opP9zT+bITuHVarjGRFgy3mXLDDUjCdnCrtFxj1DEUbsDwri/cULYr3Cot18zFIJxuXrhzKNsV7lgpXBoNVwe1THCnYLYrXFw33Os5tMOglgduBNs1W+gqV24U3GbKBTc4mBlwK41na6IbpVwZ1LLAjWG7wPWIZ8uSbeuP4aUI+z2gS7g+FTenQS0H3DmGrZ6JuIxnjAIeR0r5yoF6+cARdyF8xS7ougux/iDfBfJIdCPh8qCWXuUYZbiecNnlMypqJUeivuQP1D/JQGwX6rdaYw9ErZl5mOhGJwv7nlrCYDnEwW0u5yY5WaKwEvJWX0Tqz7/XLO5v8Vtvst0De5nzPRzRHdLgQp8MN84U1gnKo2QBScFpKBKPAbn17Xwgqt8bCbY13id2fHq0/oDuRUA03TkRbqwp6KKQgRyiJUJwEsLbWORVOm8bBLclix0seyCtwkvceGUuFpcsOI0hGG48WxB3nTsT4+vOSNEuVFQo42vpkrDBNB32ucuKxXT1HsgiXydelYulwG36JLiQAPcwzeULM6tLf6voNYqlhUWOgLHIHUICGhErPotFdcUrPP0gSsISL7XdSVbjpSj3ctYHss3ruOE6bm4p27fULAPbbZYWXpfHDRjh6tbljdcfFsDiUFZgRaLqJjYT85r1OYXbJ7CVleUOuNxtdTyXZN28wgYQnXke4yvXh+cB07oVRERLgwtNHw0X0uHuL4mvlCTVxNBiVPYpdp5HU3mXOCKkiGipcCEW7pTCVvZ/rTExnThJtDcMIUi8PHDuQ6SIaIlwzYwhCG4P6XBbZId24QjktuWvkPQhbrxbusJ0k+E2fRTcNLYiou0tl8cyIVty5yivOKp4R7dH5aabCteIaSFwp0S2zHSHveVKUyCuzKiodjsqtLuzXe4L6XBP5ish24ykddDGzhWQHJuhdw+gS7pkX5/CpCvWIU2MaX0w3LlJQwszuxsd4YzTvX9yAnUy9bNdquvmRLzaGPyrHNNMgaEVK9daiZjomz0xqyZ6LtYdw2IdD6xz2l3aTIGD5UnCbWbRURrtwRfEerfPTKq5jszf61H0BucU8TZzENykaMYdQUcvW6TouRXxkEvO8v1HSeJtDj5D6UC5CYfSbBlc0lZatLBm3UTdXEl0GwhQblI0axRbDpfQuuHSNTtDadf88lcuZGAr4JK64RLj7U+iC97KTRFuA6Yu6odrxtwUY5hfvspNOcoawgRcXDFdFs9M40I4zXW94GYSroRbc0TjUxibbDFJup7KTfGeGW3hekU0NYdwd5a2P8G0mOYFNy1VODn3k9uT6gmf2+Fu+zm5ZnyO4L6mpGEMdHbuh4MqYpC3bXOYiPlxoYHK7RBklK5TuVly3OXcL9MFNWClagzS6HKkvO5MlYr5ZGJbuIm57hXcNOGacJGE61Uw8yZqkjaFLpL2oqsYrqeR8sLdS9cFN23/2FLuhY/yHqia/paIo31XObdu13hRZ8HFTT7XdVU5pg0cb+CO5DrRRUSbwltOFkRKVzv3Uij2FoViZ2+VSHM3Np8GF+BisDxxcicYrppUM6QbNxohp8k4UVUipfd2cngJN59ydyW7jpkIuBnuqIo2tCvEPSks2b7lnL3xQeynI/P5lQunyk2dlYyCq0ub5C3doki2qu5ZfrK9rKgmpyaeH25jLiViKxcegPvWdcuuOUTvCTJVjIuxej4C61Ixeh/cjXT3cJOn07dwrZN3XWCrXEHhjYJLpWZH40kT8Z1MzY7OQJ4fzglXzaa54c53w+067Qo6IIUHNP4AuizhQe5aJnQ8bpMbrhHSLFtIvSs2cDsfuKIPoSvtWxIzNczn64+SLl7LRG+E2xwqN1m4EcqVfvnWz0PEZGKoPak8W+p+b4FrSnevXLgfri7keqtaHBRjuTRqSL4IXDhQbnp1WAxcWa6ho30X2z+rBK6Rje2UO+eF2/nBZWRGmZXSez9VtQzc+cAWkvccpVz9hCrGd39gbRG44ISbwRUi4ZrPi3w63NUXtsqFEnArrrkpBBdejirHHgAe8dzvggtGuS7kqyT/KVf7gg0XisCtWrltEbizDbdv4M8ptwzcprfgTk0Rz/17cLUvmHDhp9xMcAH2cLO4gstz663Qlc9tFYDb9Du4eVzhw+CSQnCnHdw5z25nK8/9JLhdLgo7uJAfLvqzcEU/YoU75XFyAGuOinTVNtsWMkHQixFCTlfgEc2GW+t6g6KayYSbK1mQvrDChWy7RTvPrRZuZ8PNJjEw4fa5XMH0BfRpcLtcEhPJ2AI3m+Wa0pVwkz6uC19+JdgCbrdwswlXmq6ucnzl2y3AcrZKuQldNDxetni8clCMGKebj4F6cgpSH+qz97vz3JRc7Bpulw1ul1Fh6skpyDR7ZvTS5q1yU+DyqbXT/1Lg0i3cnHcvM10NN6PlKu0iAy5Jgytv/oM/E1xBFu1ruCgvW9UDhtyWu9LNAFdK9wAtTmK7gZubreoBQ56Chb3l8FPWcJOeUNXKxdafaY5rnh1isSw7gcVzIXdrYOZVCISkT/SsFpAzmi3xjHC0c262apoSsluuCmvNjKU22viIJotspVjxqC1C/cSLSBKKHVQ8IxjPTf7rl6YLyYsFHfMFefo0litf7ZUxFL7A/1ZOi9fXdCF5DGIFF5oyV6/hzkV2zxqJM125ej7ZNvFYpABMrU2Bq/OblksKXbqIaJCn1OYUbpjpimp70hJHo6PFfNkUWGmmLbcUXDGRBiXi2Q4uDVpoeCQnjZ5sG0Pkqy23GNxGwH1NTWG4JBfaq+a/poDOZArC7YVyy8H9F+gLKAmtXDwbhR3pXzG4k1DuXByuny+gjpLk5lmbvrhCObizqHKE4nC98oUlfie2sGOVgwuvvijcxXR9PloqE1svuotwyyUL/GlKePUF979ccIe8I0x6CznYF8D1qBjz81uff3Xd3zYCJ5SzhYnBLZcsGKZ7vWCIX6rll6pdP1hY3HJFunAXXHq1YMilZqkcqGH9t2v5+jpucbhzc4fpnqvpf3tnoiUpCkRRUWxFpeT/v7ZlUUExDZQtNZk5fbq2TLn96hEES+yEKxIJav1X/GXNzqgT//LTjajls0s3gN8sJFwWD+7HQRwNZp5gPTull+3ZJiOb5RtQU5qvgIBhSRESLgkMtwUN4mYY1s+8+LaEZX9Cqf/V/LQk3MPCMTMsCQ23CAmXgkIkQ7ilvJAMbW+v/9DwwGdmJUS6JtuArsBjsYIEff0CFt6bbP91U9uWz/zY6q77hwy6R7URzalKyJ5XHG4VD+5RwcLe+I6+4wWJBge2hBfZ6ZH5OtZU8WbgDNr1KjhcCsiraK4w/TrL8oVd7QBX1N6acJovdJ4Zol8Ot9gmBffi1W2Ql0rsVQ1AMNuRC5dPAjevtJdtHVG4U6BbjFHh2hZktN9VURFDlpLuuh5qCrLGrNgq0R/6Air3c4+vh0utOVdkn53JCpKqTnc3EAhb9W9Ro80vATKXPIf9shz9erjF2XLXTm2yIK8ANvQlKz/8zyY5dp1WSdQqXXSwelQEh8tSwJXmoHIFW59UBXmFeAFtU9PdCOrQcndbCrgsPFx6mIqR2zt2kb+sGTuLd/rv8A/9+xq0m4/I1z9M8wR2haKY4IZ+iwK+eLvUnelqx7aUtXNY4yweoNxj6R6tIKh4wYXtko2Hr2gEF24E3TpIV4sfXOGusQHKRbgCb3DlQqWrF3LpHIW7KVqTB9woyi1c4bq6bjegxhVu8ZQGkq6+rqgHDLUZdHXzx5ZQ4ZVwC1flNjI1Jsjyewj//v6GKVgVTP8N4kPxkfqWHjWucJ/DFiZdI5GljGFi+bc2XhpQ+/Bf3dW7stjvg1s4hWJyyjp0G7SWxvF2xrWwwFDsSWxh0jUWKiZKXf132qYozEguwnZF0UfBLVxmaEtq+w/QNul32AztWWxh0t3keREE7jY5PLxPuOYiO3R/IirP0JaX9koWj2uu8YK0hs9sT3aXJGfLcjIG29q7A1qYcGOZQpSsmANd+14OKNrshBtPuSBjONhBV4LQwkKFmGjjKRdE93hDmTGIocu70+NFClVcuCBjQJ9OWX8qDgw6DdQWT4ULoHuy5x410H2o6Q13gjvGhHvDdmfNHko3M8MVnhsX7lW6fOuBqM83/WE/og5iG3VqFmNTiHu0u6crd3XU/9QfljO++bHlcElcuEDtoo87P/fb+TJkmwQudaWLbCOVmcTNkW0SuBC6tb5Xzx4FrHQR8ER27H5WwbftX04/9s18nGc4jIiRDB56+1aw1GlGAbfKki4vj8ZHsvJQlTxsaJo+19XeqsBJ4DrsH/PUkqTHJ7gsBdzi+WzDn6DMg24S3aaEC9/8eLul6V/wU+s50B2KdHBJMrhx8NKiSgiXFMWD6SbsHBFwq8fiTbhBgdeK4HxTwg0ZNgxJ+1UEvrQtrXhpUtWIS9tIyhEtIN7UW5bkdYMZwJ3wts9Cu1yUSTKA61W+Qw7dqVTF6iKPVvXD91vtGiyowkcsD+lWZVPe5DsMfZlJZ5iCO+YCt/x8WPeMrCjKkQvcMUu4Zdn0w3BBsqrlAhdLuCQLl1rhlvwaPDhgAbYps4JbyeImPoskeoM7Az6zCCnYxvi5PJRbLJX8WI5wJeFG3NQ47KnK2x4tP5JHX9gCd8wIbi/LmmwIq6ImqgxSWdq5ip/Moy/jApdkA7fXKO1UXB61Xvs36fPoC1kLfOYRd+9VaIV80vKYQuDc4Ipf/36HtAcpVn1j02QHNwfTraoGLXg3WG0q7veYxam0LOCOYYoq31Jus/LtbbLtD4a8crkIGuVhCyREOfDbcOersneDW3+oV1Eibf3ZLAa0IIXsPcFVfE1bMMD2W8n6LkZ/M8pdK1aTHEy3qiznz2wm0M+jXr8lm4tyRZS7FFXOImFeHVSn1ZD2OuiDq50zkEmxgZuB6VZHp6OQKmov7n6fq9cfHprKwXOFGyxwczDdqvHSqhws14Sb3nQrL3CzsIXRVG7STU1PU25BTOXm4AtPgSuWz0zljj+4XtONhnITxQuV1ko/nqu1NH0iO+Um8gW2tsKPcrWXjHlTxyZW2MCN6guM8ta2+uWYyA9ccTpt0XHbineKSXncw402jxBQeatbA26Ihpp2btPbRpqekb0txPAFxbVeetyWYeE2aHkn/qb/Imh4doWNcsPmFxhtLS0e3LWF5StnEHu4AUtXW8mGh4uQ/W1pwELVRIOrFxCq4pJNpNygfKuljtuaLA+3HvGBbDrlKr5BhrMjuN59YRJt/RFuH1i5zcd3r73LV6xB2OF6HtI+i1a00KFYefoEfvFW5BCuV18AoJ1aYLg94BGoT1fAx3C9DWnszA/m1gSliwbIM9TU/3BmgetLulC0gU0XNcCn8IRXF64Frhfp0hbegpouwHKX+Rv1LFwLXA8JBhe0gYMxmCt4w6vFYVa4t6MxR7RBpQsXrp+hTYvD7HBv+oIz25DSdRGuD7oVOYF7S7rwcUzvEEIJ4zCPeE3h2uDeWUu7INuAxgAOFXzRrcZTuJdzY5dkG84YUDNcepjLA9tGuFa4V133omyDzSTQcPlxqA/hrrsc13ZxIsEuyzYQ3UuGu4j3xqKvQXL/qQvpmzuyFVrxTfcO22viVbsVzuC6Bwx32frWLrrL1p3usnR2BtfVdVsfzeOohm747WoN7J5wj+C6SZe1flrvbeNCM3h5INdQAQjXxXVp66sNfqzBedLrwxrU8R0IXAfp+mMrrAHlIls3uvMJExBccHLMK1shXpR4JLtCV6bDoHChY5pnttx5b3gDQqXvB6IO8wcwXNhMwj9biRddRDv4fxoKEi52gwuRbhC23BzcvZffuR/mYSh44guHC5BuKLYcr5t8w4gWurw2r5w5wD0NxwKyXfgiANeQZEHanXPkDnDPwrHAbCXfUsD7AJZf8xb8OSgs1egC97MxRGArOzYTFmX85H/zh30EsKd01+V0C9xdshy0jz8W21nD6jKm+bB1PwxR359Ckgr4PFkO2q/L2pc1wH5cN7h4PDSG9nXtQGhVQa7BPTaG9oXtPNPoBvfogA99I1x6JlxXuHZjeCVbK92q0FPkrsq1GkP70na2/OAKd384rWJt+6O7ixSuwd1NJeh74dIPhnsN7sYYXsx2S3e7JnkB7sYY2lc3ncXGFK7BNYyBvhsuNXIKPuBq0e7L2Wp0K3mRzW24mu22r2/66oMXuIvt0h9c+nEt/XyX4441VvmxH9tZunIwO9UlBO6cZPjBVdtLVYTrCa5IMvzYKmOYUwq+lMsHtR9XZQzVekWQF7gEs59wZ+myE1bOcAn+wVWuS7F3uITcO/bwnEYCwMXjjytva7rGp3J/dE22XuFOg9qPLcMkDNwf3ZphEgzu2+lSTILBfTtdiklQuG8OdykmgeG+ly7FznAh+Vz9q6+lS7fXfnhKlhtfxeSd25mmjoeH+07tCk+IAPeNdCksgesB7vsiMjWWRYHLd52/cV4WCe6rtMvAOUZPyn1RnoHBc4y+4L4mA+mSY/QGl9OtX8U2Jtw3hGSUOOUYPcJ9Pl2TbWy4zx7Wtqma2HCfPKyN7jQ8w31qHqduCb4N9+bPPzZLJuz2pvLuw33mbI2p5HVquE+cT0C32kWA+zRrWCKwLOA+yxoYxiQnuNwa6LMsISe4/OTEI2RLMMkPLnnAhKLeTBzygfuA2TAjmOQL95udt6aj87aPuHC5eL80y8vw7flucLhfGvNSgr8BLv7GJYrxTn+jwv2yga1u2d3+RoX7Vd5ACQ4E1xfN7YTta+IGI0bwSyMU3K/Ba4Zf3wKX5B/1drvI9pvgZj4jHv33NypcnO+JbBamv1HhYpKfOdRiGHsC3Ay9l45h+xsVroh76/zQPgQuziaXzkik/kaFm4M70DFef6PCFfOKpPJlo/tZsq+Byz+XLHagI8HYf48ygiv5xg99KSMYh+pRRnBl+dsxYvSgNEteAVdPPIQl3G3IxoYbi+b+q5xvWIOgsUewSMly6PgWboATksWxe5QR3BWwN4vgL0JnsGl6lBHcBbAkfBvsOJLt8PluuOuy/OLCtdu4pTtsNj3KDK4iPCFWMq7PlMpNgDEp14TP/DVwl28Yp8Y4Z9oajjF9yBvjXx+zeeb9V/8DgRn7s2SsReAAAAAASUVORK5CYII="},722:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/data.745ffc55015eb27f7c6c.png"},6894:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/geoMark.713af9a0674e3796042f.png"},4427:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/logo.5a33c1fe9f70086e75ce.png"},6919:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/logout.601bf75c988714654edc.png"},8980:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAFyklEQVRIDe1WaUxUVxS+b5mdAYEpVqkOREbFHbehqTiAkhQoFdTa9Edbg93V/mja2Da1P6Q/7JY2qU2LYtS0/dEqaopLUisMS+pCRJG2lI4KI6gjy8AszPbevNd7Lt6XYaw2mv7whyeZOfd+55zv3nvePec9hLBYV/2xFjRaXN75nIyl8CVBZgCAgRQNIx4msuiPbKvs+BjGd5HFFe1zSODFv/wyAwzgzO37soi74fIJt0cqK1FTVAxJ7KKy9oUA7NgSQVNTXYjjtSzxtFZ0FBlSZ/4CxvoaFUPApqambQDcp+Sv79Za1zjepeHM0tWd+xJSsl6ggEbXo2UBMGrc6OQukg806ksLseDhDSahyNg5kRwVh9jASM8XDMuh4jeihGHFtJS0cccUwp6h5u9MJq6lpWWDbV5vu719iq2q8vznubm5LUz8aRiGaaU7+T812RIQWtc6duqTzC/jhRR+Iex1cyGX2b5/tp95/JlenS4xLYAYcmAEaZiYEkWO6yZEg0a9fcf4qBzaQp2yJg2g6m2TCCOkh2ZDZ0grIevY1vtljtcoS8YPRod7tisbsr04EuJUhtu8Pe5Lb547mP3V2MYwhX1vko4V+jopmyxLaPnMc3ngBBhhjE1x/xBnqKlLXff++v49NEgUxRBxxOXANDY2vs2yrJEaqcZOJwsLCxvp/EHWSh5hk1CjHKt/ComRS7pk/RH73swQ3TxxXFTWZdJPMHWpNIkp1IAzgQIe564zByyvAMYUb3ZoAr5HA1Ca1ClWj450V585MP01xrqu+6gh8bESMOJ+gizpbnTTzSFf+BY5fkJBb7+e1+hTiBM4fv1eFGVnjd2e8k39Y874+gmCv5xlmbESBMdpZh0oInAnqbA8P4PFvWSQAq9uvUbKtKNrlFxciouit46xrv67ypCS+QEF4zW0QfueBIY9XWv5ELPG25V5yOvaARMW14Uc9F17XbHEDMRIMHK6NmszcYS/s7Uzv42ERgZifMgw4OmroJiS5JU5jnK41VRYsber9XD2cTpnqqurVdnZ2VsB+PGEMbfzxpyiqOATqjb8vh0wfJmdy5Yt281aLJZ3AAB5tsh3Wi1d7t1Y3knqBDBJksygeZVK1YEvwBKYgOBa2UsGcX/k9tTX19t4nl8RZwM2n81m+wwyE297OL+/DIyra6CAVi1EfAWcWrOJVyfM4nmtGTHcGLscRbixOcWI/89oJLxDpTY2nNo/JRi7tEK4qOw6rsjgT1pjWjHH/XuJxwbCWBSCUsDbd0HFy0Wn9s92AzbWUJ7uKNUnTf4eN5QJAN6riGHfSMh/7fmzh+YeYayr2mbxCenHNLoUcjspGXQos+kmeqsyGc3I1OM3E0KXeoLokxo3cg48gt9Lt9JwKyAcHO4R/X2lrMQmlPAq/Tgy8LFMHkTVVelo7nQDUqsYpOIZ3JP0aOdH6aSJ0YWp5lW6DIlLLGZlNtINnS5eoOt1XQnEw2SXYIsXqHI2GnYySys6U1m14ajeOMl6u5OMErXD5IUMNiCCT5L444It6HO18tJAKXkoS8rPL1AbJh/CecwA471KJOS+GvS4Ks7VzW9Trk3O6jazVpV2WGucuEAB/4sZt4OQ39UhiMPlrbXzroC70u3OH1zolPigLeDpPRHb9e7EKUsS/jTrq1eHB5dTsnGEMDnzg8Wrm51Z4h9xfhMVw3fiQmAb9V6tESdkPGk/nDMS66icDr4RGhoaluO2uhS+E35r15h/bZu6SuJMSeMCxEHvypzen5/ICXVDL8S/swUFBU20HxLC5ubmsthOSwlCEZbbXZdc4vJkzMf9k5mY2HehstR9XKcVRepDNSZszcvLqyMvSUEQ5uJuTG2K1qql6MY1Q3Uen5t8TCcZ5TvmAThwYB15KA6H41N4gyhMcQMguhsZxAIHhCk5pByQS7vdPg07zcNYMj5KIs5TAtgx5sd2Lx4OY+xifn7+ZZo7sD+Uhxl4UDLwDwyzdB7O/2gkAAAAAElFTkSuQmCC"},28:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAGL0lEQVRIDe1Wa0wUVxS+Mzv7XvbBQ0ARBBbkJT7wgQ2UBWvKQ+KD2kiJ1UgqmKiNqaba2jbRNJKoP9qaKFWsbTWmGmwrKm1jYUEqWrWCsrwWWAHtqrCwrLsw7LNzxt5h2Sb8MP3hD2+ye8/9znfOvffMOWcGIWYka4reghklZhUWephRtPuohwAABHrMhkhYWM0m+/sFi/eDPMWIf211EmvY1NLhYQ0Pnq5BZElu4n6pc/Dqfy25nbBq1Gpxk+rUNQsA2L1hOeLbh5FEJid5Qw/bjB6e/HqXybXezROjM2VbCNa8vr5+HzZ/gVmj2ShKyd64G5sS897c8G3i/NR3MXCzuVVEAuC0DaPTB0pZPDFqBs1eEAmlyG53sOD4GG3i8eXTFMGh4Ut/1t5lwbkBNr9J1zQ9NZp+ObkvkNfQ0FCcog5qvqMfyNixNvVwampqA+F7G4IgbuGT/J8zeyRwmJKz6evYpAXvkTwe59808GSov1sXodOetxJLl64Vz0rLGMUECINCykfPXGKEsS5d0xVqXOX3IQZkhA0d+3IP6xHCs+mzClaeGTU7l916zfZDHrFEym3pK7Tfu1nGnTG/9HNarvQX+pJabjdub7763VfPnwSjvXj0I/HAw+42THS5nChMZksHEmCsR+8QP35qklZc0L79cWnBN9jI6XTSLJEpB6Kurm4nSZJ+WIlnhvR7VlZWHV6/zDMXRzgk1KhErljhoB1d/oh/Sas9RePDUyDEagoDo6JndwQEBftjhdvlQili8vid6pObAeOpc7YJk+JizApVgASTYCZIEgWGzEgRykJC/+66e4kMoOwXJDIF+4ScTjuCxIAMwiNmzvwSyDAqJDwyF4N7i/NQUlw0u1y3/QCipCo21SxiahXJpwSYh2KjwjlZKZvAhSLxbNJmHRnE2pI9h9gybdZ1IotThGE0YhqqIlKyi/fHzVu4l0N9BGiDlV/sJMjb1Sc+HbNZfdQTS0NX2xFYkUzVero7722ZUE1IVvOw/a/LFdtYIvw1//r9scEnjwYmKM+lzo6m1RjjMnxhtGoVZDUeTLZ3tNb8UI3XRHl5OT8+Pv4TAM5UaVOtvKDlVvOQ44N30ssAY5K5Ny0trYKMiYnZBQCMonzNjYG+jv7CNxLYOgHM7XZHwEzx+fz7TCksggWMvaVrTrGCzx+bZjU1NRkURS3z0YG3ZxkZGYcgMr66V+sXi8CkugYXUEhWEZEpkSm3ylWBCcyLM4JHsVWNXE4nYt6uvZbhwdZRq/mIjPbUNjaeH/PemnOYkr9ZQrg958KjYnLEUj8u+7zJvrLVMuw2dOiaXKP25brG80OgZ18p8Znr8sLCIv8Ii4xJ5guE3Ca+DnzXAqGYCJ4RHiqSSUp48mDd4ANdJ6FOX5kwKzLxSvD0mWx2YiPoUEKXBe0oLkBx6kimExGos7sXHT5+Do2RUkR5dQ2weWrsf2Do0eWRCpl/rlyhmuQMCHKKRuUHdqLkhFgkEPCRgE+xPam8bBdSUHagTBp+ctUshUyZQ9I0bXB6VShmma121KY34CU3wylHbM+/IDiQEVwuB3KMOXuJuGWrAwJV4Zcj1HFLvAkgw7XdtAXh5gebwCeJ73WB29fddsv42JjHGzS0jwmVobf5fEG21E+hBCUe0MBJgRjZkYD9gUySE58GmMfEr6+/p2d91/XKblY71N/+WCid9pPT6dDIVQEhTKFj7pQz01nQQ4P+/qO+nhz99QutQOa2G+xvG+FHqM+Om80LFcrAaKZ5TekMkvyBXldjM/Xn6Op/NGIy5xCAoa774+qQFWeNI51BzPUXMWHAvEkztP2etpYTrumo8G7lmVFvJXc3+Eaora19nTnZYvhOqLvZEnGj3bhSGTRd4W0wYjJaFseGXNQsSTJAL2R+f2ZmZtbjfsg6vHbtWr53p8UOaNrOO1FZk+sS+s9lvmEIHj3UVFyQVS0WCSbeBP+SGYe30tPTq9iqdzgcc5hujP1ws0gkcG0tyq4aHnn2G4Aqhd84p/QRwAcDVbGR1+v1B+EN4sPhluBoKmdgCz7AgIshtoZYarVaeMrJDKZiriJn4iQDPYNZGb2FEYcZ7J5Go+nGsQP9q/EqAi9LBP4BpbppdvXkLiIAAAAASUVORK5CYII="},9301:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAF4klEQVRIDe1Wa2xURRSeO/fu3VcXum3ptvJotSl0uygIUYtp6UMqUF4lURITi2ko5SUmCIoxYohoxAgKAaSlFCgSE/iDsQUEtO8EFZAqUGxahELJWgq77b66d/c+nDPNvbRbCYT4gx9McmfOfOecb2bOzJw7CJEyYV/Ja9CitH0lbyikTG1arzAAgCALEsLQQT4xtJ2fv4nK96/su5dMpI4XujsUBhjAlj1c/Dnr7LkTHu6ojaSq5H5Jxvby0ikAHEhbjlJ8VoSNLKaW9oqSfFNa7ClQns/6gqFgY2PjJwA8YsnZv9HgOFT6gerO2A8sqzKlRC9WgXhvwIABsPp16FzmZoo7OT5II+MyhFBIEikoh6S7bHSuYyQfY5xW2VVLwcIZFsuQZUq9wt2Wedvi2Obm5iUzldQ/TjLt2dv1C7ZmZGQ0M5GrYRjmrDqT/7OlUwJCx8HlewzJI5aigWjSMcJ9IZcUEJIuL/rGx0w7ssYo2HQBZmAPEIQhkY1GrfrbSHXqv+k9zvX19683Yp4ypAfj0cGZ71IZwvPymY+orLeZC+jQz/+0TsF6loL/VfVf69uszXHyj2uCrJnXRxr6O3rf+au4fMfAGSXaCzO/MvLO8BXVUJEVNKtnXBYYAUYZB4f4n1CfeWdPw6JPR8/frzqJohikhuQ6MA0NDeswxhZVqbbE6Oe8vLwGtf84t1ocYZJwR7GFnSuG5I5EZkxNffHGoDp5aji+vDTOMNrcpiPHWFUgRUHB656Ky4vLSgFjZx9frRdizL2cRWfSjEAgp4izGqZa8xyJPUfP1zDp3608ZhxrKQCdIinIEbYhp+RGbvNAOoAd0neHTRwfZ6RGYFjlWIEmxiWDiPJPbqDGcPzcPm8hZlhtu9F46xhqBFUia9VkzHITsBwU76hI0emt9Jq23L5KDm63CiPZL1YzjoPLNhmejh44oZrqngBp8MKMLQy+VFT2MWG9p4mQBKdvJ0CY3FpF6PKsiNDTrhQIh1qLylZTQ6haiyvKxF6hh2oHVcIN/0K1qy15rpRaiEjM1MI7xbbWkrITap8pLy/X2e32DQBU9ZzJaIl35Sv+cHibqZCmLnKYOzMzMytxamrqe6rXW6Om/WLqkm6+z+XSewK4LMtJ0HI6ne4iuQovQAfKZ6PnH6BCREVPT21tbTbHca9E6IDNm52dvQUiE6l70n+0CAy510ABqbrXH8hlePy2zqJPx3qchNTrIslIFuTOsFdoVULyzmizqe7Moq/7Bw+tEU4tLzUFzewR3maejQ0qw2DT4bIUEGXhlqcFy3L+5ZJKF1hQQvve0jl8gvkQN5KPHu72YETyCL3iLX/RpdKKGsZRVpzOPWU5zlmN9HRq7iRDpfhj0IdTXkf22HH0x9Tm6kKbzh1GHUYXYlhtcdRFdAWvi07PHCyZ+QJs1A0lIybpgg19m78WTYp/BvEsh3SYoznp0KtrSRKL18ZVBWzikqUo3WyMJPkaZLXIAlmv9W5nJIxglk6pdxgOHGSjOpm0qlWxrAkdMyREvTTcSkHWAK8lPxgEniSRywU/kp3O6nyBOTQQjj1LJ3M201EuxpA8jPQhgLC7/0bYGVx4Zdme37XI2vcuSWJHGL7XJ0RNHtj7h2AikQp1+y+inkDhxZX7/gYPLdtdKansNIdwdrDLexqRv8eDiiLLKNjlqWV93HSVbAghdH59c4dnVGJ8QfCmdzek9vsV8pxDwnXvXoNXmtVSvG3IDmlLhjdCXV3ddJJWX4R3QoO3LalGbFsgxrAjBxOzbtEzV0n7Icc64RrkQvL9lpub26jmQ0rY1NQ0b3CmVQmCssjuul1fcCPWPwkpDDPWbWpZNWr6CfLaGvYzggdjVlZWNQfO4XD4WZKNVR6tNWBOWpswo9otBk7BRlltJkFTRgjAQaBquint7e1fwh8kwkbrWjmTAJ8GRAjgCxwAazFUbSCW9fX1KcToOYJZyVJGkDhFgZ5gPqL3ENFNsD9zcnKuqrED/ZPyJAKPSwT+BSrgZIc4xKNRAAAAAElFTkSuQmCC"},6951:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAF2klEQVRIDe1WaWxUVRS+b5uVLpRCp6WhlVqgyBZomaGltAUaoEgs0ZD4QxMhGmtQg4AsAhlLVQyoURGoiKjxFzHRWIRopNNNOm2JaW1lmym1QJdpO6XLdNa3eM9t70sXwPUHPzjJvHPvd75z3r1nzj3vIoTllz3mp0Cji28sfVrB4juWrTAAwMAXkhEPkzs+JehMK3oXxvcR247UecSxr7VRYSACkLk1u77iulyu0ERP9U3UNBSQZfbCTstiAEIbjqGb3Exk1LIsYZbtNeea4/U/gVH/UhlDwIqKikIA/qXYrNm62v3LdlN3pmaf+csFcfpnKXBb1OtYAFxyBNIV2AgeKQ35WRhFKX1IFoME9IuKm23qDHwgcAwKnlxDwPihVdPGbLPbI7lnvF4ZzVVVVW1pm5rdML3LlnV5cdF7Foulihm/G4Zh6kic//lBlgQxLx2wfJoSo32eHc4meY3bK/Y6PHxCjrXMw1x8f5l+oUbrZcl+EYI0hAwmFOe7iqjT9a7gOV7oU3axpuF1tmlno6TNJ8gE0kOzkRDF55FX9364QtELIyGHfcY8f+8IHBpO8KsVTJ9fCoyxjkzq272vpB6s3qOGMW2r0Dv6hSuULMkKsmuzM5cV1X4M2MSCGeoy6utPbfJl7DlNnURR9BMiPg5MeXn5DpZlw6iRaky6sHLlynI6f5A12QxdIJxRo154PCTKzqBWfxb/x35qI0R8IKKTJ4nXphj4KGqQFQVdcQVOphbaXwCMcXy0ThspebyTtJyafEoG3dTpK04rrHmRabCm/zBrmiYPwJCkoC7DHMT7OlEM2w8QkmWEGoIBAx8XwRMSQfOPo6T4FDJs/SSfkEn5uaV8VuAITh5GU5I6EfUjtYcRgWNns4MBpYdanZ8XkGPaf7MJxfqvUhgNDiklzKX9loOPxer2qei4AbTBKFyG7JLC6gPeIF7xPaSlN3gUTPhYMIqzO1hwN96AXw4uedP+MiHCw/yW/YTLI3WPJzu6Axsppia5OXpNPlQ1FccAfy3jbft5OmeKi4uFlJSU/QBwjWcsi5mm3Dt+OeRMLToEGC7m1uXLl59ik5OTdwIAIs3fZG/qN9xyzt5KzglgsiwngGYFQWiEARVfxu4vUJhpiM6pJtVTWlqaxfP8KgpSjaMNZmVlHYHMUOyh/m8ZGHOuIRS0arlbzsEfzK2RBm6uUWAT+JHSEXHZDoXk1j6vdBl/ZY+yU1lb+mvVvtFLUANesm4wMHLXmcQo7TqDhnb+0dSJY49flq/3BOoZDZubbq3uBQYJWLF36fqZUdqvpxi4yIluf424vVJfizvwTOY7tWeZn7eb5yZN48+ZwgRSndQdOtRtPgnFrN2GwuJmIVxnyNPhRB3njqDYYDPuCOrmiItrIPSHs1tcz4YbUF64lhsTDBgdujno0c3HUcSMeYjlNYjhBBSGe1LylhPIZZxD36vqMB2XGKlH61jcLFrEUSeUMqDrDbZfp1NVwyoFb6c6pwMR7yggoVbeJytlbo9cE67jzNQIGlqofHYralUiEW1+8BK4ksSM2y7wezxinYQ05SQRtp1pixKjNd/iPCaC8Z9K56B480aPuHHVYfuvamYvbE9PiJ2MvkucLCyCP+DvSmtvsPG2J5S/+lDdDfAZ42m3msMNDPfNI1M0ubSY7xUYOuON3lCpW9Y8iT9sfZSntk8ALNaaAbeiybvS6T8Orf1e4se2y67AZ8GYeWtHBwO+ukK4I9hsthW4rS6Fe4Jyy54Q3/7jE3FGKWJ04HYvN9BmWv09mpHRAr0Q/2pzcnIqaD8kASsrKzfggGmjHclY9HO6htN5yVzbQlwVTLM8vT6w8LnzMq8Tx3NxwLrMzMwScm8PhULzcTcez0GI10n+JQUljf5+cplGuoi7XrDAEWJgVUJy6HA4DsMXZGLEEQQC3ScY+EIMYKs5pMEgl2VlZUmYtABjk/FWwnGeJoEdYx5sH8DDOxj7LTs7u5nmDuwP5WEGHpQM/AmOZG1Q7uJJYAAAAABJRU5ErkJggg=="},2287:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAF20lEQVRIDe1We2yTVRS/36Pdtz72go3HBt2Ck2zyCgQc0NJ2SgIbyEjEKEYTNaImaCDbhKmYRRM3mAgoCQ40akJMhD9ExoYorN0DAg4Ngs7sCR0bjz3b7mv3td+j3nPHV7oOCD7+4A9O0u+e+7u/c+69595zehHCctLy9tPQolPW4udCWAafqghRAIAyIkuIhc6QLAZ7tpi3g34POWErmkUMh/50hWgghkoOISb/wDam98aAON4yPJM65JdFhf7RUjwfAHrHs6gnVYd0jIYmzJPWwuXz4yf/BINJR4spAtbX138AwL8Uh62Ua7SVbFXNqQbr1m8ei5/wogqcFWM4GoA+PY0Sfygi+CyKF8gGE3kJKUGJgAFFHmDWTF0QnxKjXxw4fJaAqQsDxjHb7A8IA4+e2DaRaWxsfOXm4tTfU870WDu3Lt2Zk5PTSEXvhqKoJnUl/2dLlgQOT9tL9s80Jr5KozCEBoLCYLcgm+zOUp46s25zbKYwxc+MhhtBGORkI0q54kaqURvvrmFDfTFbmLhRLzfS41DWng1kxRAez7rdRJ+uM+YRRk9+WSiWIZeLDER/mr2D5STAqdUllFcKBqIJ0P+D73/L7CwrIUQATNXvxHZSI3+BDiKHQujXRUmWZbXbP4M+mXpMiPt9evZg0zPSJttXQACRJEkgRJwOVF1dXRFN08bRodtfTDqVm5tbdxt5cDWyGXV5kKN6pFklyHI7w+iO4TMW1DFCdNgKJ6ZxCS0TtFySOqCgEGoZHjqw1FFGzpSqWflpzGya9+txaqqkyLZ5eLDS7Ch7nTqX+251piEhDwalkIL6MxIQ08ejZJ9C+HBCbdx1HTuF0xMSoNqK9ShrZhohtK7/hJDh+o30sgW0hr49ozFjMiHBR042hHWOYmbSvCz2q0jzpv0kTd3NXfjielQYDUliFXU6t+TDLEPSe2E0SoEyCNeQXnLqo/f9uHM3cfm8e2GMxlkbavN53rgTcVgSg0ucZW8SInzszvLP+4NCXzS5gx9aq2LhLV+1pRZIOGaqdKCRFnvdjuNqn6qsrNRkZWVtAyB05GLO7PaR5W5ZFLu3mMsBw5fZZTabv6QzMzOLAQChCuacbWGEq10vzSV5ApiiKCZoaY1GcwkUVcTN1q/pFKNP7astuT21tbVWlmWfUEG1xd6GrVbrxxAZFXvY/rcIjMlrcAWlWrjJ2XUstTFBy2XraMbEUKN3R8bJ51dklzsoNPul0F5ukuBYcnjXSOQSwg7Pry7VBfngIZPOsDL2LikeaQg6L4lKu899IciJy1ec2DUI2OiVsBTlmwwJBxM1MQkA/lMZFAPuK8OeF55srDhG1VgKszP0cTWTtDpyO1VnUKGup+pR2sZVKO6RqXhqCg13XkdX9xxFk7p5xN4Kg8rvDfivdPq9+XScRptnZLRjnAGpNz0eZe/egBKypyNay+I0YFA8rknZe17DRSxR9RNuDaw23cjErKRHROkyBDtaoOp5269Fw2SVTN/wOFxWFBSQJRdLaVknjsE5I6t9PJIFJVQu+Q616plw8YNJ4EmSHLVdsBsUhaYgYurIoVTbiufN4Azfp2h16ZFO71e/GfB3ufz82hUNFb+Fr011bqEpldYfmRZrmIcT/X59oS6/91K3IBasaizvBKNwtcuv3em6pqGtHT7Pz3eKafQMMlJQp89TOyQxy1RnYxxCJ+94qdenaPJaefc+KO13EwGPtXo9X6AZ01bgf0l3JC+8N3gjOByOZbisLoJ3gnLOZUpp6FozGWnjIw1uoKC315x2lM7JuAy1EP9+sdvt9Wo9JA4bGhpWY4cLIw2JLkgM8+35vIx+ZS5M6JrIXlCeX3Bc4dhxy8cOmywWSxV5WomiOBtX43H+EMfK8ss5Ve0egTymUTx3xwcWGIIP3FSRQ2lra6uAf5DxHm8h4OgezsAWfAA7HEPVGWzN6XTOwKQ5GEvEW4nDcSJ/6xjj8bgX40MYu2iz2TrU2Kn2D9uHEXgQIvA32OxvaHPgg9oAAAAASUVORK5CYII="},5838:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAF6klEQVRIDe1Wa2xURRSeuXvvvre7bXdpSqEtlAaKD0DUVtLSFyW0WCngA3kUAtpAAkZBwUTxh8YAKvCDRq3SUA1KVIhoeUQe2wetoRYJSARJobCFVkq72929233dvXedM+Wu7RZJo/7gB5PszpnvfOe7M+fOnDsIkVY+u/lZ6NHygpYXw6RtWtgTxgCAERIDiIVBUOwPzl/fsQ3se7Rlec0P08C2391hDApAVmypKlXc6nYLwyMjT5JdghiQmKUFjY8BUPG+GhkSHYhTqBjKXFF4uijBlHYMnNsOWDAFGxsb3wXgX7YVedfUK2edfVMOxytntX5hMaaWy4DX61QzACi0brR1v5nirFLtZ8ASPDokBOk6kRgW7IpJSYuMOk3sU3UHfJQZMzXJMGSZ3iBv31U73qxoampalZ7Zc76txZJbtr59e1ZWVhOOXg3GuJXq/M9/dEqguWr2r5/FG8a8jBFdD32MP8A7BI8v5eP6hzz4ted+1rBimpfBAwRIg9EiIbstBslBdr7rCMu7uE3xhgFSXLITbdwxgapBejYvtlPbpLWU0EdvmNcZZlklBe/218Pbtkbm+Ooz1/0qTqeKJna7bK/UnHh8V2TmO39I0fjDf16SieGwhEZPu5wDJMCo4uAUu3qx7uQ+9fML1vn2yEGhUMhPieQ44IaGhtcZhjHITrknpJMFBQUN8vh+7iN5hEnCGeVYzdMhxneFCY4+VFM/zi9PnhIr8s6YNfq4y2qVIU52hBF53/zNz6uPTa8ADK8rblNxKrWXU6gjyZfJ0N/mO6r2HJu+Gr80+/zheMPoEgAlSUTmVB65ehkkemMAQhJ5QyHFVS1r0MRREoCrt+jQ+IkJYKK3ytspGbafw64oYxRYQR3wN3acLmIbzVLE5lhmIhMUfb0y8sGGNnpMr1zkkb1j4NHg8wr+Wrxq1tn3zMaxb8vk6B7K4PaDYzCz+/i0d0iFivZHxs7+7koYMOTUhh3uzjURzyAjKPiC1cenr6NE+KuxZn7q9bt6BnGo2cd3zZexSJIn5XSWQc7k5pO6Lu+xZh6Vx7iqqorLyMjYDEBTrTLL1Z5WFBA9woL1N7YCRjazLTs7u5pJT09/AwBo2aXB0wGF7Ub+0pv0nAAmSVIK9AzHcRfAkNuCtd6a2FHhfnks93T3WK3WXJZlC2VQ7okan5ub+xFkRsYe9P8tA0PONUhBqe7rZfIVnGqtltNPZllVCoMGjouERBQKBWxewXNRFAKVsWapbud3MwY+UnfmERGsKD2jFf34W5MuoZglX9+RzDMY8kkOvuscy0lF1T/NcEAMFVye3zLXZLDsVXMG00iEojm+IO908j3LvqzPPISXFDZOjlUnHNGp4+julMlQoWISnWjRmkSUPEGP4G7Q0d6P9lV2IVenkWz7v6sGxHiCfded3ltzGSXWlig53RAxIMQnu9HG7ekobbIBcUqMWA6TmqRHm3akI/M4HihDmkqhTVUx2mKG1LNr4bA4xAkDqHq2K55hOMzS1TM8xeTEoBAO2HB5YUu8htUfNulHZUZHw7JZrQfJxQ8eAleS6OXSCfR3twawYy59KYvzmqfG6yzfa9WxqdGiIxn3+10dTl/X/L3WmWcj22ZxQXOKQWU6aNKMmjrw7kciRVLjvX3BLTjKvj6R0w4REUEYLCk+HaOV1PtjdYlF+M4dBPC7NaiM5K1aBb+0sKZ+mlPmDMnuV0ez3EmBKSWkQH8SCgVlzrA+JAaRg7+xGycLcwaLATEyQ7gj1NXVzSRl9Um4J/zRyqRcarbMU+I442DFgNTnzpjR82NGpngNaiH5/ZKfn98o10MqeOrUqVIi+MTgQLCDfkZh/UZV4rcnTcFIwqr4W+cKXvAfVaqlUDQXLow5OTm19N4uCMIjpBpHcxAJFOcs99V6XFfpZVpvDP/jVw00iEAtzWFbW9uH8AUZpngHAKF7iUEsaAA9kkNZDHJZX1+fRkiPEiyWLCWG5EkPfoJ5iN9NzD6C/ZaXl3dVzh34H7QHGbhfMvAXQfdlaZGB6y4AAAAASUVORK5CYII="},1321:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAGAklEQVRIDe1WfUxTVxR/Hy3QQu0HCKXIKAUCKGIiiEisfPgxKGO6RE0W55Zlg8Vk868tG8m2mPGHzm1/6EyU6eLM1C2aLQoOl6lQENHhx/yoslKgICWsLYW21NIv2t1z9T7azhhj9od/eJL37rm/c87v3XfeueddikJyNC1tI4zU8fT010NIPHV1IRoAUJwzMxQPJmNOp2+sqelL0J8g+1NSCnCg+dq1EA0M4MyuO3SI7dPp/P+N5J5ETJMPHgSZ5qSkpQBMNzVRN2JiKFl8PIMdDisUa4GVMOPwrq6uL0j4M4yHlcq4UyrVJySU/kWpPFK7ePGbBGjv64tjADAEAlRsSwvGC9PTPXhNL6HprNeLQZfHY2NLAgFxrly+InjyJAZT1GpRxGsOWa22hVeuJLHd3d3vmMrKbqX19JQbduz4prS0tJuOfhuapq9inv/5hpcEnKezsr5bk5dXzzIPcwyY0WabvGMwZGy2Wl30iQULBJrCQjePZcFGQRpmpFJqkcNBkaDO/v42Hj8m5mPidFskopYdO4YDID2BTZuwvjQjQ4MfbV69OiQWCjH4uNvvd+/u4tZoLC/3pM6bFxvt2KrTbd9kNH7LrVyp1QouWa19xDEwO0u1qVRqcAIMM4an2Gcyxfv27t2csHv3YS4oEPBgR7Qd6M7Ozg8ZhhERIxkDgcCFqqqqTjJ/nkcuj7BI2KOp8fGvuLzeAT+ff+bt4WEPWTze680KRdIqpVKfmZgoI4bZYJCSsezB9YODDYCxbdnZsWqVyp4mkUR8Q4amqez584uKZ2dTf56aOsOwLPtrUkIC/kJeVDlQGFBBRNbk5r4HFcZbpFBoCOjbuZNatmQJnuo0GiqHx6OgsgI0vYGJ5fOJHyXNy+N0qEkiAj4/l7G5XBME6N2yBW9Ty/XruHAJPu50ttKnMzObXi4o+JSA0SO0weTz52nm1aGhz+1ud7Sdm/9pNO6DCcoCHeru79/GWcIUC+qldYODH2BHuG0cHT0waLVaw3ywqtXrXyMYV+GGsrIN/rD89Vgs+q3j42eJI93c3MzPz8//DAD7wYOl6+z2tah9+1H73gUYKuaRlStXfs/k5OR8BACIpL7+SrvVOmpsaMD7BLBgMJgBI4/P599BW2EZTEDQXvkBK1E3XGbt7e3lPB5vdZQN2KbLy8u/hsxE217Mny0DEfsaKGAjeQKBymSx+P1UsXihTCjMiHnUtn2oFU663SPjDsc9i8OxL47H69hsMs2EP5ojRD1AmCYQnChSKmukQiFXfeHO0brF5Qr2DAzcdIVCa981mSbBjgl/lMtrS7KyjmbIZJLooKeZ35+asl82GLa+ZTafoQ/IZAtLs7Pb8lJScHUSAuhQt+LiqKzGRiqxoIBCdUZN9vVRBnSGWIS2bCxqIeGiN5uHLw8M1DLJUqlGLhJFkIHjXbGYKkF/sOSiIoqNjaUYdBBJQj1p+fHjlD6s1RDSFJFImSqV1jAer9cIyY4WwdQUZdPpomG8SrBFC3BMezwj9JG0tMRMieS3EpVqebQTvPYQukjzAyI4kkS/LsT1Go1XByYmatlT09MzKyjqWhyfX416c8RHgQaeiI4CKT4fvkDnhR0NyAIMZvP9v0ZHt9ZbLIP4XNDqdv9THAye8vn9Faj25PABnkagG9wYGbnTOzZWs81qvQcxDw8aSGlxuRxVfv9PE15vsUIiySLnDXB6nPhRzi4Zje3DLldNw9jYOPGJKOA3JiedMXK5pqO/f7/jCd3c6fFQF/T6Q0aBoBr9Je2EDEbu3eCM0NHRsQq11RI4J0yfO5eh0GrX50sk4vCAv+12p0mtbplXXW2EXoiu3srKyi7SDzHhxYsX68I7LSEIut2se88eTbHfDz9F+gaffzNu+/azTHz83J/0kTMivKpWq1txufv9/sWoGxMebmSEwtmExsZWnc32B4DCxMSHR1jOY04BDjRrxTk0GAxfwR9kzhyp8RARXJHo3AxigQMQLofEDLnUarVZyKkQYVL0KvNQnhLAjjDUWEJOpE4h7HZFRcUgyR3YX8iLDDwvGfgXPlN1l2enB40AAAAASUVORK5CYII="},2629:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAFms2q7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAMAAAAAClVFsDAAAF1ElEQVRIDe1Wa2xURRSeO/fu9u5uX9sH9IWtNKW08tgC0jWhtgX7o0sL1GqDGv2hEcUovzRoopjoDzFgTJREizw0EUIqFXFhiRr7ogYoaltqgNIXrW1S6L667e7efd3rnGln2S4FjfqDH5zk3jPzne+cmXvuzJlBiEhD44onQKPjJ4qeUoj0XjUqHADQkCQZCdBxTSt+r2fvh9C+ixw7tmIZdbRauxUOIgCZr6s7yt+cuBG43TM8EjN5vbKMSZhVAKQsOICstlyk0WBMCd+eNFRAVBaZure1tb3H3P+Fbm4uE83mojeZK3fSbPhqaZ74HAMGBvUiBsA5qUdL8s9RPC3NKtE5xersSJb9FAz4kQ33DUgfCwKH+vtKKbi2eOOCOZ/pcIZsRuPFFL69vf2F6enHumN1P5W6XHs/MhqN7Vz013Acd5HN5P/UdEoQ8JTFsD83R3xxNsV0DIdTto+MaLPr6lqmuYaGRzTLl8kejGd8IA0IpaH4uCuIOQ0OSxZBo/PuxFiciTBZgIrXHqJtSA/LRmaa2kTDdHUXK5qY8CwoMfJ1rc+7mybYsPICN+2WfZFG1r58zbejurr7rZnVQdBVqy5oRkbVVxghFEJocGhDSc2mzk8Bo+NFpjgYvKmTfJ/VxerePcycgsGgRIlkO3Ctra2vY4zjmJFpQvp5/fr1rax/L+s5WYY9qtPxVV5/qD81KelUeXmLxCZPiUfNq1MWp/K9+kScxAyyjNDAdemLKlPXNsA4i6UyJiPd5glvTcac1b39vvpNVZ0vc2d+MJxenC2aAA8GFTTlLiR/YRwlJjgoVZYV1PMH1goLU1WUBGhaxkFUqH+IEjo6TJQMyw+rpC1Y4G99T2JCHiXBSyFrkkmMWsnHHkm2MuD8+efpNrXZLqEEsnCZuNwhM2c+vfr9JbmqtxkYraEMrjR0cLjK9Osu6NxJRkYD+8CGya5Vrg/7ts9HdHtkf3VV52uUCK/Nm7s/t9mDE9HkwUF/DcPCK9xur9oCOWMyMhrTW1vbeYb1ufr6elVBQcE7AHg8R40P5nRVuFxKwCvt2Q0YWczD69atOyjk5eW9AQCIVvv0+YGh/qVizLZvBFrxEUmXnA02rFKpeqDBJFa360tBSHOzPtP0tzQ1NZUKgrCBgUyTaFOlpaV7ITMMu6//WwZu7YPZOFCq1WpvuShyr8bF8YVkd2bj2e0ihxRETtfhqanQZUlS9vn9mua6unPeyCmEA5rNq7UYKw1ZmUKlKLIqH0m9vU3WtUzWfFcwoK0gge3AoAEbGw0bsxapvk6M5xNvd/t7ZHIy5Bwe8z/75OPdp8hpVFSYkclbUpMFujqZO1QouyMX5efvRHp9Ph3bOXkNXb3yASkf/QiO5Eix2gLXx8bkjVjUKqY4HZ4TDIiTUwXIaDyEkpOXkz2jJo8KJZGaZDQeRtOkiEVLrI7P0WpRJQ4F5KEgOXeiBaqew3E1GkYwS0Rs0RIiP8zjCw0LiiK2OJ3BC7E6dXEkCUroxM2X0MCAPlz8YBC4kiQmzP1c8HM4QhdRiG+lliMNBkNOpupESjKfExn0n7at1uDIn6P+mq1bL/0eHupIY1F2egL+LiNTZeDC6N1DKqQcjI0Hesbt/i3P1PYMAnuOq8VSHI95//EHstQVfETtny8snPdkVk0ej1xbU9PlZJw5AQEktz7B7Z78JGuRevudriE+n4KGR/0H0hfiV9as+W3O9TUcEO4Izc3Nj5KyuhbuCV7fL9k6jWVzakoggY0OesImuNzuyu81YskQ1ELydJSXl7exekgDnj17tpoEfDjScaYt8R7PflNG+shKki9u/MaiLo1mGyn6mmA0Fy6MJSUlZlrFA4HAclKNozmkL4a02h1mu8PxIxg1Gv28FyywQQyizPQI6uvr2wMnCBjmE4z1PnjmswEGvhAD2uEcQgcEctnS0pJLSCtIV08+JZ7kKRZsBJsmdhdpOgh2qaysbIDlDuz35X4G7pUM/AXDs2SAgcMHxgAAAABJRU5ErkJggg=="},6053:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/loading.e3f99efdec30e667b696.gif"},434:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},7071:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},2167:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})},1721:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:()=>i})},3366:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:()=>r})},1002:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})},2751:(e,t,n)=>{"use strict";n.d(t,{x0:()=>r});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}},1875:e=>{"use strict";e.exports=JSON.parse('[{"key":"building","polygon":"all"},{"key":"highway","polygon":"whitelist","values":["services","rest_area","escape","elevator"]},{"key":"natural","polygon":"blacklist","values":["coastline","cliff","ridge","arete","tree_row"]},{"key":"landuse","polygon":"all"},{"key":"waterway","polygon":"whitelist","values":["riverbank","dock","boatyard","dam"]},{"key":"amenity","polygon":"all"},{"key":"leisure","polygon":"all"},{"key":"barrier","polygon":"whitelist","values":["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{"key":"railway","polygon":"whitelist","values":["station","turntable","roundhouse","platform"]},{"key":"area","polygon":"all"},{"key":"boundary","polygon":"all"},{"key":"man_made","polygon":"blacklist","values":["cutline","embankment","pipeline"]},{"key":"power","polygon":"whitelist","values":["plant","substation","generator","transformer"]},{"key":"place","polygon":"all"},{"key":"shop","polygon":"all"},{"key":"aeroway","polygon":"blacklist","values":["taxiway"]},{"key":"tourism","polygon":"all"},{"key":"historic","polygon":"all"},{"key":"public_transport","polygon":"all"},{"key":"office","polygon":"all"},{"key":"building:part","polygon":"all"},{"key":"military","polygon":"all"},{"key":"ruins","polygon":"all"},{"key":"area:highway","polygon":"all"},{"key":"craft","polygon":"all"},{"key":"golf","polygon":"all"},{"key":"indoor","polygon":"all"}]')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{27:"66e4fcae",249:"52c27031",313:"5e5a6254",905:"7674432e"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-sidebar-with-dropdown:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkreact_sidebar_with_dropdown=self.webpackChunkreact_sidebar_with_dropdown||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(7462),t=n(7313),r=n.t(t,2),i=n(1236),o=n(5150),a=n(3566),s=n(6417);const l=function(t){return(0,s.jsx)(o.Z,(0,e.Z)({},t,{defaultTheme:a.Z}))},c=(t,n)=>(0,e.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},n&&!t.vars&&{colorScheme:t.palette.mode}),u=t=>(0,e.Z)({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}});const h=function(n){const r=(0,i.Z)({props:n,name:"MuiCssBaseline"}),{children:o,enableColorScheme:a=!1}=r;return(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(l,{styles:t=>function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i;const o={};n&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach((e=>{let[n,r]=e;var i;o[t.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(i=r.palette)?void 0:i.mode}}));let a=(0,e.Z)({html:c(t,n),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:(0,e.Z)({margin:0},u(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},o);const s=null==(r=t.components)||null==(i=r.MuiCssBaseline)?void 0:i.styleOverrides;return s&&(a=[a,s]),a}(t,a)}),o]})};var d=n(1739),p=n(1239),f=n(7058),m=n(1168);let g=function(e){e()};const y=()=>g,v=(0,t.createContext)(null);function _(){return(0,t.useContext)(v)}let b=()=>{throw new Error("uSES not initialized!")};const x=(e,t)=>e===t;function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const n=e===v?_:()=>(0,t.useContext)(e);return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;const{store:i,subscription:o,getServerState:a}=n(),s=b(o.addNestedSub,i.getState,a||i.getState,e,r);return(0,t.useDebugValue)(s),s}}const S=w();n(7861),n(6214);const E={notify(){},get:()=>[]};function A(e,t){let n,r=E;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=y();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const a={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=E)},getListeners:()=>r};return a}const T=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;let C=null;const k=function(e){let{store:n,context:r,children:i,serverState:o}=e;const a=(0,t.useMemo)((()=>{const e=A(n);return{store:n,subscription:e,getServerState:o?()=>o:void 0}}),[n,o]),s=(0,t.useMemo)((()=>n.getState()),[n]);T((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==n.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,s]);const l=r||v;return t.createElement(l.Provider,{value:a},i)};function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const n=e===v?_:()=>(0,t.useContext)(e);return function(){const{store:e}=n();return e}}const P=I();function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const t=e===v?P:I(e);return function(){return t().dispatch}}const M=L();var O,N;function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}(e=>{b=e})(f.useSyncExternalStoreWithSelector),(e=>{C=e})(p.useSyncExternalStore),O=m.unstable_batchedUpdates,g=O,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(N||(N={}));const D="popstate";function F(e){return{usr:e.state,key:e.key}}function j(e,t,n,r){return void 0===n&&(n=null),R({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?B(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function z(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function B(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function U(e){let t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:z(e);return new URL(n,t)}function V(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=N.Pop,l=null;function c(){s=N.Pop,l&&l({action:s,location:u.location})}let u={get action(){return s},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(D,c),l=e,()=>{i.removeEventListener(D,c),l=null}},createHref:e=>t(i,e),encodeLocation(e){let t=U(z(e));return R({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){s=N.Push;let r=j(u.location,e,t);n&&n(r,e);let c=F(r),h=u.createHref(r);try{a.pushState(c,"",h)}catch(d){i.location.assign(h)}o&&l&&l({action:s,location:u.location})},replace:function(e,t){s=N.Replace;let r=j(u.location,e,t);n&&n(r,e);let i=F(r),c=u.createHref(r);a.replaceState(i,"",c),o&&l&&l({action:s,location:u.location})},go:e=>a.go(e)};return u}var Z;function q(e,t,n){void 0===n&&(n="/");let r=Q(("string"===typeof t?B(t):t).pathname||"/",n);if(null==r)return null;let i=G(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a)o=K(i[a],J(r));return o}function G(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach(((e,i)=>{let o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&($(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=ie([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&($(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),G(e.children,t,s,a)),(null!=e.path||e.index)&&t.push({path:a,score:X(a,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Z||(Z={}));const W=/^:\w+$/,H=e=>"*"===e;function X(e,t){let n=e.split("/"),r=n.length;return n.some(H)&&(r+=-2),t&&(r+=2),n.filter((e=>!H(e))).reduce(((e,t)=>e+(W.test(t)?3:""===t?1:10)),r)}function K(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],s=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Y({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:ie([i,c.pathname]),pathnameBase:oe(ie([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=ie([i,c.pathnameBase]))}return o}function Y(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ee("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(r.push(t),"([^\\/]+)")));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return ee(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(s[n]||"",t),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function J(e){try{return decodeURI(e)}catch(t){return ee(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ee(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function te(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ne(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function re(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=B(e):(i=R({},e),$(!i.pathname||!i.pathname.includes("?"),te("?","pathname","search",i)),$(!i.pathname||!i.pathname.includes("#"),te("#","pathname","hash",i)),$(!i.search||!i.search.includes("#"),te("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{let e=t.length-1;if(s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?B(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:ae(r),hash:se(i)}}(i,o),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const ie=e=>e.join("/").replace(/\/\/+/g,"/"),oe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ae=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",se=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class le extends Error{}class ce{constructor(e,t,n){this.status=e,this.statusText=t||"",this.data=n}}function ue(e){return e instanceof ce}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;const he=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD",...he]);function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}const pe="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},{useState:fe,useEffect:me,useLayoutEffect:ge,useDebugValue:ye}=r;function ve(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!pe(n,e)}catch(r){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;const _e=t.createContext(null);const be=t.createContext(null);const xe=t.createContext(null);const we=t.createContext(null);const Se=t.createContext(null);const Ee=t.createContext({outlet:null,matches:[]});const Ae=t.createContext(null);function Te(){return null!=t.useContext(Se)}function Ce(){return Te()||$(!1),t.useContext(Se).location}function ke(){Te()||$(!1);let{basename:e,navigator:n}=t.useContext(we),{matches:r}=t.useContext(Ee),{pathname:i}=Ce(),o=JSON.stringify(ne(r).map((e=>e.pathnameBase))),a=t.useRef(!1);t.useEffect((()=>{a.current=!0}));let s=t.useCallback((function(t,r){if(void 0===r&&(r={}),!a.current)return;if("number"===typeof t)return void n.go(t);let s=re(t,JSON.parse(o),i,"path"===r.relative);"/"!==e&&(s.pathname="/"===s.pathname?e:ie([e,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}),[e,n,o,i]);return s}const Ie=t.createContext(null);function Pe(e,n){let{relative:r}=void 0===n?{}:n,{matches:i}=t.useContext(Ee),{pathname:o}=Ce(),a=JSON.stringify(ne(i).map((e=>e.pathnameBase)));return t.useMemo((()=>re(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function Le(){let e=function(){var e;let n=t.useContext(Ae),r=Fe(De.UseRouteError),i=t.useContext(Ee),o=i.matches[i.matches.length-1];if(n)return n;return i||$(!1),!o.route.id&&$(!1),null==(e=r.errors)?void 0:e[o.route.id]}(),n=ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:a},"errorElement")," props on\xa0",t.createElement("code",{style:a},"<Route>")))}class Me extends t.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(Ae.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function Oe(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(_e);return o&&r.route.errorElement&&(o._deepestRenderedBoundaryId=r.route.id),t.createElement(Ee.Provider,{value:n},i)}function Ne(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}let i=e,o=null==r?void 0:r.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&(null==o?void 0:o[e.route.id])));e>=0||$(!1),i=i.slice(0,Math.min(i.length,e+1))}return i.reduceRight(((e,a,s)=>{let l=a.route.id?null==o?void 0:o[a.route.id]:null,c=r?a.route.errorElement||t.createElement(Le,null):null,u=()=>t.createElement(Oe,{match:a,routeContext:{outlet:e,matches:n.concat(i.slice(0,s+1))}},l?c:void 0!==a.route.element?a.route.element:e);return r&&(a.route.errorElement||0===s)?t.createElement(Me,{location:r.location,component:c,error:l,children:u()}):u()}),null)}var Re,De;function Fe(e){let n=t.useContext(xe);return n||$(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(Re||(Re={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(De||(De={}));function je(e){let{to:n,replace:r,state:i,relative:o}=e;Te()||$(!1);let a=t.useContext(xe),s=ke();return t.useEffect((()=>{a&&"idle"!==a.navigation.state||s(n,{replace:r,state:i,relative:o})})),null}function ze(e){return function(e){let n=t.useContext(Ee).outlet;return n?t.createElement(Ie.Provider,{value:e},n):n}(e.context)}function Be(e){$(!1)}function Ue(e){let{basename:n="/",children:r=null,location:i,navigationType:o=N.Pop,navigator:a,static:s=!1}=e;Te()&&$(!1);let l=n.replace(/^\/*/,"/"),c=t.useMemo((()=>({basename:l,navigator:a,static:s})),[l,a,s]);"string"===typeof i&&(i=B(i));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=i,m=t.useMemo((()=>{let e=Q(u,l);return null==e?null:{pathname:e,search:h,hash:d,state:p,key:f}}),[l,u,h,d,p,f]);return null==m?null:t.createElement(we.Provider,{value:c},t.createElement(Se.Provider,{children:r,value:{location:m,navigationType:o}}))}function Ve(e){let{children:n,location:r}=e,i=t.useContext(be);return function(e,n){Te()||$(!1);let r=t.useContext(xe),{matches:i}=t.useContext(Ee),o=i[i.length-1],a=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let l,c=Ce();if(n){var u;let e="string"===typeof n?B(n):n;"/"===s||(null==(u=e.pathname)?void 0:u.startsWith(s))||$(!1),l=e}else l=c;let h=l.pathname||"/",d=q(e,{pathname:"/"===s?h:h.slice(s.length)||"/"}),p=Ne(d&&d.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:ie([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:ie([s,e.pathnameBase])}))),i,r||void 0);return n&&p?t.createElement(Se.Provider,{value:{location:de({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:N.Pop}},p):p}(i&&!n?i.router.routes:Ge(n),r)}var Ze;!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ze||(Ze={}));new Promise((()=>{}));class qe extends t.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:n}=this.props,r=null,i=Ze.pending;if(n instanceof Promise)if(this.state.error){Ze.error;let e=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>e})}else n._tracked?(n,void 0!==r._error?Ze.error:void 0!==r._data?Ze.success:Ze.pending):(Ze.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((e=>Object.defineProperty(n,"_data",{get:()=>e})),(e=>Object.defineProperty(n,"_error",{get:()=>e}))));else Ze.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===Ze.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===Ze.error&&!t)throw r._error;if(i===Ze.error)return React.createElement(AwaitContext.Provider,{value:r,children:t});if(i===Ze.success)return React.createElement(AwaitContext.Provider,{value:r,children:e});throw r}}function Ge(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;if(e.type===t.Fragment)return void r.push.apply(r,Ge(e.props.children,n));e.type!==Be&&$(!1),e.props.index&&e.props.children&&$(!1);let o=[...n,i],a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=Ge(e.props.children,o)),r.push(a)})),r}function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},We.apply(this,arguments)}function He(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}const Xe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ke(e){let{basename:n,children:r,window:i}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),V((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return j("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:z(t)}),null,a)));let s=o.current,[l,c]=t.useState({action:s.action,location:s.location});return t.useLayoutEffect((()=>s.listen(c)),[s]),t.createElement(Ue,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:s})}const Ye=t.forwardRef((function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:u}=e,h=He(e,Xe),d=function(e,n){let{relative:r}=void 0===n?{}:n;Te()||$(!1);let{basename:i,navigator:o}=t.useContext(we),{hash:a,pathname:s,search:l}=Pe(e,{relative:r}),c=s;return"/"!==i&&(c="/"===s?i:ie([i,s])),o.createHref({pathname:c,search:l,hash:a})}(c,{relative:i}),p=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s}=void 0===n?{}:n,l=ke(),c=Ce(),u=Pe(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:z(c)===z(u);l(e,{replace:n,state:o,preventScrollReset:a,relative:s})}}),[c,l,u,i,o,r,e,a,s])}(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:i});return t.createElement("a",We({},h,{href:d,onClick:o?r:function(e){r&&r(e),e.defaultPrevented||p(e)},ref:n,target:l}))}));var Je,Qe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Je||(Je={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qe||(Qe={}));var $e=n(4156),et=n(1271);const tt=(0,n(3281).Z)(),nt=(0,$e.Z)({defaultTheme:tt,defaultClassName:"MuiBox-root",generateClassName:et.Z.generate});const rt={sidebar:{bg:"#233044",color:"#eeeeee",hoverBg:"#1e293a",activeBg:"#1e253a"},topbar:{bg:"#fff",color:"#000"},mainBg:n(2180).Z[100]},it={sidebar:{width:"300px"}};var ot=n(3366),at=n(3061),st=n(1921),lt=n(4164),ct=n(8170),ut=n(7551),ht=n(7430),dt=n(2298);function pt(e){return(0,dt.Z)("MuiPaper",e)}(0,ht.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const ft=["className","component","elevation","square","variant"],mt=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)},gt=(0,lt.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((t=>{let{theme:n,ownerState:r}=t;var i;return(0,e.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&(0,e.Z)({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,ut.Fq)("#fff",mt(r.elevation)),", ").concat((0,ut.Fq)("#fff",mt(r.elevation)),")")},n.vars&&{backgroundImage:null==(i=n.vars.overlays)?void 0:i[r.elevation]}))})),yt=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiPaper"}),{className:o,component:a="div",elevation:l=1,square:c=!1,variant:u="elevation"}=r,h=(0,ot.Z)(r,ft),d=(0,e.Z)({},r,{component:a,elevation:l,square:c,variant:u}),p=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,st.Z)(o,pt,i)})(d);return(0,s.jsx)(gt,(0,e.Z)({as:a,ownerState:d,className:(0,at.default)(p.root,o),ref:n},h))})),vt=yt;function _t(e){return(0,dt.Z)("MuiAppBar",e)}(0,ht.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const bt=["className","color","enableColorOnDark","position"],xt=(e,t)=>"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")"),wt=(0,lt.ZP)(vt,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat((0,ct.Z)(n.position))],t["color".concat((0,ct.Z)(n.color))]]}})((t=>{let{theme:n,ownerState:r}=t;const i="light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[900];return(0,e.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===r.position&&{position:"fixed",zIndex:(n.vars||n).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===r.position&&{position:"absolute",zIndex:(n.vars||n).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===r.position&&{position:"sticky",zIndex:(n.vars||n).zIndex.appBar,top:0,left:"auto",right:0},"static"===r.position&&{position:"static"},"relative"===r.position&&{position:"relative"},!n.vars&&(0,e.Z)({},"default"===r.color&&{backgroundColor:i,color:n.palette.getContrastText(i)},r.color&&"default"!==r.color&&"inherit"!==r.color&&"transparent"!==r.color&&{backgroundColor:n.palette[r.color].main,color:n.palette[r.color].contrastText},"inherit"===r.color&&{color:"inherit"},"dark"===n.palette.mode&&!r.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===r.color&&(0,e.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===n.palette.mode&&{backgroundImage:"none"})),n.vars&&(0,e.Z)({},"default"===r.color&&{"--AppBar-background":r.enableColorOnDark?n.vars.palette.AppBar.defaultBg:xt(n.vars.palette.AppBar.darkBg,n.vars.palette.AppBar.defaultBg),"--AppBar-color":r.enableColorOnDark?n.vars.palette.text.primary:xt(n.vars.palette.AppBar.darkColor,n.vars.palette.text.primary)},r.color&&!r.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":r.enableColorOnDark?n.vars.palette[r.color].main:xt(n.vars.palette.AppBar.darkBg,n.vars.palette[r.color].main),"--AppBar-color":r.enableColorOnDark?n.vars.palette[r.color].contrastText:xt(n.vars.palette.AppBar.darkColor,n.vars.palette[r.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===r.color?"inherit":"var(--AppBar-color)"},"transparent"===r.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),St=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiAppBar"}),{className:o,color:a="primary",enableColorOnDark:l=!1,position:c="fixed"}=r,u=(0,ot.Z)(r,bt),h=(0,e.Z)({},r,{color:a,position:c,enableColorOnDark:l}),d=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root","color".concat((0,ct.Z)(t)),"position".concat((0,ct.Z)(n))]};return(0,st.Z)(i,_t,r)})(h);return(0,s.jsx)(wt,(0,e.Z)({square:!0,component:"header",ownerState:h,elevation:4,className:(0,at.default)(d.root,o,"fixed"===c&&"mui-fixed"),ref:n},u))}));function Et(e){return(0,dt.Z)("MuiToolbar",e)}(0,ht.Z)("MuiToolbar",["root","gutters","regular","dense"]);const At=["className","component","disableGutters","variant"],Tt=(0,lt.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({position:"relative",display:"flex",alignItems:"center"},!r.disableGutters&&{paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},"dense"===r.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),Ct=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiToolbar"}),{className:o,component:a="div",disableGutters:l=!1,variant:c="regular"}=r,u=(0,ot.Z)(r,At),h=(0,e.Z)({},r,{component:a,disableGutters:l,variant:c}),d=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,st.Z)(i,Et,t)})(h);return(0,s.jsx)(Tt,(0,e.Z)({as:a,className:(0,at.default)(d.root,o),ref:n,ownerState:h},u))})),kt=Ct;var It=n(9028);function Pt(e){return(0,dt.Z)("MuiTypography",e)}(0,ht.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Lt=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Mt=(0,lt.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,ct.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({margin:0},r.variant&&n.typography[r.variant],"inherit"!==r.align&&{textAlign:r.align},r.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r.gutterBottom&&{marginBottom:"0.35em"},r.paragraph&&{marginBottom:16})})),Ot={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Nt={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Rt=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiTypography"}),o=(e=>Nt[e]||e)(r.color),a=(0,It.Z)((0,e.Z)({},r,{color:o})),{align:l="inherit",className:c,component:u,gutterBottom:h=!1,noWrap:d=!1,paragraph:p=!1,variant:f="body1",variantMapping:m=Ot}=a,g=(0,ot.Z)(a,Lt),y=(0,e.Z)({},a,{align:l,color:o,className:c,component:u,gutterBottom:h,noWrap:d,paragraph:p,variant:f,variantMapping:m}),v=u||(p?"p":m[f]||Ot[f])||"span",_=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e,s={root:["root",o,"inherit"!==e.align&&"align".concat((0,ct.Z)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,st.Z)(s,Pt,a)})(y);return(0,s.jsx)(Mt,(0,e.Z)({as:v,ref:n,ownerState:y,className:(0,at.default)(_.root,c)},g))})),Dt=Rt;var Ft=n(5700);const jt=(0,Ft.Z)((0,s.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function zt(e){return(0,dt.Z)("MuiAvatar",e)}(0,ht.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Bt=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Ut=(0,lt.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===r.variant&&{borderRadius:(n.vars||n).shape.borderRadius},"square"===r.variant&&{borderRadius:0},r.colorDefault&&(0,e.Z)({color:(n.vars||n).palette.background.default},n.vars?{backgroundColor:n.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600]}))})),Vt=(0,lt.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Zt=(0,lt.ZP)(jt,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const qt=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiAvatar"}),{alt:a,children:l,className:c,component:u="div",imgProps:h,sizes:d,src:p,srcSet:f,variant:m="circular"}=o,g=(0,ot.Z)(o,Bt);let y=null;const v=function(e){let{crossOrigin:n,referrerPolicy:r,src:i,srcSet:o}=e;const[a,s]=t.useState(!1);return t.useEffect((()=>{if(!i&&!o)return;s(!1);let e=!0;const t=new Image;return t.onload=()=>{e&&s("loaded")},t.onerror=()=>{e&&s("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,o&&(t.srcset=o),()=>{e=!1}}),[n,r,i,o]),a}((0,e.Z)({},h,{src:p,srcSet:f})),_=p||f,b=_&&"error"!==v,x=(0,e.Z)({},o,{colorDefault:!b,component:u,variant:m}),w=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,st.Z)(i,zt,t)})(x);return y=b?(0,s.jsx)(Vt,(0,e.Z)({alt:a,src:p,srcSet:f,sizes:d,ownerState:x,className:w.img},h)):null!=l?l:_&&a?a[0]:(0,s.jsx)(Zt,{className:w.fallback}),(0,s.jsx)(Ut,(0,e.Z)({as:u,ownerState:x,className:(0,at.default)(w.root,c),ref:r},g,{children:y}))})),Gt=qt;var Wt=n(9572);function Ht(e){return(0,dt.Z)("MuiIconButton",e)}const Xt=(0,ht.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Kt=["edge","children","className","color","disabled","disableFocusRipple","size"],Yt=(0,lt.ZP)(Wt.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,ct.Z)(n.color))],n.edge&&t["edge".concat((0,ct.Z)(n.edge))],t["size".concat((0,ct.Z)(n.size))]]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!r.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,ut.Fq)(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===r.edge&&{marginLeft:"small"===r.size?-3:-12},"end"===r.edge&&{marginRight:"small"===r.size?-3:-12})}),(t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&(0,e.Z)({color:(n.vars||n).palette[r.color].main},!r.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[r.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,ut.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===r.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:n.typography.pxToRem(28)},{["&.".concat(Xt.disabled)]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})})),Jt=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiIconButton"}),{edge:o=!1,children:a,className:l,color:c="default",disabled:u=!1,disableFocusRipple:h=!1,size:d="medium"}=r,p=(0,ot.Z)(r,Kt),f=(0,e.Z)({},r,{edge:o,color:c,disabled:u,disableFocusRipple:h,size:d}),m=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,a={root:["root",n&&"disabled","default"!==r&&"color".concat((0,ct.Z)(r)),i&&"edge".concat((0,ct.Z)(i)),"size".concat((0,ct.Z)(o))]};return(0,st.Z)(a,Ht,t)})(f);return(0,s.jsx)(Yt,(0,e.Z)({className:(0,at.default)(m.root,l),centerRipple:!0,focusRipple:!h,disabled:u,ref:n,ownerState:f},p,{children:a}))})),Qt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new en;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class en extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tn=function(e){return function(e){const t=Qt(e);return $t.encodeByteArray(t,!0)}(e).replace(/\./g,"")},nn=function(e){try{return $t.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const rn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,on=()=>{try{return rn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&nn(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},an=e=>{var t,n;return null===(n=null===(t=on())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},sn=e=>{const t=an(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ln=()=>{var e;return null===(e=on())||void 0===e?void 0:e.config},cn=e=>{var t;return null===(t=on())||void 0===t?void 0:t["_".concat(e)]};class un{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function hn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[tn(JSON.stringify({alg:"none",type:"JWT"})),tn(JSON.stringify(o)),""].join(".")}function dn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function pn(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function fn(){try{return"object"===typeof indexedDB}catch(e){return!1}}function mn(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class gn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yn.prototype.create)}}class yn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(vn,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new gn(n,o,t)}}const vn=/\{\$([^}]+)}/g;function _n(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(bn(n)&&bn(o)){if(!_n(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bn(e){return null!==e&&"object"===typeof e}function xn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function wn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Sn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class En{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=An),void 0===r.error&&(r.error=An),void 0===r.complete&&(r.complete=An);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function An(){}const Tn=144e5;function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(Tn,r+i)}function kn(e){return e&&e._delegate?e._delegate:e}class In{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pn="[DEFAULT]";class Ln{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new un;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Iu){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Pn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Iu){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Mn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ln(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const On=[];var Nn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Nn||(Nn={}));const Rn={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},Dn=Nn.INFO,Fn={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},jn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Fn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class zn{constructor(e){this.name=e,this._logLevel=Dn,this._logHandler=jn,this._userLogHandler=null,On.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Rn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...t),this._logHandler(this,Nn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...t),this._logHandler(this,Nn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...t),this._logHandler(this,Nn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...t),this._logHandler(this,Nn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...t),this._logHandler(this,Nn.ERROR,...t)}}let Bn,Un;const Vn=new WeakMap,Zn=new WeakMap,qn=new WeakMap,Gn=new WeakMap,Wn=new WeakMap;let Hn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Xn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Un||(Un=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jn(this),n),Yn(Vn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yn(e.apply(Jn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Jn(this),t,...r);return qn.set(o,t.sort?t.sort():[t]),Yn(o)}}function Kn(e){return"function"===typeof e?Xn(e):(e instanceof IDBTransaction&&function(e){if(Zn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Zn.set(e,t)}(e),t=e,(Bn||(Bn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Hn):e);var t}function Yn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Yn(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Vn.set(t,e)})).catch((()=>{})),Wn.set(t,e),t}(e);if(Gn.has(e))return Gn.get(e);const t=Kn(e);return t!==e&&(Gn.set(e,t),Wn.set(t,e)),t}const Jn=e=>Wn.get(e);const Qn=["get","getKey","getAll","getAllKeys","count"],$n=["put","add","delete","clear"],er=new Map;function tr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(er.get(t))return er.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=$n.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Qn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return er.set(t,o),o}Hn=(e=>({...e,get:(t,n,r)=>tr(t,n)||e.get(t,n,r),has:(t,n)=>!!tr(t,n)||e.has(t,n)}))(Hn);class nr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const rr="@firebase/app",ir="0.9.13",or=new zn("@firebase/app"),ar="[DEFAULT]",sr={[rr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lr=new Map,cr=new Map;function ur(e,t){try{e.container.addComponent(t)}catch(n){or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function hr(e){const t=e.name;if(cr.has(t))return or.debug("There were multiple attempts to register component ".concat(t,".")),!1;cr.set(t,e);for(const n of lr.values())ur(n,e);return!0}function dr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const pr=new yn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new In("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const mr="9.23.0";function gr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ar,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=ln()),!n)throw pr.create("no-options");const o=lr.get(i);if(o){if(_n(n,o.options)&&_n(r,o.config))return o;throw pr.create("duplicate-app",{appName:i})}const a=new Mn(i);for(const l of cr.values())a.addComponent(l);const s=new fr(n,r,a);return lr.set(i,s),s}function yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;const t=lr.get(e);if(!t&&e===ar&&ln())return gr();if(!t)throw pr.create("no-app",{appName:e});return t}function vr(e,t,n){var r;let i=null!==(r=sr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void or.warn(e.join(" "))}hr(new In("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const _r="firebase-heartbeat-store";let br=null;function xr(){return br||(br=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Yn(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Yn(a.result),e.oldVersion,e.newVersion,Yn(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(_r)}}).catch((e=>{throw pr.create("idb-open",{originalErrorMessage:e.message})}))),br}async function wr(e,t){try{const n=(await xr()).transaction(_r,"readwrite"),r=n.objectStore(_r);await r.put(t,Sr(e)),await n.done}catch(n){if(n instanceof gn)or.warn(n.message);else{const e=pr.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});or.warn(e.message)}}}function Sr(e){return"".concat(e.name,"!").concat(e.options.appId)}const Er=1024;class Ar{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Cr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Tr();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Tr(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),kr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=tn(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Tr(){return(new Date).toISOString().substring(0,10)}class Cr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fn()&&mn().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await xr();return await t.transaction(_r).objectStore(_r).get(Sr(e))}catch(t){if(t instanceof gn)or.warn(t.message);else{const e=pr.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});or.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function kr(e){return tn(JSON.stringify({version:2,heartbeats:e})).length}var Ir;Ir="",hr(new In("platform-logger",(e=>new nr(e)),"PRIVATE")),hr(new In("heartbeat",(e=>new Ar(e)),"PRIVATE")),vr(rr,ir,Ir),vr(rr,ir,"esm2017"),vr("fire-js","");function Pr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;function Lr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mr=Lr,Or=new yn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nr=new zn("@firebase/auth");function Rr(e){if(Nr.logLevel<=Nn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nr.error("Auth (".concat(mr,"): ").concat(e),...n)}}function Dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw zr(e,...n)}function Fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zr(e,...n)}function jr(e,t,n){const r=Object.assign(Object.assign({},Mr()),{[t]:n});return new yn("auth","Firebase",r).create(t,{appName:e.name})}function zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Or.create(e,...n)}function Br(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw zr(t,...r)}}function Ur(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Rr(t),new Error(t)}function Vr(e,t){e||Ur(t)}function Zr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qr(){return"http:"===Gr()||"https:"===Gr()}function Gr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Wr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qr()||pn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Hr(e,t){Vr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Xr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yr=new Wr(3e4,6e4);function Jr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Qr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return $r(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=xn(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode),Xr.fetch()(ti(e,e.config.apiHost,n,a),Object.assign({method:t,headers:s,referrerPolicy:"no-referrer"},i))}))}async function $r(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kr),t);try{const t=new ni(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ri(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ri(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ri(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ri(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw jr(e,s,a);Dr(e,s)}}catch(i){if(i instanceof gn)throw i;Dr(e,"network-request-failed",{message:String(i)})}}async function ei(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Qr(e,t,n,r,i);return"mfaPendingCredential"in o&&Dr(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ti(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Hr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class ni{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Fr(this.auth,"network-request-failed"))),Yr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ri(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fr(e,t,r);return i.customData._tokenResponse=n,i}function ii(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}async function oi(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=kn(e),r=await n.getIdToken(t),i=si(r);Br(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ii(ai(i.auth_time)),issuedAtTime:ii(ai(i.iat)),expirationTime:ii(ai(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}function ai(e){return 1e3*Number(e)}function si(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Rr("JWT malformed, contained fewer than 3 sections"),null;try{const e=nn(n);return e?JSON.parse(e):(Rr("Failed to decode base64 JWT payload"),null)}catch(i){return Rr("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function li(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return t;try{return await t}catch(r){throw r instanceof gn&&ci(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function ci(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}class ui{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class hi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function di(e){var t;const n=e.auth,r=await e.getIdToken(),i=await li(e,async function(e,t){return Qr(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Br(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=Pr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new hi(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Br(e.idToken,"internal-error"),Br("undefined"!==typeof e.idToken,"internal-error"),Br("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=si(e);return Br(t,"internal-error"),Br("undefined"!==typeof t.exp,"internal-error"),Br("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Br(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await $r(e,{},(async()=>{const n=xn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=ti(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xr.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new pi;return n&&(Br("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Br("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Br("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pi,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function fi(e,t){Br("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class mi{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Pr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ui(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await li(this,this.stsTokenManager.getToken(this.auth,e));return Br(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oi(this,e)}reload(){return async function(e){const t=kn(e);await di(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Br(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Br(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await di(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await li(this,async function(e,t){return Qr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:x,stsTokenManager:w}=t;Br(v&&w,e,"internal-error");const S=pi.fromJSON(this.name,w);Br("string"===typeof v,e,"internal-error"),fi(u,e.name),fi(h,e.name),Br("boolean"===typeof _,e,"internal-error"),Br("boolean"===typeof b,e,"internal-error"),fi(d,e.name),fi(p,e.name),fi(f,e.name),fi(m,e.name),fi(g,e.name),fi(y,e.name);const E=new mi({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(E.providerData=x.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new pi;r.updateFromServerResponse(t);const i=new mi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await di(i),i}}const gi=new Map;function yi(e){Vr(e instanceof Function,"Expected a class definition");let t=gi.get(e);return t?(Vr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gi.set(e,t),t)}class vi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vi.type="NONE";const _i=vi;function bi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class xi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=bi(this.userKey,r.apiKey,i),this.fullPersistenceKey=bi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new xi(yi(_i),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||yi(_i);const o=bi(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){const n=mi._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(Iu){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(Iu){}}))),new xi(i,e,n)):new xi(i,e,n)}}function wi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ti(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Si(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ki(t))return"Blackberry";if(Ii(t))return"Webos";if(Ei(t))return"Safari";if((t.includes("chrome/")||Ai(t))&&!t.includes("edge/"))return"Chrome";if(Ci(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/firefox\//i.test(e)}function Ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/crios\//i.test(e)}function Ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/iemobile/i.test(e)}function Ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/android/i.test(e)}function ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/blackberry/i.test(e)}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/webos/i.test(e)}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();var t;return Pi(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function Mi(){return function(){const e=dn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();return Pi(e)||Ci(e)||Ii(e)||ki(e)||/windows phone/i.test(e)||Ti(e)}function Ni(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=wi(dn());break;case"Worker":t="".concat(wi(dn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mr,"/").concat(r)}async function Ri(e,t){return Qr(e,"GET","/v2/recaptchaConfig",Jr(e,t))}function Di(e){return void 0!==e&&void 0!==e.enterprise}class Fi{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function ji(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Fr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function zi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Bi{constructor(e){this.type="recaptcha-enterprise",this.auth=qi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Di(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ri(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Fi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Di(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));ji("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ui(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Bi(e);let o;try{o=await i.verify(n)}catch(s){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class Vi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(jh){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Zi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gi(this),this.idTokenSubscription=new Gi(this),this.beforeStateQueue=new Vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Or,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await xi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Br(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await di(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?kn(e):null;return t&&Br(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Br(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(yi(e))}))}async initializeRecaptchaConfig(){const e=await Ri(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Fi(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Bi(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Br(t,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Br(o,this,"internal-error"),o.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Br(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Nr.logLevel<=Nn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nr.warn("Auth (".concat(mr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function qi(e){return kn(e)}class Gi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new En(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Br(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wi(e,t){const n=dr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(_n(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Dr(e,"already-initialized")}return n.initialize({options:t})}function Hi(e,t,n){const r=qi(e);Br(r._canInitEmulator,r,"emulator-config-failed"),Br(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Xi(t),{host:a,port:s}=function(e){const t=Xi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ki(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ki(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(o,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Xi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ki(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Yi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function Ji(e,t){return Qr(e,"POST","/v1/accounts:update",t)}async function Qi(e,t){return ei(e,"POST","/v1/accounts:signInWithPassword",Jr(e,t))}async function $i(e,t){return Qr(e,"POST","/v1/accounts:sendOobCode",Jr(e,t))}async function eo(e,t){return $i(e,t)}class to extends Yi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new to(e,t,"password")}static _fromEmailAndCode(e,t){return new to(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Ui(e,n,"signInWithPassword");return Qi(e,t)}return Qi(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Ui(e,n,"signInWithPassword");return Qi(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithEmailLink",Jr(e,t))}(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ji(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithEmailLink",Jr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function no(e,t){return ei(e,"POST","/v1/accounts:signInWithIdp",Jr(e,t))}class ro extends Yi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Pr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new ro(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return no(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,no(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,no(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xn(t)}return e}}const io={USER_NOT_FOUND:"user-not-found"};class oo extends Yi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new oo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new oo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithPhoneNumber",Jr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ei(e,"POST","/v1/accounts:signInWithPhoneNumber",Jr(e,t));if(n.temporaryProof)throw ri(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithPhoneNumber",Jr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),io)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new oo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ao{constructor(e){var t,n,r,i,o,a;const s=wn(Sn(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Br(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=wn(Sn(e)).link,n=t?wn(Sn(t)).deep_link_id:null,r=wn(Sn(e)).deep_link_id;return(r?wn(Sn(r)).link:null)||r||n||t||e}(e);try{return new ao(t)}catch(Iu){return null}}}class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(e,t){return to._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ao.parseLink(t);return Br(n,"argument-error"),to._fromEmailAndCode(e,n.code,n.tenantId)}}so.PROVIDER_ID="password",so.EMAIL_PASSWORD_SIGN_IN_METHOD="password",so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class co extends lo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uo extends co{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return uo.credential(t.oauthAccessToken)}catch(Iu){return null}}}uo.FACEBOOK_SIGN_IN_METHOD="facebook.com",uo.PROVIDER_ID="facebook.com";class ho extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ro._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ho.credential(n,r)}catch(Iu){return null}}}ho.GOOGLE_SIGN_IN_METHOD="google.com",ho.PROVIDER_ID="google.com";class po extends co{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return po.credential(t.oauthAccessToken)}catch(Iu){return null}}}po.GITHUB_SIGN_IN_METHOD="github.com",po.PROVIDER_ID="github.com";class fo extends co{constructor(){super("twitter.com")}static credential(e,t){return ro._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return fo.credential(n,r)}catch(Iu){return null}}}async function mo(e,t){return ei(e,"POST","/v1/accounts:signUp",Jr(e,t))}fo.TWITTER_SIGN_IN_METHOD="twitter.com",fo.PROVIDER_ID="twitter.com";class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await mi._fromIdTokenResponse(e,n,r),o=yo(n);return new go({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=yo(n);return new go({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function yo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class vo extends gn{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,vo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new vo(e,t,n,r)}}function _o(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw vo._fromErrorAndOperation(e,n,t,r);throw n}))}async function bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await li(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return go._forOperation(e,"link",r)}async function xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await li(e,_o(r,i,t,e),n);Br(o.idToken,r,"internal-error");const a=si(o.idToken);Br(a,r,"internal-error");const{sub:s}=a;return Br(e.uid===s,r,"user-mismatch"),go._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&Dr(r,"user-mismatch"),o}}async function wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await _o(e,r,t),o=await go._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function So(e,t){return wo(qi(e),t)}function Eo(e,t,n){var r;Br((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Br("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Br(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Br(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ao(e,t,n){var r;const i=qi(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Ui(i,o,"signUpPassword");a=mo(i,e)}else a=mo(i,o).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Ui(i,o,"signUpPassword");return mo(i,e)}return Promise.reject(e)}));const s=await a.catch((e=>Promise.reject(e))),l=await go._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(l.user),l}async function To(e,t){const n=kn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Eo(n.auth,r,t);const{email:i}=await async function(e,t){return $i(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Co(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=kn(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await li(i,async function(e,t){return Qr(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const s=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));s&&(s.displayName=i.displayName,s.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function ko(e,t,n,r){return kn(e).onIdTokenChanged(t,n,r)}function Io(e,t,n){return kn(e).beforeAuthStateChanged(t,n)}function Po(e){return kn(e).signOut()}new WeakMap;const Lo="__sak";class Mo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lo,"1"),this.storage.removeItem(Lo),Promise.resolve(!0)):Promise.resolve(!1)}catch(Iu){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Oo extends Mo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=dn();return Ei(e)||Pi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Oi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Mi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Oo.type="LOCAL";const No=Oo;class Ro extends Mo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ro.type="SESSION";const Do=Ro;class Fo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Fo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function jo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fo.receivers=[];class zo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=jo("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Bo(){return window}function Uo(){return"undefined"!==typeof Bo().WorkerGlobalScope&&"function"===typeof Bo().importScripts}const Vo="firebaseLocalStorageDb",Zo="firebaseLocalStorage",qo="fbase_key";class Go{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Wo(e,t){return e.transaction([Zo],t?"readwrite":"readonly").objectStore(Zo)}function Ho(){const e=indexedDB.open(Vo,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Zo,{keyPath:qo})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Zo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Vo);return new Go(e).toPromise()}(),t(await Ho()))}))}))}async function Xo(e,t,n){const r=Wo(e,!0).put({[qo]:t,value:n});return new Go(r).toPromise()}function Ko(e,t){const n=Wo(e,!0).delete(t);return new Go(n).toPromise()}class Yo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ho()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fo._getInstance(Uo()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new zo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Iu){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ho();return await Xo(e,Lo,"1"),await Ko(e,Lo),!0}catch(Iu){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Xo(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Wo(e,!1).get(t),r=await new Go(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ko(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Wo(e,!1).getAll();return new Go(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Yo.type="LOCAL";const Jo=Yo;zi("rcb"),new Wr(3e4,6e4);const Qo="recaptcha";async function $o(e,t,n){var r;const i=await n.verify();try{let o;if(Br("string"===typeof i,e,"argument-error"),Br(n.type===Qo,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Br("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Qr(e,"POST","/v2/accounts/mfaEnrollment:start",Jr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Br("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Br(n,e,"missing-multi-factor-info");const a=await function(e,t){return Qr(e,"POST","/v2/accounts/mfaSignIn:start",Jr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Qr(e,"POST","/v1/accounts:sendVerificationCode",Jr(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ea{constructor(e){this.providerId=ea.PROVIDER_ID,this.auth=qi(e)}verifyPhoneNumber(e,t){return $o(this.auth,e,kn(t))}static credential(e,t){return oo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ea.credentialFromTaggedObject(t)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?oo._fromTokenResponse(n,r):null}}function ta(e,t){return t?yi(t):(Br(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ea.PROVIDER_ID="phone",ea.PHONE_SIGN_IN_METHOD="phone";class na extends Yi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,t){return no(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ra(e){return wo(e.auth,new na(e),e.bypassAuthState)}function ia(e){const{auth:t,user:n}=e;return Br(n,t,"internal-error"),xo(n,new na(e),e.bypassAuthState)}async function oa(e){const{auth:t,user:n}=e;return Br(n,t,"internal-error"),bo(n,new na(e),e.bypassAuthState)}class aa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ra;case"linkViaPopup":case"linkViaRedirect":return oa;case"reauthViaPopup":case"reauthViaRedirect":return ia;default:Dr(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sa=new Wr(2e3,1e4);class la extends aa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Br(e,this.auth,"internal-error"),e}async onExecution(){Vr(1===this.filter.length,"Popup operations only handle one event");const e=jo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Fr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,sa.get())};e()}}la.currentPopupAction=null;const ca=new Map;class ua extends aa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ca.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=pa(t),r=da(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ca.set(this.auth._key(),e)}return this.bypassAuthState||ca.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ha(e,t){ca.set(e._key(),t)}function da(e){return yi(e._redirectPersistence)}function pa(e){return bi("pendingRedirect",e.config.apiKey,e.name)}async function fa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=qi(e),i=ta(r,t),o=new ua(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class ma{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ya(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ya(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ga(e))}saveEventToCache(e){this.cachedEventUids.add(ga(e)),this.lastProcessedEventTime=Date.now()}}function ga(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ya(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const va=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_a=/^https?/;async function ba(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Qr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(xa(n))return}catch(Iu){}Dr(e,"unauthorized-domain")}function xa(e){const t=Zr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!_a.test(n))return!1;if(va.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wa=new Wr(3e4,6e4);function Sa(){const e=Bo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Ea=null;function Aa(e){return Ea=Ea||function(e){return new Promise(((t,n)=>{var r,i,o;function a(){Sa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sa(),n(Fr(e,"network-request-failed"))},timeout:wa.get()})}if(null===(i=null===(r=Bo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Bo().gapi)||void 0===o?void 0:o.load)){const t=zi("iframefcb");return Bo()[t]=()=>{gapi.load?a():n(Fr(e,"network-request-failed"))},ji("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Ea=null,e}))}(e),Ea}const Ta=new Wr(5e3,15e3),Ca={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ka=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ia(e){const t=e.config;Br(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:mr},i=ka.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(xn(r).slice(1))}const Pa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},La="_blank",Ma="http://localhost";class Oa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Na(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Ra="__/auth/handler",Da="emulator/auth/handler",Fa=encodeURIComponent("fac");async function ja(e,t,n,r,i,o){Br(e.config.authDomain,e,"auth-domain-config-required"),Br(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mr,eventId:i};if(t instanceof lo){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof co){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Fa,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ra);return Hr(t,Da)}(e),"?").concat(xn(s).slice(1)).concat(c)}const za="webStorageSupport";const Ba=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Do,this._completeRedirectFn=fa,this._overrideRedirectResult=ha}async _openPopup(e,t,n,r){var i;Vr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Pa),{width:r.toString(),height:i.toString(),top:o,left:a}),c=dn().toLowerCase();n&&(s=Ai(c)?La:n),Si(c)&&(t=t||Ma,l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(Li(c)&&"_self"!==s)return Na(t||"",s),new Oa(null);const h=window.open(t||"",s,u);Br(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Oa(h)}(e,await ja(e,t,n,Zr(),r),jo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Bo().location.href=e}(await ja(e,t,n,Zr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Vr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Aa(e),n=Bo().gapi;return Br(n,e,"internal-error"),t.open({where:document.body,url:Ia(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ca,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Fr(e,"network-request-failed"),o=Bo().setTimeout((()=>{r(i)}),Ta.get());function a(){Bo().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new ma(e);return t.register("authEvent",(t=>{Br(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(za,{type:za},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Dr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ba(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Oi()||Ei()||Pi()}};var Ua="@firebase/auth",Va="0.23.2";class Za{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Br(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const qa=cn("authIdTokenMaxAge")||300;let Ga=null;const Wa=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qa)return;const i=null===n||void 0===n?void 0:n.token;Ga!==i&&(Ga=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function Ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr();const t=dr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Wi(e,{popupRedirectResolver:Ba,persistence:[Jo,No,Do]}),r=cn("authTokenSyncURL");if(r){const e=Wa(r);Io(n,e,(()=>e(n.currentUser))),ko(n,(t=>e(t)))}const i=an("auth");return i&&Hi(n,"http://".concat(i)),n}var Xa;Xa="Browser",hr(new In("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Br(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:Xa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(Xa)},c=new Zi(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),hr(new In("auth-internal",(e=>(e=>new Za(e))(qi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),vr(Ua,Va,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xa)),vr(Ua,Va,"esm2017");const Ka={images:{logo:n(4427),data:n(722),geoMark:n(6894),logout:n(6919),blueMarker:n(8980),grayMarker:n(28),greenMarker:n(9301),orangeMarker:n(6951),pinkMarker:n(2287),purpleMarker:n(5838),redMarker:n(1321),yellowMarker:n(2629),loading:n(6053),avatar:n(8987)}},Ya=()=>{var e;const t=Ha();return(0,s.jsxs)(St,{style:{background:"transparent"},sx:{width:"calc(100%)",boxShadow:"unset",backgroundColor:"black",color:"white",minHeight:"0px"},children:[(0,s.jsx)(kt,{style:{background:"black",opacity:"0.7"}}),(0,s.jsx)(Dt,{variant:"h6",style:{color:"white",position:"absolute",marginTop:"10px",marginLeft:"100px",fontSize:"30px"},children:"Geospatial Mapping Software"}),(0,s.jsx)(Gt,{style:{width:"40px",height:"40px",borderRadius:"20px",position:"absolute",marginTop:"12px",marginLeft:"80%"},alt:"Remy Sharp",src:Ka.images.avatar}),(0,s.jsx)(Dt,{variant:"h6",style:{color:"white",position:"absolute",marginTop:"20px",marginLeft:"83%",fontSize:"16px"},children:null===(e=t.currentUser)||void 0===e?void 0:e.displayName}),(0,s.jsx)(Jt,{style:{position:"absolute",marginTop:"8px",marginLeft:"97%",width:"30px"},onClick:()=>{!function(e){Po(e).then((()=>{console.log("Sign-out successful.")})).catch((e=>{}))}(t)},children:(0,s.jsx)("img",{src:Ka.images.logout,alt:"Button label",style:{width:"30px",height:"30px"}})})]})},Ja=()=>(0,s.jsxs)(nt,{sx:{display:"flex"},children:[(0,s.jsx)(Ya,{}),(0,s.jsx)(nt,{component:"main",style:{padding:"0px"},sx:{flexGrow:1,p:3,width:"calc(100% - ".concat(it.sidebar.width,")"),minHeight:"100vh",backgroundColor:rt.mainBg},children:(0,s.jsx)(ze,{})})]});var Qa=n(5056),$a=n.n(Qa);var es=n(3457),ts=n.n(es);const ns=t.createContext(null);function rs(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function is(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),r=r||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,r=r||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,r=r||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,r=r||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const os=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function as(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map((e=>{const n=t[e.ref];let r=null;if("interactive"in e&&(r={...e},delete r.interactive),n){r=r||{...e},delete r.ref;for(const e of os)e in n&&(r[e]=n[e])}return r||e}));return{...e,layers:n}}function ss(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!ss(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){if(!t.hasOwnProperty(i))return!1;if(!ss(e[i],t[i]))return!1}return!0}return!1}const ls={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},cs={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},us={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},hs=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],ds=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ps{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[us[e.type]];t&&t(e)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[ls[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[cs[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=ps.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(t.className=i.className;i.childNodes.length>0;)t.appendChild(i.childNodes[0]);r._container=t,n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:o}=e;return o&&(o.bounds?r.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),r.triggerRepaint(),n}_initialize(e){const{props:t}=this,n={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||fs()||null,container:e,style:as(t.mapStyle)},r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const i=new this._MapClass(n);r.padding&&i.setPadding(r.padding),t.cursor&&(i.getCanvas().style.cursor=t.cursor),this._createShadowTransform(i);const o=i._render;i._render=e=>{this._inRender=!0,o.call(i,e),this._inRender=!1};const a=i._renderTaskQueue.run;i._renderTaskQueue.run=e=>{a.call(i._renderTaskQueue,e),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const s=i.fire;i.fire=this._fireEvent.bind(this,s),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const l in ls)i.on(l,this._onPointerEvent);for(const l in cs)i.on(l,this._onCameraEvent);for(const l in us)i.on(l,this._onEvent);this._map=i}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null===e||void 0===e||e.remove(),ps.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:o,bearing:a}=r,s=n.isMoving();s&&(r.cameraElevationReference="sea");const l=is(r,{...rs(n.transform),...e});if(s&&(r.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=i!==r.zoom),e.rotate||(e.rotate=a!==r.bearing),e.pitch||(e.pitch=o!==r.pitch)}return s||is(n.transform,e),l}_updateSettings(e,t){const n=this._map;let r=!1;for(const i of hs)i in e&&!ss(e[i],t[i])&&(r=!0,n["set".concat(i[0].toUpperCase()).concat(i.slice(1))](e[i]));return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){const t={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(t.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(as(e.mapStyle),t),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let r=!1;return n.style.loaded()&&("light"in e&&!ss(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&!ss(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&!ss(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}_updateHandlers(e,t){const n=this._map;let r=!1;for(const i of ds){const o=e[i];ss(o,t[i])||(r=!0,o?n[i].enable(o):n[i].disable())}return r}_queryRenderedFeatures(e){const t=this._map,{interactiveLayerIds:n=[]}=this.props;try{return t.queryRenderedFeatures(e,{layers:n.filter(t.getLayer.bind(t))})}catch(Iu){return[]}}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=e.type,r=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,i=this._queryRenderedFeatures(e.point),o=i.length>0;!o&&r&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=i,o&&!r&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,t,n){const r=this._map,i=r.transform,o="string"===typeof t?t:t.type;return"move"===o&&this._updateViewState(this.props,!1),o in cs&&("object"===typeof t&&(t.viewState=rs(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=t}}}function fs(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(Iu){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(Mu){}return e}ps.savedMaps=[];const ms=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function gs(e,t){if(!e)return null;const n=e.map,r={getMap:()=>n,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>e.transform.locationPoint(t.LngLat.convert(n)),unproject:n=>e.transform.pointLocation(t.Point.convert(n)),queryTerrainElevation:(t,r)=>{const i=n.transform;n.transform=e.transform;const o=n.queryTerrainElevation(t,r);return n.transform=i,o}};for(const i of function(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}(n))i in r||ms.includes(i)||(r[i]=n[i].bind(n));return r}const ys="undefined"!==typeof document?t.useLayoutEffect:t.useEffect,vs=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const _s=t.createContext(null),bs={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},xs=(0,t.forwardRef)(((e,r)=>{const i=(0,t.useContext)(ns),[o,a]=(0,t.useState)(null),s=(0,t.useRef)(),{current:l}=(0,t.useRef)({mapLib:null,map:null});(0,t.useEffect)((()=>{const t=e.mapLib;let r,o=!0;return Promise.resolve(t||Promise.resolve().then(n.t.bind(n,5056,23))).then((t=>{if(o){if(t.Map||(t=t.default),!t||!t.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const n of vs)n in t&&(e[n]=t[n]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(e=>{e&&console.error(e)}),!1)}(t,e),!t.supported(e))throw new Error("Map is not supported by this browser");e.reuseMaps&&(r=ps.reuse(e,s.current)),r||(r=new ps(t.Map,e,s.current)),l.map=gs(r,t),l.mapLib=t,a(r),null===i||void 0===i||i.onMapMount(l.map,e.id)}})).catch((t=>{e.onError({type:"error",target:null,originalEvent:null,error:t})})),()=>{o=!1,r&&(null===i||void 0===i||i.onMapUnmount(e.id),e.reuseMaps?r.recycle():r.destroy())}}),[]),ys((()=>{o&&o.setProps(e)})),(0,t.useImperativeHandle)(r,(()=>l.map),[o]);const c=(0,t.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...e.style})),[e.style]);return t.createElement("div",{id:e.id,ref:s,style:c},o&&t.createElement(_s.Provider,{value:l},t.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))}));xs.displayName="Map",xs.defaultProps=bs;const ws=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ss(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const e=t[r];Number.isFinite(e)&&!ws.test(r)?n[r]="".concat(e,"px"):n[r]=e}}function Es(e){const{map:n,mapLib:r}=(0,t.useContext)(_s),i=(0,t.useRef)({props:e});i.current.props=e;const o=(0,t.useMemo)((()=>{let n=!1;t.Children.forEach(e.children,(e=>{e&&(n=!0)}));const a={...e,element:n?document.createElement("div"):null},s=new r.Marker(a).setLngLat([e.longitude,e.latitude]);return s.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=i.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=i.current.props).onDragStart)||void 0===n||n.call(t,r)})),s.on("drag",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=i.current.props).onDrag)||void 0===n||n.call(t,r)})),s.on("dragend",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=i.current.props).onDragEnd)||void 0===n||n.call(t,r)})),s}),[]);return(0,t.useEffect)((()=>(o.addTo(n.getMap()),()=>{o.remove()})),[]),(0,t.useEffect)((()=>{Ss(o.getElement(),e.style)}),[e.style]),o.getLngLat().lng===e.longitude&&o.getLngLat().lat===e.latitude||o.setLngLat([e.longitude,e.latitude]),e.offset&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===o}(o.getOffset(),e.offset)&&o.setOffset(e.offset),o.isDraggable()!==e.draggable&&o.setDraggable(e.draggable),o.getRotation()!==e.rotation&&o.setRotation(e.rotation),o.getRotationAlignment()!==e.rotationAlignment&&o.setRotationAlignment(e.rotationAlignment),o.getPitchAlignment()!==e.pitchAlignment&&o.setPitchAlignment(e.pitchAlignment),o.getPopup()!==e.popup&&o.setPopup(e.popup),(0,m.createPortal)(e.children,o.getElement())}Es.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};t.memo(Es);function As(e){return new Set(e?e.trim().split(/\s+/):[])}t.memo((function(e){const{map:n,mapLib:r}=(0,t.useContext)(_s),i=(0,t.useMemo)((()=>document.createElement("div")),[]),o=(0,t.useRef)({props:e});o.current.props=e;const a=(0,t.useMemo)((()=>{const t={...e},n=new r.Popup(t).setLngLat([e.longitude,e.latitude]);return n.once("open",(e=>{var t,n;null===(n=(t=o.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,t.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=o.current.props).onClose)||void 0===n||n.call(t,e)};return a.on("close",e),a.setDOMContent(i).addTo(n.getMap()),()=>{a.off("close",e),a.isOpen()&&a.remove()}}),[]),(0,t.useEffect)((()=>{Ss(a.getElement(),e.style)}),[e.style]),a.isOpen()&&(a.getLngLat().lng===e.longitude&&a.getLngLat().lat===e.latitude||a.setLngLat([e.longitude,e.latitude]),e.offset&&!ss(a.options.offset,e.offset)&&a.setOffset(e.offset),a.options.anchor===e.anchor&&a.options.maxWidth===e.maxWidth||(a.options.anchor=e.anchor,a.setMaxWidth(e.maxWidth)),a.options.className!==e.className)){const t=As(a.options.className),n=As(e.className);for(const e of t)n.has(e)||a.removeClassName(e);for(const e of n)t.has(e)||a.addClassName(e);a.options.className=e.className}return(0,m.createPortal)(e.children,i)}));const Ts=function(e,n,r,i){const o=(0,t.useContext)(_s),a=(0,t.useMemo)((()=>e(o)),[]);return(0,t.useEffect)((()=>{const e=i||r||n,t="function"===typeof n&&"function"===typeof r?n:null,s="function"===typeof r?r:"function"===typeof n?n:null,{map:l}=o;return l.hasControl(a)||(l.addControl(a,null===e||void 0===e?void 0:e.position),t&&t(o)),()=>{s&&s(o),l.hasControl(a)&&l.removeControl(a)}}),[]),a};t.memo((function(e){const n=Ts((t=>{let{mapLib:n}=t;return new n.AttributionControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{Ss(n._container,e.style)}),[e.style]),null}));t.memo((function(e){const n=Ts((t=>{let{mapLib:n}=t;return new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,t.useEffect)((()=>{Ss(n._controlContainer,e.style)}),[e.style]),null}));const Cs=(0,t.forwardRef)(((e,n)=>{const r=(0,t.useRef)({props:e}),i=Ts((t=>{let{mapLib:n}=t;const i=new n.GeolocateControl(e),o=i._setupUI;return i._setupUI=e=>{i._container.hasChildNodes()||o(e)},i.on("geolocate",(e=>{var t,n;null===(n=(t=r.current.props).onGeolocate)||void 0===n||n.call(t,e)})),i.on("error",(e=>{var t,n;null===(n=(t=r.current.props).onError)||void 0===n||n.call(t,e)})),i.on("outofmaxbounds",(e=>{var t,n;null===(n=(t=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),i.on("trackuserlocationstart",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),i.on("trackuserlocationend",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),i}),{position:e.position});return r.current.props=e,(0,t.useImperativeHandle)(n,(()=>({trigger:()=>i.trigger()})),[]),(0,t.useEffect)((()=>{Ss(i._container,e.style)}),[e.style]),null}));Cs.displayName="GeolocateControl";t.memo(Cs);t.memo((function(e){const n=Ts((t=>{let{mapLib:n}=t;return new n.NavigationControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{Ss(n._container,e.style)}),[e.style]),null}));function ks(e){const n=Ts((t=>{let{mapLib:n}=t;return new n.ScaleControl(e)}),{position:e.position});return n.options.unit===e.unit&&n.options.maxWidth===e.maxWidth||(n.options.maxWidth=e.maxWidth,n.setUnit(e.unit)),(0,t.useEffect)((()=>{Ss(n._container,e.style)}),[e.style]),null}ks.defaultProps={unit:"metric",maxWidth:100};t.memo(ks);const Is=new(ts())({accessToken:"pk.eyJ1Ijoib2FrdHJlZWFuYWx5dGljcyIsImEiOiJjbGhvdWFzOHQxemYwM2ZzNmQxOW1xZXdtIn0.JPcZgPfkVUutq8t8Z_BaHg",localGeocoder:function(e){const t=e.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!t)return null;function n(e,t){return{center:[e,t],geometry:{type:"Point",coordinates:[e,t]},place_name:"Lat: "+t+" Lng: "+e,place_type:["coordinate"],properties:{},type:"Feature"}}const r=Number(t[1]),i=Number(t[2]),o=[];return(r<-90||r>90)&&o.push(n(r,i)),(i<-90||i>90)&&o.push(n(i,r)),0===o.length&&(o.push(n(r,i)),o.push(n(i,r))),o},mapboxgl:$a(),marker:!0,zoom:19,placeholder:"Search locations"}),Ps=Is;var Ls=n(2860),Ms=n.n(Ls);const Os=new(Ms())({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},defaultMode:"draw_polygon"});var Ns=n(4501);const Rs=new(Ms())({modes:{...Ms().modes,draw_circle:Ns.CircleMode,drag_circle:Ns.DragCircleMode,direct_select:Ns.DirectMode,simple_select:Ns.SimpleSelectMode}});const Ds={onSetup(){const e=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});var t;return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),t=this,setTimeout((()=>{const{map:e}=t,n=e&&e.doubleClickZoom;e&&n&&n.disable()}),0),{rectangle:e}},onMouseDown(e,t){t.preventDefault();const n=[t.lngLat.lng,t.lngLat.lat];e.startPoint=n,e.rectangle.updateCoordinate("0.0",e.startPoint[0],e.startPoint[1])},onDrag(e,t){e.startPoint&&(e.rectangle.updateCoordinate("0.1",t.lngLat.lng,e.startPoint[1]),e.rectangle.updateCoordinate("0.2",t.lngLat.lng,t.lngLat.lat),e.rectangle.updateCoordinate("0.3",e.startPoint[0],t.lngLat.lat),e.rectangle.updateCoordinate("0.4",e.startPoint[0],e.startPoint[1]))},onMouseUp(e,t){e.endPoint=[t.lngLat.lng,t.lngLat.lat],this.updateUIClasses({mouse:"pointer"}),this.changeMode("simple_select",{featuresId:e.rectangle.id})},onStop(e){var t;t=this,setTimeout((()=>{const e=t._ctx&&t._ctx.store,n=t.map&&t.map;(n||e.getInitialValue)&&e.getInitialConfigValue("doubleClickZoom")&&n.doubleClickZoom.enable()}),0),this.updateUIClasses({mouse:"none"}),this.getFeature(e.rectangle.id)&&(e.rectangle.removeCoordinate("0.4"),e.rectangle.isValid()?this.map.fire("draw.create",{features:[e.rectangle.toGeoJSON()]}):this.deleteFeature([e.rectangle.id],{silent:!0}))},onTrash(e){this.deleteFeature([e.rectangle.id],{silent:!0})},toDisplayFeatures(e,t,n){const r=t.properties.id===e.rectangle.id;t.properties.active=r.toString(),r?e.startPoint&&n(t):n(t)}},Fs=new(Ms())({displayControlsDefault:!1,modes:{...Ms().modes,draw_rectangle_drag:Ds}}),js=(e,n,r,i,o,a,s,l,c,u,h,d,p,f,m)=>{const g=(0,t.useRef)(null),y=((0,t.useRef)(new($a().Popup)({offset:15})),(0,t.useRef)(0)),[v,_]=(0,t.useState)(),[b,x]=(0,t.useState)(),[w,S]=(0,t.useState)(),[E,A]=(0,t.useState)(!1),[T,C]=(0,t.useState)(!1),[k,I]=(0,t.useState)(!1),P=e=>{_(e)};(0,t.useEffect)((()=>(e.current&&(g.current=((e,t,n)=>new Qa.Map({container:e,style:n,center:t,zoom:2,accessToken:"pk.eyJ1Ijoib2FrdHJlZWFuYWx5dGljcyIsImEiOiJjbGhvdWFzOHQxemYwM2ZzNmQxOW1xZXdtIn0.JPcZgPfkVUutq8t8Z_BaHg",doubleClickZoom:!1}))(e.current,[-100.2419063199852,25.17901932031443],"mapbox://styles/mapbox/satellite-streets-v12"),g.current.addControl(Ps)),()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.remove()})),[]);const L=new Qa.Popup({closeButton:!1,anchor:"left"});(0,t.useEffect)((()=>{var e;return null===(e=g.current)||void 0===e||e.on("dblclick",M),()=>{var e;null===(e=g.current)||void 0===e||e.off("dblclick",M)}}),[g.current,b]);const M=async e=>{const t=((e,t,n,r,i,o,a,s)=>{if(e){const l=e.features[0],c=Object.keys(l.properties);let u="";l.properties,u+='<div style="background:black; color : white; opacity : 0.75; padding: 10px; border-radius: 10px;">';const h=c.reduce(((e,t,n)=>(u+='<div style="width:100%; display:flex">\n                         <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >'.concat(t,' :</label>\n                         <input type="text" value = "" style="width:60%; border: 0.01em solid white;" class = "').concat(t,'">\n                     </div>\n                     '),e[t]="",e)),{});u+='<div style="width:100%; display:flex">\n                         <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >Latitude :</label>\n                         <input type="text" value = "'.concat(a.lat,'" style="width:60%; border: 0.01em solid white;" class = "latitude">\n                     </div>'),u+='<div style="width:100%; display:flex">\n                     <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >Longtitude :</label>\n                     <input type="text" value = "'.concat(a.lng,'" style="width:60%; border: 0.01em solid white;" class = "longtitude">\n                 </div>'),u+="<div style = \"display:flex; justify-content:space-around;\">\n            <button class='savemarker' > save </button>\n            <button class='deletemarker' > delete </button>\n            <button class='cancelmarker' > cancel </button>\n          </div>";const d=new Qa.Popup({closeButton:!1,anchor:"left"}).setHTML(u);let p=[];d.on("open",(()=>{for(let e=0;e<c.length;e++)p[e]=document.getElementsByClassName(c[e])[0].getAttribute("value");p[c.length]=document.getElementsByClassName("latitude")[0].getAttribute("value"),p[c.length+1]=document.getElementsByClassName("longtitude")[0].getAttribute("value")})),d.on("close",(()=>{setTimeout((()=>{document.getElementsByClassName("mapboxgl-popup")[0]||m.setLngLat([Number(p[c.length+1]),Number(p[c.length])])}),10)}));const f=document.createElement("img");f.setAttribute("src",o),f.setAttribute("style","width:30px; height:30px; border-radius:5px"),f.setAttribute("class","".concat(s,"qwer"));const m=new Qa.Marker(f,{scale:.5}).setDraggable(!1).setLngLat(a).setPopup(d).addTo(t).on("drag",(e=>{r(e.target._lngLat)}));m.getElement().addEventListener("mouseup",(e=>{m.setDraggable(!1),document.getElementsByClassName("mapboxgl-popup")[0]||setTimeout((()=>{for(let e=0;e<c.length;e++)document.getElementsByClassName(c[e])[0].value=p[e];document.getElementsByClassName("latitude")[0].value=p[c.length],document.getElementsByClassName("longtitude")[0].value=p[c.length+1]}),10)})),m.getElement().addEventListener("mousedown",(e=>{document.getElementsByClassName("mapboxgl-popup")[0]&&m.setDraggable(!0)}));const g=e.features.length;return m.getElement().addEventListener("click",(e=>{n(m),i({data:h,id:g}),t.flyTo({center:m.getLngLat(),zoom:24})}),!1),{properties:h,geometry:{type:"Point",coordinates:[a.lng,a.lat]},id:g}}})(b,g.current,P,N,R,m,e.lngLat,l),n={type:"Feature",geometry:t.geometry,properties:t.properties};b.features.push(n),O(b),r(t)};function O(e){e.features.map(((e,t)=>{e.id=t}))}function N(e){document.getElementsByClassName("latitude")[0].value=e.lat,document.getElementsByClassName("longtitude")[0].value=e.lng}function R(e){S(e)}function D(){var e;e="".concat(l,"qwer"),document.querySelectorAll(".".concat(e)).forEach((e=>{e.remove()}));let t=0;console.log(b),b.features.map(((e,n)=>{console.log(e.id+":"+w.id),e.id===w.id&&(t=e.id)})),o(t),b.features.splice(t,1),console.log(b),((e,t,n,r,i,o,a)=>{Math.floor(7*Math.random()),e.features.map(((e,s)=>{if(e){const l=Object.keys(e.properties);let c="";const u=e.properties;c+='<div style="background:black; color : white; opacity : 0.75; padding: 10px; border-radius: 10px;">';const h=l.reduce(((e,t,n)=>(c+='<div style="width:100%; display:flex">\n                         <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >'.concat(t,' :</label>\n                         <input type="text" value = "').concat(u[t],'" style="width:60%; border: 0.01em solid white;" class = "').concat(t,'">\n                     </div>\n                     '),e[t]=u[t],e)),{});c+='<div style="width:100%; display:flex">\n                         <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >Latitude :</label>\n                         <input type="text" value = "'.concat(e.geometry.coordinates[1],'" style="width:60%; border: 0.01em solid white;" class = "latitude">\n                     </div>'),c+='<div style="width:100%; display:flex">\n                     <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >Longtitude :</label>\n                     <input type="text" value = "'.concat(e.geometry.coordinates[0],'" style="width:60%; border: 0.01em solid white;" class = "longtitude">\n                 </div>'),c+="<div style = \"display:flex; justify-content:space-around;\">\n            <button class='savemarker' > save </button>\n            <button class='deletemarker' > delete </button>\n            <button class='cancelmarker' > cancel </button>\n          </div>";const d=new Qa.Popup({closeButton:!1,anchor:"left"}).setHTML(c);let p=[];d.on("open",(()=>{for(let e=0;e<l.length;e++)p[e]=document.getElementsByClassName(l[e])[0].getAttribute("value");p[l.length]=document.getElementsByClassName("latitude")[0].getAttribute("value"),p[l.length+1]=document.getElementsByClassName("longtitude")[0].getAttribute("value")})),d.on("close",(()=>{setTimeout((()=>{document.getElementsByClassName("mapboxgl-popup")[0]||m.setLngLat([Number(p[l.length+1]),Number(p[l.length])])}),10)}));const f=document.createElement("img");f.setAttribute("src",o),f.setAttribute("style","width:30px; height:30px; border-radius:5px"),f.setAttribute("class","".concat(a,"qwer"));const m=new Qa.Marker(f,{scale:.5}).setDraggable(!1).setLngLat(e.geometry.coordinates).setPopup(d).addTo(t).on("drag",(e=>{r(e.target._lngLat)}));m.getElement().addEventListener("mouseup",(e=>{m.setDraggable(!1),document.getElementsByClassName("mapboxgl-popup")[0]||setTimeout((()=>{for(let e=0;e<l.length;e++)document.getElementsByClassName(l[e])[0].value=p[e];document.getElementsByClassName("latitude")[0].value=p[l.length],document.getElementsByClassName("longtitude")[0].value=p[l.length+1]}),10)})),m.getElement().addEventListener("mousedown",(e=>{document.getElementsByClassName("mapboxgl-popup")[0]&&m.setDraggable(!0)})),m.getElement().addEventListener("click",(e=>{n(m),i({data:h,id:s}),t.flyTo({center:m.getLngLat(),zoom:24})}),!1)}}))})(b,g.current,P,N,R,m,l),O(b)}function F(){const e=Object.keys(b.features[0].properties);for(let r=0;r<e.length;r++)document.getElementsByClassName(e[r])[0].setAttribute("value",document.getElementsByClassName(e[r])[0].value),w.data[e[r]]=document.getElementsByClassName(e[r])[0].value;i(w),document.getElementsByClassName("latitude")[0].setAttribute("value",document.getElementsByClassName("latitude")[0].value),document.getElementsByClassName("longtitude")[0].setAttribute("value",document.getElementsByClassName("longtitude")[0].value);const t=Number(document.getElementsByClassName("longtitude")[0].getAttribute("value")),n=Number(document.getElementsByClassName("latitude")[0].getAttribute("value"));b.features.map(((e,r)=>{e.id===w.id&&(e.geometry.coordinates=[t,n],e.properties=w.data,console.log(e))})),setTimeout((()=>{var e;null===v||void 0===v||v.setLngLat([t,n]),null===(e=g.current)||void 0===e||e.flyTo({center:null===v||void 0===v?void 0:v.getLngLat(),zoom:24})}),30),null===v||void 0===v||v.getPopup().remove()}function j(){null===v||void 0===v||v.getPopup().remove()}(0,t.useEffect)((()=>{if("Circle"===d){var e,t,n,r;if(E)null===(t=g.current)||void 0===t||t.removeControl(Fs),A(!1);if(T)null===(n=g.current)||void 0===n||n.removeControl(Rs),C(!1);if(k)null===(r=g.current)||void 0===r||r.removeControl(Os),I(!1);null===(e=g.current)||void 0===e||e.addControl(Rs),Rs.changeMode("draw_circle",{initialRadiusInKm:5}),C(!0)}else if("RECT"===d){var i,o,a,s;if(E)null===(o=g.current)||void 0===o||o.removeControl(Fs),A(!1);if(T)null===(a=g.current)||void 0===a||a.removeControl(Rs),C(!1);if(k)null===(s=g.current)||void 0===s||s.removeControl(Os),I(!1);null===(i=g.current)||void 0===i||i.addControl(Fs),Fs.changeMode("draw_rectangle_drag"),A(!0)}else if("Polygon"===d){var l,c,u,h;if(E)null===(c=g.current)||void 0===c||c.removeControl(Fs),A(!1);if(T)null===(u=g.current)||void 0===u||u.removeControl(Rs),C(!1);if(k)null===(h=g.current)||void 0===h||h.removeControl(Os),I(!1);null===(l=g.current)||void 0===l||l.addControl(Os),I(!0)}}),[p]),(0,t.useEffect)((()=>{if(u){var e,t,n;x(u),null===(e=g.current)||void 0===e||e.flyTo({center:u.features[0].geometry.coordinates,zoom:20});Ka.images.blueMarker,Ka.images.grayMarker,Ka.images.greenMarker,Ka.images.orangeMarker,Ka.images.pinkMarker,Ka.images.purpleMarker,Ka.images.redMarker,Ka.images.yellowMarker,Math.floor(7*Math.random());null===(t=g.current)||void 0===t||t.addSource(s,{type:"geojson",data:u}),null===(n=g.current)||void 0===n||n.addLayer({id:s,type:"circle",source:s,paint:{"circle-radius":5,"circle-stroke-width":2,"circle-color":"red","circle-stroke-color":"white"},layout:{visibility:"visible"}})}}),[n]),(0,t.useEffect)((()=>{var t,n;e.current&&(h.map(((e,t)=>{e.name===l&&(O(e.data),x(e.data),g.current.flyTo({center:e.data.features[0].geometry.coordinates,zoom:16}))})),null===(t=g.current)||void 0===t||t.on("mouseenter",l,(e=>{g.current&&(g.current.getCanvas().style.cursor="pointer");const t=e.features[0].geometry.coordinates.slice(),n=e.features[0].properties,r=Object.keys(n);let i="";i+='<div style="background:black; color : white; opacity : 0.75; padding: 10px; border-radius: 10px;">';r.reduce(((e,t,r)=>(i+='<div style="width:100%; display:flex">\n                             <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >'.concat(t,' :</label>\n                             <input type="text" value = "').concat(n[t],'" style="width:60%; border: 0.01em solid white;" class = "').concat(t,'">\n                         </div>\n                         '),e[t]=n[t],e)),{});for(i+='<div style="width:100%; display:flex">\n                             <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >Latitude :</label>\n                             <input type="text" value = "'.concat(t[1],'" style="width:60%; border: 0.01em solid white;" class = "latitude">\n                         </div>'),i+='<div style="width:100%; display:flex">\n                         <label for="name" style="width:40%; text-align:right; padding-right: 5px;" >Longtitude :</label>\n                         <input type="text" value = "'.concat(t[0],'" style="width:60%; border: 0.01em solid white;" class = "longtitude">\n                     </div>');Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;L.setLngLat(t).setHTML(i).addTo(g.current)})),null===(n=g.current)||void 0===n||n.on("mouseleave",l,(()=>{g.current&&(g.current.getCanvas().style.cursor=""),L.remove()})))}),[l]),(0,t.useEffect)((()=>{var e;null===(e=g.current)||void 0===e||e.on("style.load",(()=>{var e,t;(console.log("map style changed"),console.log(b),b)&&(null===(e=g.current)||void 0===e||e.addSource(l,{type:"geojson",data:b}),null===(t=g.current)||void 0===t||t.addLayer({id:l,type:"circle",source:l,paint:{"circle-radius":5,"circle-stroke-width":2,"circle-color":"red","circle-stroke-color":"white"},layout:{visibility:"visible"}}))}))}),[b]),(0,t.useEffect)((()=>{var t,n;e.current&&(v&&(null!==(t=g.current)&&void 0!==t&&t.getLayer("circles1")&&(null===(n=g.current)||void 0===n||n.removeLayer("circles1")),setTimeout((()=>{Object.keys(b.features[0].properties);document.getElementsByClassName("deletemarker")[0].addEventListener("click",D),document.getElementsByClassName("savemarker")[0].addEventListener("click",F),document.getElementsByClassName("cancelmarker")[0].addEventListener("click",j)}),100)))}),[v]),(0,t.useEffect)((()=>{c&&b.features.map(((e,t)=>{var n,r,i,o,a;e.id===c.id&&(y.current=y.current+1,null!==(n=g.current)&&void 0!==n&&n.getLayer("circles1")&&(null===(r=g.current)||void 0===r||r.removeLayer("circles1")),null===(i=g.current)||void 0===i||i.addSource("markers ".concat(y.current),{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:e.geometry.coordinates},properties:{modelId:1}}]}}),null===(o=g.current)||void 0===o||o.addLayer({id:"circles1",source:"markers ".concat(y.current),type:"circle",paint:{"circle-radius":10,"circle-color":"white","circle-opacity":1,"circle-stroke-width":2},filter:["==","modelId",1]}),null===(a=g.current)||void 0===a||a.flyTo({center:e.geometry.coordinates,zoom:24}))}))}),[c]),(0,t.useEffect)((()=>{w&&i(w)}),[w]),(0,t.useEffect)((()=>{var t;e.current&&(console.log(s),null===(t=g.current)||void 0===t||t.setStyle(a))}),[a])};var zs=n(7176),Bs=n(6728);function Us(){return(0,Bs.Z)(a.Z)}var Vs=n(9492),Zs=n(7906);function qs(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Gs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=qs,duration:a=300}=r;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},h=r=>{if(c)return void i(new Error("Animation cancelled"));null===s&&(s=r);const u=Math.min(1,(r-s)/a);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(h)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(h),u)}var Ws=n(897);const Hs=["onChange"],Xs={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const Ks=(0,Ft.Z)((0,s.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Ys=(0,Ft.Z)((0,s.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Js(e){return(0,dt.Z)("MuiTabScrollButton",e)}const Qs=(0,ht.Z)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]);var $s,el;const tl=["className","direction","orientation","disabled"],nl=(0,lt.ZP)(Wt.Z,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({width:40,flexShrink:0,opacity:.8,["&.".concat(Qs.disabled)]:{opacity:0}},"vertical"===n.orientation&&{width:"100%",height:40,"& svg":{transform:"rotate(".concat(n.isRtl?-90:90,"deg)")}})})),rl=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiTabScrollButton"}),{className:o,direction:a}=r,l=(0,ot.Z)(r,tl),c="rtl"===Us().direction,u=(0,e.Z)({isRtl:c},r),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,st.Z)(i,Js,t)})(u);return(0,s.jsx)(nl,(0,e.Z)({component:"div",className:(0,at.default)(h.root,o),ref:n,role:null,ownerState:u,tabIndex:null},l,{children:"left"===a?$s||($s=(0,s.jsx)(Ks,{fontSize:"small"})):el||(el=(0,s.jsx)(Ys,{fontSize:"small"}))}))}));var il=n(6127);function ol(e){return(0,dt.Z)("MuiTabs",e)}const al=(0,ht.Z)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]);var sl=n(6182);const ll=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],cl=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,ul=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,hl=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},dl=(0,lt.ZP)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(al.scrollButtons)]:t.scrollButtons},{["& .".concat(al.scrollButtons)]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((t=>{let{ownerState:n,theme:r}=t;return(0,e.Z)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},n.vertical&&{flexDirection:"column"},n.scrollButtonsHideMobile&&{["& .".concat(al.scrollButtons)]:{[r.breakpoints.down("sm")]:{display:"none"}}})})),pl=(0,lt.ZP)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},n.fixed&&{overflowX:"hidden",width:"100%"},n.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},n.scrollableX&&{overflowX:"auto",overflowY:"hidden"},n.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),fl=(0,lt.ZP)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({display:"flex"},n.vertical&&{flexDirection:"column"},n.centered&&{justifyContent:"center"})})),ml=(0,lt.ZP)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((t=>{let{ownerState:n,theme:r}=t;return(0,e.Z)({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create()},"primary"===n.indicatorColor&&{backgroundColor:(r.vars||r).palette.primary.main},"secondary"===n.indicatorColor&&{backgroundColor:(r.vars||r).palette.secondary.main},n.vertical&&{height:"100%",width:2,right:0})})),gl=(0,lt.ZP)((function(n){const{onChange:r}=n,i=(0,ot.Z)(n,Hs),o=t.useRef(),a=t.useRef(null),l=()=>{o.current=a.current.offsetHeight-a.current.clientHeight};return t.useEffect((()=>{const e=(0,Vs.Z)((()=>{const e=o.current;l(),e!==o.current&&r(o.current)})),t=(0,Ws.Z)(a.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[r]),t.useEffect((()=>{l(),r(o.current)}),[r]),(0,s.jsx)("div",(0,e.Z)({style:Xs,ref:a},i))}),{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),yl={};const vl=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiTabs"}),a=Us(),l="rtl"===a.direction,{"aria-label":c,"aria-labelledby":u,action:h,centered:d=!1,children:p,className:f,component:m="div",allowScrollButtonsMobile:g=!1,indicatorColor:y="primary",onChange:v,orientation:_="horizontal",ScrollButtonComponent:b=rl,scrollButtons:x="auto",selectionFollowsFocus:w,TabIndicatorProps:S={},TabScrollButtonProps:E={},textColor:A="primary",value:T,variant:C="standard",visibleScrollbar:k=!1}=o,I=(0,ot.Z)(o,ll),P="scrollable"===C,L="vertical"===_,M=L?"scrollTop":"scrollLeft",O=L?"top":"left",N=L?"bottom":"right",R=L?"clientHeight":"clientWidth",D=L?"height":"width",F=(0,e.Z)({},o,{component:m,allowScrollButtonsMobile:g,indicatorColor:y,orientation:_,vertical:L,scrollButtons:x,textColor:A,variant:C,visibleScrollbar:k,fixed:!P,hideScrollbar:P&&!k,scrollableX:P&&!L,scrollableY:P&&L,centered:d&&!P,scrollButtonsHideMobile:!g}),j=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,st.Z)(c,ol,l)})(F);const[z,B]=t.useState(!1),[U,V]=t.useState(yl),[Z,q]=t.useState({start:!1,end:!1}),[G,W]=t.useState({overflow:"hidden",scrollbarWidth:0}),H=new Map,X=t.useRef(null),K=t.useRef(null),Y=()=>{const e=X.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:(0,Zs.T)(e,a.direction),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==T){const e=K.current.children;if(e.length>0){const t=e[H.get(T)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},J=(0,il.Z)((()=>{const{tabsMeta:e,tabMeta:t}=Y();let n,r=0;if(L)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=l?"right":"left",t&&e){const i=l?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(l?-1:1)*(t[n]-e[n]+i)}const i={[n]:r,[D]:t?t[D]:0};if(isNaN(U[n])||isNaN(U[D]))V(i);else{const e=Math.abs(U[n]-i[n]),t=Math.abs(U[D]-i[D]);(e>=1||t>=1)&&V(i)}})),Q=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?Gs(M,X.current,e,{duration:a.transitions.duration.standard}):X.current[M]=e},$=e=>{let t=X.current[M];L?t+=e:(t+=e*(l?-1:1),t*=l&&"reverse"===(0,Zs.E)()?-1:1),Q(t)},ee=()=>{const e=X.current[R];let t=0;const n=Array.from(K.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[R]>e){0===r&&(t=e);break}t+=i[R]}return t},te=()=>{$(-1*ee())},ne=()=>{$(ee())},re=t.useCallback((e=>{W({overflow:null,scrollbarWidth:e})}),[]),ie=(0,il.Z)((e=>{const{tabsMeta:t,tabMeta:n}=Y();if(n&&t)if(n[O]<t[O]){const r=t[M]+(n[O]-t[O]);Q(r,{animation:e})}else if(n[N]>t[N]){const r=t[M]+(n[N]-t[N]);Q(r,{animation:e})}})),oe=(0,il.Z)((()=>{if(P&&!1!==x){const{scrollTop:e,scrollHeight:t,clientHeight:n,scrollWidth:r,clientWidth:i}=X.current;let o,s;if(L)o=e>1,s=e<t-n-1;else{const e=(0,Zs.T)(X.current,a.direction);o=l?e<r-i-1:e>1,s=l?e>1:e<r-i-1}o===Z.start&&s===Z.end||q({start:o,end:s})}}));t.useEffect((()=>{const e=(0,Vs.Z)((()=>{X.current&&(J(),oe())})),t=(0,Ws.Z)(X.current);let n;return t.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver(e),Array.from(K.current.children).forEach((e=>{n.observe(e)}))),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}}),[J,oe]);const ae=t.useMemo((()=>(0,Vs.Z)((()=>{oe()}))),[oe]);t.useEffect((()=>()=>{ae.clear()}),[ae]),t.useEffect((()=>{B(!0)}),[]),t.useEffect((()=>{J(),oe()})),t.useEffect((()=>{ie(yl!==U)}),[ie,U]),t.useImperativeHandle(h,(()=>({updateIndicator:J,updateScrollButtons:oe})),[J,oe]);const se=(0,s.jsx)(ml,(0,e.Z)({},S,{className:(0,at.default)(j.indicator,S.className),ownerState:F,style:(0,e.Z)({},U,S.style)}));let le=0;const ce=t.Children.map(p,(n=>{if(!t.isValidElement(n))return null;const r=void 0===n.props.value?le:n.props.value;H.set(r,le);const i=r===T;return le+=1,t.cloneElement(n,(0,e.Z)({fullWidth:"fullWidth"===C,indicator:i&&!z&&se,selected:i,selectionFollowsFocus:w,onChange:v,textColor:A,value:r},1!==le||!1!==T||n.props.tabIndex?{}:{tabIndex:0}))})),ue=(()=>{const t={};t.scrollbarSizeListener=P?(0,s.jsx)(gl,{onChange:re,className:(0,at.default)(j.scrollableX,j.hideScrollbar)}):null;const n=Z.start||Z.end,r=P&&("auto"===x&&n||!0===x);return t.scrollButtonStart=r?(0,s.jsx)(b,(0,e.Z)({orientation:_,direction:l?"right":"left",onClick:te,disabled:!Z.start},E,{className:(0,at.default)(j.scrollButtons,E.className)})):null,t.scrollButtonEnd=r?(0,s.jsx)(b,(0,e.Z)({orientation:_,direction:l?"left":"right",onClick:ne,disabled:!Z.end},E,{className:(0,at.default)(j.scrollButtons,E.className)})):null,t})();return(0,s.jsxs)(dl,(0,e.Z)({className:(0,at.default)(j.root,f),ownerState:F,ref:r,as:m},I,{children:[ue.scrollButtonStart,ue.scrollbarSizeListener,(0,s.jsxs)(pl,{className:j.scroller,ownerState:F,style:{overflow:G.overflow,[L?"margin".concat(l?"Left":"Right"):"marginBottom"]:k?void 0:-G.scrollbarWidth},ref:X,onScroll:ae,children:[(0,s.jsx)(fl,{"aria-label":c,"aria-labelledby":u,"aria-orientation":"vertical"===_?"vertical":null,className:j.flexContainer,ownerState:F,onKeyDown:e=>{const t=K.current,n=(0,sl.Z)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===_?"ArrowLeft":"ArrowUp",i="horizontal"===_?"ArrowRight":"ArrowDown";switch("horizontal"===_&&l&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),hl(t,n,ul);break;case i:e.preventDefault(),hl(t,n,cl);break;case"Home":e.preventDefault(),hl(t,null,cl);break;case"End":e.preventDefault(),hl(t,null,ul)}},ref:K,role:"tablist",children:ce}),z&&se]}),ue.scrollButtonEnd]}))})),_l=vl;function bl(e,t){return function(){return e.apply(t,arguments)}}const{toString:xl}=Object.prototype,{getPrototypeOf:wl}=Object,Sl=(El=Object.create(null),e=>{const t=xl.call(e);return El[t]||(El[t]=t.slice(8,-1).toLowerCase())});var El;const Al=e=>(e=e.toLowerCase(),t=>Sl(t)===e),Tl=e=>t=>typeof t===e,{isArray:Cl}=Array,kl=Tl("undefined");const Il=Al("ArrayBuffer");const Pl=Tl("string"),Ll=Tl("function"),Ml=Tl("number"),Ol=e=>null!==e&&"object"===typeof e,Nl=e=>{if("object"!==Sl(e))return!1;const t=wl(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Rl=Al("Date"),Dl=Al("File"),Fl=Al("Blob"),jl=Al("FileList"),zl=Al("URLSearchParams");function Bl(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Cl(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function Ul(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Vl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Zl=e=>!kl(e)&&e!==Vl;const ql=(Gl="undefined"!==typeof Uint8Array&&wl(Uint8Array),e=>Gl&&e instanceof Gl);var Gl;const Wl=Al("HTMLFormElement"),Hl=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Xl=Al("RegExp"),Kl=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Bl(n,((n,i)=>{!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Yl="abcdefghijklmnopqrstuvwxyz",Jl="0123456789",Ql={DIGIT:Jl,ALPHA:Yl,ALPHA_DIGIT:Yl+Yl.toUpperCase()+Jl};const $l=Al("AsyncFunction"),ec={isArray:Cl,isArrayBuffer:Il,isBuffer:function(e){return null!==e&&!kl(e)&&null!==e.constructor&&!kl(e.constructor)&&Ll(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ll(e.append)&&("formdata"===(t=Sl(e))||"object"===t&&Ll(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Il(e.buffer),t},isString:Pl,isNumber:Ml,isBoolean:e=>!0===e||!1===e,isObject:Ol,isPlainObject:Nl,isUndefined:kl,isDate:Rl,isFile:Dl,isBlob:Fl,isRegExp:Xl,isFunction:Ll,isStream:e=>Ol(e)&&Ll(e.pipe),isURLSearchParams:zl,isTypedArray:ql,isFileList:jl,forEach:Bl,merge:function e(){const{caseless:t}=Zl(this)&&this||{},n={},r=(r,i)=>{const o=t&&Ul(n,i)||i;Nl(n[o])&&Nl(r)?n[o]=e(n[o],r):Nl(r)?n[o]=e({},r):Cl(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Bl(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Bl(t,((t,r)=>{n&&Ll(t)?e[r]=bl(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&wl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Sl,kindOfTest:Al,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Cl(e))return e;let t=e.length;if(!Ml(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Wl,hasOwnProperty:Hl,hasOwnProp:Hl,reduceDescriptors:Kl,freezeMethods:e=>{Kl(e,((t,n)=>{if(Ll(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Ll(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Cl(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Ul,global:Vl,isContextDefined:Zl,ALPHABET:Ql,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Ll(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ol(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Cl(e)?[]:{};return Bl(e,((e,t)=>{const o=n(e,r+1);!kl(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:$l,isThenable:e=>e&&(Ol(e)||Ll(e))&&Ll(e.then)&&Ll(e.catch)};function tc(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ec.inherits(tc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ec.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const nc=tc.prototype,rc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{rc[e]={value:e}})),Object.defineProperties(tc,rc),Object.defineProperty(nc,"isAxiosError",{value:!0}),tc.from=(e,t,n,r,i,o)=>{const a=Object.create(nc);return ec.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),tc.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const ic=tc;function oc(e){return ec.isPlainObject(e)||ec.isArray(e)}function ac(e){return ec.endsWith(e,"[]")?e.slice(0,-2):e}function sc(e,t,n){return e?e.concat(t).map((function(e,t){return e=ac(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const lc=ec.toFlatObject(ec,{},null,(function(e){return/^is[A-Z]/.test(e)}));const cc=function(e,t,n){if(!ec.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ec.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ec.isUndefined(t[e])}));const r=n.metaTokens,i=n.visitor||c,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&ec.isSpecCompliantForm(t);if(!ec.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ec.isDate(e))return e.toISOString();if(!s&&ec.isBlob(e))throw new ic("Blob is not supported. Use a Buffer instead.");return ec.isArrayBuffer(e)||ec.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(ec.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(ec.isArray(e)&&function(e){return ec.isArray(e)&&!e.some(oc)}(e)||(ec.isFileList(e)||ec.endsWith(n,"[]"))&&(s=ec.toArray(e)))return n=ac(n),s.forEach((function(e,r){!ec.isUndefined(e)&&null!==e&&t.append(!0===a?sc([n],r,o):null===a?n:n+"[]",l(e))})),!1;return!!oc(e)||(t.append(sc(i,n,o),l(e)),!1)}const u=[],h=Object.assign(lc,{defaultVisitor:c,convertValue:l,isVisitable:oc});if(!ec.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!ec.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),ec.forEach(n,(function(n,o){!0===(!(ec.isUndefined(n)||null===n)&&i.call(t,n,ec.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function uc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function hc(e,t){this._pairs=[],e&&cc(e,this,t)}const dc=hc.prototype;dc.append=function(e,t){this._pairs.push([e,t])},dc.toString=function(e){const t=e?function(t){return e.call(this,t,uc)}:uc;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const pc=hc;function fc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mc(e,t,n){if(!t)return e;const r=n&&n.encode||fc,i=n&&n.serialize;let o;if(o=i?i(t,n):ec.isURLSearchParams(t)?t.toString():new pc(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const gc=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ec.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},yc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vc={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:pc,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};const _c=function(e){function t(e,n,r,i){let o=e[i++];const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&ec.isArray(r)?r.length:o,s)return ec.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&ec.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&ec.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(ec.isFormData(e)&&ec.isFunction(e.entries)){const n={};return ec.forEachEntry(e,((e,r)=>{t(function(e){return ec.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null},bc={"Content-Type":void 0};const xc={transitional:yc,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=ec.isObject(e);i&&ec.isHTMLForm(e)&&(e=new FormData(e));if(ec.isFormData(e))return r&&r?JSON.stringify(_c(e)):e;if(ec.isArrayBuffer(e)||ec.isBuffer(e)||ec.isStream(e)||ec.isFile(e)||ec.isBlob(e))return e;if(ec.isArrayBufferView(e))return e.buffer;if(ec.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return cc(e,new vc.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return vc.isNode&&ec.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=ec.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return cc(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(ec.isString(e))try{return(t||JSON.parse)(e),ec.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xc.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&ec.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw ic.from(i,ic.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vc.classes.FormData,Blob:vc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ec.forEach(["delete","get","head"],(function(e){xc.headers[e]={}})),ec.forEach(["post","put","patch"],(function(e){xc.headers[e]=ec.merge(bc)}));const wc=xc,Sc=ec.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ec=Symbol("internals");function Ac(e){return e&&String(e).trim().toLowerCase()}function Tc(e){return!1===e||null==e?e:ec.isArray(e)?e.map(Tc):String(e)}function Cc(e,t,n,r,i){return ec.isFunction(r)?r.call(this,t,n):(i&&(t=n),ec.isString(t)?ec.isString(r)?-1!==t.indexOf(r):ec.isRegExp(r)?r.test(t):void 0:void 0)}class kc{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Ac(t);if(!i)throw new Error("header name must be a non-empty string");const o=ec.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Tc(e))}const o=(e,t)=>ec.forEach(e,((e,n)=>i(e,n,t)));return ec.isPlainObject(e)||e instanceof this.constructor?o(e,t):ec.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Sc[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Ac(e)){const n=ec.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(ec.isFunction(t))return t.call(this,e,n);if(ec.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ac(e)){const n=ec.findKey(this,e);return!(!n||void 0===this[n]||t&&!Cc(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Ac(e)){const i=ec.findKey(n,e);!i||t&&!Cc(0,n[i],i,t)||(delete n[i],r=!0)}}return ec.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Cc(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return ec.forEach(this,((r,i)=>{const o=ec.findKey(n,i);if(o)return t[o]=Tc(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Tc(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return ec.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&ec.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Ec]=this[Ec]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ac(e);t[r]||(!function(e,t){const n=ec.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return ec.isArray(e)?e.forEach(r):r(e),this}}kc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ec.freezeMethods(kc.prototype),ec.freezeMethods(kc);const Ic=kc;function Pc(e,t){const n=this||wc,r=t||n,i=Ic.from(r.headers);let o=r.data;return ec.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Lc(e){return!(!e||!e.__CANCEL__)}function Mc(e,t,n){ic.call(this,null==e?"canceled":e,ic.ERR_CANCELED,t,n),this.name="CanceledError"}ec.inherits(Mc,ic,{__CANCEL__:!0});const Oc=Mc;const Nc=vc.isStandardBrowserEnv?{write:function(e,t,n,r,i,o){const a=[];a.push(e+"="+encodeURIComponent(t)),ec.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ec.isString(r)&&a.push("path="+r),ec.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Rc(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Dc=vc.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=ec.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Fc=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];i||(i=l),n[o]=s,r[o]=l;let u=a,h=0;for(;u!==o;)h+=n[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};function jc(e,t){let n=0;const r=Fc(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,l=r(s);n=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const zc="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=Ic.from(e.headers).normalize(),o=e.responseType;let a;function s(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}ec.isFormData(r)&&(vc.isStandardBrowserEnv||vc.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const c=Rc(e.baseURL,e.url);function u(){if(!l)return;const r=Ic.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ic("Request failed with status code "+n.status,[ic.ERR_BAD_REQUEST,ic.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),mc(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(n(new ic("Request aborted",ic.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new ic("Network Error",ic.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||yc;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ic(t,r.clarifyTimeoutError?ic.ETIMEDOUT:ic.ECONNABORTED,e,l)),l=null},vc.isStandardBrowserEnv){const t=(e.withCredentials||Dc(c))&&e.xsrfCookieName&&Nc.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&ec.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),ec.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&"json"!==o&&(l.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&l.addEventListener("progress",jc(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",jc(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{l&&(n(!t||t.type?new Oc(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);h&&-1===vc.protocols.indexOf(h)?n(new ic("Unsupported protocol "+h+":",ic.ERR_BAD_REQUEST,e)):l.send(r||null)}))},Bc={http:null,xhr:zc};ec.forEach(Bc,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Uc=e=>{e=ec.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let i=0;i<t&&(n=e[i],!(r=ec.isString(n)?Bc[n.toLowerCase()]:n));i++);if(!r){if(!1===r)throw new ic("Adapter ".concat(n," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(ec.hasOwnProp(Bc,n)?"Adapter '".concat(n,"' is not available in the build"):"Unknown adapter '".concat(n,"'"))}if(!ec.isFunction(r))throw new TypeError("adapter is not a function");return r};function Vc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Oc(null,e)}function Zc(e){Vc(e),e.headers=Ic.from(e.headers),e.data=Pc.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Uc(e.adapter||wc.adapter)(e).then((function(t){return Vc(e),t.data=Pc.call(e,e.transformResponse,t),t.headers=Ic.from(t.headers),t}),(function(t){return Lc(t)||(Vc(e),t&&t.response&&(t.response.data=Pc.call(e,e.transformResponse,t.response),t.response.headers=Ic.from(t.response.headers))),Promise.reject(t)}))}const qc=e=>e instanceof Ic?e.toJSON():e;function Gc(e,t){t=t||{};const n={};function r(e,t,n){return ec.isPlainObject(e)&&ec.isPlainObject(t)?ec.merge.call({caseless:n},e,t):ec.isPlainObject(t)?ec.merge({},t):ec.isArray(t)?t.slice():t}function i(e,t,n){return ec.isUndefined(t)?ec.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!ec.isUndefined(t))return r(void 0,t)}function a(e,t){return ec.isUndefined(t)?ec.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(qc(e),qc(t),!0)};return ec.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,a=o(e[r],t[r],r);ec.isUndefined(a)&&o!==s||(n[r]=a)})),n}const Wc="1.4.0",Hc={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Hc[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Xc={};Hc.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new ic(r(i," has been removed"+(t?" in "+t:"")),ic.ERR_DEPRECATED);return t&&!Xc[i]&&(Xc[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const Kc={assertOptions:function(e,t,n){if("object"!==typeof e)throw new ic("options must be an object",ic.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new ic("option "+o+" must be "+n,ic.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ic("Unknown option "+o,ic.ERR_BAD_OPTION)}},validators:Hc},Yc=Kc.validators;class Jc{constructor(e){this.defaults=e,this.interceptors={request:new gc,response:new gc}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Gc(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;let o;void 0!==n&&Kc.assertOptions(n,{silentJSONParsing:Yc.transitional(Yc.boolean),forcedJSONParsing:Yc.transitional(Yc.boolean),clarifyTimeoutError:Yc.transitional(Yc.boolean)},!1),null!=r&&(ec.isFunction(r)?t.paramsSerializer={serialize:r}:Kc.assertOptions(r,{encode:Yc.function,serialize:Yc.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),o=i&&ec.merge(i.common,i[t.method]),o&&ec.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ic.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!s){const e=[Zc.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=a.length;let d=t;for(h=0;h<u;){const e=a[h++],t=a[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{c=Zc.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return mc(Rc((e=Gc(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ec.forEach(["delete","get","head","options"],(function(e){Jc.prototype[e]=function(t,n){return this.request(Gc(n||{},{method:e,url:t,data:(n||{}).data}))}})),ec.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Gc(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Jc.prototype[e]=t(),Jc.prototype[e+"Form"]=t(!0)}));const Qc=Jc;class $c{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Oc(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new $c((function(t){e=t}));return{token:t,cancel:e}}}const eu=$c;const tu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tu).forEach((e=>{let[t,n]=e;tu[n]=t}));const nu=tu;const ru=function e(t){const n=new Qc(t),r=bl(Qc.prototype.request,n);return ec.extend(r,Qc.prototype,n,{allOwnKeys:!0}),ec.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Gc(t,n))},r}(wc);ru.Axios=Qc,ru.CanceledError=Oc,ru.CancelToken=eu,ru.isCancel=Lc,ru.VERSION=Wc,ru.toFormData=cc,ru.AxiosError=ic,ru.Cancel=ru.CanceledError,ru.all=function(e){return Promise.all(e)},ru.spread=function(e){return function(t){return e.apply(null,t)}},ru.isAxiosError=function(e){return ec.isObject(e)&&!0===e.isAxiosError},ru.mergeConfig=Gc,ru.AxiosHeaders=Ic,ru.formToJSON=e=>_c(ec.isHTMLForm(e)?new FormData(e):e),ru.HttpStatusCode=nu,ru.default=ru;const iu=ru;function ou(e){return Object.prototype.toString.call(e).slice(8,-1)}function au(e){return"Undefined"===ou(e)}function su(e){return"Null"===ou(e)}function lu(e){if("Object"!==ou(e))return!1;const t=Object.getPrototypeOf(e);return t.constructor===Object&&t===Object.prototype}function cu(e){return"Array"===ou(e)}function uu(e,t,n,r,i){const o={}.propertyIsEnumerable.call(r,t)?"enumerable":"nonenumerable";"enumerable"===o&&(e[t]=n),i&&"nonenumerable"===o&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function hu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(cu(e))return e.map((e=>hu(e,t)));if(!lu(e))return e;const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e);return[...n,...r].reduce(((n,r)=>{if(cu(t.props)&&!t.props.includes(r))return n;return uu(n,r,hu(e[r],t),e,t.nonenumerable),n}),{})}function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},du.apply(this,arguments)}var pu=function(e,t,n,r,i){return new Promise((function(o,a){var s={};if(e||(s.message="Missing "+(r||"Params"),s.status=400,a(s)),"search"===i&&(e.searchQuery||(s.message="Missing searchQuery",s.status=400,a(s))),"retrieve"===i&&(e.id||(s.message="Missing id",s.status=400,a(s))),"autocomplete"===i){var l=e.field,c=["company","country","industry","location","major","region","role","school","sub_role","skill","title"];l?-1===c.indexOf(l)&&(s.message="field should be one of: "+c,s.status=400,a(s)):(s.message="Missing field",s.status=400,a(s))}"jobTitle"===i&&(e.jobTitle||(s.message="Missing jobTitle",s.status=400,a(s))),"skill"===i&&(e.skill||(s.message="Missing skill",s.status=400,a(s))),t||(s.message="Missing API Base Path",s.status=400,a(s)),n&&64===n.length||(s.message="Invalid API Key",s.status=401,a(s)),o()}))},fu=function(e){var t={400:"Request contained either missing or invalid parameters",401:"Request contained a missing or invalid key",402:"Payment Required, You have hit your account maximum (all matches used)",404:"No records were found matching your request",405:"Request method is not allowed on the requested resource",429:"An error occurred due to requests hitting the API too quick",500:"The server encountered an unexpected condition which prevented it from fulfilling the request"};if(e.response){var n=e.response.status,r=n>=500&&n<600?500:n;return{status:r,message:t[r]}}return{status:500,message:t[500]}},mu=function(e){var t={rateLimitRemaining:e.headers["x-ratelimit-remaining"]?JSON.parse(e.headers["x-ratelimit-remaining"].replace(/'/g,'"')):void 0,rateLimitReset:e.headers["x-ratelimit-reset"]||void 0,rateLimitLimit:e.headers["x-ratelimit-limit"]?JSON.parse(e.headers["x-ratelimit-limit"].replace(/'/g,'"')):void 0,totalLimitOveragesRemaining:e.headers["x-totallimit-overages-remaining"]?Number(e.headers["x-totallimit-overages-remaining"]):void 0,totalLimitPurchasedRemaining:e.headers["x-totallimit-purchased-remaining"]?Number(e.headers["x-totallimit-purchased-remaining"]):void 0,totalLimitRemaining:e.headers["x-totallimit-remaining"]?Number(e.headers["x-totallimit-remaining"]):void 0,callCreditsType:e.headers["x-call-credits-type"]||void 0,callCreditsSpent:e.headers["x-call-credits-spent"]?Number(e.headers["x-call-credits-spent"]):void 0,lifetimeUsed:e.headers["x-lifetime-used"]?Number(e.headers["x-lifetime-used"]):void 0};return Array.isArray(e.data)?{items:e.data,rateLimit:t}:du({},e.data,{rateLimit:t})},gu=function(e,t,n,r){return new Promise((function(i,o){pu(n,e,t,null,"cleaner").then((function(){iu.get(e+"/"+r+"/clean",{params:du({api_key:t},n),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&i(mu(e))})).catch((function(e){o(fu(e))}))})).catch((function(e){o(e)}))}))},yu=function(e,t,n,r,i){return new Promise((function(o,a){pu(r,e,n,null,"enrichment").then((function(){var s=r.sandbox&&"person"===i?t+"/"+i+"/enrich":e+"/"+i+"/enrich",l=hu(r),c=new URLSearchParams;delete l.sandbox,Object.entries(l).forEach((function(e){var t=e[0],n=e[1];"profile"===t?Array.isArray(n)?c.append(t,JSON.stringify(n)):c.append(t,n):"object"==typeof n?Array.isArray(n)?n.forEach((function(e){c.append(t,e)})):c.append(t,JSON.stringify(n)):c.append(t,n)})),c.append("api_key",n),iu.get(s,{params:c,headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&o(mu(e))})).catch((function(e){a(fu(e))}))})).catch((function(e){a(e)}))}))},vu=function(e,t,n,r,i,o){return new Promise((function(a,s){pu(i,e,n,null,"search").then((function(){var l,c=i.pretty,u=i.sandbox,h=((l={titlecase:i.titlecase||!1,dataset:i.dataset||"all",scroll_token:i.scroll_token||null,size:i.size||10})["sql"===r?"sql":"query"]=i.searchQuery,l.pretty=c||!1,l);iu.post(u&&"person"===o?t+"/person/search":e+"/"+o+"/search",h,{headers:{"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":n,"User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&a(mu(e))})).catch((function(e){s(fu(e))}))})).catch((function(e){s(e)}))}))};const _u=new function(e){var t=this,n=e.apiKey,r=e.basePath,i=e.sandboxBasePath,o=e.version;this.apiKey=void 0,this.basePath=void 0,this.sandboxBasePath=void 0,this.person=void 0,this.company=void 0,this.school=void 0,this.location=void 0,this.autocomplete=void 0,this.skill=void 0,this.jobTitle=void 0,this.apiKey=n,this.basePath=r||"https://api.peopledatalabs.com/"+(o||"v5"),this.sandboxBasePath=i||"https://sandbox.api.peopledatalabs.com/"+(o||"v5"),this.person={enrichment:function(e){return yu(t.basePath,t.sandboxBasePath,t.apiKey,e,"person")},search:{elastic:function(e){return vu(t.basePath,t.sandboxBasePath,t.apiKey,"elastic",e,"person")},sql:function(e){return vu(t.basePath,t.sandboxBasePath,t.apiKey,"sql",e,"person")}},bulk:{enrichment:function(e){return function(e,t,n){var r={"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":t,"User-Agent":"PDL-JS-SDK"};return new Promise((function(i,o){pu(n,e,t,"Records","bulk").then((function(){iu.post(e+"/person/bulk",n,{headers:r}).then((function(e){i(mu(e))})).catch((function(e){o(fu(e))}))})).catch((function(e){o(e)}))}))}(t.basePath,t.apiKey,e)},retrieve:function(e){return function(e,t,n){var r={"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":t,"User-Agent":"PDL-JS-SDK"};return new Promise((function(i,o){pu(n,e,t,"Records","bulk").then((function(){iu.post(e+"/person/retrieve/bulk",n,{headers:r}).then((function(e){i(mu(e))})).catch((function(e){o(fu(e))}))})).catch((function(e){o(e)}))}))}(t.basePath,t.apiKey,e)}},identify:function(e){return function(e,t,n,r){return new Promise((function(i,o){pu(r,e,n,null,"identify").then((function(){var a=r.sandbox?t+"/person/identify":e+"/person/identify",s=hu(r),l=new URLSearchParams;delete s.sandbox,Object.entries(s).forEach((function(e){var t=e[0],n=e[1];"profile"===t?Array.isArray(n)?l.append(t,JSON.stringify(n)):l.append(t,n):"object"==typeof n?Array.isArray(n)?n.forEach((function(e){l.append(t,e)})):l.append(t,JSON.stringify(n)):l.append(t,n)})),l.append("api_key",n),iu.get(a,{params:l,headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&i(mu(e))})).catch((function(e){o(fu(e))}))})).catch((function(e){o(e)}))}))}(t.basePath,t.sandboxBasePath,t.apiKey,e)},retrieve:function(e){return function(e,t,n){return new Promise((function(r,i){pu(n,e,t,"ID","retrieve").then((function(){iu.get(e+"/person/retrieve/"+n.id,{params:du({api_key:t},n),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&r(mu(e))})).catch((function(e){i(fu(e))}))})).catch((function(e){i(e)}))}))}(t.basePath,t.apiKey,e)}},this.company={enrichment:function(e){return yu(t.basePath,t.sandboxBasePath,t.apiKey,e,"company")},search:{elastic:function(e){return vu(t.basePath,t.sandboxBasePath,t.apiKey,"elastic",e,"company")},sql:function(e){return vu(t.basePath,t.sandboxBasePath,t.apiKey,"sql",e,"company")}},cleaner:function(e){return gu(t.basePath,t.apiKey,e,"company")}},this.school={cleaner:function(e){return gu(t.basePath,t.apiKey,e,"school")}},this.location={cleaner:function(e){return gu(t.basePath,t.apiKey,e,"location")}},this.autocomplete=function(e){return function(e,t,n){return new Promise((function(r,i){pu(n,e,t,null,"autocomplete").then((function(){iu.get(e+"/autocomplete",{params:du({api_key:t},{field:n.field,text:n.text||"",size:n.size||10,pretty:n.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&r(mu(e))})).catch((function(e){i(fu(e))}))})).catch((function(e){i(e)}))}))}(t.basePath,t.apiKey,e)},this.jobTitle=function(e){return function(e,t,n){return new Promise((function(r,i){pu(n,e,t,null,"jobTitle").then((function(){iu.get(e+"/job_title/enrich",{params:du({api_key:t},{job_title:n.jobTitle,pretty:n.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&r(mu(e))})).catch((function(e){i(fu(e))}))})).catch((function(e){i(e)}))}))}(t.basePath,t.apiKey,e)},this.skill=function(e){return function(e,t,n){return new Promise((function(r,i){pu(n,e,t,null,"skill").then((function(){iu.get(e+"/skill/enrich",{params:du({api_key:t},{skill:n.skill,pretty:n.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then((function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&r(mu(e))})).catch((function(e){i(fu(e))}))})).catch((function(e){i(e)}))}))}(t.basePath,t.apiKey,e)}}({apiKey:"491e0491a606e4dc3604086455359d0130733451fdc4ba35c9de97a05f06c7bc"}),bu=_u;var xu=n(1002),wu=Uint8Array,Su=Uint16Array,Eu=Uint32Array,Au=new wu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tu=new wu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cu=new wu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ku=function(e,t){for(var n=new Su(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Eu(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},Iu=ku(Au,2),Pu=Iu[0],Lu=Iu[1];Pu[28]=258,Lu[258]=28;for(var Mu=ku(Tu,0),Ou=Mu[0],Nu=Mu[1],Ru=new Su(32768),Du=0;Du<32768;++Du){var Fu=(43690&Du)>>>1|(21845&Du)<<1;Fu=(61680&(Fu=(52428&Fu)>>>2|(13107&Fu)<<2))>>>4|(3855&Fu)<<4,Ru[Du]=((65280&Fu)>>>8|(255&Fu)<<8)>>>1}var ju=function(e,t,n){for(var r=e.length,i=0,o=new Su(t);i<r;++i)++o[e[i]-1];var a,s=new Su(t);for(i=0;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new Su(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=s[e[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[Ru[h]>>>l]=c}else for(a=new Su(r),i=0;i<r;++i)a[i]=Ru[s[e[i]-1]++]>>>15-e[i];return a},zu=new wu(288);for(Du=0;Du<144;++Du)zu[Du]=8;for(Du=144;Du<256;++Du)zu[Du]=9;for(Du=256;Du<280;++Du)zu[Du]=7;for(Du=280;Du<288;++Du)zu[Du]=8;var Bu=new wu(32);for(Du=0;Du<32;++Du)Bu[Du]=5;var Uu=ju(zu,9,0),Vu=ju(zu,9,1),Zu=ju(Bu,5,0),qu=ju(Bu,5,1),Gu=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Wu=function(e,t,n){var r=t/8>>0;return(e[r]|e[r+1]<<8)>>>(7&t)&n},Hu=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},Xu=function(e){return(e/8>>0)+(7&e&&1)},Ku=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Su?Su:e instanceof Eu?Eu:wu)(n-t);return r.set(e.subarray(t,n)),r},Yu=function(e,t,n){var r=e.length,i=!t||n,o=!n||n.i;n||(n={}),t||(t=new wu(3*r));var a=function(e){var n=t.length;if(e>n){var r=new wu(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,d=n.m,p=n.n,f=8*r;do{if(!u){n.f=s=Wu(e,l,1);var m=Wu(e,l+1,3);if(l+=3,!m){var g=e[(C=Xu(l)+4)-4]|e[C-3]<<8,y=C+g;if(y>r){if(o)throw"unexpected EOF";break}i&&a(c+g),t.set(e.subarray(C,y),c),n.b=c+=g,n.p=l=8*y;continue}if(1==m)u=Vu,h=qu,d=9,p=5;else{if(2!=m)throw"invalid block type";var v=Wu(e,l,31)+257,_=Wu(e,l+10,15)+4,b=v+Wu(e,l+5,31)+1;l+=14;for(var x=new wu(b),w=new wu(19),S=0;S<_;++S)w[Cu[S]]=Wu(e,l+3*S,7);l+=3*_;var E=Gu(w),A=(1<<E)-1;if(!o&&l+b*(E+7)>f)break;var T=ju(w,E,1);for(S=0;S<b;){var C,k=T[Wu(e,l,A)];if(l+=15&k,(C=k>>>4)<16)x[S++]=C;else{var I=0,P=0;for(16==C?(P=3+Wu(e,l,3),l+=2,I=x[S-1]):17==C?(P=3+Wu(e,l,7),l+=3):18==C&&(P=11+Wu(e,l,127),l+=7);P--;)x[S++]=I}}var L=x.subarray(0,v),M=x.subarray(v);d=Gu(L),p=Gu(M),u=ju(L,d,1),h=ju(M,p,1)}if(l>f)throw"unexpected EOF"}i&&a(c+131072);for(var O=(1<<d)-1,N=(1<<p)-1,R=d+p+18;o||l+R<f;){var D=(I=u[Hu(e,l)&O])>>>4;if((l+=15&I)>f)throw"unexpected EOF";if(!I)throw"invalid length/literal";if(D<256)t[c++]=D;else{if(256==D){u=null;break}var F=D-254;if(D>264){var j=Au[S=D-257];F=Wu(e,l,(1<<j)-1)+Pu[S],l+=j}var z=h[Hu(e,l)&N],B=z>>>4;if(!z)throw"invalid distance";l+=15&z;M=Ou[B];if(B>3){j=Tu[B];M+=Hu(e,l)&(1<<j)-1,l+=j}if(l>f)throw"unexpected EOF";i&&a(c+131072);for(var U=c+F;c<U;c+=4)t[c]=t[c-M],t[c+1]=t[c+1-M],t[c+2]=t[c+2-M],t[c+3]=t[c+3-M];c=U}}n.l=u,n.p=l,n.b=c,u&&(s=1,n.m=d,n.d=h,n.n=p)}while(!s);return c==t.length?t:Ku(t,0,c)},Ju=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},Qu=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},$u=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new wu(0),0];if(1==i){var a=new wu(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};var d=o[0].s;for(r=1;r<i;++r)o[r].s>d&&(d=o[r].s);var p=new Su(d+1),f=eh(n[u-1],p,0);if(f>t){r=0;var m=0,g=f-t,y=1<<g;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<i;++r){var v=o[r].s;if(!(p[v]>t))break;m+=y-(1<<f-p[v]),p[v]=t}for(m>>>=g;m>0;){var _=o[r].s;p[_]<t?m-=1<<t-p[_]++-1:++r}for(;r>=0&&m;--r){var b=o[r].s;p[b]==t&&(--p[b],++m)}f=t}return[new wu(p),f]},eh=function(e,t,n){return-1==e.s?Math.max(eh(e.l,t,n+1),eh(e.r,t,n+1)):t[e.s]=n},th=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Su(++t),r=0,i=e[0],o=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return[n.subarray(0,r),t]},nh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},rh=function(e,t,n){var r=n.length,i=Xu(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},ih=function(e,t,n,r,i,o,a,s,l,c,u){Ju(t,u++,n),++i[256];for(var h=$u(i,15),d=h[0],p=h[1],f=$u(o,15),m=f[0],g=f[1],y=th(d),v=y[0],_=y[1],b=th(m),x=b[0],w=b[1],S=new Su(19),E=0;E<v.length;++E)S[31&v[E]]++;for(E=0;E<x.length;++E)S[31&x[E]]++;for(var A=$u(S,7),T=A[0],C=A[1],k=19;k>4&&!T[Cu[k-1]];--k);var I,P,L,M,O=c+5<<3,N=nh(i,zu)+nh(o,Bu)+a,R=nh(i,d)+nh(o,m)+a+14+3*k+nh(S,T)+(2*S[16]+3*S[17]+7*S[18]);if(O<=N&&O<=R)return rh(t,u,e.subarray(l,l+c));if(Ju(t,u,1+(R<N)),u+=2,R<N){I=ju(d,p,0),P=d,L=ju(m,g,0),M=m;var D=ju(T,C,0);Ju(t,u,_-257),Ju(t,u+5,w-1),Ju(t,u+10,k-4),u+=14;for(E=0;E<k;++E)Ju(t,u+3*E,T[Cu[E]]);u+=3*k;for(var F=[v,x],j=0;j<2;++j){var z=F[j];for(E=0;E<z.length;++E){var B=31&z[E];Ju(t,u,D[B]),u+=T[B],B>15&&(Ju(t,u,z[E]>>>5&127),u+=z[E]>>>12)}}}else I=Uu,P=zu,L=Zu,M=Bu;for(E=0;E<s;++E)if(r[E]>255){B=r[E]>>>18&31;Qu(t,u,I[B+257]),u+=P[B+257],B>7&&(Ju(t,u,r[E]>>>23&31),u+=Au[B]);var U=31&r[E];Qu(t,u,L[U]),u+=M[U],U>3&&(Qu(t,u,r[E]>>>5&8191),u+=Tu[U])}else Qu(t,u,I[r[E]]),u+=P[r[E]];return Qu(t,u,I[256]),u+P[256]},oh=new Eu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ah=new wu(0),sh=function(e,t,n,r,i,o){var a=e.length,s=new wu(r+a+5*(1+Math.floor(a/7e3))+i),l=s.subarray(r,s.length-i),c=0;if(!t||a<8)for(var u=0;u<=a;u+=65535){var h=u+65535;h<a?c=rh(l,c,e.subarray(u,h)):(l[u]=o,c=rh(l,c,e.subarray(u,a)))}else{for(var d=oh[t-1],p=d>>>13,f=8191&d,m=(1<<n)-1,g=new Su(32768),y=new Su(m+1),v=Math.ceil(n/3),_=2*v,b=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<_)&m},x=new Eu(25e3),w=new Su(288),S=new Su(32),E=0,A=0,T=(u=0,0),C=0,k=0;u<a;++u){var I=b(u),P=32767&u,L=y[I];if(g[P]=L,y[I]=P,C<=u){var M=a-u;if((E>7e3||T>24576)&&M>423){c=ih(e,l,0,x,w,S,A,T,k,u-k,c),T=E=A=0,k=u;for(var O=0;O<286;++O)w[O]=0;for(O=0;O<30;++O)S[O]=0}var N=2,R=0,D=f,F=P-L&32767;if(M>2&&I==b(u-F))for(var j=Math.min(p,M)-1,z=Math.min(32767,u),B=Math.min(258,M);F<=z&&--D&&P!=L;){if(e[u+N]==e[u+N-F]){for(var U=0;U<B&&e[u+U]==e[u+U-F];++U);if(U>N){if(N=U,R=F,U>j)break;var V=Math.min(F,U-2),Z=0;for(O=0;O<V;++O){var q=u-F+O+32768&32767,G=q-g[q]+32768&32767;G>Z&&(Z=G,L=q)}}}F+=(P=L)-(L=g[P])+32768&32767}if(R){x[T++]=268435456|Lu[N]<<18|Nu[R];var W=31&Lu[N],H=31&Nu[R];A+=Au[W]+Tu[H],++w[257+W],++S[H],C=u+N,++E}else x[T++]=e[u],++w[e[u]]}}c=ih(e,l,o,x,w,S,A,T,k,u-k,c),o||(c=rh(l,c,ah))}return Ku(s,0,r+Xu(c)+i)},lh=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length,a=0;a!=o;){for(var s=Math.min(a+5552,o);a<s;++a)i+=r+=n[a];r%=65521,i%=65521}e=r,t=i},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+2*((255&e)<<23)}}},ch=function(e,t,n,r,i){return sh(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},uh=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},hh=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},dh=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function ph(e,t){void 0===t&&(t={});var n=lh();n.p(e);var r=ch(e,t,2,4);return hh(r,t),uh(r,r.length-4,n.d()),r}function fh(e,t){return Yu((dh(e),e.subarray(2,-4)),t)}var mh=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function gh(){mh.console&&"function"==typeof mh.console.log&&mh.console.log.apply(mh.console,arguments)}var yh={log:gh,warn:function(e){mh.console&&("function"==typeof mh.console.warn?mh.console.warn.apply(mh.console,arguments):gh.call(null,arguments))},error:function(e){mh.console&&("function"==typeof mh.console.error?mh.console.error.apply(mh.console,arguments):gh(e))}};function vh(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Sh(r.response,t,n)},r.onerror=function(){yh.error("could not download file")},r.send()}function _h(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function bh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(gu){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var xh,wh,Sh=mh.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,xu.Z)(window))||window!==mh?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=mh.URL||mh.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?_h(i.href)?vh(e,t,n):bh(i,i.target="_blank"):bh(i)):(i.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){bh(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(_h(e))vh(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){bh(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,xu.Z)(t)&&(yh.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return vh(e,t,n);var i="application/octet-stream"===e.type,o=/constructor/i.test(mh.HTMLElement)||mh.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&"object"===("undefined"==typeof FileReader?"undefined":(0,xu.Z)(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},s.readAsDataURL(e)}else{var l=mh.URL||mh.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});function Eh(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function Ah(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=Ch(n,r,i,o,t[0],7,-680876936),o=Ch(o,n,r,i,t[1],12,-389564586),i=Ch(i,o,n,r,t[2],17,606105819),r=Ch(r,i,o,n,t[3],22,-1044525330),n=Ch(n,r,i,o,t[4],7,-176418897),o=Ch(o,n,r,i,t[5],12,1200080426),i=Ch(i,o,n,r,t[6],17,-1473231341),r=Ch(r,i,o,n,t[7],22,-45705983),n=Ch(n,r,i,o,t[8],7,1770035416),o=Ch(o,n,r,i,t[9],12,-1958414417),i=Ch(i,o,n,r,t[10],17,-42063),r=Ch(r,i,o,n,t[11],22,-1990404162),n=Ch(n,r,i,o,t[12],7,1804603682),o=Ch(o,n,r,i,t[13],12,-40341101),i=Ch(i,o,n,r,t[14],17,-1502002290),n=kh(n,r=Ch(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=kh(o,n,r,i,t[6],9,-1069501632),i=kh(i,o,n,r,t[11],14,643717713),r=kh(r,i,o,n,t[0],20,-373897302),n=kh(n,r,i,o,t[5],5,-701558691),o=kh(o,n,r,i,t[10],9,38016083),i=kh(i,o,n,r,t[15],14,-660478335),r=kh(r,i,o,n,t[4],20,-405537848),n=kh(n,r,i,o,t[9],5,568446438),o=kh(o,n,r,i,t[14],9,-1019803690),i=kh(i,o,n,r,t[3],14,-187363961),r=kh(r,i,o,n,t[8],20,1163531501),n=kh(n,r,i,o,t[13],5,-1444681467),o=kh(o,n,r,i,t[2],9,-51403784),i=kh(i,o,n,r,t[7],14,1735328473),n=Ih(n,r=kh(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=Ih(o,n,r,i,t[8],11,-2022574463),i=Ih(i,o,n,r,t[11],16,1839030562),r=Ih(r,i,o,n,t[14],23,-35309556),n=Ih(n,r,i,o,t[1],4,-1530992060),o=Ih(o,n,r,i,t[4],11,1272893353),i=Ih(i,o,n,r,t[7],16,-155497632),r=Ih(r,i,o,n,t[10],23,-1094730640),n=Ih(n,r,i,o,t[13],4,681279174),o=Ih(o,n,r,i,t[0],11,-358537222),i=Ih(i,o,n,r,t[3],16,-722521979),r=Ih(r,i,o,n,t[6],23,76029189),n=Ih(n,r,i,o,t[9],4,-640364487),o=Ih(o,n,r,i,t[12],11,-421815835),i=Ih(i,o,n,r,t[15],16,530742520),n=Ph(n,r=Ih(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=Ph(o,n,r,i,t[7],10,1126891415),i=Ph(i,o,n,r,t[14],15,-1416354905),r=Ph(r,i,o,n,t[5],21,-57434055),n=Ph(n,r,i,o,t[12],6,1700485571),o=Ph(o,n,r,i,t[3],10,-1894986606),i=Ph(i,o,n,r,t[10],15,-1051523),r=Ph(r,i,o,n,t[1],21,-2054922799),n=Ph(n,r,i,o,t[8],6,1873313359),o=Ph(o,n,r,i,t[15],10,-30611744),i=Ph(i,o,n,r,t[6],15,-1560198380),r=Ph(r,i,o,n,t[13],21,1309151649),n=Ph(n,r,i,o,t[4],6,-145523070),o=Ph(o,n,r,i,t[11],10,-1120210379),i=Ph(i,o,n,r,t[2],15,718787259),r=Ph(r,i,o,n,t[9],21,-343485551),e[0]=jh(n,e[0]),e[1]=jh(r,e[1]),e[2]=jh(i,e[2]),e[3]=jh(o,e[3])}function Th(e,t,n,r,i,o){return t=jh(jh(t,e),jh(r,o)),jh(t<<i|t>>>32-i,n)}function Ch(e,t,n,r,i,o,a){return Th(t&n|~t&r,e,t,i,o,a)}function kh(e,t,n,r,i,o,a){return Th(t&r|n&~r,e,t,i,o,a)}function Ih(e,t,n,r,i,o,a){return Th(t^n^r,e,t,i,o,a)}function Ph(e,t,n,r,i,o,a){return Th(n^(t|~r),e,t,i,o,a)}function Lh(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ah(r,Mh(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Ah(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Ah(r,i),r}function Mh(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}xh=mh.atob.bind(mh),wh=mh.btoa.bind(mh);var Oh="0123456789abcdef".split("");function Nh(e){for(var t="",n=0;n<4;n++)t+=Oh[e>>8*n+4&15]+Oh[e>>8*n&15];return t}function Rh(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Dh(e){return Lh(e).map(Rh).join("")}var Fh="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=Nh(e[t]);return e.join("")}(Lh("hello"));function jh(e,t){if(Fh){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function zh(e,t){var n,r,i,o;if(e!==n){for(var a=(i=e,o=1+(256/e.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+a.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,r=s}else s=r;var h=t.length,d=0,p=0,f="";for(l=0;l<h;l++)p=(p+(u=s[d=(d+1)%256]))%256,s[d]=s[p],s[p]=u,a=s[(s[d]+s[p])%256],f+=String.fromCharCode(t.charCodeAt(l)^a);return f}var Bh={print:4,modify:8,copy:16,"annot-forms":32};function Uh(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach((function(e){if(void 0!==Bh.perm)throw new Error("Invalid permission: "+e);i+=Bh[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=Dh(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=zh(this.encryptionKey,this.padding)}function Vh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function Zh(e){if("object"!==(0,xu.Z)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,r)}catch(n){mh.console&&yh.error("jsPDF PubSub Error",n.message,n)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function qh(e){if(!(this instanceof qh))return new qh(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Gh(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Wh(e,t,n,r,i){if(!(this instanceof Wh))return new Wh(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Gh.call(this,r,i)}function Hh(e,t,n,r,i){if(!(this instanceof Hh))return new Hh(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Gh.call(this,r,i)}function Xh(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,c="S",u=null;"object"===(0,xu.Z)(e=e||{})&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(!0===o?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,d={},p={internal:{},__private__:{}};p.__private__.PubSub=Zh;var f="1.3",m=p.__private__.getPdfVersion=function(){return f};p.__private__.setPdfVersion=function(e){f=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var y=p.__private__.getPageFormat=function(e){return g[e]};i=i||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},_=v.COMPAT;function b(){this.saveGraphicsState(),Q(new Me(pe,0,0,-pe,0,Cn()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),c="n",_=v.ADVANCED}function x(){this.restoreGraphicsState(),c="S",_=v.COMPAT}var w=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=_===v.COMPAT;return t&&b.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},p.compatAPI=function(e){var t=_===v.ADVANCED;return t&&x.call(this),"function"!=typeof e||(e(this),t&&b.call(this)),this},p.isAdvancedAPI=function(){return _===v.ADVANCED};var S,E=function(e){if(_!==v.ADVANCED)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=p.roundToPrecision=p.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,16)};var T=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return A(e,2)},C=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return A(e,3)},k=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return _===v.COMPAT?e*pe:_===v.ADVANCED?e:void 0},I=function(e){return _===v.COMPAT?Cn()-e:_===v.ADVANCED?e:void 0},P=function(e){return k(I(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var L,M="00000000000000000000000000000000",O=p.__private__.getFileId=function(){return M},N=p.__private__.setFileId=function(e){return M=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():M.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(Nt=new Uh(u.userPermissions,u.userPassword,u.ownerPassword,M)),M};p.setFileId=function(e){return N(e),this},p.getFileId=function(){return O()};var R=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),o=[n,B(r),"'",B(i),"'"].join("");return["D:",e.getFullYear(),B(e.getMonth()+1),B(e.getDate()),B(e.getHours()),B(e.getMinutes()),B(e.getSeconds()),o].join("")},D=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,o,a,0)},F=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return L=t},j=p.__private__.getCreationDate=function(e){var t=L;return"jsDate"===e&&(t=D(L)),t};p.setCreationDate=function(e){return F(e),this},p.getCreationDate=function(e){return j(e)};var z,B=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},U=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},V=0,Z=[],q=[],G=0,W=[],H=[],X=!1,K=q,Y=function(){V=0,G=0,q=[],Z=[],W=[],Be=Fe(),Ue=Fe()};p.__private__.setCustomOutputDestination=function(e){X=!0,K=e};var J=function(e){X||(K=e)};p.__private__.resetCustomOutputDestination=function(){X=!1,K=q};var Q=p.__private__.out=function(e){return e=e.toString(),G+=e.length+1,K.push(e),K},$=p.__private__.write=function(e){return Q(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},ee=p.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return te};var ne=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return ne=_===v.ADVANCED?e/pe:e,this};var re,ie=p.__private__.getFontSize=p.getFontSize=function(){return _===v.COMPAT?ne:ne*pe},oe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return oe=e,this},p.__private__.getR2L=p.getR2L=function(){return oe};var ae,se=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))re=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');re=e}else re=parseInt(e,10)};p.__private__.getZoomMode=function(){return re};var le,ce=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ae=e};p.__private__.getPageMode=function(){return ae};var ue=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');le=e};p.__private__.getLayoutMode=function(){return le},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,n){return se(e),ue(t),ce(n),this};var he={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(he).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return he[e]},p.__private__.getDocumentProperties=function(){return he},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in he)he.hasOwnProperty(t)&&e[t]&&(he[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(he).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return he[e]=t};var de,pe,fe,me,ge,ye={},ve={},_e=[],be={},xe={},we={},Se={},Ee=null,Ae=0,Te=[],Ce=new Zh(p),ke=e.hotfixes||[],Ie={},Pe={},Le=[],Me=function e(t,n,r,i,o,a){if(!(this instanceof e))return new e(t,n,r,i,o,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[t,n,r,i,o,a]};Object.defineProperty(Me.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Me.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Me.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Me.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Me.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Me.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Me.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Me.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Me.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Me.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Me.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Me.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Me.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Me.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Me.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Me.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Me.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(e)},Me.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,o=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new Me(t,n,r,i,o,a)},Me.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=Math.sqrt(e*e+t*t),s=(e/=a)*n+(t/=a)*r;n-=e*s,r-=t*s;var l=Math.sqrt(n*n+r*r);return s/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,s=-s,a=-a),{scale:new Me(a,0,0,l,0,0),translate:new Me(1,0,0,1,i,o),rotate:new Me(e,t,-t,e,0,0),skew:new Me(1,0,s,1,0,0)}},Me.prototype.toString=function(e){return this.join(" ")},Me.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=1/(e*r-t*n),s=r*a,l=-t*a,c=-n*a,u=e*a;return new Me(s,l,c,u,-s*i-c*o,-l*i-u*o)},Me.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new _n(t,n)},Me.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new _n(e.x+e.w,e.y+e.h));return new bn(t.x,t.y,n.x-t.x,n.y-t.y)},Me.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty;return new Me(e,t,n,r,i,o)},p.Matrix=Me;var Oe=p.matrixMult=function(e,t){return t.multiply(e)},Ne=new Me(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ne;var Re=function(e,t){if(!xe[e]){var n=(t instanceof Wh?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=n,xe[e]=n,be[n]=t,Ce.publish("addPattern",t)}};p.ShadingPattern=Wh,p.TilingPattern=Hh,p.addShadingPattern=function(e,t){return E("addShadingPattern()"),Re(e,t),this},p.beginTilingPattern=function(e){E("beginTilingPattern()"),wn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){E("endTilingPattern()"),t.stream=H[z].join("\n"),Re(e,t),Ce.publish("endTilingPattern",t),Le.pop().restore()};var De=p.__private__.newObject=function(){var e=Fe();return je(e,!0),e},Fe=p.__private__.newObjectDeferred=function(){return V++,Z[V]=function(){return G},V},je=function(e,t){return t="boolean"==typeof t&&t,Z[e]=G,t&&Q(e+" 0 obj"),e},ze=p.__private__.newAdditionalObject=function(){var e={objId:Fe(),content:""};return W.push(e),e},Be=Fe(),Ue=Fe(),Ve=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},Ze=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,i=e.ch3,o=e.ch4,a="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new Eh(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,i=255&l}if(void 0===r||void 0===o&&n===r&&r===i)if("string"==typeof n)t=n+" "+a[0];else if(2===e.precision)t=T(n/255)+" "+a[0];else t=C(n/255)+" "+a[0];else if(void 0===o||"object"===(0,xu.Z)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)t=[n,r,i,a[1]].join(" ");else if(2===e.precision)t=[T(n/255),T(r/255),T(i/255),a[1]].join(" ");else t=[C(n/255),C(r/255),C(i/255),a[1]].join(" ")}else if("string"==typeof n)t=[n,r,i,o,a[2]].join(" ");else if(2===e.precision)t=[T(n),T(r),T(i),T(o),a[2]].join(" ");else t=[C(n),C(r),C(i),C(o),a[2]].join(" ");return t},qe=p.__private__.getFilters=function(){return a},Ge=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||qe(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,o=t.length,a=e.objectId,s=function(e){return e};if(null!==u&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(s=Nt.encryptor(a,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],h=(l=void 0!==Xh.API.processDataByFilters?Xh.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:o})),0!=h.length)if(h.split("/").length-1==1)c.push({key:"Filter",value:h});else{c.push({key:"Filter",value:"["+h+"]"});for(var d=0;d<c.length;d+=1)if("DecodeParms"===c[d].key){for(var p=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)p.push("null");p.push(c[d].value),c[d].value="["+p.join(" ")+"]"}}Q("<<");for(var m=0;m<c.length;m++)Q("/"+c[m].key+" "+c[m].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(s(l.data)),Q("endstream"))},We=p.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;je(r,!0),Q("<</Type /Page"),Q("/Parent "+e.rootDictionaryObjId+" 0 R"),Q("/Resources "+e.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(S(e.mediaBox.bottomLeftX))+" "+parseFloat(S(e.mediaBox.bottomLeftY))+" "+S(e.mediaBox.topRightX)+" "+S(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Q("/CropBox ["+S(e.cropBox.bottomLeftX)+" "+S(e.cropBox.bottomLeftY)+" "+S(e.cropBox.topRightX)+" "+S(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Q("/BleedBox ["+S(e.bleedBox.bottomLeftX)+" "+S(e.bleedBox.bottomLeftY)+" "+S(e.bleedBox.topRightX)+" "+S(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Q("/TrimBox ["+S(e.trimBox.bottomLeftX)+" "+S(e.trimBox.bottomLeftY)+" "+S(e.trimBox.topRightX)+" "+S(e.trimBox.topRightY)+"]"),null!==e.artBox&&Q("/ArtBox ["+S(e.artBox.bottomLeftX)+" "+S(e.artBox.bottomLeftY)+" "+S(e.artBox.topRightX)+" "+S(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Q("/UserUnit "+e.userUnit),Ce.publish("putPage",{objId:r,pageContext:Te[t],pageNumber:t,page:n}),Q("/Contents "+i+" 0 R"),Q(">>"),Q("endobj");var o=n.join("\n");return _===v.ADVANCED&&(o+="\nQ"),je(i,!0),Ge({data:o,filters:qe(),objectId:i}),Q("endobj"),r},He=p.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Ae;e++)Te[e].objId=Fe(),Te[e].contentsObjId=Fe();for(e=1;e<=Ae;e++)n.push(We({number:e,data:H[e],objId:Te[e].objId,contentsObjId:Te[e].contentsObjId,mediaBox:Te[e].mediaBox,cropBox:Te[e].cropBox,bleedBox:Te[e].bleedBox,trimBox:Te[e].trimBox,artBox:Te[e].artBox,userUnit:Te[e].userUnit,rootDictionaryObjId:Be,resourceDictionaryObjId:Ue}));je(Be,!0),Q("<</Type /Pages");var r="/Kids [";for(t=0;t<Ae;t++)r+=n[t]+" 0 R ";Q(r+"]"),Q("/Count "+Ae),Q(">>"),Q("endobj"),Ce.publish("postPutPages")},Xe=function(e){Ce.publish("putFont",{font:e,out:Q,newObject:De,putStream:Ge}),!0!==e.isAlreadyPutted&&(e.objectNumber=De(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Vh(e.postScriptName)),Q("/Subtype /Type1"),"string"==typeof e.encoding&&Q("/Encoding /"+e.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Ke=function(){for(var e in ye)ye.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&Xe(ye[e])},Ye=function(e){e.objectNumber=De();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[S(e.x),S(e.y),S(e.x+e.width),S(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ge({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Q("endobj")},Je=function(){for(var e in Ie)Ie.hasOwnProperty(e)&&Ye(Ie[e])},Qe=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var o={offset:0,color:e[0].color};e.unshift(o)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var s="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,h=(n-u)/(e[l+1].offset-u),d=e[l].color,p=e[l+1].color;s+=U(Math.round((1-h)*d[0]+h*p[0]).toString(16))+U(Math.round((1-h)*d[1]+h*p[1]).toString(16))+U(Math.round((1-h)*d[2]+h*p[2]).toString(16))}return s.trim()},$e=function(e,t){t||(t=21);var n=De(),r=Qe(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),e.objectNumber=De(),Q("<< /ShadingType "+e.type),Q("/ColorSpace /DeviceRGB");var o="/Coords ["+S(parseFloat(e.coords[0]))+" "+S(parseFloat(e.coords[1]))+" ";2===e.type?o+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3])):o+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3]))+" "+S(parseFloat(e.coords[4]))+" "+S(parseFloat(e.coords[5])),Q(o+="]"),e.matrix&&Q("/Matrix ["+e.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},et=function(e,t){var n=Fe(),r=De();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(S).join(" ")+"]"}),i.push({key:"XStep",value:S(e.xStep)}),i.push({key:"YStep",value:S(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ge({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),Q("endobj")},tt=function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof Wh?$e(be[t]):be[t]instanceof Hh&&et(be[t],e))},nt=function(e){for(var t in e.objectNumber=De(),Q("<<"),e)switch(t){case"opacity":Q("/ca "+T(e[t]));break;case"stroke-opacity":Q("/CA "+T(e[t]))}Q(">>"),Q("endobj")},rt=function(){var e;for(e in we)we.hasOwnProperty(e)&&nt(we[e])},it=function(){for(var e in Q("/XObject <<"),Ie)Ie.hasOwnProperty(e)&&Ie[e].objectNumber>=0&&Q("/"+e+" "+Ie[e].objectNumber+" 0 R");Ce.publish("putXobjectDict"),Q(">>")},ot=function(){Nt.oid=De(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Nt.v),Q("/R "+Nt.r),Q("/U <"+Nt.toHexString(Nt.U)+">"),Q("/O <"+Nt.toHexString(Nt.O)+">"),Q("/P "+Nt.P),Q(">>"),Q("endobj")},at=function(){for(var e in Q("/Font <<"),ye)ye.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&Q("/"+e+" "+ye[e].objectNumber+" 0 R");Q(">>")},st=function(){if(Object.keys(be).length>0){for(var e in Q("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof Wh&&be[e].objectNumber>=0&&Q("/"+e+" "+be[e].objectNumber+" 0 R");Ce.publish("putShadingPatternDict"),Q(">>")}},lt=function(e){if(Object.keys(be).length>0){for(var t in Q("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof p.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&Q("/"+t+" "+be[t].objectNumber+" 0 R");Ce.publish("putTilingPatternDict"),Q(">>")}},ct=function(){if(Object.keys(we).length>0){var e;for(e in Q("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&Q("/"+e+" "+we[e].objectNumber+" 0 R");Ce.publish("putGStateDict"),Q(">>")}},ut=function(e){je(e.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),at(),st(),lt(e.objectOid),ct(),it(),Q(">>"),Q("endobj")},ht=function(){var e=[];Ke(),rt(),Je(),tt(e),Ce.publish("putResources"),e.forEach(ut),ut({resourcesOid:Ue,objectOid:Number.MAX_SAFE_INTEGER}),Ce.publish("postPutResources")},dt=function(){Ce.publish("putAdditionalObjects");for(var e=0;e<W.length;e++){var t=W[e];je(t.objId,!0),Q(t.content),Q("endobj")}Ce.publish("postPutAdditionalObjects")},pt=function(e){ve[e.fontName]=ve[e.fontName]||{},ve[e.fontName][e.fontStyle]=e.id},ft=function(e,t,n,r,i){var o={id:"F"+(Object.keys(ye).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Ce.publish("addFont",{font:o,instance:this}),ye[o.id]=o,pt(o),o.id},mt=function(e){for(var t=0,n=te.length;t<n;t++){var r=ft.call(this,e[t][0],e[t][1],e[t][2],te[t][3],!0);!1===h&&(d[r]=!0);var i=e[t][0].split("-");pt({id:r,fontName:i[0],fontStyle:i[1]||""})}Ce.publish("addFonts",{fonts:ye,dictionary:ve})},gt=function(e){return e.foo=function(){try{return e.apply(this,arguments)}catch(e){var t=e.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var n="Error in function "+t.split("\n")[0].split("<")[0]+": "+e.message;if(!mh.console)throw new Error(n);mh.console.error(n,e),mh.alert&&alert(n)}},e.foo.bar=e,e.foo},yt=function(e,t){var n,r,i,o,a,s,l,c,u;if(i=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&ye[de].metadata&&ye[de].metadata[i]&&ye[de].metadata[i].encoding&&(o=ye[de].metadata[i].encoding,!a&&ye[de].encoding&&(a=ye[de].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(l=!1,s=[],n=0,r=e.length;n<r;n++)(c=a[e.charCodeAt(n)])?s.push(String.fromCharCode(c)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(s=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(c-(u<<8))}return String.fromCharCode.apply(void 0,s)},vt=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return yt(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_t=p.__private__.beginPage=function(e){H[++Ae]=[],Te[Ae]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},wt(Ae),J(H[z])},bt=function(e,t){var r,o,a;switch(n=t||n,"string"==typeof e&&(r=y(e.toLowerCase()),Array.isArray(r)&&(o=r[0],a=r[1])),Array.isArray(e)&&(o=e[0]*pe,a=e[1]*pe),isNaN(o)&&(o=i[0],a=i[1]),(o>14400||a>14400)&&(yh.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),i=[o,a],n.substr(0,1)){case"l":a>o&&(i=[a,o]);break;case"p":o>a&&(i=[a,o])}_t(i),tn($t),Q(un),0!==gn&&Q(gn+" J"),0!==yn&&Q(yn+" j"),Ce.publish("addPage",{pageNumber:Ae})},xt=function(e){e>0&&e<=Ae&&(H.splice(e,1),Te.splice(e,1),Ae--,z>Ae&&(z=Ae),this.setPage(z))},wt=function(e){e>0&&e<=Ae&&(z=e)},St=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return H.length-1},Et=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:ye[de].fontName,t=void 0!==t?t:ye[de].fontStyle,r=e.toLowerCase(),void 0!==ve[r]&&void 0!==ve[r][t]?i=ve[r][t]:void 0!==ve[e]&&void 0!==ve[e][t]?i=ve[e][t]:!1===n.disableWarning&&yh.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ve.times[t])&&(i=ve.times.normal),i},At=p.__private__.putInfo=function(){var e=De(),t=function(e){return e};for(var n in null!==u&&(t=Nt.encryptor(e,0)),Q("<<"),Q("/Producer ("+vt(t("jsPDF "+Xh.version))+")"),he)he.hasOwnProperty(n)&&he[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+vt(t(he[n]))+")");Q("/CreationDate ("+vt(t(L))+")"),Q(">>"),Q("endobj")},Tt=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Be;switch(De(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+t+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+re;"%"===n.substr(n.length-1)&&(re=parseInt(re)/100),"number"==typeof re&&Q("/OpenAction [3 0 R /XYZ null null "+T(re)+"]")}switch(le||(le="continuous"),le){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ae&&Q("/PageMode /"+ae),Ce.publish("putCatalog"),Q(">>"),Q("endobj")},Ct=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(V+1)),Q("/Root "+V+" 0 R"),Q("/Info "+(V-1)+" 0 R"),null!==u&&Q("/Encrypt "+Nt.oid+" 0 R"),Q("/ID [ <"+M+"> <"+M+"> ]"),Q(">>")},kt=p.__private__.putHeader=function(){Q("%PDF-"+f),Q("%\xba\xdf\xac\xe0")},It=p.__private__.putXRef=function(){var e="0000000000";Q("xref"),Q("0 "+(V+1)),Q("0000000000 65535 f ");for(var t=1;t<=V;t++)"function"==typeof Z[t]?Q((e+Z[t]()).slice(-10)+" 00000 n "):void 0!==Z[t]?Q((e+Z[t]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Pt=p.__private__.buildDocument=function(){Y(),J(q),Ce.publish("buildDocument"),kt(),He(),dt(),ht(),null!==u&&ot(),At(),Tt();var e=G;return It(),Ct(),Q("startxref"),Q(""+e),Q("%%EOF"),J(H[z]),q.join("\n")},Lt=p.__private__.getBlob=function(e){return new Blob([ee(e)],{type:"application/pdf"})},Mt=p.output=p.__private__.output=gt((function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return Pt();case"save":p.save(t.filename);break;case"arraybuffer":return ee(Pt());case"blob":return Lt(Pt());case"bloburi":case"bloburl":if(void 0!==mh.URL&&"function"==typeof mh.URL.createObjectURL)return mh.URL&&mh.URL.createObjectURL(Lt(Pt()))||void 0;yh.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=Pt();try{n=wh(r)}catch(e){n=wh(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(mh)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,o="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=mh.open();return null!==s&&s.document.write(a),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(mh)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=mh.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(mh))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',d=mh.open();if(null!==d&&(d.document.write(h),d.document.title=t.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return mh.document.location.href=this.output("datauristring",t);default:return null}})),Ot=function(e){return!0===Array.isArray(ke)&&ke.indexOf(e)>-1};switch(r){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=1==Ot("px_scaling")?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);pe=r}var Nt=null;F(),N();var Rt=function(e){return null!==u?Nt.encryptor(e,0):function(e){return e}},Dt=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Te[e].objId,pageNumber:e,pageContext:Te[e]}},Ft=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Te)if(Te[t].objId===e)break;return Dt(t)},jt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Te[z].objId,pageNumber:z,pageContext:Te[z]}};p.addPage=function(){return bt.apply(this,arguments),this},p.setPage=function(){return wt.apply(this,arguments),J.call(this,H[z]),this},p.insertPage=function(e){return this.addPage(),this.movePage(z,e),this},p.movePage=function(e,t){var n,r;if(e>t){n=H[e],r=Te[e];for(var i=e;i>t;i--)H[i]=H[i-1],Te[i]=Te[i-1];H[t]=n,Te[t]=r,this.setPage(t)}else if(e<t){n=H[e],r=Te[e];for(var o=e;o<t;o++)H[o]=H[o+1],Te[o]=Te[o+1];H[t]=n,Te[t]=r,this.setPage(t)}return this},p.deletePage=function(){return xt.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,n,r,i){var o,a,s,l,c,u,h,p,f,m=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Me==0?(s=arguments[4],l=arguments[5],"object"===(0,xu.Z)(h=arguments[3])&&null!==h||("string"==typeof s&&(l=s,s=null),"string"==typeof h&&(l=h,h=null),"number"==typeof h&&(s=h,h=null),r={flags:h,angle:s,align:l})):(E("The transform parameter of text() with a Matrix value"),f=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var y="",b=!1,x="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Qt,w=m.internal.scaleFactor;function A(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),vt(e,h)}function T(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function C(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,o=e.concat(),a=[],s=o.length;s--;)"string"==typeof(r=o.shift())?a.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var I=!1,P=!0;if("string"==typeof e)I=!0;else if(Array.isArray(e)){var L=e.concat();a=[];for(var M,O=L.length;O--;)("string"!=typeof(M=L.shift())||Array.isArray(M)&&"string"!=typeof M[0])&&(P=!1);I=P}if(!1===I)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var N=ne/m.internal.scaleFactor,R=N*(x-1);switch(r.baseline){case"bottom":n-=R;break;case"top":n+=N-R;break;case"hanging":n+=N-2*R;break;case"middle":n+=N/2-R}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(m.splitTextToSize(t,u))}),[]))),o={text:e,x:t,y:n,options:r,mutex:{pdfEscape:vt,activeFontKey:de,fonts:ye,activeFontSize:ne}},Ce.publish("preProcessText",o),e=o.text,s=(r=o.options).angle,f instanceof Me==0&&s&&"number"==typeof s){s*=Math.PI/180,0===r.rotationDirection&&(s=-s),_===v.ADVANCED&&(s=-s);var D=Math.cos(s),F=Math.sin(s);f=new Me(D,F,-F,D,0,0)}else s&&s instanceof Me&&(f=s);_!==v.ADVANCED||f||(f=Ne),void 0!==(c=r.charSpace||fn)&&(y+=S(k(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=r.horizontalScale)&&(y+=S(100*p)+" Tz\n"),r.lang;var j=-1,z=void 0!==r.renderingMode?r.renderingMode:r.stroke,B=m.internal.getCurrentPageInfo().pageContext;switch(z){case 0:case!1:case"fill":j=0;break;case 1:case!0:case"stroke":j=1;break;case 2:case"fillThenStroke":j=2;break;case 3:case"invisible":j=3;break;case 4:case"fillAndAddForClipping":j=4;break;case 5:case"strokeAndAddPathForClipping":j=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":j=6;break;case 7:case"addToPathForClipping":j=7}var U=void 0!==B.usedRenderingMode?B.usedRenderingMode:-1;-1!==j?y+=j+" Tr\n":-1!==U&&(y+="0 Tr\n"),-1!==j&&(B.usedRenderingMode=j),l=r.align||"left";var V,Z=ne*x,q=m.internal.pageSize.getWidth(),G=ye[de];c=r.charSpace||fn,u=r.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},r.flags);var W=[];if("[object Array]"===Object.prototype.toString.call(e)){var H;a=T(e),"left"!==l&&(V=a.map((function(e){return m.getStringUnitWidth(e,{font:G,charSpace:c,fontSize:ne,doKerning:!1})*ne/w})));var X,K=0;if("right"===l){t-=V[0],e=[],O=a.length;for(var Y=0;Y<O;Y++)0===Y?(X=an(t),H=sn(n)):(X=k(K-V[Y]),H=-Z),e.push([a[Y],X,H]),K=V[Y]}else if("center"===l){t-=V[0]/2,e=[],O=a.length;for(var J=0;J<O;J++)0===J?(X=an(t),H=sn(n)):(X=k((K-V[J])/2),H=-Z),e.push([a[J],X,H]),K=V[J]}else if("left"===l){e=[],O=a.length;for(var $=0;$<O;$++)e.push(a[$])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');e=[],O=a.length,u=0!==u?u:q;for(var ee=0;ee<O;ee++)H=0===ee?sn(n):-Z,X=0===ee?an(t):0,ee<O-1?W.push(S(k((u-V[ee])/(a[ee].split(" ").length-1)))):W.push(0),e.push([a[ee],X,H])}}var te="boolean"==typeof r.R2L?r.R2L:oe;!0===te&&(e=C(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),o={text:e,x:t,y:n,options:r,mutex:{pdfEscape:vt,activeFontKey:de,fonts:ye,activeFontSize:ne}},Ce.publish("postProcessText",o),e=o.text,b=o.mutex.isHex||!1;var re=ye[de].encoding;"WinAnsiEncoding"!==re&&"StandardEncoding"!==re||(e=C(e,(function(e,t,n){return[A(e),t,n]}))),a=T(e),e=[];for(var ie,ae,se,le=0,ce=1,ue=Array.isArray(a[0])?ce:le,he="",pe=function(e,t,n){var i="";return n instanceof Me?(n="number"==typeof r.angle?Oe(n,new Me(1,0,0,1,e,t)):Oe(new Me(1,0,0,1,e,t),n),_===v.ADVANCED&&(n=Oe(new Me(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=S(e)+" "+S(t)+" Td\n",i},fe=0;fe<a.length;fe++){switch(he="",ue){case ce:se=(b?"<":"(")+a[fe][0]+(b?">":")"),ie=parseFloat(a[fe][1]),ae=parseFloat(a[fe][2]);break;case le:se=(b?"<":"(")+a[fe]+(b?">":")"),ie=an(t),ae=sn(n)}void 0!==W&&void 0!==W[fe]&&(he=W[fe]+" Tw\n"),0===fe?e.push(he+pe(ie,ae,f)+se):ue===le?e.push(he+se):ue===ce&&e.push(he+pe(ie,ae,f)+se)}e=ue===le?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var me="BT\n/";return me+=de+" "+ne+" Tf\n",me+=S(ne*x)+" TL\n",me+=dn+"\n",me+=y,me+=e,Q(me+="ET"),d[de]=!0,m};var zt=p.__private__.clip=p.clip=function(e){return Q("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return zt("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var Bt=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return Bt(e)&&(c=e),this};var Ut=p.__private__.getStyle=p.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Vt=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(e){return Zt("f",e),this},p.fillEvenOdd=function(e){return Zt("f*",e),this},p.fillStroke=function(e){return Zt("B",e),this},p.fillStrokeEvenOdd=function(e){return Zt("B*",e),this};var Zt=function(e,t){"object"===(0,xu.Z)(t)?Wt(t,e):Q(e)},qt=function(e){null===e||_===v.ADVANCED&&void 0===e||(e=Ut(e),Q(e))};function Gt(e,t,n,r,i){var o=new Hh(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return Re(a,o),o}var Wt=function(e,t){var n=xe[e.key],r=be[n];if(r instanceof Wh)Q("q"),Q(Ht(t)),r.gState&&p.setGState(r.gState),Q(e.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(r instanceof Hh){var i=new Me(1,0,0,-1,0,Cn());e.matrix&&(i=i.multiply(e.matrix||Ne),n=Gt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),r.gState&&p.setGState(r.gState),Q(t),Q("Q")}},Ht=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xt=p.moveTo=function(e,t){return Q(S(k(e))+" "+S(P(t))+" m"),this},Kt=p.lineTo=function(e,t){return Q(S(k(e))+" "+S(P(t))+" l"),this},Yt=p.curveTo=function(e,t,n,r,i,o){return Q([S(k(e)),S(P(t)),S(k(n)),S(P(r)),S(k(i)),S(P(o)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Bt(i))throw new Error("Invalid arguments passed to jsPDF.line");return _===v.COMPAT?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,n,r,i,o){var a,s,l,c,u,h,d,p,f,m,g,y;if("number"==typeof e&&(y=n,n=t,t=e,e=y),r=r||[1,1],o=o||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Bt(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(Xt(t,n),a=r[0],s=r[1],c=e.length,m=t,g=n,l=0;l<c;l++)2===(u=e[l]).length?(m=u[0]*a+m,g=u[1]*s+g,Kt(m,g)):(h=u[0]*a+m,d=u[1]*s+g,p=u[2]*a+m,f=u[3]*s+g,m=u[4]*a+m,g=u[5]*s+g,Yt(h,d,p,f,m,g));return o&&Vt(),qt(i),this},p.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Xt(r[0],r[1]);break;case"l":Kt(r[0],r[1]);break;case"c":Yt.apply(this,r);break;case"h":Vt()}}return this},p.__private__.rect=p.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Bt(i))throw new Error("Invalid arguments passed to jsPDF.rect");return _===v.COMPAT&&(r=-r),Q([S(k(e)),S(P(t)),S(k(n)),S(k(r)),"re"].join(" ")),qt(i),this},p.__private__.triangle=p.triangle=function(e,t,n,r,i,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Bt(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,o-r],[e-i,t-o]],e,t,[1,1],a,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,n,r,i,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!Bt(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),o=Math.min(o,.5*r),this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],e+i,t,[1,1],a,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Bt(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return Xt(e+n,t),Yt(e+n,t-a,e+o,t-r,e,t-r),Yt(e-o,t-r,e-n,t-a,e-n,t),Yt(e-n,t+a,e-o,t+r,e,t+r),Yt(e+o,t+r,e+n,t+a,e+n,t),qt(i),this},p.__private__.circle=p.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Bt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},p.setFont=function(e,t,n){return n&&(t=w(t,n)),de=Et(e,t,{disableWarning:!1}),this};var Jt=p.__private__.getFont=p.getFont=function(){return ye[Et.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,n={};for(e in ve)if(ve.hasOwnProperty(e))for(t in n[e]=[],ve[e])ve[e].hasOwnProperty(t)&&n[e].push(t);return n},p.addFont=function(e,t,n,r,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=w(n,r)),i=i||"Identity-H",ft.call(this,e,t,n,i)};var Qt,$t=e.lineWidth||.200025,en=p.__private__.getLineWidth=p.getLineWidth=function(){return $t},tn=p.__private__.setLineWidth=p.setLineWidth=function(e){return $t=e,Q(S(k(e))+" w"),this};p.__private__.setLineDash=Xh.API.setLineDash=Xh.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return S(k(e))})).join(" "),t=S(k(t)),Q("["+e+"] "+t+" d"),this};var nn=p.__private__.getLineHeight=p.getLineHeight=function(){return ne*Qt};p.__private__.getLineHeight=p.getLineHeight=function(){return ne*Qt};var rn=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Qt=e),this},on=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Qt};rn(e.lineHeight);var an=p.__private__.getHorizontalCoordinate=function(e){return k(e)},sn=p.__private__.getVerticalCoordinate=function(e){return _===v.ADVANCED?e:Te[z].mediaBox.topRightY-Te[z].mediaBox.bottomLeftY-k(e)},ln=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return S(an(e))},cn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return S(sn(e))},un=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ve(un)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,n,r){return un=Ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Q(un),this};var hn=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ve(hn)},p.__private__.setFillColor=p.setFillColor=function(e,t,n,r){return hn=Ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Q(hn),this};var dn=e.textColor||"0 g",pn=p.__private__.getTextColor=p.getTextColor=function(){return Ve(dn)};p.__private__.setTextColor=p.setTextColor=function(e,t,n,r){return dn=Ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var fn=e.charSpace,mn=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(fn||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fn=e,this};var gn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gn=t,Q(t+" J"),this};var yn=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yn=t,Q(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(S(k(e))+" M"),this},p.GState=qh,p.setGState=function(e){(e="string"==typeof e?we[Se[e]]:vn(null,e)).equals(Ee)||(Q("/"+e.id+" gs"),Ee=e)};var vn=function(e,t){if(!e||!Se[e]){var n=!1;for(var r in we)if(we.hasOwnProperty(r)&&we[r].equals(t)){n=!0;break}if(n)t=we[r];else{var i="GS"+(Object.keys(we).length+1).toString(10);we[i]=t,t.id=i}return e&&(Se[e]=t.id),Ce.publish("addGState",t),t}};p.addGState=function(e,t){return vn(e,t),this},p.saveGraphicsState=function(){return Q("q"),_e.push({key:de,size:ne,color:dn}),this},p.restoreGraphicsState=function(){Q("Q");var e=_e.pop();return de=e.key,ne=e.size,dn=e.color,Ee=null,this},p.setCurrentTransformationMatrix=function(e){return Q(e.toString()+" cm"),this},p.comment=function(e){return Q("#"+e),this};var _n=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},bn=function(e,t,n,r){_n.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},xn=function(){this.page=Ae,this.currentPage=z,this.pages=H.slice(0),this.pagesContext=Te.slice(0),this.x=fe,this.y=me,this.matrix=ge,this.width=An(z),this.height=Cn(z),this.outputDestination=K,this.id="",this.objectNumber=-1};xn.prototype.restore=function(){Ae=this.page,z=this.currentPage,Te=this.pagesContext,H=this.pages,fe=this.x,me=this.y,ge=this.matrix,Tn(z,this.width),kn(z,this.height),K=this.outputDestination};var wn=function(e,t,n,r,i){Le.push(new xn),Ae=z=0,H=[],fe=e,me=t,ge=i,_t([n,r])},Sn=function(e){if(Pe[e])Le.pop().restore();else{var t=new xn,n="Xo"+(Object.keys(Ie).length+1).toString(10);t.id=n,Pe[e]=n,Ie[n]=t,Ce.publish("addFormObject",t),Le.pop().restore()}};for(var En in p.beginFormObject=function(e,t,n,r,i){return wn(e,t,n,r,i),this},p.endFormObject=function(e){return Sn(e),this},p.doFormObject=function(e,t){var n=Ie[Pe[e]];return Q("q"),Q(t.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},p.getFormObject=function(e){var t=Ie[Pe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(Sh(Lt(Pt()),e),"function"==typeof Sh.unload&&mh.setTimeout&&setTimeout(Sh.unload,911),this):new Promise((function(t,n){try{var r=Sh(Lt(Pt()),e);"function"==typeof Sh.unload&&mh.setTimeout&&setTimeout(Sh.unload,911),t(r)}catch(e){n(e.message)}}))},Xh.API)Xh.API.hasOwnProperty(En)&&("events"===En&&Xh.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Ce,Xh.API.events):p[En]=Xh.API[En]);var An=p.getPageWidth=function(e){return(Te[e=e||z].mediaBox.topRightX-Te[e].mediaBox.bottomLeftX)/pe},Tn=p.setPageWidth=function(e,t){Te[e].mediaBox.topRightX=t*pe+Te[e].mediaBox.bottomLeftX},Cn=p.getPageHeight=function(e){return(Te[e=e||z].mediaBox.topRightY-Te[e].mediaBox.bottomLeftY)/pe},kn=p.setPageHeight=function(e,t){Te[e].mediaBox.topRightY=t*pe+Te[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:vt,getStyle:Ut,getFont:Jt,getFontSize:ie,getCharSpace:mn,getTextColor:pn,getLineHeight:nn,getLineHeightFactor:on,getLineWidth:en,write:$,getHorizontalCoordinate:an,getVerticalCoordinate:sn,getCoordinateString:ln,getVerticalCoordinateString:cn,collections:{},newObject:De,newAdditionalObject:ze,newObjectDeferred:Fe,newObjectDeferredBegin:je,getFilters:qe,putStream:Ge,events:Ce,scaleFactor:pe,pageSize:{getWidth:function(){return An(z)},setWidth:function(e){Tn(z,e)},getHeight:function(){return Cn(z)},setHeight:function(e){kn(z,e)}},encryptionOptions:u,encryption:Nt,getEncryptor:Rt,output:Mt,getNumberOfPages:St,pages:H,out:Q,f2:T,f3:C,getPageInfo:Dt,getPageInfoByObjId:Ft,getCurrentPageInfo:jt,getPDFVersion:m,Point:_n,Rectangle:bn,Matrix:Me,hasHotfix:Ot},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return An(z)},set:function(e){Tn(z,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Cn(z)},set:function(e){kn(z,e)},enumerable:!0,configurable:!0}),mt.call(p,te),de="F1",bt(i,n),Ce.publish("initialized"),p}Uh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Uh.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Uh.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Uh.prototype.processOwnerPassword=function(e,t){return zh(Dh(t).substr(0,5),e)},Uh.prototype.encryptor=function(e,t){var n=Dh(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return zh(n,e)}},qh.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,xu.Z)(e)!==(0,xu.Z)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},Xh.API={events:[]},Xh.version="2.5.1";var Kh=Xh.API,Yh=1,Jh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$h=function(e){return e.toFixed(2)},ed=function(e){return e.toFixed(5)};Kh.__acroform__={};var td=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},nd=function(e){return e*Yh},rd=function(e){var t=new bd,n=Nd.internal.getHeight(e)||0,r=Nd.internal.getWidth(e)||0;return t.BBox=[0,0,Number($h(r)),Number($h(n))],t},id=Kh.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},od=Kh.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},ad=Kh.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},sd=Kh.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ad(e,t-1)},ld=Kh.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return id(e,t-1)},cd=Kh.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return od(e,t-1)},ud=Kh.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],a=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(o)||0,[Number($h(l.lowerLeft_X)),Number($h(l.lowerLeft_Y)),Number($h(l.upperRight_X)),Number($h(l.upperRight_Y))]},hd=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=dd(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+$h(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=rd(e);return o.scope=e.scope,o.stream=t.join("\n"),o}},dd=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map((function(e){return e.split("\n")})):i.map((function(e){return[e]}));var o=n,a=Nd.internal.getHeight(e)||0;a=a<0?-a:a;var s=Nd.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(t,n,r){if(t+1<i.length){var o=n+" "+i[t+1][0];return pd(o,e,r).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var c,u,h=pd("3",e,o).height,d=e.multiline?a-o:(a-h)/2,p=d+=2,f=0,m=0,g=0;if(o<=0){t="(...) Tj\n",t+="% Width of Text: "+pd(t,e,o=12).width+", FieldWidth:"+s+"\n";break}for(var y="",v=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var b=!1;if(1!==i[_].length&&g!==i[_].length-1){if((h+2)*(v+2)+2>a)continue e;y+=i[_][g],b=!0,m=_,_--}else{y=" "==(y+=i[_][g]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var x=parseInt(_),w=l(x,y,o),S=_>=i.length-1;if(w&&!S){y+=" ",g=0;continue}if(w||S){if(S)m=x;else if(e.multiline&&(h+2)*(v+2)+2>a)continue e}else{if(!e.multiline)continue e;if((h+2)*(v+2)+2>a)continue e;m=x}}for(var E="",A=f;A<=m;A++){var T=i[A];if(e.multiline){if(A===m){E+=T[g]+" ",g=(g+1)%T.length;continue}if(A===f){E+=T[T.length-1]+" ";continue}}E+=T[0]+" "}switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,u=pd(E,e,o).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=$h(c)+" "+$h(p)+" Td\n",t+="("+Jh(E)+") Tj\n",t+=-$h(c)+" 0 Td\n",p=-(o+2),u=0,f=b?m:m+1,v++,y=""}break}return r.text=t,r.fontSize=o,r},pd=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},fd={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},md=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},gd=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(wd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(fd)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Yh=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new xd,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){!function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}(e)})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&md(r,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var i=e[r],o=[],a=i.Rect;if(i.Rect&&(i.Rect=ud(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=Nd.createDefaultAppearanceStream(i),"object"===(0,xu.Z)(i)&&"function"==typeof i.getKeyValueListForStream&&(o=i.getKeyValueListForStream()),i.Rect=a,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=hd(i);o.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var u=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var h=u[r];"function"==typeof h&&(h=h.call(t,i)),l+="/"+r+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(t,i)),l+="/"+r+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:o,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,xu.Z)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},yd=Kh.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(0!==o&&(i+=" "),(0,xu.Z)(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":"/"!==e[o].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),i+="("+Jh(r(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vd=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Jh(r(e))+")"},_d=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};_d.prototype.toString=function(){return this.objId+" 0 R"},_d.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},_d.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:yd(i,this.objId,this.scope)}):i instanceof _d?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var bd=function(){_d.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};td(bd,_d);var xd=function(){_d.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Jh(t(e))+")"}},set:function(t){e=t}})};td(xd,_d);var wd=function e(){_d.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(t,3))},set:function(e){!0===Boolean(e)?this.F=ld(t,3):this.F=cd(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Pd)return;o="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Jh(t(o))+")"},set:function(e){o=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Yh:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Pd||this instanceof Md))return vd(h,this.objId,this.scope)},set:function(e){e=e.toString(),h=e}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Cd==0?vd(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof Cd==0?"("===e.substr(0,1)?Qh(e.substr(1,e.length-2)):Qh(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cd==1?Qh(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof Cd==1?"/"+e:e}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Cd==0?vd(p,this.objId,this.scope):p},set:function(e){e=e.toString(),p=this instanceof Cd==0?"("===e.substr(0,1)?Qh(e.substr(1,e.length-2)):Qh(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cd==1?Qh(p.substr(1,p.length-1)):p},set:function(e){e=e.toString(),p=this instanceof Cd==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,1):this.Ff=cd(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,2):this.Ff=cd(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,3):this.Ff=cd(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};td(wd,_d);var Sd=function(){wd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yd(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,18):this.Ff=cd(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=ld(this.Ff,19):this.Ff=cd(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=ld(this.Ff,20),t.sort()):this.Ff=cd(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,22):this.Ff=cd(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,23):this.Ff=cd(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,27):this.Ff=cd(this.Ff,27)}}),this.hasAppearanceStream=!1};td(Sd,wd);var Ed=function(){Sd.call(this),this.fontName="helvetica",this.combo=!1};td(Ed,Sd);var Ad=function(){Ed.call(this),this.combo=!0};td(Ad,Ed);var Td=function(){Ad.call(this),this.edit=!0};td(Td,Ad);var Cd=function(){wd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,15):this.Ff=cd(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,16):this.Ff=cd(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,17):this.Ff=cd(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,26):this.Ff=cd(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Jh(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,xu.Z)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};td(Cd,wd);var kd=function(){Cd.call(this),this.pushButton=!0};td(kd,Cd);var Id=function(){Cd.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};td(Id,Cd);var Pd=function(){var e,t;wd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+Jh(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,xu.Z)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Nd.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};td(Pd,wd),Id.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Id.prototype.createOption=function(e){var t=new Pd;return t.Parent=this,t.optionName=e,this.Kids.push(t),Rd.call(this.scope,t),t};var Ld=function(){Cd.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Nd.CheckBox.createAppearanceStream()};td(Ld,Cd);var Md=function(){wd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,13):this.Ff=cd(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,21):this.Ff=cd(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,23):this.Ff=cd(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,24):this.Ff=cd(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,25):this.Ff=cd(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,26):this.Ff=cd(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};td(Md,wd);var Od=function(){Md.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(sd(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=ld(this.Ff,14):this.Ff=cd(this.Ff,14)}}),this.password=!0};td(Od,Md);var Nd={CheckBox:{createAppearanceStream:function(){return{N:{On:Nd.CheckBox.YesNormal},D:{On:Nd.CheckBox.YesPushDown,Off:Nd.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=rd(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=dd(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+$h(Nd.internal.getWidth(e))+" "+$h(Nd.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+$h(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=rd(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=Nd.internal.getHeight(e),a=Nd.internal.getWidth(e),s=dd(e,e.caption);return i.push("1 g"),i.push("0 0 "+$h(a)+" "+$h(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+$h(a-1)+" "+$h(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+$h(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=rd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+$h(Nd.internal.getWidth(e))+" "+$h(Nd.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Nd.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Nd.RadioButton.Circle.YesNormal,t.D[e]=Nd.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=rd(e);t.scope=e.scope;var n=[],r=Nd.internal.getWidth(e)<=Nd.internal.getHeight(e)?Nd.internal.getWidth(e)/4:Nd.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Nd.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ed(Nd.internal.getWidth(e)/2)+" "+ed(Nd.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=rd(e);t.scope=e.scope;var n=[],r=Nd.internal.getWidth(e)<=Nd.internal.getHeight(e)?Nd.internal.getWidth(e)/4:Nd.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Nd.internal.Bezier_C).toFixed(5)),a=Number((r*Nd.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ed(Nd.internal.getWidth(e)/2)+" "+ed(Nd.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ed(Nd.internal.getWidth(e)/2)+" "+ed(Nd.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=rd(e);t.scope=e.scope;var n=[],r=Nd.internal.getWidth(e)<=Nd.internal.getHeight(e)?Nd.internal.getWidth(e)/4:Nd.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Nd.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ed(Nd.internal.getWidth(e)/2)+" "+ed(Nd.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Nd.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Nd.RadioButton.Cross.YesNormal,t.D[e]=Nd.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=rd(e);t.scope=e.scope;var n=[],r=Nd.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+$h(Nd.internal.getWidth(e)-2)+" "+$h(Nd.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push($h(r.x1.x)+" "+$h(r.x1.y)+" m"),n.push($h(r.x2.x)+" "+$h(r.x2.y)+" l"),n.push($h(r.x4.x)+" "+$h(r.x4.y)+" m"),n.push($h(r.x3.x)+" "+$h(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=rd(e);t.scope=e.scope;var n=Nd.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+$h(Nd.internal.getWidth(e))+" "+$h(Nd.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+$h(Nd.internal.getWidth(e)-2)+" "+$h(Nd.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push($h(n.x1.x)+" "+$h(n.x1.y)+" m"),r.push($h(n.x2.x)+" "+$h(n.x2.y)+" l"),r.push($h(n.x4.x)+" "+$h(n.x4.y)+" m"),r.push($h(n.x3.x)+" "+$h(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=rd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+$h(Nd.internal.getWidth(e))+" "+$h(Nd.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Nd.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Nd.internal.getWidth(e),n=Nd.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Nd.internal.getWidth=function(e){var t=0;return"object"===(0,xu.Z)(e)&&(t=nd(e.Rect[2])),t},Nd.internal.getHeight=function(e){var t=0;return"object"===(0,xu.Z)(e)&&(t=nd(e.Rect[3])),t};var Rd=Kh.addField=function(e){if(gd(this,e),!(e instanceof wd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Kh.AcroFormChoiceField=Sd,Kh.AcroFormListBox=Ed,Kh.AcroFormComboBox=Ad,Kh.AcroFormEditBox=Td,Kh.AcroFormButton=Cd,Kh.AcroFormPushButton=kd,Kh.AcroFormRadioButton=Id,Kh.AcroFormCheckBox=Ld,Kh.AcroFormTextField=Md,Kh.AcroFormPasswordField=Od,Kh.AcroFormAppearance=Nd,Kh.AcroForm={ChoiceField:Sd,ListBox:Ed,ComboBox:Ad,EditBox:Td,Button:Cd,PushButton:kd,RadioButton:Id,CheckBox:Ld,TextField:Md,PasswordField:Od,Appearance:Nd},Xh.AcroForm={ChoiceField:Sd,ListBox:Ed,ComboBox:Ad,EditBox:Td,Button:Cd,PushButton:kd,RadioButton:Id,CheckBox:Ld,TextField:Md,PasswordField:Od,Appearance:Nd};Xh.AcroForm;function Dd(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var i,o,a,s,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(w(e))for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==e[o]){s=!1;break}if(!0===s){c=l;break}}else for(l in n)for(a=n[l],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==e.charCodeAt(o)){s=!1;break}if(!0===s){c=l;break}}return c===t&&r!==t&&(c=r),c},i=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:t.width}),o.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var a="",s=0,l=t.transparency.length;s<l;s++)a+=t.transparency[s]+" "+t.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&o.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:o,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(h.filter=t.filter),e.call(this,h)}if(t.colorSpace===g.INDEXED){var d=this.internal.newObject();r({data:E(new Uint8Array(t.palette)),objectId:d}),n("endobj")}},o=function(){var e=this.internal.collections.addImage_images;for(var t in e)i.call(this,e[t])},a=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,xu.Z)(e)&&1===e.nodeType},d=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return xh(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return xh(t.toDataURL(o,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},f=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},m=function(e,t,n,r,i,o){var a=f.call(this,n,r,i),s=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=l.call(this);if(n=a[0],r=a[1],u[i.index]=i,o){o*=Math.PI/180;var h=Math.cos(o),d=Math.sin(o),p=function(e){return e.toFixed(4)},m=[p(h),p(d),p(-1*d),p(h),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(e),c(t+r),"cm"].join(" ")),this.internal.write(m.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(e),c(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(w(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},_=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:t[1]})}return n},x=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return x()&&e instanceof ArrayBuffer};var w=e.__addimage__.isArrayBufferView=function(e){return x()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},S=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},E=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=w(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,r,i,o,a,l,c,u;if("number"==typeof arguments[1]?(n=t,r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],l=arguments[5],c=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],a=arguments[5],l=arguments[6],c=arguments[7],u=arguments[8]),"object"===(0,xu.Z)(e=arguments[0])&&!h(e)&&"imageData"in e){var d=e;e=d.imageData,n=d.format||n||t,r=d.x||r||0,i=d.y||i||0,o=d.w||d.width||o,a=d.h||d.height||a,l=d.alias||l,c=d.compression||c,u=d.rotation||d.angle||u}var p=this.internal.getFilters();if(void 0===c&&-1!==p.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var f=A.call(this,e,n,l,c);return m.call(this,r,i,o,a,f,u),this};var A=function(n,i,o,a){var s,l,f;if("string"==typeof n&&r(n)===t){n=unescape(n);var m=T(n,!1);(""!==m||void 0!==(m=e.loadFile(n,!0)))&&(n=m)}if(h(n)&&(n=d(n,i)),i=r(n,i),!u(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(f=o)||0===f.length)&&(o=function(e){return"string"==typeof e||w(e)?v(e):w(e.data)?v(e.data):null}(n)),(s=p.call(this,o))||(x()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=S(n))),s=this["process"+i.toUpperCase()](n,c.call(this),o,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:y.NONE}(a),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},T=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var r,i="";if("string"==typeof e){r=null!==(n=b(e))?n.data:e;try{i=xh(r)}catch(e){if(t)throw _(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(n){var i,o,a="";if(h(n)&&(n=d(n)),"string"==typeof n&&r(n)===t&&(""===(a=T(n,!1))&&(a=e.loadFile(n)||""),n=a),o=r(n),!u(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!x()||n instanceof Uint8Array||(n=S(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(Xh.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Xh.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var d=this.internal.pdfEscape,p=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+d(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+d(g(y))+") >>",f.content=i;var v=f.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(f.objId,"0 R",m.objId,"0 R");break;case"freetext":r="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(p(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var x=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+x+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var o=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:a(e),y:s(t),w:a(e+n),h:s(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,o,a=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){o=r.maxWidth;var l=this.splitTextToSize(e,o).length;i=Math.ceil(s*l)}else o=a,i=s;return this.text(e,t,n,r),n+=.2*s,"center"===r.align&&(t-=a/2),"right"===r.align&&(t-=a),this.link(t,n-s,o,i,r),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Xh.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&o(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&o(e)&&4==t[e.charCodeAt(0)].length},h=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",o=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(o++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,o=0),t===e.length-1&&(r=n,i+=e.charAt(t-(o-1)),t-=o-1,o=0)):(r=n,i+=e.charAt(t-o),t-=o,o=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var d=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===o(e)?-1:!c(e)||!a(t)&&!a(n)||!a(n)&&s(t)||s(e)&&!a(t)||s(e)&&l(t)||s(e)&&s(t)?0:u(e)&&a(t)&&!s(t)&&a(n)&&c(n)?3:s(e)||!a(n)?1:2:-1},p=function(e){var n=0,r=0,i=0,o="",s="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)o=c[n][r],s=c[n][r-1],l=c[n][r+1],a(o)?(i=d(o,s,l),u[n]+=-1!==i?String.fromCharCode(t[o.charCodeAt(0)][i]):o):u[n]+=o;u[n]=h(u[n])}return u.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([p(t[r][0]),t[r][1],t[r][2]]):n.push([p(t[r])]);e=n}else e=p(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(Xh.API),Xh.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Xh.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),o=t.scaleFactor||this.internal.scaleFactor,a=0,s=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(c.splitTextToSize(t,u))}),[])):e=Array.isArray(e)?e:[e];for(var h=0;h<e.length;h++)a<(l=this.getStringUnitWidth(e[h],{font:i})*n)&&(a=l);return 0!==a&&(s=e.length),{w:a/=o,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var e;e=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,u){if(r.call(this),!l)throw new Error("No data for PDF table.");var h,d,p,f,m=[],g=[],y=[],v={},_={},b=[],x=[],w=(u=u||{}).autoSize||!1,S=!1!==u.printHeaders,E=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,A=u.margins||Object.assign({width:this.getPageWidth()},t),T="number"==typeof u.padding?u.padding:3,C=u.headerBackgroundColor||"#c8c8c8",k=u.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=C,this.internal.__cell__.headerTextColor=k,this.setFontSize(E),null==c)g=m=Object.keys(l[0]),y=m.map((function(){return"left"}));else if(Array.isArray(c)&&"object"===(0,xu.Z)(c[0]))for(m=c.map((function(e){return e.name})),g=c.map((function(e){return e.prompt||e.name||""})),y=c.map((function(e){return e.align||"left"})),h=0;h<c.length;h+=1)_[c[h].name]=c[h].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(g=m=c,y=m.map((function(){return"left"})));if(w||Array.isArray(c)&&"string"==typeof c[0])for(h=0;h<m.length;h+=1){for(v[f=m[h]]=l.map((function(e){return e[f]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=v[f],this.setFont(void 0,"normal"),p=0;p<d.length;p+=1)b.push(this.getTextDimensions(d[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_[f]=Math.max.apply(null,b)+T+T,b=[]}if(S){var I={};for(h=0;h<m.length;h+=1)I[m[h]]={},I[m[h]].text=g[h],I[m[h]].align=y[h];var P=s.call(this,I,_);x=m.map((function(t){return new o(e,n,_[t],P,I[t].text,void 0,I[t].align)})),this.setTableHeaderRow(x),this.printHeaderRow(1,!1)}var L=c.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(h=0;h<l.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:l[h]},this);var M=s.call(this,l[h],_);for(p=0;p<m.length;p+=1){var O=l[h][m[p]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:p,data:O},this),a.call(this,new o(e,n,_[m[p]],M,O,h+2,L[m[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var s=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map((function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*r/i+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Xh.API);var Fd={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jd=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zd=Dd(jd),Bd=[100,200,300,400,500,600,700,800,900],Ud=Dd(Bd);function Vd(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Fd[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof zd[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function Zd(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var qd={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Gd={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Wd(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Hd(e){return e.trimLeft()}function Xd(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Kd(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Yd,Jd,Qd,$d=["times"];!function(e){var t,n,r,i,o,a,s,l,c,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new a,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new a,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(e){isNaN(e)||(o=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof u&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=d(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=d(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var p=null;function f(e,t){if(null===p){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))}))})),t}(e.getFontList());p=function(e){for(var t={},n=0;n<e.length;++n){var r=Vd(e[n]),i=r.family,o=r.stretch,a=r.style,s=r.weight;t[i]=t[i]||{},t[i][o]=t[i][o]||{},t[i][o][a]=t[i][o][a]||{},t[i][o][a][s]=r}return t}(n.concat(t))}return p}var m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){p=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],r=(t[2],t[3]),i=t[4],o=(t[5],t[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(e){var t,n,r=[],i=e.trim();if(""===i)return $d;if(i in Gd)return[Gd[i]];for(;""!==i;){switch(n=null,t=(i=Hd(i)).charAt(0)){case'"':case"'":n=Xd(i.substring(1),t);break;default:n=Kd(i)}if(null===n)return $d;if(r.push(n[0]),""!==(i=Hd(n[1]))&&","!==i.charAt(0))return $d;i=i.replace(/^,/,"")}return r}(o);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},qd,n.genericFontFamilies||{}),o=null,a=null,s=0;s<t.length;++s)if(i[(o=Vd(t[s])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){a=e[o.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+Wd(o)+"' and default family '"+r+"'.");if(a=function(e,t){if(t[e])return t[e];var n=zd[e],r=n<=zd.normal?-1:1,i=Zd(t,jd,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(o.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=Fd[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(o.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Ud[e],r=Zd(t,Bd,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Wd(o)+"'.");return a}(f(this.pdf,this.fontFaces),s.map((function(e){return{family:e,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<s.length;d++){if(void 0!==this.pdf.internal.getFont(s[d],c,{noFallback:!0,disableWarning:!0})){u=s[d];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(s[d],"bold",{noFallback:!0,disableWarning:!0}))u=s[d],c="bold";else if(void 0!==this.pdf.internal.getFont(s[d],"normal",{noFallback:!0,disableWarning:!0})){u=s[d],c="normal";break}}if(""===u)for(var p=0;p<s.length;p++)if(h[s[p]]){u=h[s[p]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw yh.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(e,t)},h.prototype.closePath=function(){var e=new a(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,xu.Z)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new a(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw yh.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw yh.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),o=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},h.prototype.bezierCurveTo=function(e,t,n,r,i,o){if(isNaN(i)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw yh.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(i,o)),l=this.ctx.transform.applyToPoint(new a(e,t)),c=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},h.prototype.arc=function(e,t,n,r,i,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw yh.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(e,t));e=s.x,t=s.y;var l=this.ctx.transform.applyToPoint(new a(0,n)),c=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:o})},h.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw yh.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw yh.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},h.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw yh.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},h.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw yh.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new Eh(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw yh.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!p.call(this)){var i=N(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;k.call(this,{text:e,x:t,y:n,scale:o,angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw yh.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){r=isNaN(r)?void 0:r;var i=N(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;k.call(this,{text:e,x:t,y:n,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw yh.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor,o=function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this};return new o({width:i*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw yh.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(e){if(isNaN(e))throw yh.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw yh.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(e,t,n,r,i,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o))throw yh.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new l(e,t,n,r,i,o);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(e,t,n,r,i,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new l(e,t,n,r,i,o)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,n,r,i,o,a,c,u){var h=this.pdf.getImageProperties(e),d=1,p=1,f=1,y=1;void 0!==r&&void 0!==c&&(f=c/r,y=u/i,d=h.width/r*c/r,p=h.height/i*u/i),void 0===o&&(o=t,a=n,t=0,n=0),void 0!==r&&void 0===c&&(c=r,u=i),void 0===r&&void 0===c&&(c=h.width,u=h.height);for(var b,w=this.ctx.transform.decompose(),S=N(w.rotate.shx),E=new l,A=(E=(E=(E=E.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new s(o-t*f,a-n*y,r*d,i*p)),T=g.call(this,A),C=[],k=0;k<T.length;k+=1)-1===C.indexOf(T[k])&&C.push(T[k]);if(_(C),this.autoPaging)for(var I=C[0],P=C[C.length-1],L=I;L<P+1;L++){this.pdf.setPage(L);var M=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],O=1===L?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===L?0:R+(L-2)*D;if(0!==this.ctx.clip_path.length){var j=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-F+O+this.ctx.prevPageLastElemOffset),x.call(this,"fill",!0),this.path=j}var z=JSON.parse(JSON.stringify(A));z=v([z],this.posX+this.margin[3],-F+O+this.ctx.prevPageLastElemOffset)[0];var B=(L>I||L<P)&&m.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],M,D,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",z.x,z.y,z.w,z.h,null,null,S),B&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",A.x,A.y,A.w,A.h,null,null,S)};var g=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var o=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"bct":var a=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)y.call(this);return r},y=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=o},v=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},_=function(e){return e.sort((function(e,t){return e-t}))},b=function(e,t){for(var n,r,i=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),d=[],p=0;p<h.length;p++)if(void 0!==h[p].x)for(var f=g.call(this,h[p]),b=0;b<f.length;b+=1)-1===d.indexOf(f[b])&&d.push(f[b]);for(var w=0;w<d.length;w++)for(;this.pdf.internal.getNumberOfPages()<d[w];)y.call(this);if(_(d),this.autoPaging)for(var S=d[0],E=d[d.length-1],A=S;A<E+1;A++){this.pdf.setPage(A),this.fillStyle=i,this.strokeStyle=o,this.lineCap=a,this.lineWidth=l,this.lineJoin=c;var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===A?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],P=1===A?0:k+(A-2)*I;if(0!==this.ctx.clip_path.length){var L=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset),x.call(this,e,!0),this.path=L}if(r=JSON.parse(JSON.stringify(u)),this.path=v(r,this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset),!1===t||0===A){var M=(A>S||A<E)&&m.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,I,null).clip().discardPath()),x.call(this,e,t),M&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,x.call(this,e,t),this.lineWidth=s;this.path=u},x=function(e,t){if(("stroke"!==e||t||!f.call(this))&&("stroke"===e||t||!p.call(this))){for(var n,r,i=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(o[a-1]&&!isNaN(o[a-1].x)&&(n=[s.x-o[a-1].x,s.y-o[a-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(s);break}break;case"bct":n=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=o[a-1].x+2/3*(s.x1-o[a-1].x),u=o[a-1].y+2/3*(s.y1-o[a-1].y),h=s.x+2/3*(s.x1-s.x),d=s.y+2/3*(s.y1-s.y),m=s.x,g=s.y;n=[c-o[a-1].x,u-o[a-1].y,h-o[a-1].x,d-o[a-1].y,m-o[a-1].x,g-o[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}r=t?null:"stroke"===e?"stroke":"fill";for(var y=!1,v=0;v<i.length;v++)if(i[v].arc)for(var _=i[v].abs,b=0;b<_.length;b++){var x=_[b];"arc"===x.type?E.call(this,x.x,x.y,x.radius,x.startAngle,x.endAngle,x.counterclockwise,void 0,t,!y):I.call(this,x.x,x.y),y=!0}else if(!0===i[v].close)this.pdf.internal.out("h"),y=!1;else if(!0!==i[v].begin){var w=i[v].start.x,S=i[v].start.y;P.call(this,i[v].deltas,w,S),y=!0}r&&A.call(this,r),t&&T.call(this)}},w=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},S=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(e,t,n,r,i,o,a,s,l){for(var c=M.call(this,n,r,i,o),u=0;u<c.length;u++){var h=c[u];0===u&&(l?C.call(this,h.x1+e,h.y1+t):I.call(this,h.x1+e,h.y1+t)),L.call(this,e,t,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}s?T.call(this):A.call(this,a)},A=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},k=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=w.call(this,e.y),i=S.call(this,r)-n.h,o=this.ctx.transform.applyToPoint(new a(e.x,r)),c=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var h,d,p,f=this.ctx.transform.applyToRectangle(new s(e.x,r,n.w,n.h)),y=u.applyToRectangle(new s(e.x,i,n.w,n.h)),b=g.call(this,y),E=[],A=0;A<b.length;A+=1)-1===E.indexOf(b[A])&&E.push(b[A]);if(_(E),this.autoPaging)for(var T=E[0],C=E[E.length-1],k=T;k<C+1;k++){this.pdf.setPage(k);var I=1===k?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[2],M=L-this.margin[0],O=this.pdf.internal.pageSize.width-this.margin[1],N=O-this.margin[3],R=1===k?0:P+(k-2)*M;if(0!==this.ctx.clip_path.length){var D=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(h,this.posX+this.margin[3],-1*R+I),x.call(this,"fill",!0),this.path=D}var F=v([JSON.parse(JSON.stringify(y))],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale);var j="text"!==this.autoPaging;if(j||F.y+F.h<=L){if(j||F.y>=I&&F.x<=O){var z=j?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||O-F.x)[0],B=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0],U=j&&(k>T||k<C)&&m.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],N,M,null).clip().discardPath()),this.pdf.text(z,B.x,B.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),U&&this.pdf.restoreGraphicsState()}}else F.y<L&&(this.ctx.prevPageLastElemOffset+=L-F.y);e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=p)}else e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),p=this.lineWidth,this.lineWidth=p*e.scale),this.pdf.text(e.text,o.x+this.posX,o.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=p)},I=function(e,t,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(e+i)+" "+r(t+o)+" l")},P=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},L=function(e,n,r,a,s,l,c,u){this.pdf.internal.out([t(i(r+e)),t(o(a+n)),t(i(s+e)),t(o(l+n)),t(i(c+e)),t(o(u+n)),"c"].join(" "))},M=function(e,t,n,r){for(var i=2*Math.PI,o=Math.PI/2;t>n;)t-=i;var a=Math.abs(n-t);a<i&&r&&(a=i-a);for(var s=[],l=r?-1:1,c=t;a>1e-5;){var u=c+l*Math.min(a,o);s.push(O.call(this,e,c,u)),a-=Math.abs(u-c),c=u}return s},O=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),o=e*Math.sin(r),a=i,s=-o,l=a*a+s*s,c=l+a*i+s*o,u=4/3*(Math.sqrt(2*l*c)-c)/(a*o-s*i),h=a-u*s,d=s+u*a,p=h,f=-d,m=r+t,g=Math.cos(m),y=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:h*g-d*y,y2:h*y+d*g,x3:p*g-f*y,y3:p*y+f*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},N=function(e){return 180*e/Math.PI},R=function(e,t,n,r,i,o){var a=e+.5*(n-e),l=t+.5*(r-t),c=i+.5*(n-i),u=o+.5*(r-o),h=Math.min(e,i,a,c),d=Math.max(e,i,a,c),p=Math.min(t,o,l,u),f=Math.max(t,o,l,u);return new s(h,p,d-h,f-p)},D=function(e,t,n,r,i,o,a,l){var c,u,h,d,p,f,m,g,y,v,_,b,x,w,S=n-e,E=r-t,A=i-n,T=o-r,C=a-i,k=l-o;for(u=0;u<41;u++)y=(m=(h=e+(c=u/40)*S)+c*((p=n+c*A)-h))+c*(p+c*(i+c*C-p)-m),v=(g=(d=t+c*E)+c*((f=r+c*T)-d))+c*(f+c*(o+c*k-f)-g),0==u?(_=y,b=v,x=y,w=v):(_=Math.min(_,y),b=Math.min(b,v),x=Math.max(x,y),w=Math.max(w,v));return new s(Math.round(_),Math.round(b),Math.round(x-_),Math.round(w-b))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Xh.API),function(e){var t=function(e){var t,n,r,i,o,a,s,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(o=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(a=(o=((o=((o=((o=(o-(u=o%85))/85)-(c=o%85))/85)-(l=o%85))/85)-(s=o%85))/85)%85,n.push(a+33,s+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,o,a=String,s="length",l=255,c="charCodeAt",u="slice",h="replace";for(e[u](-2),e=e[u](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,o=(e+=t="uuuuu"[u](e[s]%5||5))[s];o>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[s]),a.fromCharCode.apply(a,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=ph(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,o){var a=0,s=e||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(Xh.API),function(e){e.loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,o=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(o(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return o(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},e.loadImageFile=e.loadFile}(Xh.API),function(e){function t(){return(mh.html2canvas?Promise.resolve(mh.html2canvas):n.e(905).then(n.t.bind(n,1905,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function r(){return(mh.DOMPurify?Promise.resolve(mh.DOMPurify):n.e(313).then(n.t.bind(n,313,23))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var i=function(e){var t=(0,xu.Z)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},o=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},a=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(e,t){return e.__proto__=t||a.prototype,e},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(r).then((function(t){return this.set({src:o("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var a=n[o],s=a.src.find((function(e){return"truetype"===e.format}));s&&t.addFont(s.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},a.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},a.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},a.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in a.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},a.prototype.get=function(e,t){return this.then((function(){var n=e in a.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},a.prototype.setMargin=function(e){return this.then((function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},a.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||Xh.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},a.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},a.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},a.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),i=n.call(r,e,t);return a.convert(i,this.__proto__)},a.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},a.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},a.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return a.convert(t,this)},a.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},a.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Xh.getPageSize=function(e,t,n){if("object"===(0,xu.Z)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var s,l=0,c=0;if(a.hasOwnProperty(o))l=a[o][1]/i,c=a[o][0]/i;else try{l=n[1],c=n[0]}catch(Ef){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(s=c,c=l,l=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(s=c,c=l,l=s)}return{width:c,height:l,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Vd):null;var n=new a(t);return t.worker?n:n.from(e).doCallback()}}(Xh.API),Xh.API.addJS=function(e){return Qd=e,this.internal.events.subscribe("postPutResources",(function(){Yd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Yd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Jd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Qd+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Yd&&void 0!==Jd&&this.internal.out("/Names <</JavaScript "+Yd+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],a=n.exec(o);if(null!=a){var s=a[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var u=e.internal.newObject();c.push(u);var h=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+d+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var a=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Xh.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,o,a){var s,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,o={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),o={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}r=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return o}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:e,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(Xh.API);var ep,tp,np,rp,ip,op=function(){var e,t,n;function r(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,d=0;0<=t?d<t:d>t;0<=t?++d:--d)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(p=0;0<=u?p<u:p>u;0<=u?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(h=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function o(o,a,s,l){var c,u,h,d,p,f,m,g,y,v,_,b,x,w,S,E,A,T,C,k,I,P=Math.ceil((i.width-o)/s),L=Math.ceil((i.height-a)/l),M=i.width==P&&i.height==L;for(w=t*P,b=M?n:new Uint8Array(w*L),f=e.length,x=0,u=0;x<L&&r<f;){switch(e[r++]){case 0:for(d=A=0;A<w;d=A+=1)b[u++]=e[r++];break;case 1:for(d=T=0;T<w;d=T+=1)c=e[r++],p=d<t?0:b[u-t],b[u++]=(c+p)%256;break;case 2:for(d=C=0;C<w;d=C+=1)c=e[r++],h=(d-d%t)/t,S=x&&b[(x-1)*w+h*t+d%t],b[u++]=(S+c)%256;break;case 3:for(d=k=0;k<w;d=k+=1)c=e[r++],h=(d-d%t)/t,p=d<t?0:b[u-t],S=x&&b[(x-1)*w+h*t+d%t],b[u++]=(c+Math.floor((p+S)/2))%256;break;case 4:for(d=I=0;I<w;d=I+=1)c=e[r++],h=(d-d%t)/t,p=d<t?0:b[u-t],0===x?S=E=0:(S=b[(x-1)*w+h*t+d%t],E=h&&b[(x-1)*w+(h-1)*t+d%t]),m=p+S-E,g=Math.abs(m-p),v=Math.abs(m-S),_=Math.abs(m-E),y=g<=v&&g<=_?p:v<=_?S:E,b[u++]=(c+y)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!M){var O=((a+x*l)*i.width+o)*t,N=x*w;for(d=0;d<P;d+=1){for(var R=0;R<t;R+=1)n[O++]=b[N++];O+=(s-1)*t}}x++}}return e=fh(e),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,i,o,a,s,l;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,e=0,t=a=0,s=n.length;a<s;t=a+=3)i[r++]=n[t],i[r++]=n[t+1],i[r++]=n[t+2],i[r++]=null!=(l=o[e++])?l:255;return i},r.prototype.copyToImageData=function(e,t){var n,r,i,o,a,s,l,c,u,h,d;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(i=e.data||e).length,a=u||t,o=s=0,1===r)for(;o<c;)l=u?4*t[o/4]:s,h=a[l++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?a[l++]:255,s=l;else for(;o<c;)l=u?4*t[o/4]:s,i[o++]=a[l++],i[o++]=a[l++],i[o++]=a[l++],i[o++]=n?a[l++]:255,s=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(mh)){try{t=mh.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var r;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,i,o,a,s,l,c;if(this.animation){for(c=[],r=a=0,s=(l=this.animation.frames).length;a<s;r=++a)n=l[r],i=t.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,o),n.imageData=i,c.push(n.image=e(i));return c}},r.prototype.renderFrame=function(e,t){var n,r,i;return n=(r=this.animation.frames)[t],i=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(t=function(){var a,l;if(a=n++%i,l=r[a],s.renderFrame(e,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function ap(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,a=1<<1+(7&i);e[t++],e[t++];var s=null,l=null;o&&(s=t,l=a,t+=3*a);var c=!0,u=[],h=0,d=null,p=0,f=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];h=e[t++]|e[t++]<<8,d=e[t++],0==(1&m)&&(d=null),p=m>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,b=e[t++],x=b>>6&1,w=1<<1+(7&b),S=s,E=l,A=!1;b>>7&&(A=!0,S=t,E=w,t+=3*w);var T=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}u.push({x:g,y:y,width:v,height:_,has_local_palette:A,palette_offset:S,palette_size:E,data_offset:T,data_length:t-T,transparent_index:d,interlaced:!!x,delay:h,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),o=i.width*i.height,a=new Uint8Array(o);sp(e,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,h=c,d=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),f=d,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,v=a.length;y<v;++y){var _=a[y];if(0===h&&(h=c,(f+=m)>=p&&(m=4*u+4*n*(g-1),f=d+(c+u)*(g<<1),g>>=1)),_===l)f+=4;else{var b=e[s+3*_],x=e[s+3*_+1],w=e[s+3*_+2];r[f++]=w,r[f++]=x,r[f++]=b,r[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),o=i.width*i.height,a=new Uint8Array(o);sp(e,i.data_offset,a,o);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,h=c,d=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),f=d,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,v=a.length;y<v;++y){var _=a[y];if(0===h&&(h=c,(f+=m)>=p&&(m=4*u+4*n*(g-1),f=d+(c+u)*(g<<1),g>>=1)),_===l)f+=4;else{var b=e[s+3*_],x=e[s+3*_+1],w=e[s+3*_+2];r[f++]=b,r[f++]=x,r[f++]=w,r[f++]=255}--h}}}function sp(e,t,n,r){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,l=i+1,c=(1<<l)-1,u=0,h=0,d=0,p=e[t++],f=new Int32Array(4096),m=null;;){for(;u<16&&0!==p;)h|=e[t++]<<u,u+=8,1===p?p=e[t++]:--p;if(u<l)break;var g=h&c;if(h>>=l,u-=l,g!==o){if(g===a)break;for(var y=g<s?g:m,v=0,_=y;_>o;)_=f[_]>>8,++v;var b=_;if(d+v+(y!==g?1:0)>r)return void yh.log("Warning, gif stream longer than expected.");n[d++]=b;var x=d+=v;for(y!==g&&(n[d++]=b),_=y;v--;)_=f[_],n[--x]=255&_,_>>=8;null!==m&&s<4096&&(f[s++]=m<<8|b,s>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else s=a+1,c=(1<<(l=i+1))-1,m=null}return d!==r&&yh.log("Warning, gif stream shorter than expected."),n}function lp(e){var t,n,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),p=new Array(64),f=new Array(64),m=[],g=0,y=7,v=new Array(64),_=new Array(64),b=new Array(64),x=new Array(256),w=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(e,t){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=e[o];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=o,r++,n++;n*=2}return i}function O(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<y),n--,--y<0&&(255==g?(N(255),N(0)):N(g),y=7,g=0)}function N(e){m.push(e)}function R(e){N(e>>8&255),N(255&e)}function D(e,t,n,r,i){for(var o,a=i[0],s=i[240],l=function(e,t){var n,r,i,o,a,s,l,c,u,h,d=0;for(u=0;u<8;++u){n=e[d],r=e[d+1],i=e[d+2],o=e[d+3],a=e[d+4],s=e[d+5],l=e[d+6];var f=n+(c=e[d+7]),m=n-c,g=r+l,y=r-l,v=i+s,_=i-s,b=o+a,x=o-a,w=f+b,S=f-b,E=g+v,A=g-v;e[d]=w+E,e[d+4]=w-E;var T=.707106781*(A+S);e[d+2]=S+T,e[d+6]=S-T;var C=.382683433*((w=x+_)-(A=y+m)),k=.5411961*w+C,I=1.306562965*A+C,P=.707106781*(E=_+y),L=m+P,M=m-P;e[d+5]=M+k,e[d+3]=M-k,e[d+1]=L+I,e[d+7]=L-I,d+=8}for(d=0,u=0;u<8;++u){n=e[d],r=e[d+8],i=e[d+16],o=e[d+24],a=e[d+32],s=e[d+40],l=e[d+48];var O=n+(c=e[d+56]),N=n-c,R=r+l,D=r-l,F=i+s,j=i-s,z=o+a,B=o-a,U=O+z,V=O-z,Z=R+F,q=R-F;e[d]=U+Z,e[d+32]=U-Z;var G=.707106781*(q+V);e[d+16]=V+G,e[d+48]=V-G;var W=.382683433*((U=B+j)-(q=D+N)),H=.5411961*U+W,X=1.306562965*q+W,K=.707106781*(Z=j+D),Y=N+K,J=N-K;e[d+40]=J+H,e[d+24]=J-H,e[d+8]=Y+X,e[d+56]=Y-X,d++}for(u=0;u<64;++u)h=e[u]*t[u],p[u]=h>0?h+.5|0:h-.5|0;return p}(e,t),c=0;c<64;++c)f[S[c]]=l[c];var u=f[0]-n;n=f[0],0==u?O(r[0]):(O(r[d[o=32767+u]]),O(h[o]));for(var m=63;m>0&&0==f[m];)m--;if(0==m)return O(a),n;for(var g,y=1;y<=m;){for(var v=y;0==f[y]&&y<=m;)++y;var _=y-v;if(_>=16){g=_>>4;for(var b=1;b<=g;++b)O(s);_&=15}o=32767+f[y],O(i[(_<<4)+d[o]]),O(h[o]),y++}return 63!=m&&O(a),n}function F(e){e=Math.min(Math.max(e,1),100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),s[S[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=a((i[o]*e+50)/100);h=Math.min(Math.max(h,1),255),l[S[o]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var m=0;m<8;m++)c[p]=1/(s[S[p]]*d[f]*d[m]*8),u[p]=1/(l[S[p]]*d[f]*d[m]*8),p++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){o&&F(o),m=new Array,g=0,y=7,R(65496),R(65504),R(16),N(74),N(70),N(73),N(70),N(0),N(1),N(1),N(0),R(1),R(1),N(0),N(0),function(){R(65499),R(132),N(0);for(var e=0;e<64;e++)N(s[e]);N(1);for(var t=0;t<64;t++)N(l[t])}(),function(e,t){R(65472),R(17),N(8),R(t),R(e),N(3),N(1),N(17),N(0),N(2),N(17),N(1),N(3),N(17),N(1)}(e.width,e.height),function(){R(65476),R(418),N(0);for(var e=0;e<16;e++)N(E[e+1]);for(var t=0;t<=11;t++)N(A[t]);N(16);for(var n=0;n<16;n++)N(T[n+1]);for(var r=0;r<=161;r++)N(C[r]);N(1);for(var i=0;i<16;i++)N(k[i+1]);for(var o=0;o<=11;o++)N(I[o]);N(17);for(var a=0;a<16;a++)N(P[a+1]);for(var s=0;s<=161;s++)N(L[s])}(),R(65498),R(12),N(3),N(1),N(0),N(2),N(17),N(3),N(17),N(0),N(63),N(0);var a=0,h=0,d=0;g=0,y=7,this.encode.displayName="_encode_";for(var p,f,x,S,M,j,z,B,U,V=e.data,Z=e.width,q=e.height,G=4*Z,W=0;W<q;){for(p=0;p<G;){for(M=G*W+p,z=-1,B=0,U=0;U<64;U++)j=M+(B=U>>3)*G+(z=4*(7&U)),W+B>=q&&(j-=G*(W+1+B-q)),p+z>=G&&(j-=p+z-G+4),f=V[j++],x=V[j++],S=V[j++],v[U]=(w[f]+w[x+256>>0]+w[S+512>>0]>>16)-128,_[U]=(w[f+768>>0]+w[x+1024>>0]+w[S+1280>>0]>>16)-128,b[U]=(w[f+1280>>0]+w[x+1536>>0]+w[S+1792>>0]>>16)-128;a=D(v,c,a,t,r),h=D(_,u,h,n,i),d=D(b,u,d,n,i),p+=32}W+=8}if(y>=0){var H=[];H[1]=y+1,H[0]=(1<<y+1)-1,O(H)}return R(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)x[t]=e(t)}(),t=M(E,A),n=M(k,I),r=M(T,C),i=M(P,L),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256>>0]=38470*e,w[e+512>>0]=7471*e+32768,w[e+768>>0]=-11059*e,w[e+1024>>0]=-21709*e,w[e+1280>>0]=32768*e+8421375,w[e+1536>>0]=-27439*e,w[e+1792>>0]=-5329*e}(),F(e)}function cp(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function up(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var o=0;o<i;o++)e[t+o]=n[r+o]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function o(e){return new Int32Array(e)}function a(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,r,i){for(var o=i[r],a=0;a<o&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));a++)e(n[a],r+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,i,o){t(!(i%r));do{e[n+(i-=r)]=o}while(0<i)}function u(e,n,r,i,a){if(t(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(e,n,r,i,a,s){var u,d,p=n,f=1<<r,m=o(16),g=o(16);for(t(0!=a),t(null!=i),t(null!=e),t(0<r),d=0;d<a;++d){if(15<i[d])return 0;++m[i[d]]}if(m[0]==a)return 0;for(g[1]=0,u=1;15>u;++u){if(m[u]>1<<u)return 0;g[u+1]=g[u]+m[u]}for(d=0;d<a;++d)u=i[d],0<i[d]&&(s[g[u]++]=d);if(1==g[15])return(i=new h).g=0,i.value=s[0],c(e,p,1,f,i),f;var y,v=-1,_=f-1,b=0,x=1,w=1,S=1<<r;for(d=0,u=1,a=2;u<=r;++u,a<<=1){if(x+=w<<=1,0>(w-=m[u]))return 0;for(;0<m[u];--m[u])(i=new h).g=u,i.value=s[d++],c(e,p+b,a,S,i),b=l(b,u)}for(u=r+1,a=2;15>=u;++u,a<<=1){if(x+=w<<=1,0>(w-=m[u]))return 0;for(;0<m[u];--m[u]){if(i=new h,(b&_)!=v){for(p+=S,y=1<<(v=u)-r;15>v&&!(0>=(y-=m[v]));)++v,y<<=1;f+=S=1<<(y=v-r),e[n+(v=b&_)].g=y+r,e[n+v].value=p-n-v}i.g=u-r,i.value=s[d++],c(e,p+(b>>r),a,S,i),b=l(b,u)}}return x!=2*g[15]-1?0:f}(e,n,r,i,a,s)}function h(){this.value=this.g=0}function d(){this.value=this.g=0}function p(){this.G=a(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(zn,d)}function f(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,T(e)}function m(e,t){for(var n=0;0<t--;)n|=k(e,128)<<t;return n}function g(e,t){var n=m(e,t);return C(e)?-n:n}function y(e,n,r,i){var o,a=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),o=0;o<i;++o)a+=n[r+o]<<8*o;e.Ra=a,e.bb=i,e.oa=n,e.pa=r}function v(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Vn-8>>>0,++e.bb,e.u-=8;S(e)&&(e.h=1,e.u=0)}function _(e,n){if(t(0<=n),!e.h&&n<=Un){var r=w(e)&Bn[n];return e.u+=n,v(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function x(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Vn-1)>>>0}function S(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Vn}function E(e,t){e.u=t,e.h=S(e)}function A(e){e.u>=Zn&&(t(e.u>=Zn),v(e))}function T(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function C(e){return m(e,1)}function k(e,t){var n=e.Ca;0>e.b&&T(e);var r=e.b,i=n*t>>>8,o=(e.I>>>r>i)+0;for(o?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+qn[r],e.b-=r,e.Ca=(n<<r)-1,o}function I(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n>>0&255}function P(e,t){return e[t+0]<<0|e[t+1]<<8}function L(e,t){return P(e,t)|e[t+2]<<16}function M(e,t){return P(e,t)|P(e,t+2)<<16}function O(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=o(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function N(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function D(e,n,r,i){t(null!=r),t(null!=i);var o=r[0],a=i[0];return 0==o&&(o=(e*a+n/2)/n),0==a&&(a=(n*o+e/2)/e),0>=o||0>=a?0:(r[0]=o,i[0]=a,1)}function F(e,t){return e+(1<<t)-1>>>t}function j(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function z(t,n){e[n]=function(n,r,i,o,a,s,l){var c;for(c=0;c<a;++c){var u=e[t](s[l+c-1],i,o+c);s[l+c]=j(n[r+c],u)}}}function B(){this.ud=this.hd=this.jd=0}function U(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function V(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function Z(e,t){return V(e+(e-t+.5>>1))}function q(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function G(e,t,n,r,i,o,a){for(r=o[a-1],n=0;n<i;++n)o[a+n]=r=j(e[t+n],r)}function W(e,t,n,r,i){var o;for(o=0;o<n;++o){var a=e[t+o],s=a>>8&255,l=16711935&(l=(l=16711935&a)+((s<<16)+s));r[i+o]=(4278255360&a)+l>>>0}}function H(e,t){t.jd=e>>0&255,t.hd=e>>8&255,t.ud=e>>16&255}function X(e,t,n,r,i,o){var a;for(a=0;a<r;++a){var s=t[n+a],l=s>>>8,c=s,u=255&(u=(u=s>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),i[o+a]=(4278255360&s)+(u<<16)+c}}function K(t,n,r,i,o){e[n]=function(e,t,n,r,a,s,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)a[s++]=o(n[i(e[t++])])},e[t]=function(t,n,a,s,l,c,u){var h=8>>t.b,d=t.Ea,p=t.K[0],f=t.w;if(8>h)for(t=(1<<t.b)-1,f=(1<<h)-1;n<a;++n){var m,g=0;for(m=0;m<d;++m)m&t||(g=i(s[l++])),c[u++]=o(p[g&f]),g>>=h}else e["VP8LMapColor"+r](s,l,p,f,c,u,n,a,d)}}function Y(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255}}function J(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255,r[i++]=o>>24&255}}function Q(e,t,n,r,i){for(n=t+n;t<n;){var o=(a=e[t++])>>16&240|a>>12&15,a=a>>0&240|a>>28&15;r[i++]=o,r[i++]=a}}function $(e,t,n,r,i){for(n=t+n;t<n;){var o=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=o,r[i++]=a}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var o=e[t++];r[i++]=o>>0&255,r[i++]=o>>8&255,r[i++]=o>>16&255}}function te(e,t,n,i,o,a){if(0==a)for(n=t+n;t<n;)I(i,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else r(i,o,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Zr||e==qr||e==Gr||e==Wr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function oe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new oe,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,i=t.ba.f.RGBA,o=i.eb,a=i.fb+e.ka*i.A,s=yi[t.ba.S],l=e.y,c=e.O,u=e.f,h=e.N,d=e.ea,p=e.W,f=t.cc,m=t.dc,g=t.Mc,y=t.Nc,v=e.ka,_=e.ka+e.T,b=e.U,x=b+1>>1;for(0==v?s(l,c,null,null,u,h,d,p,u,h,d,p,o,a,null,null,b):(s(t.ec,t.fc,l,c,f,m,g,y,u,h,d,p,o,a-i.A,o,a,b),++n);v+2<_;v+=2)f=u,m=h,g=d,y=p,h+=e.Rc,p+=e.Rc,a+=2*i.A,s(l,(c+=2*e.fa)-e.fa,l,c,f,m,g,y,u,h,d,p,o,a-i.A,o,a,b);return c+=e.fa,e.j+_<e.o?(r(t.ec,t.fc,l,c,b),r(t.cc,t.dc,u,h,x),r(t.Mc,t.Nc,d,p,x),n--):1&_||s(l,c,null,null,u,h,d,p,u,h,d,p,o,a+i.A,null,null,b),n}function he(e,n,r){var i=e.F,o=[e.J];if(null!=i){var a=e.U,s=n.ba.S,l=s==Br||s==Gr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,o[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var h=n.eb;u=n.fb+u*n.A,e=Ar(i,o[0],e.width,a,c,h,u+(l?0:3),n.A),t(r==c),e&&re(s)&&Sr(h,u,l,a,c,n.A)}return 0}function de(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Fr||n==zr||n==Br||n==Ur||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Dn(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&_n(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=o(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,_n()}}else alert("todo:EmitYUV");i&&(t.Jb=he,r&&yn())}if(r&&!Li){for(e=0;256>e;++e)Mi[e]=89858*(e-128)+Ti>>Ai,Ri[e]=-22014*(e-128)+Ti,Ni[e]=-45773*(e-128),Oi[e]=113618*(e-128)+Ti>>Ai;for(e=Ci;e<ki;++e)t=76283*(e-16)+Ti>>Ai,Di[e-Ci]=Ge(t,255),Fi[e-Ci]=Ge(t+8>>4,15);Li=1}return 1}function pe(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function fe(e){e.ma.memory=null}function me(e,t,n,r){return 47!=_(e,8)?0:(t[0]=_(e,14)+1,n[0]=_(e,14)+1,r[0]=_(e,1),0!=_(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+_(t,n)+1}function ye(e,t){return 120<t?t-120:1<=(n=((n=Qr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ve(e,t,n){var r=w(n),i=e[t+=255&r].g-8;return 0<i&&(E(n,n.u+8),r=w(n),t+=e[t].value,t+=r&(1<<i)-1),E(n,n.u+e[t].g),e[t].value}function _e(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function be(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function xe(e,n,i,o){var a=e.ab,s=e.c*n,l=e.C;n=l+n;var c=i,u=o;for(o=e.Ta,i=e.Ua;0<a--;){var h=e.gc[a],d=l,p=n,f=c,m=u,g=(u=o,c=i,h.Ea);switch(t(d<p),t(p<=h.nc),h.hc){case 2:Hn(f,m,(p-d)*g,u,c);break;case 0:var y=d,v=p,_=u,b=c,x=(T=h).Ea;0==y&&(Gn(f,m,null,null,1,_,b),G(f,m+1,0,0,x-1,_,b+1),m+=x,b+=x,++y);for(var w=1<<T.b,S=w-1,E=F(x,T.b),A=T.K,T=T.w+(y>>T.b)*E;y<v;){var C=A,k=T,I=1;for(Wn(f,m,_,b-x,1,_,b);I<x;){var P=(I&~S)+w;P>x&&(P=x),(0,Qn[C[k++]>>8&15])(f,m+ +I,_,b+I-x,P-I,_,b+I),I=P}m+=x,b+=x,++y&S||(T+=E)}p!=h.nc&&r(u,c-g,u,c+(p-d-1)*g,g);break;case 1:for(g=f,v=m,x=(f=h.Ea)-(b=f&~(_=(m=1<<h.b)-1)),y=F(f,h.b),w=h.K,h=h.w+(d>>h.b)*y;d<p;){for(S=w,E=h,A=new B,T=v+b,C=v+f;v<T;)H(S[E++],A),$n(A,g,v,m,u,c),v+=m,c+=m;v<C&&(H(S[E++],A),$n(A,g,v,x,u,c),v+=x,c+=x),++d&_||(h+=y)}break;case 3:if(f==u&&m==c&&0<h.b){for(v=u,f=g=c+(p-d)*g-(b=(p-d)*F(h.Ea,h.b)),m=u,_=c,y=[],b=(x=b)-1;0<=b;--b)y[b]=m[_+b];for(b=x-1;0<=b;--b)v[f+b]=y[b];Xn(h,d,p,u,g,u,c)}else Xn(h,d,p,f,m,u,c)}c=o,u=i}u!=i&&r(o,i,c,u,s)}function we(e,n){var r=e.V,i=e.Ba+e.c*e.C,o=n-e.C;if(t(n<=e.l.o),t(16>=o),0<o){var a=e.l,s=e.Ta,l=e.Ua,c=a.width;if(xe(e,o,r,i),o=l=[l],t((r=e.C)<(i=n)),t(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var u=a.j-r;r=a.j,o[0]+=u*c}if(r>=i?r=0:(o[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var h=r.f.RGBA,d=(i=r.S,o=a.U,a=a.T,u=h.eb,h.A),p=a;for(h=h.fb+e.Ma*h.A;0<p--;){var f=s,m=l,g=o,y=u,v=h;switch(i){case Dr:er(f,m,g,y,v);break;case Fr:tr(f,m,g,y,v);break;case Zr:tr(f,m,g,y,v),Sr(y,v,0,g,1,0);break;case jr:ir(f,m,g,y,v);break;case zr:te(f,m,g,y,v,1);break;case qr:te(f,m,g,y,v,1),Sr(y,v,0,g,1,0);break;case Br:te(f,m,g,y,v,0);break;case Gr:te(f,m,g,y,v,0),Sr(y,v,1,g,1,0);break;case Ur:nr(f,m,g,y,v);break;case Wr:nr(f,m,g,y,v),Er(y,v,g,1,0);break;case Vr:rr(f,m,g,y,v);break;default:t(0)}l+=c,h+=d}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Se(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Ee(e,n,r,i,o,a){if(0!=e.Z){var s=e.qd,l=e.rd;for(t(null!=gi[e.Z]);n<r;++n)gi[e.Z](s,l,i,o,i,o,a),s=i,l=o,o+=a;e.qd=s,e.rd=l}}function Ae(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var o=e.l.width,a=r.ca,s=r.tb+o*i,l=e.V,c=e.Ba+e.c*i,u=e.gc;t(1==e.ab),t(3==u[0].hc),Yn(u[0],i,n,l,c,a,s),Ee(r,i,n,a,s,o)}e.C=e.Ma=n}function Te(e,n,r,i,o,a,s){var l=e.$/i,c=e.$%i,u=e.m,h=e.s,d=r+e.$,p=d;o=r+i*o;var f=r+i*a,m=280+h.ua,g=e.Pb?l:16777216,y=0<h.ua?h.Wa:null,v=h.wc,_=d<f?be(h,c,l):null;t(e.C<a),t(f<=o);var b=!1;e:for(;;){for(;b||d<f;){var x=0;if(l>=g){var T=d-r;t((g=e).Pb),g.wd=g.m,g.xd=T,0<g.s.ua&&N(g.s.Wa,g.s.vb),g=l+ei}if(c&v||(_=be(h,c,l)),t(null!=_),_.Qb&&(n[d]=_.qb,b=!0),!b)if(A(u),_.jc){x=u,T=n;var C=d,k=_.pd[w(x)&zn-1];t(_.jc),256>k.g?(E(x,x.u+k.g),T[C]=k.value,x=0):(E(x,x.u+k.g-256),t(256<=k.value),x=k.value),0==x&&(b=!0)}else x=ve(_.G[0],_.H[0],u);if(u.h)break;if(b||256>x){if(!b)if(_.nd)n[d]=(_.qb|x<<8)>>>0;else{if(A(u),b=ve(_.G[1],_.H[1],u),A(u),T=ve(_.G[2],_.H[2],u),C=ve(_.G[3],_.H[3],u),u.h)break;n[d]=(C<<24|b<<16|x<<8|T)>>>0}if(b=!1,++d,++c>=i&&(c=0,++l,null!=s&&l<=a&&!(l%16)&&s(e,l),null!=y))for(;p<d;)x=n[p++],y.X[(506832829*x&4294967295)>>>y.Mb]=x}else if(280>x){if(x=ge(x-256,u),T=ve(_.G[4],_.H[4],u),A(u),T=ye(i,T=ge(T,u)),u.h)break;if(d-r<T||o-d<x)break e;for(C=0;C<x;++C)n[d+C]=n[d+C-T];for(d+=x,c+=x;c>=i;)c-=i,++l,null!=s&&l<=a&&!(l%16)&&s(e,l);if(t(d<=o),c&v&&(_=be(h,c,l)),null!=y)for(;p<d;)x=n[p++],y.X[(506832829*x&4294967295)>>>y.Mb]=x}else{if(!(x<m))break e;for(b=x-280,t(null!=y);p<d;)x=n[p++],y.X[(506832829*x&4294967295)>>>y.Mb]=x;x=d,t(!(b>>>(T=y).Xa)),n[x]=T.X[b],b=!0}b||t(u.h==S(u))}if(e.Pb&&u.h&&d<o)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&N(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=s&&s(e,l>a?a:l),e.a=0,e.$=d-r}return 1}return e.a=3,0}function Ce(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function ke(){var t=new sn;return null==t?null:(t.a=0,t.xb=mi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Hn=W,$n=X,er=Y,tr=J,nr=Q,rr=$,ir=ee,e.VP8LMapColor32b=Kn,e.VP8LMapColor8b=Jn,t)}function Ie(e,n,r,s,l){var c=1,d=[e],f=[n],m=s.m,g=s.s,y=null,v=0;e:for(;;){if(r)for(;c&&_(m,1);){var b=d,x=f,S=s,T=1,C=S.m,k=S.gc[S.ab],I=_(C,2);if(S.Oc&1<<I)c=0;else{switch(S.Oc|=1<<I,k.hc=I,k.Ea=b[0],k.nc=x[0],k.K=[null],++S.ab,t(4>=S.ab),I){case 0:case 1:k.b=_(C,3)+2,T=Ie(F(k.Ea,k.b),F(k.nc,k.b),0,S,k.K),k.K=k.K[0];break;case 3:var P,L=_(C,8)+1,M=16<L?0:4<L?1:2<L?2:3;if(b[0]=F(k.Ea,M),k.b=M,P=T=Ie(L,1,0,S,k.K)){var N,R=L,D=k,z=1<<(8>>D.b),B=o(z);if(null==B)P=0;else{var U=D.K[0],V=D.w;for(B[0]=D.K[0][0],N=1;N<1*R;++N)B[N]=j(U[V+N],B[N-1]);for(;N<4*z;++N)B[N]=0;D.K[0]=null,D.K[0]=B,P=1}}T=P;break;case 2:break;default:t(0)}c=T}}if(d=d[0],f=f[0],c&&_(m,1)&&!(c=1<=(v=_(m,4))&&11>=v)){s.a=3;break e}var Z;if(Z=c)t:{var q,G,W,H=s,X=d,K=f,Y=v,J=r,Q=H.m,$=H.s,ee=[null],te=1,ne=0,re=$r[Y];n:for(;;){if(J&&_(Q,1)){var ie=_(Q,3)+2,oe=F(X,ie),ae=F(K,ie),se=oe*ae;if(!Ie(oe,ae,0,H,ee))break n;for(ee=ee[0],$.xc=ie,q=0;q<se;++q){var le=ee[q]>>8&65535;ee[q]=le,le>=te&&(te=le+1)}}if(Q.h)break n;for(G=0;5>G;++G){var ce=Kr[G];!G&&0<Y&&(ce+=1<<Y),ne<ce&&(ne=ce)}var ue=a(te*re,h),he=te,de=a(he,p);if(null==de)var pe=null;else t(65536>=he),pe=de;var fe=o(ne);if(null==pe||null==fe||null==ue){H.a=1;break n}var me=ue;for(q=W=0;q<te;++q){var ge=pe[q],ye=ge.G,ve=ge.H,be=0,xe=1,we=0;for(G=0;5>G;++G){ce=Kr[G],ye[G]=me,ve[G]=W,!G&&0<Y&&(ce+=1<<Y);r:{var Se,Ee=ce,Ae=H,ke=fe,Pe=me,Le=W,Me=0,Oe=Ae.m,Ne=_(Oe,1);if(i(ke,0,0,Ee),Ne){var Re=_(Oe,1)+1,De=_(Oe,1),Fe=_(Oe,0==De?1:8);ke[Fe]=1,2==Re&&(ke[Fe=_(Oe,8)]=1);var je=1}else{var ze=o(19),Be=_(Oe,4)+4;if(19<Be){Ae.a=3;var Ue=0;break r}for(Se=0;Se<Be;++Se)ze[Jr[Se]]=_(Oe,3);var Ve=void 0,Ze=void 0,qe=Ae,Ge=ze,We=Ee,He=ke,Xe=0,Ke=qe.m,Ye=8,Je=a(128,h);i:for(;u(Je,0,7,Ge,19);){if(_(Ke,1)){var Qe=2+2*_(Ke,3);if((Ve=2+_(Ke,Qe))>We)break i}else Ve=We;for(Ze=0;Ze<We&&Ve--;){A(Ke);var $e=Je[0+(127&w(Ke))];E(Ke,Ke.u+$e.g);var et=$e.value;if(16>et)He[Ze++]=et,0!=et&&(Ye=et);else{var tt=16==et,nt=et-16,rt=Xr[nt],it=_(Ke,Hr[nt])+rt;if(Ze+it>We)break i;for(var ot=tt?Ye:0;0<it--;)He[Ze++]=ot}}Xe=1;break i}Xe||(qe.a=3),je=Xe}(je=je&&!Oe.h)&&(Me=u(Pe,Le,8,ke,Ee)),je&&0!=Me?Ue=Me:(Ae.a=3,Ue=0)}if(0==Ue)break n;if(xe&&1==Yr[G]&&(xe=0==me[W].g),be+=me[W].g,W+=Ue,3>=G){var at,st=fe[0];for(at=1;at<ce;++at)fe[at]>st&&(st=fe[at]);we+=st}}if(ge.nd=xe,ge.Qb=0,xe&&(ge.qb=(ye[3][ve[3]+0].value<<24|ye[1][ve[1]+0].value<<16|ye[2][ve[2]+0].value)>>>0,0==be&&256>ye[0][ve[0]+0].value&&(ge.Qb=1,ge.qb+=ye[0][ve[0]+0].value<<8)),ge.jc=!ge.Qb&&6>we,ge.jc){var lt,ct=ge;for(lt=0;lt<zn;++lt){var ut=lt,ht=ct.pd[ut],dt=ct.G[0][ct.H[0]+ut];256<=dt.value?(ht.g=dt.g+256,ht.value=dt.value):(ht.g=0,ht.value=0,ut>>=_e(dt,8,ht),ut>>=_e(ct.G[1][ct.H[1]+ut],16,ht),ut>>=_e(ct.G[2][ct.H[2]+ut],0,ht),_e(ct.G[3][ct.H[3]+ut],24,ht))}}}$.vc=ee,$.Wb=te,$.Ya=pe,$.yc=ue,Z=1;break t}Z=0}if(!(c=Z)){s.a=3;break e}if(0<v){if(g.ua=1<<v,!O(g.Wa,v)){s.a=1,c=0;break e}}else g.ua=0;var pt=s,ft=d,mt=f,gt=pt.s,yt=gt.xc;if(pt.c=ft,pt.i=mt,gt.md=F(ft,yt),gt.wc=0==yt?-1:(1<<yt)-1,r){s.xb=fi;break e}if(null==(y=o(d*f))){s.a=1,c=0;break e}c=(c=Te(s,y,0,d,f,f,null))&&!m.h;break e}return c?(null!=l?l[0]=y:(t(null==y),t(r)),s.$=0,r||Ce(g)):Ce(g),c}function Pe(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=o(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Le(e,n){var r=e.C,i=n-r,o=e.V,a=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var s=16<i?16:i,l=e.l.ma,c=e.l.width,u=c*s,h=l.ca,d=l.tb+c*r,p=e.Ta,f=e.Ua;xe(e,s,o,a),Tr(p,f,h,d,u),Ee(l,r,r+s,h,d,c),i-=s,o+=s*e.c,r+=s}t(r==n),e.C=e.Ma=n}function Me(){this.ub=this.yd=this.td=this.Rb=0}function Oe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ne(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Re(){this.Yb=function(){var e=[];return function e(t,n,r){for(var i=r[n],o=0;o<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));o++)e(t[o],n+1,r)}(e,0,[3,11]),e}()}function De(){this.jb=o(3),this.Wc=s([4,8],Re),this.Xc=s([4,17],Re)}function Fe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function je(){this.ld=this.La=this.dd=this.tc=0}function ze(){this.Na=this.la=0}function Be(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ue(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ve(){this.uc=this.M=this.Nb=0,this.wa=Array(new je),this.Y=0,this.ya=Array(new Ue),this.aa=0,this.l=new We}function Ze(){this.y=o(16),this.f=o(8),this.ea=o(8)}function qe(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Me,this.Kc=new Oe,this.ed=new Fe,this.Qa=new Ne,this.Ic=this.$c=this.Aa=0,this.D=new Ve,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,Be),this.Pa=new De,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ze),this.Hd=0,this.rb=Array(new ze),this.sb=0,this.wa=Array(new je),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ue),this.L=this.aa=0,this.gd=s([4,2],je),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ge(e,t){return 0>e?0:e>t?t:e}function We(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function He(){var e=new qe;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ri||(ri=Je)),e}function Xe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Ke(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ye(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Xe(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,o=n.w,a=n.ha;if(4>a)return Xe(e,7,"Truncated header.");var s=r[o+0]|r[o+1]<<8|r[o+2]<<16,l=e.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Xe(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Xe(e,4,"Frame not displayable.");o+=3,a-=3;var c=e.Kc;if(l.Rb){if(7>a)return Xe(e,7,"cannot parse picture header");if(!Ke(r,o,a))return Xe(e,3,"Bad code word");c.c=16383&(r[o+4]<<8|r[o+3]),c.Td=r[o+4]>>6,c.i=16383&(r[o+6]<<8|r[o+5]),c.Ud=r[o+6]>>6,o+=7,a-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>a)return Xe(e,7,"bad partition length");f(s=e.m,r,o,l.ub),o+=l.ub,a-=l.ub,l.Rb&&(c.Ld=C(s),c.Kd=C(s)),c=e.Qa;var u,h=e.Pa;if(t(null!=s),t(null!=c),c.Cb=C(s),c.Cb){if(c.Bb=C(s),C(s)){for(c.Fb=C(s),u=0;4>u;++u)c.Zb[u]=C(s)?g(s,7):0;for(u=0;4>u;++u)c.Lb[u]=C(s)?g(s,6):0}if(c.Bb)for(u=0;3>u;++u)h.jb[u]=C(s)?m(s,8):255}else c.Bb=0;if(s.Ka)return Xe(e,3,"cannot parse segment header");if((c=e.ed).zd=C(s),c.Tb=m(s,6),c.wb=m(s,3),c.Pc=C(s),c.Pc&&C(s)){for(h=0;4>h;++h)C(s)&&(c.vd[h]=g(s,6));for(h=0;4>h;++h)C(s)&&(c.od[h]=g(s,6))}if(e.L=0==c.Tb?0:c.zd?1:2,s.Ka)return Xe(e,3,"cannot parse filter header");var d=a;if(a=u=o,o=u+d,c=d,e.Xb=(1<<m(e.m,2))-1,d<3*(h=e.Xb))r=7;else{for(u+=3*h,c-=3*h,d=0;d<h;++d){var p=r[a+0]|r[a+1]<<8|r[a+2]<<16;p>c&&(p=c),f(e.Jc[+d],r,u,p),u+=p,c-=p,a+=3}f(e.Jc[+h],r,u,c),r=u<o?0:5}if(0!=r)return Xe(e,r,"cannot parse partitions");for(r=m(u=e.m,7),a=C(u)?g(u,4):0,o=C(u)?g(u,4):0,c=C(u)?g(u,4):0,h=C(u)?g(u,4):0,u=C(u)?g(u,4):0,d=e.Qa,p=0;4>p;++p){if(d.Cb){var y=d.Zb[p];d.Fb||(y+=r)}else{if(0<p){e.pb[p]=e.pb[0];continue}y=r}var v=e.pb[p];v.Sc[0]=ti[Ge(y+a,127)],v.Sc[1]=ni[Ge(y+0,127)],v.Eb[0]=2*ti[Ge(y+o,127)],v.Eb[1]=101581*ni[Ge(y+c,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ti[Ge(y+h,117)],v.Qc[1]=ni[Ge(y+u,127)],v.lc=y+u}if(!l.Rb)return Xe(e,4,"Not a key frame.");for(C(s),l=e.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(o=0;3>o;++o)for(c=0;11>c;++c)h=k(s,ci[r][a][o][c])?m(s,8):si[r][a][o][c],l.Wc[r][a].Yb[o][c]=h;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][ui[a]]}return e.kc=C(s),e.kc&&(e.Bd=m(s,8)),e.cb=1}function Je(e,t,n,r,i,o,a){var s=t[i].Yb[n];for(n=0;16>i;++i){if(!k(e,s[n+0]))return i;for(;!k(e,s[n+1]);)if(s=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(k(e,s[n+2])){var c=e,u=0;if(k(c,(d=s)[(h=n)+3]))if(k(c,d[h+6])){for(s=0,h=2*(u=k(c,d[h+8]))+(d=k(c,d[h+9+u])),u=0,d=ii[h];d[s];++s)u+=u+k(c,d[s]);u+=3+(8<<h)}else k(c,d[h+7])?(u=7+2*k(c,165),u+=k(c,145)):u=5+k(c,159);else u=k(c,d[h+4])?3+k(c,d[h+5]):2;s=l[2]}else u=1,s=l[1];l=a+oi[i],0>(c=e).b&&T(c);var h,d=c.b,p=(h=c.Ca>>1)-(c.I>>d)>>31;--c.b,c.Ca+=p,c.Ca|=1,c.I-=(h+1&p)<<d,o[l]=((u^p)-p)*r[(0<i)+0]}return 16}function Qe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,n){if(null==e)return 0;if(null==n)return Xe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ye(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=zi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(s=0;4>s;++s){var c;if(e.Qa.Cb){var u=e.Qa.Lb[s];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var h=e.gd[s][c],d=u;if(l.Pc&&(d+=l.vd[0],c&&(d+=l.od[0])),0<(d=0>d?0:63<d?63:d)){var p=d;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),h.dd=p,h.tc=2*d+p,h.ld=40<=d?2:15<=d?1:0}else h.tc=0;h.La=c}}}s=0}else Xe(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=Ui);e:{s=e.Ic,l=4*(p=e.za);var f=32*p,m=p+1,g=0<e.L?p*(0<e.Aa?2:1):0,y=(2==e.Aa?2:1)*p;if((h=l+832+(c=3*(16*s+zi[e.L])/2*f)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=h)s=0;else{if(h>e.Vb){if(e.Vb=0,e.Ec=o(h),e.Fc=0,null==e.Ec){s=Xe(e,1,"no memory during frame initialization.");break e}e.Vb=h}h=e.Ec,d=e.Fc,e.Ac=h,e.Bc=d,d+=l,e.Gd=a(f,Ze),e.Hd=0,e.rb=a(m+1,ze),e.sb=1,e.wa=g?a(g,je):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=p),t(!0),e.oc=h,e.pc=d,d+=832,e.ya=a(y,Ue),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=p),e.R=16*p,e.B=8*p,p=(f=zi[e.L])*e.R,f=f/2*e.B,e.sa=h,e.ta=d+p,e.qa=e.sa,e.ra=e.ta+16*s*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+f,e.$c=0,d+=c,e.mb=u?h:null,e.nb=u?d:null,t(d+u<=e.Fc+e.Vb),Qe(e),i(e.Ac,e.Bc,0,l),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Lr){for(s=-255;255>=s;++s)Cr[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)kr[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Ir[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Pr[255+s]=0>s?0:255<s?255:s;Lr=1}or=ct,ar=ot,lr=at,cr=st,ur=lt,sr=it,hr=Xt,dr=Kt,pr=Qt,fr=$t,mr=Yt,gr=Jt,yr=en,vr=tn,_r=Vt,br=Zt,xr=qt,wr=Gt,di[0]=Et,di[1]=ht,di[2]=wt,di[3]=St,di[4]=At,di[5]=Ct,di[6]=Tt,di[7]=kt,di[8]=Pt,di[9]=It,hi[0]=yt,hi[1]=pt,hi[2]=ft,hi[3]=mt,hi[4]=vt,hi[5]=_t,hi[6]=bt,pi[0]=Nt,pi[1]=dt,pi[2]=Lt,pi[3]=Mt,pi[4]=Dt,pi[5]=Rt,pi[6]=Ft,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,s=e.Jc[e.M&e.Xb],l=e.m,c=e;for(a=0;a<c.za;++a){var u=l,h=c,d=h.Ac,p=h.Bc+4*a,f=h.zc,m=h.ya[h.aa+a];if(h.Qa.Bb?m.$b=k(u,h.Pa.jb[0])?2+k(u,h.Pa.jb[2]):k(u,h.Pa.jb[1]):m.$b=0,h.kc&&(m.Ad=k(u,h.Bd)),m.Za=!k(u,145)+0,m.Za){var g=m.Ob,y=0;for(h=0;4>h;++h){var v,_=f[0+h];for(v=0;4>v;++v){_=li[d[p+v]][_];for(var b=ai[k(u,_[0])];0<b;)b=ai[2*b+k(u,_[b])];_=-b,d[p+v]=_}r(g,y,d,p,4),y+=4,f[0+h]=_}}else _=k(u,156)?k(u,128)?1:3:k(u,163)?2:0,m.Ob[0]=_,i(d,p,_,4),i(f,0,_,4);m.Dd=k(u,142)?k(u,114)?k(u,183)?1:3:2:0}if(c.m.Ka)return Xe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=s,u=(l=e).rb[l.sb-1],d=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],p=l.kc?a.Ad:0)u.la=d.la=0,a.Za||(u.Na=d.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var x,w;if(u=d,d=c,p=l.Pa.Xc,f=l.ya[l.aa+l.ja],m=l.pb[f.$b],h=f.ad,g=0,y=l.rb[l.sb-1],_=v=0,i(h,g,0,384),f.Za)var S=0,E=p[3];else{b=o(16);var A=u.Na+y.Na;if(A=ri(d,p[1],A,m.Eb,0,b,0),u.Na=y.Na=(0<A)+0,1<A)or(b,0,h,g);else{var T=b[0]+3>>3;for(b=0;256>b;b+=16)h[g+b]=T}S=1,E=p[0]}var C=15&u.la,I=15&y.la;for(b=0;4>b;++b){var P=1&I;for(T=w=0;4>T;++T)C=C>>1|(P=(A=ri(d,E,A=P+(1&C),m.Sc,S,h,g))>S)<<7,w=w<<2|(3<A?3:1<A?2:0!=h[g+0]),g+=16;C>>=4,I=I>>1|P<<7,v=(v<<8|w)>>>0}for(E=C,S=I>>4,x=0;4>x;x+=2){for(w=0,C=u.la>>4+x,I=y.la>>4+x,b=0;2>b;++b){for(P=1&I,T=0;2>T;++T)A=P+(1&C),C=C>>1|(P=0<(A=ri(d,p[2],A,m.Qc,0,h,g)))<<3,w=w<<2|(3<A?3:1<A?2:0!=h[g+0]),g+=16;C>>=2,I=I>>1|P<<5}_|=w<<4*x,E|=C<<4<<x,S|=(240&I)<<x}u.la=E,y.la=S,f.Hc=v,f.Gc=_,f.ia=43690&_?0:m.ia,p=!(v|_)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!p),c.Ka)return Xe(e,7,"Premature end-of-file encountered.")}if(Qe(e),l=n,c=1,a=(s=e).D,u=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(a.M=s.M,a.uc=u,Nn(s,a),c=1,a=(w=s.D).Nb,u=(_=zi[s.L])*s.R,d=_/2*s.B,b=16*a*s.R,T=8*a*s.B,p=s.sa,f=s.ta-u+b,m=s.qa,h=s.ra-d+T,g=s.Ha,y=s.Ia-d+T,I=0==(C=w.M),v=C>=s.Va-1,2==s.Aa&&Nn(s,w),w.uc)for(P=(A=s).D.M,t(A.D.uc),w=A.yb;w<A.Hb;++w){S=w,E=P;var L=(M=(U=A).D).Nb;x=U.R;var M=M.wa[M.Y+S],O=U.sa,N=U.ta+16*L*x+16*S,R=M.dd,D=M.tc;if(0!=D)if(t(3<=D),1==U.L)0<S&&br(O,N,x,D+4),M.La&&wr(O,N,x,D),0<E&&_r(O,N,x,D+4),M.La&&xr(O,N,x,D);else{var F=U.B,j=U.qa,z=U.ra+8*L*F+8*S,B=U.Ha,U=U.Ia+8*L*F+8*S;L=M.ld,0<S&&(dr(O,N,x,D+4,R,L),fr(j,z,B,U,F,D+4,R,L)),M.La&&(gr(O,N,x,D,R,L),vr(j,z,B,U,F,D,R,L)),0<E&&(hr(O,N,x,D+4,R,L),pr(j,z,B,U,F,D+4,R,L)),M.La&&(mr(O,N,x,D,R,L),yr(j,z,B,U,F,D,R,L))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*C,C=16*(C+1),I?(l.y=s.sa,l.O=s.ta+b,l.f=s.qa,l.N=s.ra+T,l.ea=s.Ha,l.W=s.Ia+T):(w-=_,l.y=p,l.O=f,l.f=m,l.N=h,l.ea=g,l.W=y),v||(C-=_),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&w<C&&(l.J=dn(s,l,w,C-w),l.F=s.mb,null==l.F&&0==l.F.length)){c=Xe(s,3,"Could not decode alpha data.");break e}w<l.j&&(_=l.j-w,w=l.j,t(!(1&_)),l.O+=s.R*_,l.N+=s.B*(_>>1),l.W+=s.B*(_>>1),null!=l.F&&(l.J+=l.width*_)),w<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=C-w,c=l.put(l))}a+1!=s.Ic||v||(r(s.sa,s.ta-u,p,f+16*s.R,u),r(s.qa,s.ra-d,m,h+8*s.B,d),r(s.Ha,s.Ia-d,g,y+8*s.B,d))}if(!c)return Xe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0}function et(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function tt(e,t,n,r,i,o){et(e,t,0,n,r+i),et(e,t,1,n,r+o),et(e,t,2,n,r-o),et(e,t,3,n,r-i)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var i,a=0,s=o(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),h=nt(e[t+4])+(35468*e[t+12]>>16);s[a+0]=l+h,s[a+1]=c+u,s[a+2]=c-u,s[a+3]=l-h,a+=4,t++}for(i=a=0;4>i;++i)l=(e=s[a+0]+4)+s[a+8],c=e-s[a+8],u=(35468*s[a+4]>>16)-nt(s[a+12]),et(n,r,0,0,l+(h=nt(s[a+4])+(35468*s[a+12]>>16))),et(n,r,1,0,c+u),et(n,r,2,0,c-u),et(n,r,3,0,l-h),a++,r+=32}function it(e,t,n,r){var i=e[t+0]+4,o=35468*e[t+4]>>16,a=nt(e[t+4]),s=35468*e[t+1]>>16;tt(n,r,0,i+a,e=nt(e[t+1]),s),tt(n,r,1,i+o,e,s),tt(n,r,2,i-o,e,s),tt(n,r,3,i-a,e,s)}function ot(e,t,n,r,i){rt(e,t,n,r),i&&rt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function st(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)et(n,r,t,i,e)}function lt(e,t,n,r){e[t+0]&&cr(e,t+0,n,r),e[t+16]&&cr(e,t+16,n,r+4),e[t+32]&&cr(e,t+32,n,r+128),e[t+48]&&cr(e,t+48,n,r+128+4)}function ct(e,t,n,r){var i,a=o(16);for(i=0;4>i;++i){var s=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],u=e[t+0+i]-e[t+12+i];a[0+i]=s+l,a[8+i]=s-l,a[4+i]=u+c,a[12+i]=u-c}for(i=0;4>i;++i)s=(e=a[0+4*i]+3)+a[3+4*i],l=a[1+4*i]+a[2+4*i],c=a[1+4*i]-a[2+4*i],u=e-a[3+4*i],n[r+0]=s+l>>3,n[r+16]=u+c>>3,n[r+32]=s-l>>3,n[r+48]=u-c>>3,r+=64}function ut(e,t,n){var r,i=t-32,o=Nr,a=255-e[i-1];for(r=0;r<n;++r){var s,l=o,c=a+e[t-1];for(s=0;s<n;++s)e[t+s]=l[c+e[i+s]];t+=32}}function ht(e,t){ut(e,t,4)}function dt(e,t){ut(e,t,8)}function pt(e,t){ut(e,t,16)}function ft(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function mt(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function gt(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function yt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];gt(r>>5,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];gt(r>>4,e,t)}function _t(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];gt(r>>4,e,t)}function bt(e,t){gt(128,e,t)}function xt(e,t,n){return e+2*t+n+2>>2}function wt(e,t){var n,i=t-32;for(i=new Uint8Array([xt(e[i-1],e[i+0],e[i+1]),xt(e[i+0],e[i+1],e[i+2]),xt(e[i+1],e[i+2],e[i+3]),xt(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function St(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96];I(e,t+0,16843009*xt(e[t-1-32],n,r)),I(e,t+32,16843009*xt(n,r,i)),I(e,t+64,16843009*xt(r,i,o)),I(e,t+96,16843009*xt(i,o,o))}function Et(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function At(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1-32],a=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=xt(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=xt(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=xt(o,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=xt(a,o,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=xt(s,a,o),e[t+3+32]=e[t+2+0]=xt(l,s,a),e[t+3+0]=xt(c,l,s)}function Tt(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],o=e[t+4-32],a=e[t+5-32],s=e[t+6-32],l=e[t+7-32];e[t+0+0]=xt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=xt(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=xt(r,i,o),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=xt(i,o,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=xt(o,a,s),e[t+3+64]=e[t+2+96]=xt(a,s,l),e[t+3+96]=xt(s,l,l)}function Ct(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1-32],a=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=o+a+1>>1,e[t+1+0]=e[t+2+64]=a+s+1>>1,e[t+2+0]=e[t+3+64]=s+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=xt(i,r,n),e[t+0+64]=xt(r,n,o),e[t+0+32]=e[t+1+96]=xt(n,o,a),e[t+1+32]=e[t+2+96]=xt(o,a,s),e[t+2+32]=e[t+3+96]=xt(a,s,l),e[t+3+32]=xt(s,l,c)}function kt(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],o=e[t+3-32],a=e[t+4-32],s=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+o+1>>1,e[t+3+0]=e[t+2+64]=o+a+1>>1,e[t+0+32]=xt(n,r,i),e[t+1+32]=e[t+0+96]=xt(r,i,o),e[t+2+32]=e[t+1+96]=xt(i,o,a),e[t+3+32]=e[t+2+96]=xt(o,a,s),e[t+3+64]=xt(a,s,l),e[t+3+96]=xt(s,l,c)}function It(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+o+1>>1,e[t+1+0]=xt(n,r,i),e[t+3+0]=e[t+1+32]=xt(r,i,o),e[t+3+32]=e[t+1+64]=xt(i,o,o),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=o}function Pt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],o=e[t-1+96],a=e[t-1-32],s=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=o+i+1>>1,e[t+3+0]=xt(s,l,c),e[t+2+0]=xt(a,s,l),e[t+1+0]=e[t+3+32]=xt(n,a,s),e[t+1+32]=e[t+3+64]=xt(r,n,a),e[t+1+64]=e[t+3+96]=xt(i,r,n),e[t+1+96]=xt(o,i,r)}function Lt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Mt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Ot(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function Nt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Ot(r>>4,e,t)}function Rt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Ot(r>>3,e,t)}function Dt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Ot(r>>3,e,t)}function Ft(e,t){Ot(128,e,t)}function jt(e,t,n){var r=e[t-n],i=e[t+0],o=3*(i-r)+Mr[1020+e[t-2*n]-e[t+n]],a=Or[112+(o+4>>3)];e[t-n]=Nr[255+r+Or[112+(o+3>>3)]],e[t+0]=Nr[255+i-a]}function zt(e,t,n,r){var i=e[t+0],o=e[t+n];return Rr[255+e[t-2*n]-e[t-n]]>r||Rr[255+o-i]>r}function Bt(e,t,n,r){return 4*Rr[255+e[t-n]-e[t+0]]+Rr[255+e[t-2*n]-e[t+n]]<=r}function Ut(e,t,n,r,i){var o=e[t-3*n],a=e[t-2*n],s=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],h=e[t+3*n];return 4*Rr[255+s-l]+Rr[255+a-c]>r?0:Rr[255+e[t-4*n]-o]<=i&&Rr[255+o-a]<=i&&Rr[255+a-s]<=i&&Rr[255+h-u]<=i&&Rr[255+u-c]<=i&&Rr[255+c-l]<=i}function Vt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Bt(e,t+r,n,i)&&jt(e,t+r,n)}function Zt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Bt(e,t+r*n,1,i)&&jt(e,t+r*n,1)}function qt(e,t,n,r){var i;for(i=3;0<i;--i)Vt(e,t+=4*n,n,r)}function Gt(e,t,n,r){var i;for(i=3;0<i;--i)Zt(e,t+=4,n,r)}function Wt(e,t,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Ut(e,t,n,o,a))if(zt(e,t,n,s))jt(e,t,n);else{var l=e,c=t,u=n,h=l[c-2*u],d=l[c-u],p=l[c+0],f=l[c+u],m=l[c+2*u],g=27*(v=Mr[1020+3*(p-d)+Mr[1020+h-f]])+63>>7,y=18*v+63>>7,v=9*v+63>>7;l[c-3*u]=Nr[255+l[c-3*u]+v],l[c-2*u]=Nr[255+h+y],l[c-u]=Nr[255+d+g],l[c+0]=Nr[255+p-g],l[c+u]=Nr[255+f-y],l[c+2*u]=Nr[255+m-v]}t+=r}}function Ht(e,t,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Ut(e,t,n,o,a))if(zt(e,t,n,s))jt(e,t,n);else{var l=e,c=t,u=n,h=l[c-u],d=l[c+0],p=l[c+u],f=Or[112+(4+(m=3*(d-h))>>3)],m=Or[112+(m+3>>3)],g=f+1>>1;l[c-2*u]=Nr[255+l[c-2*u]+g],l[c-u]=Nr[255+h+m],l[c+0]=Nr[255+d-f],l[c+u]=Nr[255+p-g]}t+=r}}function Xt(e,t,n,r,i,o){Wt(e,t,n,1,16,r,i,o)}function Kt(e,t,n,r,i,o){Wt(e,t,1,n,16,r,i,o)}function Yt(e,t,n,r,i,o){var a;for(a=3;0<a;--a)Ht(e,t+=4*n,n,1,16,r,i,o)}function Jt(e,t,n,r,i,o){var a;for(a=3;0<a;--a)Ht(e,t+=4,1,n,16,r,i,o)}function Qt(e,t,n,r,i,o,a,s){Wt(e,t,i,1,8,o,a,s),Wt(n,r,i,1,8,o,a,s)}function $t(e,t,n,r,i,o,a,s){Wt(e,t,1,i,8,o,a,s),Wt(n,r,1,i,8,o,a,s)}function en(e,t,n,r,i,o,a,s){Ht(e,t+4*i,i,1,8,o,a,s),Ht(n,r+4*i,i,1,8,o,a,s)}function tn(e,t,n,r,i,o,a,s){Ht(e,t+4,1,i,8,o,a,s),Ht(n,r+4,1,i,8,o,a,s)}function nn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new h}function sn(){this.xb=this.a=0,this.l=new We,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new x,this.Pb=0,this.wd=new x,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=a(4,on),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new We,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,r,i,o,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)i[o+t]=e+n[r+t]&255,e=i[o+t]}function un(e,t,n,r,i,o,a){var s;if(null==e)cn(null,null,n,r,i,o,a);else for(s=0;s<a;++s)i[o+s]=e[t+s]+n[r+s]&255}function hn(e,t,n,r,i,o,a){if(null==e)cn(null,null,n,r,i,o,a);else{var s,l=e[t+0],c=l,u=l;for(s=0;s<a;++s)c=u+(l=e[t+s])-c,u=n[r+s]+(-256&c?0>c?0:255:c)&255,c=l,i[o+s]=u}}function dn(e,n,i,a){var s=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=a||i+a>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=o(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,h=e.P,d=e.qc,p=e.mb,f=e.nb,m=h+1,g=d-1,v=c.l;if(t(null!=u&&null!=p&&null!=n),gi[0]=null,gi[1]=cn,gi[2]=un,gi[3]=hn,c.ca=p,c.tb=f,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=d)n=0;else if(c.$a=u[h+0]>>0&3,c.Z=u[h+0]>>2&3,c.Lc=u[h+0]>>4&3,h=u[h+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||h)n=0;else if(v.put=pe,v.ac=de,v.bc=fe,v.ma=c,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,c.$a)e:{t(1==c.$a),n=ke();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,y(n.m,u,m,g),!Ie(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Se(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Pe(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:a=l-i}t(null!=e.ga),t(i+a<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(m=e.rc,g=e.Vc,v=e.Fa,h=e.P+1+i*n,d=e.mb,p=e.nb+i*n,t(h<=e.P+e.qc),0!=u.Z)for(t(null!=gi[u.Z]),c=0;c<a;++c)gi[u.Z](m,g,v,h,d,p,n),m=d,g=p,p+=n,h+=n;else for(c=0;c<a;++c)r(d,p,v,h,n),m=d,g=p,p+=n,h+=n;e.rc=m,e.Vc=g}else{if(t(null!=u.mc),n=i+a,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||yn(),u.ic){u=c.V,m=c.Ba,g=c.c;var _=c.i,b=(v=1,h=c.$/g,d=c.$%g,p=c.m,f=c.s,c.$),x=g*_,w=g*n,E=f.wc,T=b<w?be(f,d,h):null;t(b<=x),t(n<=_),t(Se(f));t:for(;;){for(;!p.h&&b<w;){if(d&E||(T=be(f,d,h)),t(null!=T),A(p),256>(_=ve(T.G[0],T.H[0],p)))u[m+b]=_,++b,++d>=g&&(d=0,++h<=n&&!(h%16)&&Ae(c,h));else{if(!(280>_)){v=0;break t}_=ge(_-256,p);var C,k=ve(T.G[4],T.H[4],p);if(A(p),!(b>=(k=ye(g,k=ge(k,p)))&&x-b>=_)){v=0;break t}for(C=0;C<_;++C)u[m+b+C]=u[m+b+C-k];for(b+=_,d+=_;d>=g;)d-=g,++h<=n&&!(h%16)&&Ae(c,h);b<w&&d&E&&(T=be(f,d,h))}t(p.h==S(p))}Ae(c,h>n?n:h);break t}!v||p.h&&b<x?(v=0,c.a=p.h?5:3):c.$=b,n=v}else n=Te(c,c.V,c.Ba,c.c,c.i,n,Le);if(!n){a=0;break e}}i+a>=l&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*s}function pn(e,t,n,r,i,o){for(;0<i--;){var a,s=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(a=0;a<r;++a){var h=c[u+4*a];255!=h&&(h*=32897,s[l+4*a+0]=s[l+4*a+0]*h>>23,s[l+4*a+1]=s[l+4*a+1]*h>>23,s[l+4*a+2]=s[l+4*a+2]*h>>23)}t+=o}}function fn(e,t,n,r,i){for(;0<r--;){var o;for(o=0;o<n;++o){var a=e[t+2*o+0],s=15&(c=e[t+2*o+1]),l=4369*s,c=(240&c|c>>4)*l>>16;e[t+2*o+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,e[t+2*o+1]=240&c|s}t+=i}}function mn(e,t,n,r,i,o,a,s){var l,c,u=255;for(c=0;c<i;++c){for(l=0;l<r;++l){var h=e[t+l];o[a+4*l]=h,u&=h}t+=n,a+=s}return 255!=u}function gn(e,t,n,r,i){var o;for(o=0;o<i;++o)n[r+o]=e[t+o]>>8}function yn(){Sr=pn,Er=fn,Ar=mn,Tr=gn}function vn(n,r,i){e[n]=function(e,n,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_){var b,x=_-1>>1,w=s[l+0]|c[u+0]<<16,S=h[d+0]|p[f+0]<<16;t(null!=e);var E=3*w+S+131074>>2;for(r(e[n+0],255&E,E>>16,m,g),null!=o&&(E=3*S+w+131074>>2,r(o[a+0],255&E,E>>16,y,v)),b=1;b<=x;++b){var A=s[l+b]|c[u+b]<<16,T=h[d+b]|p[f+b]<<16,C=w+A+S+T+524296,k=C+2*(A+S)>>3;E=k+w>>1,w=(C=C+2*(w+T)>>3)+A>>1,r(e[n+2*b-1],255&E,E>>16,m,g+(2*b-1)*i),r(e[n+2*b-0],255&w,w>>16,m,g+(2*b-0)*i),null!=o&&(E=C+S>>1,w=k+T>>1,r(o[a+2*b-1],255&E,E>>16,y,v+(2*b-1)*i),r(o[a+2*b+0],255&w,w>>16,y,v+(2*b+0)*i)),w=A,S=T}1&_||(E=3*w+S+131074>>2,r(e[n+_-1],255&E,E>>16,m,g+(_-1)*i),null!=o&&(E=3*S+w+131074>>2,r(o[a+_-1],255&E,E>>16,y,v+(_-1)*i)))}}function _n(){yi[Dr]=vi,yi[Fr]=bi,yi[jr]=_i,yi[zr]=xi,yi[Br]=wi,yi[Ur]=Si,yi[Vr]=Ei,yi[Zr]=bi,yi[qr]=xi,yi[Gr]=wi,yi[Wr]=Si}function bn(e){return e&~Pi?0>e?0:255:e>>Ii}function xn(e,t){return bn((19077*e>>8)+(26149*t>>8)-14234)}function wn(e,t,n){return bn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Sn(e,t){return bn((19077*e>>8)+(33050*t>>8)-17685)}function En(e,t,n,r,i){r[i+0]=xn(e,n),r[i+1]=wn(e,t,n),r[i+2]=Sn(e,t)}function An(e,t,n,r,i){r[i+0]=Sn(e,t),r[i+1]=wn(e,t,n),r[i+2]=xn(e,n)}function Tn(e,t,n,r,i){var o=wn(e,t,n);t=o<<3&224|Sn(e,t)>>3,r[i+0]=248&xn(e,n)|o>>5,r[i+1]=t}function Cn(e,t,n,r,i){var o=240&Sn(e,t)|15;r[i+0]=240&xn(e,n)|wn(e,t,n)>>4,r[i+1]=o}function kn(e,t,n,r,i){r[i+0]=255,En(e,t,n,r,i+1)}function In(e,t,n,r,i){An(e,t,n,r,i),r[i+3]=255}function Pn(e,t,n,r,i){En(e,t,n,r,i),r[i+3]=255}function Ge(e,t){return 0>e?0:e>t?t:e}function Ln(t,n,r){e[t]=function(e,t,i,o,a,s,l,c,u){for(var h=c+(-2&u)*r;c!=h;)n(e[t+0],i[o+0],a[s+0],l,c),n(e[t+1],i[o+0],a[s+0],l,c+r),t+=2,++o,++s,c+=2*r;1&u&&n(e[t+0],i[o+0],a[s+0],l,c)}}function Mn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function On(e,t,n,r,i){switch(e>>>30){case 3:ar(t,n,r,i,0);break;case 2:sr(t,n,r,i);break;case 1:cr(t,n,r,i)}}function Nn(e,t){var n,o,a=t.M,s=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,h=e.pc+584,d=e.oc,p=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[h+32*n-1]=129,d[p+32*n-1]=129;for(0<a?l[c-1-32]=u[h-1-32]=d[p-1-32]=129:(i(l,c-32-1,127,21),i(u,h-32-1,127,9),i(d,p-32-1,127,9)),o=0;o<e.za;++o){var f=t.ya[t.aa+o];if(0<o){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,h+32*n-4,u,h+32*n+4,4),r(d,p+32*n-4,d,p+32*n+4,4)}var m=e.Gd,g=e.Hd+o,y=f.ad,v=f.Hc;if(0<a&&(r(l,c-32,m[g].y,0,16),r(u,h-32,m[g].f,0,8),r(d,p-32,m[g].ea,0,8)),f.Za){var _=l,b=c-32+16;for(0<a&&(o>=e.za-1?i(_,b,m[g].y[15],4):r(_,b,m[g+1].y,0,4)),n=0;4>n;n++)_[b+128+n]=_[b+256+n]=_[b+384+n]=_[b+0+n];for(n=0;16>n;++n,v<<=2)_=l,b=c+ji[n],di[f.Ob[n]](_,b),On(v,y,16*+n,_,b)}else if(_=Mn(o,a,f.Ob[0]),hi[_](l,c),0!=v)for(n=0;16>n;++n,v<<=2)On(v,y,16*+n,l,c+ji[n]);for(n=f.Gc,_=Mn(o,a,f.Dd),pi[_](u,h),pi[_](d,p),v=y,_=u,b=h,255&(f=n>>0)&&(170&f?lr(v,256,_,b):ur(v,256,_,b)),f=d,v=p,255&(n>>=8)&&(170&n?lr(y,320,f,v):ur(y,320,f,v)),a<e.Ub-1&&(r(m[g].y,0,l,c+480,16),r(m[g].f,0,u,h+224,8),r(m[g].ea,0,d,p+224,8)),n=8*s*e.B,m=e.sa,g=e.ta+16*o+16*s*e.R,y=e.qa,f=e.ra+8*o+n,v=e.Ha,_=e.Ia+8*o+n,n=0;16>n;++n)r(m,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(y,f+n*e.B,u,h+32*n,8),r(v,_+n*e.B,d,p+32*n,8)}}function Rn(e,r,i,o,a,s,l,c,u){var h=[0],d=[0],p=0,f=null!=u?u.kd:0,m=null!=u?u:new rn;if(null==e||12>i)return 7;m.data=e,m.w=r,m.ha=i,r=[r],i=[i],m.gb=[m.gb];e:{var g=r,v=i,_=m.gb;if(t(null!=e),t(null!=v),t(null!=_),_[0]=0,12<=v[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){_=3;break e}var b=M(e,g[0]+4);if(12>b||4294967286<b){_=3;break e}if(f&&b>v[0]-8){_=7;break e}_[0]=b,g[0]+=12,v[0]-=12}_=0}if(0!=_)return _;for(b=0<m.gb[0],i=i[0];;){e:{var w=e;v=r,_=i;var S=h,E=d,A=g=[0];if((k=p=[p])[0]=0,8>_[0])_=7;else{if(!n(w,v[0],"VP8X")){if(10!=M(w,v[0]+4)){_=3;break e}if(18>_[0]){_=7;break e}var T=M(w,v[0]+8),C=1+L(w,v[0]+12);if(2147483648<=C*(w=1+L(w,v[0]+15))){_=3;break e}null!=A&&(A[0]=T),null!=S&&(S[0]=C),null!=E&&(E[0]=w),v[0]+=18,_[0]-=18,k[0]=1}_=0}}if(p=p[0],g=g[0],0!=_)return _;if(v=!!(2&g),!b&&p)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=l&&(l[0]=v),null!=c&&(c[0]=0),l=h[0],g=d[0],p&&v&&null==u){_=0;break}if(4>i){_=7;break}if(b&&p||!b&&!p&&!n(e,r[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{T=e,_=r,b=i;var k=m.gb;S=m.na,E=m.P,A=m.Sa,C=22,t(null!=T),t(null!=b),w=_[0];var I=b[0];for(t(null!=S),t(null!=A),S[0]=null,E[0]=null,A[0]=0;;){if(_[0]=w,b[0]=I,8>I){_=7;break e}var P=M(T,w+4);if(4294967286<P){_=3;break e}var O=8+P+1&-2;if(C+=O,0<k&&C>k){_=3;break e}if(!n(T,w,"VP8 ")||!n(T,w,"VP8L")){_=0;break e}if(I[0]<O){_=7;break e}n(T,w,"ALPH")||(S[0]=T,E[0]=w+8,A[0]=P),w+=O,I-=O}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=_)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];e:if(k=e,_=r,b=i,S=m.gb[0],E=m.Ja,A=m.xa,T=_[0],w=!n(k,T,"VP8 "),C=!n(k,T,"VP8L"),t(null!=k),t(null!=b),t(null!=E),t(null!=A),8>b[0])_=7;else{if(w||C){if(k=M(k,T+4),12<=S&&k>S-12){_=3;break e}if(f&&k>b[0]-8){_=7;break e}E[0]=k,_[0]+=8,b[0]-=8,A[0]=C}else A[0]=5<=b[0]&&47==k[T+0]&&!(k[T+4]>>5),E[0]=b[0];_=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],r=r[0],0!=_)break;if(4294967286<m.Ja)return 3;if(null==c||v||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){_=7;break}c=l,f=g,v=s,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],k=[0],S=[0],y(E=new x,e,r,i),me(E,b,k,S)?(null!=c&&(c[0]=b[0]),null!=f&&(f[0]=k[0]),null!=v&&(v[0]=S[0]),e=1):e=0):e=0}else{if(10>i){_=7;break}c=g,null==e||10>i||!Ke(e,r+3,i-3)?e=0:(f=e[r+0]|e[r+1]<<8|e[r+2]<<16,v=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=m.Ja||!v||!e?e=0:(l&&(l[0]=v),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],p&&(h[0]!=l||d[0]!=g))return 3;null!=u&&(u[0]=m,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-i));break}return 0==_||7==_&&p&&null==u?(null!=s&&(s[0]|=null!=m.na&&0<m.na.length),null!=o&&(o[0]=l),null!=a&&(a[0]=g),0):_}function Dn(e,t,n){var r=t.width,i=t.height,o=0,a=0,s=r,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,l=e.bd,o=e.v,a=e.j,11>n||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=l||o+s>r||a+l>i))return 0;if(t.v=o,t.j=a,t.va=o+s,t.o=a+l,t.U=s,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!D(s,l,n=[e.ib],o=[e.hb]))return 0;t.ib=n[0],t.hb=o[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Fn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function jn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,s=-2&n.v,l=-2&n.j;if(0>s||0>l||0>=i||0>=a||s+i>e||l+a>t)return 2;e=i,t=a}if(n.da){if(!D(e,t,i=[n.ib],a=[n.hb]))return 2;e=i[0],t=a[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Dr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){s=a=i=t=0;var h=(l=c*Vi[e])*u;if(11>e||(a=(u+1)/2*(t=(c+1)/2),12==e&&(s=(i=c)*u)),null==(u=o(h+2*a+s))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=h):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=h,c.f=u,c.N=0+h,c.Ab=t,c.Cd=a,c.ea=u,c.W=0+h+a,c.Db=t,c.Ed=a,12==e&&(c.F=u,c.J=0+h+2*a),c.Tc=s,c.lb=i)}if(t=1,i=r.S,a=r.width,s=r.height,i>=Dr&&13>i)if(11>i)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(s-1)+a<=e.size,t&=l>=a*Vi[i],t&=null!=e.eb;else{e=r.f.kb,l=(a+1)/2,h=(s+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var d=Math.abs(e.Db),p=Math.abs(e.lb),f=p*(s-1)+a;t&=c*(s-1)+a<=e.Fd,t&=u*(h-1)+l<=e.Cd,t=(t&=d*(h-1)+l<=e.Ed)&c>=a&u>=l&d>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=p>=a,t&=f<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Fn(r)),e}var zn=64,Bn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Un=24,Vn=32,Zn=8,qn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];z("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return U(U(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return U(e,t[n-1])},e.Predictor7=function(e,t,n){return U(e,t[n+0])},e.Predictor8=function(e,t,n){return U(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return U(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return U(U(e,t[n-1]),U(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=q(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+q(r>>16&255,e>>16&255,t>>16&255)+q(r>>8&255,e>>8&255,t>>8&255)+q(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(V((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|V((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|V((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|V((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(Z((e=U(e,t[n+0]))>>24&255,r>>24&255)<<24|Z(e>>16&255,r>>16&255)<<16|Z(e>>8&255,r>>8&255)<<8|Z(e>>0&255,r>>0&255))>>>0};var Gn=e.PredictorAdd0;e.PredictorAdd1=G,z("Predictor2","PredictorAdd2"),z("Predictor3","PredictorAdd3"),z("Predictor4","PredictorAdd4"),z("Predictor5","PredictorAdd5"),z("Predictor6","PredictorAdd6"),z("Predictor7","PredictorAdd7"),z("Predictor8","PredictorAdd8"),z("Predictor9","PredictorAdd9"),z("Predictor10","PredictorAdd10"),z("Predictor11","PredictorAdd11"),z("Predictor12","PredictorAdd12"),z("Predictor13","PredictorAdd13");var Wn=e.PredictorAdd2;K("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),K("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Hn,Xn=e.ColorIndexInverseTransform,Kn=e.MapARGB,Yn=e.VP8LColorIndexInverseTransformAlpha,Jn=e.MapAlpha,Qn=e.VP8LPredictorsAdd=[];Qn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var $n,er,tr,nr,rr,ir,or,ar,sr,lr,cr,ur,hr,dr,pr,fr,mr,gr,yr,vr,_r,br,xr,wr,Sr,Er,Ar,Tr,Cr=o(511),kr=o(2041),Ir=o(225),Pr=o(767),Lr=0,Mr=kr,Or=Ir,Nr=Pr,Rr=Cr,Dr=0,Fr=1,jr=2,zr=3,Br=4,Ur=5,Vr=6,Zr=7,qr=8,Gr=9,Wr=10,Hr=[2,3,7],Xr=[3,3,11],Kr=[280,256,256,256,40],Yr=[0,1,1,1,0],Jr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$r=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ei=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ai=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ci=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ui=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hi=[],di=[],pi=[],fi=1,mi=2,gi=[],yi=[];vn("UpsampleRgbLinePair",En,3),vn("UpsampleBgrLinePair",An,3),vn("UpsampleRgbaLinePair",Pn,4),vn("UpsampleBgraLinePair",In,4),vn("UpsampleArgbLinePair",kn,4),vn("UpsampleRgba4444LinePair",Cn,2),vn("UpsampleRgb565LinePair",Tn,2);var vi=e.UpsampleRgbLinePair,_i=e.UpsampleBgrLinePair,bi=e.UpsampleRgbaLinePair,xi=e.UpsampleBgraLinePair,wi=e.UpsampleArgbLinePair,Si=e.UpsampleRgba4444LinePair,Ei=e.UpsampleRgb565LinePair,Ai=16,Ti=1<<Ai-1,Ci=-227,ki=482,Ii=6,Pi=(256<<Ii)-1,Li=0,Mi=o(256),Oi=o(256),Ni=o(256),Ri=o(256),Di=o(ki-Ci),Fi=o(ki-Ci);Ln("YuvToRgbRow",En,3),Ln("YuvToBgrRow",An,3),Ln("YuvToRgbaRow",Pn,4),Ln("YuvToBgraRow",In,4),Ln("YuvToArgbRow",kn,4),Ln("YuvToRgba4444Row",Cn,2),Ln("YuvToRgb565Row",Tn,2);var ji=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zi=[0,2,8],Bi=[8,7,6,4,4,2,2,2,1,1,1,1],Ui=1;this.WebPDecodeRGBA=function(e,n,r,i,o){var a=Fr,s=new nn,l=new ae;s.ba=l,l.S=a,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,h=new se;if(null==h||null==e)var d=2;else t(null!=h),d=Rn(e,n,r,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=d?c=0:(null!=c&&(c[0]=h.width[0]),null!=u&&(u[0]=h.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=o&&(o[0]=l.height);e:{if(i=new We,(o=new rn).data=e,o.w=n,o.ha=r,o.kd=1,n=[0],t(null!=o),(0==(e=Rn(o.data,o.w,o.ha,null,null,null,n,null,o))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=s),i.data=o.data,i.w=o.w+o.offset,i.ha=o.ha-o.offset,i.put=pe,i.ac=de,i.bc=fe,i.ma=s,o.xa){if(null==(e=ke())){s=1;break e}if(function(e,n){var r=[0],i=[0],o=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,y(e.m,n.data,n.w,n.ha),!me(e.m,r,i,o)){e.a=3;break t}if(e.xb=mi,n.width=r[0],n.height=i[0],!Ie(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(n=jn(i.width,i.height,s.Oa,s.ba))){t:{i=e;n:for(;;){if(null==i){i=0;break t}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(r=i.l)),t(null!=(o=r.ma)),0!=i.xb){if(i.ca=o.ba,i.tb=o.tb,t(null!=i.ca),!Dn(o.Oa,r,zr)){i.a=2;break n}if(!Pe(i,r.width))break n;if(r.da)break n;if((r.da||re(i.ca.S))&&yn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&yn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!O(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!Te(i,i.V,i.Ba,i.c,i.i,r.o,we))break n;o.Dc=i.Ma,i=1;break t}t(0!=i.a),i=0}i=!i}i&&(n=e.a)}else n=e.a}else{if(null==(e=new He)){s=1;break e}if(e.Fa=o.na,e.P=o.P,e.qc=o.Sa,Ye(e,i)){if(0==(n=jn(i.width,i.height,s.Oa,s.ba))){if(e.Aa=0,r=s.Oa,t(null!=(o=e)),null!=r){if(0<(c=0>(c=r.Md)?0:100<c?255:255*c/100)){for(u=h=0;4>u;++u)12>(d=o.pb[u]).lc&&(d.ia=c*Bi[0>d.lc?0:d.lc]>>3),h|=d.ia;h&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=r.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}$e(e,i)||(n=e.a)}}else n=e.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Fn(s.ba))}s=n}a=0!=s?null:11>a?l.f.RGBA.eb:l.f.kb.y}else a=null;return a};var Vi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]<<0|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]<<0|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var d=[0],p=[0],f=[],m=new l,g=e,y=function(e,t){var n={},r=0,i=!1,o=0,a=0;if(n.frames=[],!function(e,t,n,r){for(var i=0;i<4;i++)if(e[t+i]!="RIFF".charCodeAt(i))return!0;return!1}(e,t)){var s,l;for(h(e,t+=4),t+=8;t<e.length;){var d=c(e,t),p=h(e,t+=4);t+=4;var f=p+(1&p);switch(d){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(y=n.frames[r]).src_off=i?a:t-8,y.src_size=o+p+8,r++,i&&(i=!1,o=0,a=0);break;case"VP8X":(y=n.header={}).feature_flags=e[t];var m=t+4;y.canvas_width=1+u(e,m),m+=3,y.canvas_height=1+u(e,m),m+=3;break;case"ALPH":i=!0,o=f+8,a=t-8;break;case"ANIM":(y=n.header).bgcolor=h(e,t),m=t+4,y.loop_count=(s=e)[(l=m)+0]<<0|s[l+1]<<8,m+=2;break;case"ANMF":var g,y;(y=n.frames[r]={}).offset_x=2*u(e,t),t+=3,y.offset_y=2*u(e,t),t+=3,y.width=1+u(e,t),t+=3,y.height=1+u(e,t),t+=3,y.duration=u(e,t),t+=3,g=e[t++],y.dispose=1&g,y.blend=g>>1&1}"ANMF"!=d&&(t+=f)}return n}}(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,_=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,d=[v.canvas_height],p=[v.canvas_width];for(var b=0;b<_.length&&0!=_[b].blend;b++);}var x=_[0],w=m.WebPDecodeRGBA(g,x.src_off,x.src_size,p,d);x.rgba=w,x.imgwidth=p[0],x.imgheight=d[0];for(var S=0;S<p[0]*d[0]*4;S++)f[S]=w[S];return this.width=p,this.height=d,this.data=f,this}!function(e){var t=function(t,r,l,c){var u=4,h=o;switch(c){case e.image_compression.FAST:u=1,h=i;break;case e.image_compression.MEDIUM:u=6,h=a;break;case e.image_compression.SLOW:u=9,h=s}var d=ph(t=n(t,r,l,h),{level:u});return e.__addimage__.arrayBufferToBinaryString(d)},n=function(e,t,n,r){for(var i,o,a,s=e.length/t,l=new Uint8Array(e.length+s),h=c(),d=0;d<s;d+=1){if(a=d*t,i=e.subarray(a,a+t),r)l.set(r(i,n,o),a+d);else{for(var p,f=h.length,m=[];p<f;p+=1)m[p]=h[p](i,n,o);var g=u(m.concat());l.set(m[g],a+d)}o=i}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,r=[],i=e.length;r[0]=1;for(var o=0;o<i;o+=1)n=e[o-t]||0,r[o+1]=e[o]-n+256&255;return r},o=function(e,t,n){var r,i=[],o=e.length;i[0]=2;for(var a=0;a<o;a+=1)r=n&&n[a]||0,i[a+1]=e[a]-r+256&255;return i},a=function(e,t,n){var r,i,o=[],a=e.length;o[0]=3;for(var s=0;s<a;s+=1)r=e[s-t]||0,i=n&&n[s]||0,o[s+1]=e[s]+256-(r+i>>>1)&255;return o},s=function(e,t,n){var r,i,o,a,s=[],c=e.length;s[0]=4;for(var u=0;u<c;u+=1)r=e[u-t]||0,i=n&&n[u]||0,o=n&&n[u-t]||0,a=l(r,i,o),s[u+1]=e[u]-a+256&255;return s},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),o=Math.abs(e+t-n-n);return r<=i&&r<=o?e:i<=o?t:n},c=function(){return[r,i,o,a,s]},u=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,i,o){var a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new op(n)).imgData,s=l.bits,a=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){f=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(f*l.colors),m=new Uint8Array(f);var S,E=l.pixelBitlength-l.bits;for(_=0,b=0;_<f;_++){for(v=p[_],S=0;S<E;)g[b++]=v>>>S&255,S+=l.bits;m[_]=v>>>S&255}}if(16===l.bits){f=(p=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(f*(32/l.pixelBitlength)*l.colors),m=new Uint8Array(f*(32/l.pixelBitlength)),y=l.colors>1,_=0,b=0;for(var A=0;_<f;)v=p[_++],g[b++]=v>>>0&255,y&&(g[b++]=v>>>16&255,v=p[_++],g[b++]=v>>>0&255),m[A++]=v>>>16&255;s=8}o!==e.image_compression.NONE?(n=t(g,l.width*l.colors,l.colors,o),d=t(m,l.width,1,o)):(n=g,d=m,x=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,h=l.palette,l.transparency.indexed)){var T=l.transparency.indexed,C=0;for(_=0,f=T.length;_<f;++_)C+=T[_];if((C/=255)===f-1&&-1!==T.indexOf(0))c=[T.indexOf(0)];else if(C!==f){for(p=l.decodePixels(),m=new Uint8Array(p.length),_=0,f=p.length;_<f;_++)m[_]=T[p[_]];d=t(m,l.width,1)}}var k=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return x===this.decode.FLATE_DECODE&&(w="/Predictor "+k+" "),w+="/Colors "+u+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:i,data:n,index:r,filter:x,decodeParameters:w,transparency:c,palette:h,sMask:d,predictor:k,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:a}}}}(Xh.API),function(e){e.processGIF89A=function(t,n,r,i){var o=new ap(t),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},u=new lp(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(Xh.API),cp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cp.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){yh.log("bit decode error:"+e)}},cp.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}0!==n&&(this.pos+=4-n)}},cp.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},cp.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==e&&(this.pos+=4-e)}},cp.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,c=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},cp.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=i*this.width*4+4*o;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},cp.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},cp.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},cp.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var o=new cp(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new lp(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(Xh.API),up.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var o=new up(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new lp(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(Xh.API),Xh.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=r[c],h=r[c+1],d=r[c+2],p=r[c+3];o[s++]=u,o[s++]=h,o[s++]=d,a[l++]=p}var f=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:f,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Xh.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},ep=Xh.API,tp=ep.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=!1!==t.doKerning,d=0,p=e.length,f=0,m=s[0]||l,g=[];for(n=0;n<p;n++)r=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(d=h&&"object"===(0,xu.Z)(c[r])&&!isNaN(parseInt(c[r][f],10))?c[r][f]/u:0,g.push((s[r]||m)/l+d)),f=r;return g},np=ep.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return ep.processArabic&&(e=ep.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:tp.apply(this,arguments).reduce((function(e,t){return e+t}),0)},rp=function(e,t,n,r){for(var i=[],o=0,a=e.length,s=0;o!==a&&s+t[o]<n;)s+=t[o],o++;i.push(e.slice(0,o));var l=o;for(s=0;o!==a;)s+t[o]>r&&(i.push(e.slice(l,o)),s=0,l=o),s+=t[o],o++;return l!==o&&i.push(e.slice(l,o)),i},ip=function(e,t,n){n||(n={});var r,i,o,a,s,l,c,u=[],h=[u],d=n.textIndent||0,p=0,f=0,m=e.split(" "),g=tp.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),v=[];m.map((function(e){(e=e.split(/\s*\n/)).length>1?v=v.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):v.push(e[0])})),m=v,l=np.apply(this,[y,n])}for(o=0,a=m.length;o<a;o++){var _=0;if(r=m[o],l&&"\n"==r[0]&&(r=r.substr(1),_=1),d+p+(f=(i=tp.apply(this,[r,n])).reduce((function(e,t){return e+t}),0))>t||_){if(f>t){for(s=rp.apply(this,[r,i,t-(d+p),t]),u.push(s.shift()),u=[s.pop()];s.length;)h.push([s.shift()]);f=i.slice(r.length-(u[0]?u[0].length:0)).reduce((function(e,t){return e+t}),0)}else u=[r];h.push(u),d=f+l,p=g}else u.push(r),d+=p+f,p=g}return c=l?function(e,t){return(t?y:"")+e.join(" ")}:function(e){return e.join(" ")},h.map(c)},ep.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=r.length;s<l;s++)c=c.concat(ip.apply(this,[r[s],a,o]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var o=function(e){return"0x"+parseInt(e,10).toString(16)},a=e.__fontmetrics__.compress=function(e){var t,n,i,s,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=o(c).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(i=o(t).slice(3),s="-"):(i=o(t).slice(2),s=""),i=s+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==(0,xu.Z)(t))throw new Error("Don't know what to do with value type "+(0,xu.Z)(t)+".");i=a(t)}l.push(n+i)}return l.push("}"),l.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,i,o,a={},s=1,l=a,c=[],u="",h="",d=e.length-1,p=1;p<d;p+=1)"'"==(o=e[p])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(o):"{"==o?(c.push([l,i]),l={},i=void 0):"}"==o?((r=c.pop())[0][r[1]]=l,i=void 0,l=r[0]):"-"==o?s=-1:void 0===i?n.hasOwnProperty(o)?(u+=n[o],i=parseInt(u,16)*s,s=1,u=""):u+=o:n.hasOwnProperty(o)?(h+=n[o],l[i]=parseInt(h,16)*s,s=1,i=void 0,h=""):h+=o;return a},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=c.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Xh.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===o.existsFileInVFS(i.postScriptName)?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(xh(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(Xh),function(e){function t(){return(mh.canvg?Promise.resolve(mh.canvg):n.e(249).then(n.bind(n,5249))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Xh.API.addSvgAsImage=function(e,n,r,i,o,a,s,l){if(isNaN(n)||isNaN(r))throw yh.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw yh.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=o;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return t().then((function(t){return t.fromString(u,e,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(h)})).then((function(){d.addImage(c.toDataURL("image/jpeg",1),n,r,i,o,s,l)}))}}(),Xh.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Xh.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,u=0,h=0;function d(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=s.length;for(h=0;h<p;h+=1)n[s[h]].value=n[s[h]].defaultValue,n[s[h]].explicitSet=!1}if("object"===(0,xu.Z)(e))for(i in e)if(o=e[i],d(s,i)&&void 0!==o){if("boolean"===n[i].type&&"boolean"==typeof o)n[i].value=o;else if("name"===n[i].type&&d(n[i].valueSet,o))n[i].value=o;else if("integer"===n[i].type&&Number.isInteger(o))n[i].value=o;else if("array"===n[i].type){for(c=0;c<o.length;c+=1)if(r=!0,1===o[c].length&&"number"==typeof o[c][0])l.push(String(o[c]-1));else if(o[c].length>1){for(u=0;u<o[c].length;u+=1)"number"!=typeof o[c][u]&&(r=!1);!0===r&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+t.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Xh.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],a=0,s=e.length;a<s;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(i[4-n.length],n)}return o.join("")},r=function(e){var t,n,r,i,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,s=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;a<s;a++)t=n[a],r.length>=100&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,o=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var h=o();a({data:c,addLength1:!0,objectId:h}),i("endobj");var d=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var p=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Vh(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var f=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+Vh(n.fontName)),i("/FontDescriptor "+p+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+d+" 0 R"),i("/BaseFont /"+Vh(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+f+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,o=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);var u=o();a({data:l,addLength1:!0,objectId:u}),i("endobj");var h=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var d=o();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+u+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+Vh(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=o();for(var p=0;p<n.metadata.hmtx.widths.length;p++)n.metadata.hmtx.widths[p]=parseInt(n.metadata.hmtx.widths[p]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+Vh(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,o=e.y,a=e.options||{},s=e.mutex||{},l=s.pdfEscape,c=s.activeFontKey,u=s.fonts,h=c,d="",p=0,f="",m=u[h].encoding;if("Identity-H"!==u[h].encoding)return{text:r,x:i,y:o,options:a,mutex:s};for(f=r,h=c,Array.isArray(r)&&(f=r[0]),p=0;p<f.length;p+=1)u[h].metadata.hasOwnProperty("cmap")&&(t=u[h].metadata.cmap.unicode.codeMap[f[p].charCodeAt(0)]),t||f[p].charCodeAt(0)<256&&u[h].metadata.hasOwnProperty("Unicode")?d+=f[p]:d+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===m?g=l(d,h).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===m&&(g=n(d,u[h])),s.isHex=!0,{text:g,x:i,y:o,options:a,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var o=0;for(o=0;o<t.length;o+=1)Array.isArray(t[o])&&3===t[o].length?n.push([i(Object.assign({},r,{text:t[o][0]})).text,t[o][1],t[o][2]]):n.push(i(Object.assign({},r,{text:t[o]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(Xh),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Xh.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,o,a,s,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var v=function(e){var t=e.charCodeAt(),n=t>>8,r=p[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},_=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=v(e.charAt(n))))return!1;if("R"===t)return!0}return!1},b=function(e,t,a,s){var l,c,u,h,d=t[s];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(l=a[s-1])&&"AN"!==l||"EN"!==(c=t[s+1])&&"AN"!==c?d="N":g&&(c="AN"),d=c===l?c:"N";break;case"ES":d="EN"===(l=s>0?a[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){d="EN";break}if(g){d="N";break}for(u=s+1,h=t.length;u<h&&"ET"===t[u];)u++;d=u<h&&"EN"===t[u]?"EN":"N";break;case"NSM":if(i&&!o){for(h=t.length,u=s+1;u<h&&"NSM"===t[u];)u++;if(u<h){var p=e[s],f=p>=1425&&p<=2303||64286===p;if(l=t[u],f&&("R"===l||"AL"===l)){d="R";break}}}d=s<1||"B"===(l=t[s-1])?"N":a[s-1];break;case"B":g=!1,n=!0,d=y;break;case"S":r=!0,d="N"}return d},x=function(e,t,n){var r=e.split("");return n&&w(r,n,{hiLevel:y}),r.reverse(),t&&t.reverse(),r.join("")},w=function(e,t,i){var o,a,s,l,c,p=-1,f=e.length,m=0,_=[],x=y?h:u,w=[];for(g=!1,n=!1,r=!1,a=0;a<f;a++)w[a]=v(e[a]);for(s=0;s<f;s++){if(c=m,_[s]=b(e,w,_,s),o=240&(m=x[c][d[_[s]]]),m&=15,t[s]=l=x[m][5],o>0)if(16===o){for(a=p;a<s;a++)t[a]=1;p=-1}else p=-1;if(x[m][6])-1===p&&(p=s);else if(p>-1){for(a=p;a<s;a++)t[a]=l;p=-1}"B"===w[s]&&(t[s]=0),i.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=y;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=y}}(w,t,f)},S=function(e,t,r,i,o){if(!(o.hiLevel<e)){if(1===e&&1===y&&!n)return t.reverse(),void(r&&r.reverse());for(var a,s,l,c,u=t.length,h=0;h<u;){if(i[h]>=e){for(l=h+1;l<u&&i[l]>=e;)l++;for(c=h,s=l-1;c<s;c++,s--)a=t[c],t[c]=t[s],t[s]=a,r&&(a=r[c],r[c]=r[s],r[s]=a);h=l}h++}}},E=function(e,t,n){var r=e.split(""),i={hiLevel:y};return n||(n=[]),w(r,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=f.indexOf(e[i]))>=0&&(e[i]=f[r+1])}(r,n,i),S(2,r,t,n,i),S(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===o&&(o=_(e)),void 0===s&&(s=_(e))}(e,t),i||!a||s)if(i&&a&&o^s)y=o?1:0,e=x(e,t,n);else if(!i&&a&&s)y=o?1:0,e=E(e,t,n),e=x(e,t);else if(!i||o||a||s){if(i&&!a&&o^s)e=x(e,t),o?(y=0,e=E(e,t,n)):(y=1,e=E(e,t,n),e=x(e,t));else if(i&&o&&!a&&s)y=1,e=E(e,t,n),e=x(e,t);else if(!i&&!a&&o^s){var r=l;o?(y=1,e=E(e,t,n),y=0,l=!1,e=E(e,t,n),l=r):(y=0,e=E(e,t,n),e=x(e,t),y=1,l=!1,e=E(e,t,n),l=r,e=x(e,t))}}else y=0,e=E(e,t,n);else y=o?1:0,e=E(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,a=e.isOutputVisual,o=e.isInputRtl,s=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=(e.x,e.y,e.options||{}),i=(e.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var o=0;for(i=[],o=0;o<t.length;o+=1)"[object Array]"===Object.prototype.toString.call(t[o])?i.push([n.doBidiReorder(t[o][0]),t[o][1],t[o][2]]):i.push([n.doBidiReorder(t[o])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Xh),Xh.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new dp(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Lp(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new pp(this.contents),this.head=new gp(this),this.name=new Sp(this),this.cmap=new vp(this),this.toUnicode={},this.hhea=new _p(this),this.maxp=new Ep(this),this.hmtx=new Ap(this),this.post=new xp(this),this.os2=new bp(this),this.loca=new Pp(this),this.glyf=new Cp(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,o,a;for(o=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var hp,dp=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,o,a,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*o+256*a+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),pp=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,o,a,s,l,c,u,h,d,p,f;for(f in d=Object.keys(t).length,s=Math.log(2),u=16*Math.floor(Math.log(d)/s),o=Math.floor(u/s),c=16*d-u,(r=new dp).writeInt(this.scalarType),r.writeShort(d),r.writeShort(u),r.writeShort(o),r.writeShort(c),i=16*d,l=r.pos+i,a=null,p=[],t)for(h=t[f],r.writeString(f),r.writeInt(e(h)),r.writeInt(l),r.writeInt(h.length),p=p.concat(h),"head"===f&&(a=l),l+=h.length;l%4;)p.push(0),l++;return r.write(p),n=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=Tp.call(e);e.length%4;)e.push(0);for(r=new dp(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),fp={}.hasOwnProperty,mp=function(e,t){for(var n in t)fp.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};hp=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var gp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var t;return(t=new dp).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},t}(),yp=function(){function e(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(d=e.readUInt16(),h=d/2,e.pos+=6,i=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,f=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],s=t=0;0<=r?t<r:t>r;s=0<=r?++t:--t)n.push(e.readUInt16());return n}(),s=g=0,v=i.length;g<v;s=++g)for(m=i[s],n=y=p=f[s];p<=m?y<=m:y>=m;n=p<=m?++y:--y)0===c[s]?o=n+l[s]:0!==(o=a[c[s]/2+(n-p)-(h-s)]||0)&&(o+=l[s]),this.codeMap[n]=65535&o}e.pos=u}return e.encode=function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,S,E,A,T,C,k,I,P,L,M,O,N,R,D,F,j,z,B,U,V,Z,q,G,W,H;switch(I=new dp,o=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(f=0,m=function(){var e=[];for(p=0;p<256;++p)e.push(0);return e}(),y={0:0},i={},P=0,N=o.length;P<N;P++)null==y[q=e[r=o[P]]]&&(y[q]=++f),i[r]={old:e[r],new:y[e[r]]},m[r]=y[e[r]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(m),{charMap:i,subtable:I.data,maxGlyphID:f+1};case"unicode":for(C=[],u=[],v=0,y={},n={},g=l=null,L=0,R=o.length;L<R;L++)null==y[b=e[r=o[L]]]&&(y[b]=++v),n[r]={old:b,new:y[b]},a=y[b]-r,null!=g&&a===l||(g&&u.push(g),C.push(r),l=a),g=r;for(g&&u.push(g),u.push(65535),C.push(65535),A=2*(E=C.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,w=2*E-S,s=[],x=[],d=[],p=M=0,D=C.length;M<D;p=++M){if(T=C[p],c=u[p],65535===T){s.push(0),x.push(0);break}if(T-(k=n[T].new)>=32768)for(s.push(0),x.push(2*(d.length+E-p)),r=O=T;T<=c?O<=c:O>=c;r=T<=c?++O:--O)d.push(n[r].new);else s.push(k-T),x.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*E+2*d.length),I.writeUInt16(0),I.writeUInt16(A),I.writeUInt16(S),I.writeUInt16(h),I.writeUInt16(w),V=0,F=u.length;V<F;V++)r=u[V],I.writeUInt16(r);for(I.writeUInt16(0),Z=0,j=C.length;Z<j;Z++)r=C[Z],I.writeUInt16(r);for(G=0,z=s.length;G<z;G++)a=s[G],I.writeUInt16(a);for(W=0,B=x.length;W<B;W++)_=x[W],I.writeUInt16(_);for(H=0,U=d.length;H<U;H++)f=d[H],I.writeUInt16(f);return{charMap:n,subtable:I.data,maxGlyphID:v+1}}},e}(),vp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="cmap",t.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new yp(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},t.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=yp.encode(e,t),(r=new dp).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},t}(),_p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),bp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),xp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="post",t.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},t}(),wp=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Sp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="name",t.prototype.parse=function(e){var t,n,r,i,o,a,s,l,c,u,h;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(s={},i=c=0,u=n.length;c<u;i=++c)r=n[i],e.pos=r.offset,l=e.readString(r.length),o=new wp(l,r),null==s[h=r.nameID]&&(s[h]=[]),s[r.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},t}(),Ep=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Ap=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="hmtx",t.prototype.parse=function(e){var t,n,r,i,o,a,s;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],t=o=0;0<=r?o<r:o>r;t=0<=r?++o:--o)s.push(this.widths.push(n));return s},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Tp=[].slice,Cp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var t,n,r,i,o,a,s,l,c,u;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,o=(a=new dp(t.read(r))).readShort(),l=a.readShort(),u=a.readShort(),s=a.readShort(),c=a.readShort(),this.cache[e]=-1===o?new Ip(a,l,u,s,c):new kp(a,o,l,u,s,c),this.cache[e]))},t.prototype.encode=function(e,t,n){var r,i,o,a,s;for(o=[],i=[],a=0,s=t.length;a<s;a++)r=e[t[a]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},t}(),kp=function(){function e(e,t,n,r,i,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Ip=function(){function e(e,t,n,r,i){var o,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new dp(Tp.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Pp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mp(t,hp),t.prototype.tag="loca",t.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<t.length&&t[i]==o){++i,n[o]=r;var a=this.offsets[o],s=this.offsets[o+1]-a;s>0&&(r+=s)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},t}(),Lp=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,o,a,s;for(r={},o=0,a=e.length;o<a;o++)r[i=e[o]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in s=this.glyphsFor(t))n=s[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g;for(r in n=vp.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),d={0:0},g=n.charMap)d[(s=g[r]).old]=s.new;for(p in h=n.maxGlyphID,o)p in d||(d[p]=h++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(d),u=Object.keys(c).sort((function(e,t){return e-t})),f=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(c[a]);return n}(),i=this.font.glyf.encode(o,f,d),l=this.font.loca.encode(i.offsets,f),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();Xh.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var e,i,o;for(o=[],e=0,i=n.length;e<i;e++)r=n[e],o.push(t.convert(r));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+t.convert(a));return o.push(">>"),o.join("\n")}return""+n},t}();const Mp=Xh;const Op=t.createContext({});function Np(e){return(0,dt.Z)("MuiList",e)}(0,ht.Z)("MuiList",["root","padding","dense","subheader"]);const Rp=["children","className","component","dense","disablePadding","subheader"],Dp=(0,lt.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})})),Fp=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiList"}),{children:a,className:l,component:c="ul",dense:u=!1,disablePadding:h=!1,subheader:d}=o,p=(0,ot.Z)(o,Rp),f=t.useMemo((()=>({dense:u})),[u]),m=(0,e.Z)({},o,{component:c,dense:u,disablePadding:h}),g=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,st.Z)(o,Np,t)})(m);return(0,s.jsx)(Op.Provider,{value:f,children:(0,s.jsxs)(Dp,(0,e.Z)({as:c,className:(0,at.default)(g.root,l),ref:r,ownerState:m},p,{children:[d,a]}))})}));var jp=n(3066),zp=n(272),Bp=n(9926),Up=n(2995);function Vp(e){return(0,dt.Z)("MuiListItem",e)}const Zp=(0,ht.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function qp(e){return(0,dt.Z)("MuiListItemButton",e)}const Gp=(0,ht.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Wp(e){return(0,dt.Z)("MuiListItemSecondaryAction",e)}(0,ht.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);const Hp=["className"],Xp=(0,lt.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},n.disableGutters&&{right:0})})),Kp=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiListItemSecondaryAction"}),{className:a}=o,l=(0,ot.Z)(o,Hp),c=t.useContext(Op),u=(0,e.Z)({},o,{disableGutters:c.disableGutters}),h=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,st.Z)(r,Wp,n)})(u);return(0,s.jsx)(Xp,(0,e.Z)({className:(0,at.default)(h.root,a),ownerState:u,ref:r},l))}));Kp.muiName="ListItemSecondaryAction";const Yp=Kp,Jp=["className"],Qp=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],$p=(0,lt.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!r.disablePadding&&(0,e.Z)({paddingTop:8,paddingBottom:8},r.dense&&{paddingTop:4,paddingBottom:4},!r.disableGutters&&{paddingLeft:16,paddingRight:16},!!r.secondaryAction&&{paddingRight:48}),!!r.secondaryAction&&{["& > .".concat(Gp.root)]:{paddingRight:48}},{["&.".concat(Zp.focusVisible)]:{backgroundColor:(n.vars||n).palette.action.focus},["&.".concat(Zp.selected)]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity),["&.".concat(Zp.focusVisible)]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},["&.".concat(Zp.disabled)]:{opacity:(n.vars||n).palette.action.disabledOpacity}},"flex-start"===r.alignItems&&{alignItems:"flex-start"},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},r.button&&{transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Zp.selected,":hover")]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}},r.hasSecondaryAction&&{paddingRight:48})})),ef=(0,lt.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),tf=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiListItem"}),{alignItems:a="center",autoFocus:l=!1,button:c=!1,children:u,className:h,component:d,components:p={},componentsProps:f={},ContainerComponent:m="li",ContainerProps:{className:g}={},dense:y=!1,disabled:v=!1,disableGutters:_=!1,disablePadding:b=!1,divider:x=!1,focusVisibleClassName:w,secondaryAction:S,selected:E=!1}=o,A=(0,ot.Z)(o.ContainerProps,Jp),T=(0,ot.Z)(o,Qp),C=t.useContext(Op),k=t.useMemo((()=>({dense:y||C.dense||!1,alignItems:a,disableGutters:_})),[a,C.dense,y,_]),I=t.useRef(null);(0,Bp.Z)((()=>{l&&I.current&&I.current.focus()}),[l]);const P=t.Children.toArray(u),L=P.length&&(0,zp.Z)(P[P.length-1],["ListItemSecondaryAction"]),M=(0,e.Z)({},o,{alignItems:a,autoFocus:l,button:c,dense:k.dense,disabled:v,disableGutters:_,disablePadding:b,divider:x,hasSecondaryAction:L,selected:E}),O=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:a,disablePadding:s,divider:l,hasSecondaryAction:c,selected:u}=e,h={root:["root",i&&"dense",!a&&"gutters",!s&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,st.Z)(h,Vp,r)})(M),N=(0,Up.Z)(I,r),R=p.Root||$p,D=f.root||{},F=(0,e.Z)({className:(0,at.default)(O.root,D.className,h),disabled:v},T);let j=d||"li";return c&&(F.component=d||"div",F.focusVisibleClassName=(0,at.default)(Zp.focusVisible,w),j=Wt.Z),L?(j=F.component||d?j:"div","li"===m&&("li"===j?j="div":"li"===F.component&&(F.component="div")),(0,s.jsx)(Op.Provider,{value:k,children:(0,s.jsxs)(ef,(0,e.Z)({as:m,className:(0,at.default)(O.container,g),ref:N,ownerState:M},A,{children:[(0,s.jsx)(R,(0,e.Z)({},D,!(0,jp.Z)(R)&&{as:j,ownerState:(0,e.Z)({},M,D.ownerState)},F,{children:P})),P.pop()]}))})):(0,s.jsx)(Op.Provider,{value:k,children:(0,s.jsxs)(R,(0,e.Z)({},D,{as:j,ref:N,ownerState:M},!(0,jp.Z)(R)&&{ownerState:(0,e.Z)({},M,D.ownerState)},F,{children:[P,S&&(0,s.jsx)(Yp,{children:S})]}))})})),nf=tf;function rf(e){return(0,dt.Z)("MuiListItemText",e)}const of=(0,ht.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),af=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],sf=(0,lt.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(of.primary)]:t.primary},{["& .".concat(of.secondary)]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},n.primary&&n.secondary&&{marginTop:6,marginBottom:6},n.inset&&{paddingLeft:56})})),lf=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiListItemText"}),{children:a,className:l,disableTypography:c=!1,inset:u=!1,primary:h,primaryTypographyProps:d,secondary:p,secondaryTypographyProps:f}=o,m=(0,ot.Z)(o,af),{dense:g}=t.useContext(Op);let y=null!=h?h:a,v=p;const _=(0,e.Z)({},o,{disableTypography:c,inset:u,primary:!!y,secondary:!!v,dense:g}),b=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,a={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,st.Z)(a,rf,t)})(_);return null==y||y.type===Dt||c||(y=(0,s.jsx)(Dt,(0,e.Z)({variant:g?"body2":"body1",className:b.primary,component:null!=d&&d.variant?void 0:"span",display:"block"},d,{children:y}))),null==v||v.type===Dt||c||(v=(0,s.jsx)(Dt,(0,e.Z)({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},f,{children:v}))),(0,s.jsxs)(sf,(0,e.Z)({className:(0,at.default)(b.root,l),ownerState:_,ref:r},m,{children:[y,v]}))}));function cf(e){return(0,dt.Z)("MuiListItemAvatar",e)}(0,ht.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const uf=["className"],hf=(0,lt.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({minWidth:56,flexShrink:0},"flex-start"===n.alignItems&&{marginTop:8})})),df=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiListItemAvatar"}),{className:a}=o,l=(0,ot.Z)(o,uf),c=t.useContext(Op),u=(0,e.Z)({},o,{alignItems:c.alignItems}),h=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,st.Z)(r,cf,n)})(u);return(0,s.jsx)(hf,(0,e.Z)({className:(0,at.default)(h.root,a),ownerState:u,ref:r},l))}));var pf=n(9461),ff=n.n(pf);function mf(e){const{children:t,value:n,index:r,...i}=e;return(0,s.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...i,children:n===r&&(0,s.jsx)("div",{children:t})})}function gf(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function yf(e){const{children:t,value:n,index:r,...i}=e;return(0,s.jsx)("div",{role:"TabPanel_PB",hidden:n!==r,id:"simple-tabpanel_pb-".concat(r),"aria-labelledby":"simple-tab_pb-".concat(r),...i,children:n===r&&(0,s.jsx)("div",{children:t})})}function vf(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel_pb-".concat(e)}}function _f(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel_dv-".concat(e)}}function bf(e){const{children:t,value:n,index:r,...i}=e;return(0,s.jsx)("div",{role:"TabPanel_DV",hidden:n!==r,id:"simple-tabpanel_dv-".concat(r),"aria-labelledby":"simple-tab_dv-".concat(r),...i,children:n===r&&(0,s.jsx)("div",{children:t})})}const xf=e=>{const r=(0,t.useRef)(null),i=(0,t.useRef)(null),[o,a]=(0,t.useState)(1),[l,c]=(0,t.useState)(1),[u,h]=(0,t.useState)(1),[d,p]=(0,t.useState)(1),[f,m]=t.useState(0),[g,y]=t.useState(0),[v,_]=t.useState(0),[b,x]=t.useState(0),[w,S]=(0,t.useState)(""),[E,A]=(0,t.useState)(!0),T=()=>{A(!E)},[C,k]=(0,t.useState)("mapbox://styles/mapbox/satellite-streets-v12"),[I,P]=(0,t.useState)(!0),L=n(9739),M=n(9415),[O,N]=(0,t.useState)(!1),[R,D]=(0,t.useState)(0),[F,j]=(0,t.useState)([]),[z,B]=(0,t.useState)([]),[U,V]=(0,t.useState)([]),[Z,q]=(0,t.useState)([]),[G,W]=(0,t.useState)(),[H,X]=(0,t.useState)([]),[K,Y]=(0,t.useState)(""),[J,Q]=(0,t.useState)(""),[$,ee]=(0,t.useState)([]),[te,ne]=(0,t.useState)([]),[re,ie]=(0,t.useState)([]),[oe,ae]=(0,t.useState)(),[se,le]=(0,t.useState)(400),[ce,ue]=(0,t.useState)(800),[he,de]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)(!1),[me,ge]=(0,t.useState)(0),[ye,ve]=(0,t.useState)(0),_e=()=>{de(!1),fe(!1)},be=e=>{if(he){fe(!0),console.log(pe);const t=Math.max(50,se+e.clientX-me),n=Math.max(50,ce+e.clientY-ye);le(t),ue(n),ge(e.clientX),ve(e.clientY)}},[xe,we]=(0,t.useState)({x:0,y:84}),[Se,Ee]=(0,t.useState)(!1),[Ae,Te]=(0,t.useState)(1);const[Ce,ke]=(0,t.useState)([]),[Ie,Pe]=(0,t.useState)(),[Le,Me]=(0,t.useState)([]),[Oe,Ne]=(0,t.useState)([]),[Re,De]=(0,t.useState)(),[Fe,je]=(0,t.useState)("csv"),[ze,Be]=(0,t.useState)(null),[Ue,Ve]=(0,t.useState)([]),[Ze,qe]=(0,t.useState)(null),[Ge,We]=(0,t.useState)([]),[He,Xe]=(0,t.useState)(),[Ke,Ye]=(0,t.useState)(""),[Je,Qe]=(0,t.useState)(""),[$e,et]=(0,t.useState)(""),[tt,rt]=(0,t.useState)(""),[it,ot]=(0,t.useState)(""),[at,st]=(0,t.useState)(""),[lt,ct]=(0,t.useState)(0),[ut,ht]=(0,t.useState)([]),[dt,pt]=(0,t.useState)(""),[ft,mt]=(0,t.useState)(""),[gt,yt]=(0,t.useState)(""),[vt,_t]=(0,t.useState)(""),[bt,xt]=(0,t.useState)(""),[wt,St]=(0,t.useState)(""),[Et,At]=(0,t.useState)(""),[Tt,Ct]=(0,t.useState)(""),[kt,It]=(0,t.useState)(""),[Pt,Lt]=(0,t.useState)(""),[Mt,Ot]=(0,t.useState)(""),[Nt,Rt]=(0,t.useState)(""),[Dt,Ft]=(0,t.useState)(""),[jt,zt]=(0,t.useState)("table"),[Bt,Ut]=(0,t.useState)("person"),[Vt,Zt]=(0,t.useState)(!1),[qt,Wt]=(0,t.useState)(""),[Ht,Xt]=(0,t.useState)(""),[Kt,Yt]=(0,t.useState)(""),[Jt,Qt]=(0,t.useState)(0),[$t,en]=(0,t.useState)([]),[tn,nn]=(0,t.useState)(""),[rn,on]=(0,t.useState)(""),[an,sn]=(0,t.useState)(),[ln,cn]=(0,t.useState)(""),[un,hn]=(0,t.useState)(""),[dn,pn]=(0,t.useState)(""),[fn,mn]=(0,t.useState)(""),[gn,yn]=(0,t.useState)(""),[vn,_n]=(0,t.useState)(""),[bn,xn]=(0,t.useState)("");new Mp("l","pt","a4");(0,t.useEffect)((()=>{J&&(Ge.map(((e,t)=>{e.layername===J&&Xe(e.data)})),Te(1),!function(e,t){if(0!=e.length){let n=0;return e.map(((e,r)=>{e.name===t&&(console.log("welcome"),n++)})),console.log(n),0!=n}return!1}(re,J)?H.map(((e,t)=>{if(e.name===J){const t=Object.keys(e.data.features[0].properties);ne(t),ee([]);e.data.features.map(((e,n)=>{const r=e.properties,i=t.reduce(((e,t,n)=>(e[t]=r[t],e)),{});ee((e=>[...e,i]))}));N(!1)}})):(console.log("hello"),re.map(((e,t)=>{e.name===J&&(console.log(e.data),ee(e.data))}))))}),[J]),(0,t.useEffect)((()=>{0==O&&(console.log(re),ie((e=>[...e,{data:$,name:J}])))}),[O]);const wn=()=>{pt(""),mt(""),yt(""),_t(""),xt(""),St(""),At(""),Ct(""),It(""),Lt(""),Ot(""),Rt(""),Ft("")},Sn=()=>{nn(""),on(""),sn(0),cn(""),hn(""),pn(""),mn(""),yn(""),_n(""),xn("")},En=e=>{V((t=>[...t,e])),console.log(R)};js(r,I,(e=>{e.geometry,e.properties;H.map(((e,t)=>{e.name})),ee((t=>[...t,e.properties]))}),(e=>{ae(e);const t=$.map(((t,n)=>n===e.id?e.data:t));ee(t)}),(e=>{const t=[...$];t.splice(e,1),ee(t)}),C,K,J,oe,G,H,w,E,0,He);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{position:"absolute",marginTop:"6%",marginLeft:"2%",zIndex:"1",display:"flex",flexDirection:"column"},children:[(0,s.jsx)("button",{className:"toolButton",onClick:()=>{c(l?0:1)},children:"Layer"}),(0,s.jsx)("button",{className:"toolButton",onClick:()=>{a(o?0:1)},children:"Data"}),(0,s.jsx)("button",{className:"toolButton",onClick:()=>{h(u?0:1)},children:"Draw"}),(0,s.jsx)("button",{className:"toolButton",onClick:()=>{p(d?0:1)},children:"P&B"})]}),(0,s.jsxs)("div",{style:l?{display:"none"}:{position:"absolute",marginTop:"7.5%",marginLeft:"5%",zIndex:"2",opacity:"0.75",background:"transparent",padding:"8px",borderRadius:"20px"},children:[(0,s.jsx)("button",{className:"geoStyleBtn",onClick:()=>k("mapbox://styles/mapbox/light-v11"),children:"Light"}),(0,s.jsx)("button",{className:"geoStyleBtn",onClick:()=>k("mapbox://styles/mapbox/dark-v11"),children:"Dark"}),(0,s.jsx)("button",{className:"geoStyleBtn",onClick:()=>k("mapbox://styles/mapbox/streets-v12"),children:"Street"}),(0,s.jsx)("button",{className:"geoStyleBtn",onClick:()=>k("mapbox://styles/mapbox/satellite-streets-v12"),children:"Satelitte"})]}),(0,s.jsx)("div",{style:u?{display:"none"}:{position:"absolute",marginTop:"11.7%",marginLeft:"5%",zIndex:"2",opacity:"0.75",width:"13.5%",background:"black",padding:"8px",height:"300px",borderRadius:"10px",justifyContent:"space-between",display:"flex"},children:(0,s.jsxs)(nt,{sx:{width:"100%"},children:[(0,s.jsx)(nt,{sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsxs)(_l,{value:f,onChange:(e,t)=>{m(t)},"aria-label":"basic tabs example",style:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)(zs.Z,{label:"Rect",...gf(0),style:{color:"white",minWidth:"0px"},onClick:()=>{S("RECT"),T()}}),(0,s.jsx)(zs.Z,{label:"Circle",...gf(1),style:{color:"white",minWidth:"0px"},onClick:()=>{S("Circle"),T()}}),(0,s.jsx)(zs.Z,{label:"poly",...gf(2),style:{color:"white",minWidth:"0px"},onClick:()=>{S("Polygon"),T()}})]})}),(0,s.jsx)(mf,{value:f,index:0,children:(0,s.jsxs)("div",{className:"drawTab",children:[(0,s.jsx)("div",{style:{paddingBottom:"10px"},children:"Properties"}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"point",style:{borderColor:"white",width:"100%"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"width",style:{borderColor:"white",width:"100%"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"height",style:{borderColor:"white",width:"100%"}})})]})}),(0,s.jsx)(mf,{value:f,index:1,children:(0,s.jsxs)("div",{className:"drawTab",children:[(0,s.jsx)("div",{style:{paddingBottom:"10px"},children:"Properties"}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"point",style:{borderColor:"white",width:"100%"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"radius",style:{borderColor:"white",width:"100%"}})})]})}),(0,s.jsx)(mf,{value:f,index:2,children:(0,s.jsxs)("div",{className:"drawTab",children:[(0,s.jsx)("div",{style:{paddingBottom:"10px"},children:"Properties"}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"count",style:{borderColor:"white",width:"100%"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("textarea",{placeholder:"polygon vertex (X,Y) coordinate",style:{borderColor:"white",height:"85px",width:"100%"}})})]})}),(0,s.jsx)("button",{className:"geoStyleBtn",style:{marginLeft:"20px"},children:"Search"})]})}),(0,s.jsx)(ff(),{position:xe,onDrag:(e,t)=>{we({x:t.x,y:t.y})},disabled:pe,children:(0,s.jsxs)("div",{style:{position:"fixed",right:"0%",zIndex:"1",width:se,height:Se?0:ce,opacity:.75,background:"black",transition:"height 0.5s ease"},children:[(0,s.jsx)("div",{children:(0,s.jsx)("button",{style:{position:"absolute",width:"40px",height:"30px",marginLeft:"-40px",top:"50%",background:"black",opacity:"0.75",color:"white"},onClick:()=>{Ee(!Se)},children:Se?"show":"hide"})}),(0,s.jsxs)(nt,{sx:{width:"100%"},style:{display:Se?"none":"block",height:Se?0:ce},onMouseDown:e=>{console.log(e.clientX+":"+e.clientY);e.clientX>se-20&&e.clientY>ce-20?(de(!0),fe(!0),ge(e.clientX),ve(e.clientY)):de(!1)},onMouseMove:be,onMouseUp:_e,children:[(0,s.jsx)(nt,{sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsxs)(_l,{value:v,onChange:(e,t)=>{_(t)},"aria-label":"basic tabs example",children:[(0,s.jsx)(zs.Z,{label:"Layer",..._f(0),style:{color:"white",width:"50%"},onClick:()=>{zt("layer")}}),(0,s.jsx)(zs.Z,{label:"Data",..._f(1),style:{color:"white",width:"50%"},onClick:()=>{zt("table")}})]})}),(0,s.jsx)(bf,{value:v,index:0,children:(0,s.jsx)(Fp,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},style:{background:"black",padding:"7%",maxWidth:"100%"},children:Ce.map(((e,t)=>(0,s.jsxs)(nf,{alignItems:"flex-start",onClick:()=>Q(e),className:"list-item ".concat(J==e&&"active"),style:{textAlign:"center",alignItems:"center",color:"white"},children:[(0,s.jsx)(df,{children:ze&&(0,s.jsx)(Gt,{style:{width:"100%",height:"120px",borderRadius:"10px"},alt:"Remy Sharp",src:Ue[t]})}),(0,s.jsx)(lf,{style:{marginLeft:"15px"},primary:e})]})))})}),(0,s.jsx)(bf,{value:v,index:1,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{color:"white",textAlign:"center",padding:"20px"},children:"Data Table"}),(0,s.jsxs)("div",{className:"",style:{position:"absolute",right:"0px",zIndex:"1",background:"black",opacity:"0.75",color:"white",height:.85*ce-50,padding:"5px",width:"100%"},children:[(0,s.jsxs)("table",{className:"large-2",style:{textAlign:"center",width:"100%",overflowY:"scroll",display:"block",height:"88%",borderBottom:"0.01em solid white"},children:[(0,s.jsx)("thead",{style:{top:"0",position:"sticky",background:"gray"},children:(0,s.jsx)("tr",{style:{},children:te.map(((e,t)=>(0,s.jsx)("td",{style:{textAlign:"center"},children:e})))})}),(0,s.jsx)("tbody",{children:function(e,t){const n=15*(t-1),r=Math.min(n+15,e.length);return function(e){return e.map(((e,t)=>(0,s.jsx)("tr",{style:{},onClick:()=>{ae({data:e,id:t})},className:"markerTable ".concat((null===oe||void 0===oe?void 0:oe.data)==e&&"active"),children:te.map(((t,n)=>(0,s.jsx)("td",{style:{textAlign:"center",padding:"10px"},children:e[t]})))})))}(e.slice(n,r))}($,Ae)})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",position:"absolute",bottom:"0",marginLeft:"35%",width:"30%"},children:[(0,s.jsx)("label",{className:"csv",id:"prev-button",onClick:function(){Ae>1&&Te(Ae-1)},children:"prev"}),(0,s.jsx)("label",{className:"csv",children:Ae}),(0,s.jsx)("label",{className:"csv",id:"next-button",onClick:function(){var e;console.log(Ae),Ae<(e=$,Math.ceil(e.length/15))&&Te(Ae+1)},children:"next"})]})})]})]})}),(0,s.jsx)("div",{style:{width:20,height:20,background:"white",position:"absolute",bottom:"0",right:"0",zIndex:"10"}})]})]})}),(0,s.jsxs)("div",{className:"PDdata",style:d?{display:"none"}:{position:"absolute",right:"25%",marginTop:"7%",zIndex:"1",width:"50%",height:"650px",backgroundColor:"black",display:"flex",flexDirection:"row",borderRadius:"10px",opacity:"0.75"},children:[(0,s.jsx)("div",{style:{width:"30%",height:"100%",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px",borderRight:"0.1rem solid white"},children:(0,s.jsxs)(nt,{sx:{width:"100%"},children:[(0,s.jsx)(nt,{sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsxs)(_l,{value:g,onChange:(e,t)=>{y(t)},"aria-label":"basic tabs example",children:[(0,s.jsx)(zs.Z,{label:"Person",...vf(0),style:{color:"white",width:"50%"},onClick:()=>{Ut("person")}}),(0,s.jsx)(zs.Z,{label:"company",...vf(1),style:{color:"white",width:"50%"},onClick:()=>{Ut("company")}})]})}),(0,s.jsx)(yf,{value:g,index:0,children:(0,s.jsxs)("div",{className:"drawTab",children:[(0,s.jsx)("div",{style:{paddingBottom:"10px"}}),(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)("input",{type:"text",placeholder:"First Name",value:Ke,onChange:e=>{Ye(e.target.value)},style:{borderColor:"white",width:"50%"}}),(0,s.jsx)("input",{type:"text",placeholder:"Last Name",value:Je,onChange:e=>{Qe(e.target.value)},style:{marginLeft:"5px",width:"50%",borderColor:"white"}})]}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"Address",value:$e,onChange:e=>{et(e.target.value)},style:{width:"100%",borderColor:"white"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"Email",value:tt,onChange:e=>rt(e.target.value),style:{width:"100%",borderColor:"white"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"Phone",value:it,onChange:e=>ot(e.target.value),style:{width:"100%",borderColor:"white"}})}),(0,s.jsxs)("div",{style:{textAlign:"center",color:"white"},children:["Search Result : ",lt]}),(0,s.jsx)("div",{className:"large-2",style:{width:"100%",height:"300px",border:"0.01em solid white",borderRadius:"5px",overflowY:"scroll"},children:(0,s.jsx)("ul",{style:{width:"100%",height:"100%"},children:ut.map(((e,t)=>(0,s.jsx)("li",{style:{padding:"10px",borderRadius:"10px"},onClick:()=>{(e=>{pt(""+e.id),mt(""+e.full_name),yt(""+e.location_street_address),_t(""+e.personal_emails),xt(""+e.phone_numbers),St(""+e.facebook_id),At(""+e.facebook_url),Ct(""+e.facebook_username),It(""+e.linkedin_id),Lt(""+e.linkedin_url),Ot(""+e.linkedin_username),Rt(""+e.twitter_url),Ft(""+e.twitter_username)})(e)},children:e.first_name+" "+e.last_name+" "+e.birth_date})))})})]})}),(0,s.jsx)(yf,{value:g,index:1,children:(0,s.jsxs)("div",{className:"drawTab",children:[(0,s.jsx)("div",{style:{paddingBottom:"10px"}}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"Name",value:qt,onChange:e=>{Wt(e.target.value)},style:{width:"100%",borderColor:"white"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"Ticker",value:Kt,onChange:e=>{Yt(e.target.value)},style:{width:"100%",borderColor:"white"}})}),(0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("input",{type:"text",placeholder:"Website",value:Ht,onChange:e=>{Xt(e.target.value)},style:{width:"100%",borderColor:"white"}})}),(0,s.jsxs)("div",{style:{textAlign:"center",color:"white"},children:["Search Result : ",lt]}),(0,s.jsx)("div",{className:"large-2",style:{width:"100%",height:"300px",border:"0.01em solid white",borderRadius:"5px",overflowY:"scroll"},children:(0,s.jsx)("ul",{style:{width:"100%",height:"100%"},children:$t.map(((e,t)=>(0,s.jsx)("li",{style:{padding:"10px",borderRadius:"10px"},onClick:()=>{(e=>{var t;nn(e.id),on(e.name),sn(e.founded),cn(e.industry),hn(e.website),pn(e.summary),mn(e.linkedin_url),yn(e.facebook_url),_n(e.twitter_url),xn(null===(t=e.profiles)||void 0===t?void 0:t.at(4))})(e)},children:e.id})))})})]})}),(0,s.jsx)("button",{className:"geoStyleBtn",style:{marginLeft:"20px"},onClick:()=>{"person"===Bt?(()=>{wn();const e=function(e,t,n,r,i){var o="SELECT * FROM person WHERE ";return o+=""==e?"":"first_name = '".concat(e,"' "),o+=""==t?"":"AND last_name = '".concat(t,"' "),o+=""==r?"":"AND personal_emails = '".concat(r,"' "),o+=""==i?"":"AND phone_numbers = '".concat(i,"' "),(o+=""==n?"":"AND location_street_address = '".concat(n,"' ")).replace("WHERE AND","WHERE")}(Ke,Je,$e,tt,it);console.log(e),bu.person.search.sql({searchQuery:e,size:5}).then((e=>{console.log(e),ct(e.total),ht([]),ht(e.data)})).catch((e=>{ct(0),ht([]),wn(),console.log(e)}))})():"company"===Bt&&((e,t,n)=>{Sn();const r=function(e,t,n){var r="SELECT * FROM company WHERE ";return r+=""==e?"":"name = '".concat(e,"' "),r+=""==t?"":"AND ticker = '".concat(t,"' "),(r+=""==n?"":"AND website = '".concat(n,"' ")).replace("WHERE AND","WHERE")}(t,e,n);console.log(r),bu.company.search.sql({searchQuery:r,size:5}).then((e=>{Qt(e.total),en(e.data)})).catch((e=>{Qt(0),Sn(),console.log(e)}))})(Kt,qt,Ht)},children:"Search"}),(0,s.jsx)("button",{className:"geoStyleBtn",style:{marginLeft:"20px"},onClick:()=>{(()=>{const e=new Mp("p","mm",[1e3,750]);e.setFont("Inter-Regular","normal");const t=document.getElementsByClassName("PBData")[0];t.style.color="black",e.html(t,{async callback(e){e.save("report.pdf"),t.style.color="white"}})})()},children:"Download"})]})}),(0,s.jsx)("div",{style:{width:"70%",height:"100%",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:(0,s.jsx)("div",{className:"PBData",style:{color:"white",height:"100%"},children:"person"===Bt?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:"24px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",paddingTop:"10px"},children:"Identity Details"}),(0,s.jsxs)("div",{style:{padding:"20px"},ref:i,children:[(0,s.jsxs)("div",{style:{fontWeight:"bold",textAlign:"center",padding:"5px",borderBottom:"0.05em solid",borderTop:"0.05em solid"},children:["PERSONAL INFORMATION",(0,s.jsx)("br",{})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"15px"},children:[(0,s.jsxs)("div",{style:{width:"10%",marginLeft:"3%"},children:["ID:",(0,s.jsx)("br",{}),"Name:",(0,s.jsx)("br",{}),"Address:",(0,s.jsx)("br",{}),"Emails:",(0,s.jsx)("br",{}),"Phone:"]}),(0,s.jsxs)("div",{style:{width:"85%",marginLeft:"25px"},children:[(0,s.jsx)("div",{children:dt}),(0,s.jsx)("div",{children:ft}),(0,s.jsx)("div",{children:gt}),(0,s.jsx)("div",{style:{width:"100%",overflowX:"hidden"},children:vt}),(0,s.jsx)("div",{style:{width:"100%",overflowX:"hidden"},children:bt})]})]}),(0,s.jsxs)("div",{style:{fontWeight:"bold",textAlign:"center",padding:"5px",borderBottom:"0.05em solid",borderTop:"0.05em solid"},children:["SOCIAL MEDIA INFORMATION",(0,s.jsx)("br",{})]}),(0,s.jsxs)("div",{style:{padding:"15px"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{marginLeft:"3%"},children:"Facebook:"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,s.jsxs)("div",{style:{width:"10%",marginLeft:"5%",padding:"10px",fontSize:"14px"},children:["ID:",(0,s.jsx)("br",{}),"URL:",(0,s.jsx)("br",{}),"Username:"]}),(0,s.jsxs)("div",{style:{padding:"10px",marginLeft:"25px",fontSize:"14px"},children:[(0,s.jsx)("div",{children:wt}),(0,s.jsx)("div",{children:Et}),(0,s.jsx)("div",{children:Tt})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{marginLeft:"3%"},children:"LinkedIn:"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,s.jsxs)("div",{style:{width:"10%",marginLeft:"5%",padding:"10px",fontSize:"14px"},children:["ID:",(0,s.jsx)("br",{}),"URL:",(0,s.jsx)("br",{}),"Username:"]}),(0,s.jsxs)("div",{style:{padding:"10px",marginLeft:"25px",fontSize:"14px"},children:[(0,s.jsx)("div",{children:kt}),(0,s.jsx)("div",{children:Pt}),(0,s.jsx)("div",{children:Mt})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{marginLeft:"3%"},children:"Twitter:"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,s.jsxs)("div",{style:{width:"10%",marginLeft:"5%",padding:"10px",fontSize:"14px"},children:["URL:",(0,s.jsx)("br",{}),"Username:"]}),(0,s.jsxs)("div",{style:{padding:"10px",marginLeft:"25px",fontSize:"14px"},children:[(0,s.jsx)("div",{children:Nt}),(0,s.jsx)("div",{children:Dt})]})]})]})]})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:"24px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",paddingTop:"10px"},children:"Company Details."}),(0,s.jsxs)("div",{style:{padding:"20px"},ref:i,children:[(0,s.jsxs)("div",{style:{fontWeight:"bold",textAlign:"center",padding:"5px",borderBottom:"0.05em solid",borderTop:"0.05em solid"},children:["BUSINESS INFORMATION",(0,s.jsx)("br",{})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"15px"},children:[(0,s.jsxs)("div",{style:{width:"10%",marginLeft:"3%"},children:["ID:",(0,s.jsx)("br",{}),"Name:",(0,s.jsx)("br",{}),"Founded:",(0,s.jsx)("br",{}),"Industry:",(0,s.jsx)("br",{}),"Website:",(0,s.jsx)("br",{}),"Summary:"]}),(0,s.jsxs)("div",{style:{marginLeft:"25px"},children:[(0,s.jsx)("div",{children:tn}),(0,s.jsx)("div",{children:rn}),(0,s.jsx)("div",{children:an}),(0,s.jsx)("div",{children:ln}),(0,s.jsx)("div",{children:un}),(0,s.jsx)("div",{children:dn})]})]}),(0,s.jsxs)("div",{style:{fontWeight:"bold",textAlign:"center",padding:"5px",borderBottom:"0.05em solid",borderTop:"0.05em solid"},children:["SOCIAL MEDIA INFORMATION",(0,s.jsx)("br",{})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"15px"},children:[(0,s.jsxs)("div",{style:{width:"10%",marginLeft:"3%"},children:["Linkdlin:",(0,s.jsx)("br",{}),"Facebook:",(0,s.jsx)("br",{}),"Twitter:",(0,s.jsx)("br",{}),"Crunch:"]}),(0,s.jsxs)("div",{style:{marginLeft:"25px"},children:[(0,s.jsx)("div",{children:fn}),(0,s.jsx)("div",{children:gn}),(0,s.jsx)("div",{children:vn}),(0,s.jsx)("div",{children:bn})]})]})]})]})})})]}),(0,s.jsx)("div",{style:O?{position:"absolute",zIndex:"10",textAlign:"center",width:"100%",height:"90%",display:"block"}:{display:"none"},children:(0,s.jsx)("img",{src:Ka.images.loading,style:{marginTop:"10%"}})}),(0,s.jsxs)("div",{className:"",style:o?{display:"none"}:{position:"absolute",right:"25%",marginTop:"7%",zIndex:"2",width:"50%",height:"650px",display:"flex",backgroundColor:"black",borderRadius:"10px",opacity:"0.75"},children:[(0,s.jsx)("div",{style:{width:"30%",height:"100%",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px",borderRight:"0.1rem solid white"},children:(0,s.jsx)("div",{className:"PBData",style:{color:"white",height:"100%"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:"24px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",paddingTop:"10px"},children:"Layers"}),(0,s.jsxs)("div",{className:"drawTab",children:[(0,s.jsx)("div",{style:{width:"100%",height:"450px",border:"0.1rem solid white",borderRadius:"10px"},children:(0,s.jsx)("ul",{style:{width:"100%",height:"100%"},children:Ce.map(((e,t)=>(0,s.jsx)("li",{style:{padding:"10px",borderRadius:"10px"},onClick:()=>Pe(e),className:"list-item ".concat(Ie==e&&"active"),children:e})))})}),(0,s.jsx)("div",{style:{position:"absolute",display:"flex",flexDirection:"row",justifyContent:"space-evenly",paddingTop:"5px",zIndex:"1",width:"25%",marginBottom:"4%",bottom:"0"},children:(0,s.jsx)("label",{className:"csv",onClick:()=>{(()=>{if(N(!0),Ve((e=>[...e,ze])),We((e=>[...e,{data:Ze,layername:K}])),"csv"===Fe){if(ke((e=>[...e,K])),P(!I),G){const e={name:K,data:G};X((t=>[...t,e]))}Q(K)}else"manual"===Fe&&(ke((e=>[...e,K])),Q(K),P(!I))})()},children:"Add Layer"})})]})]})})}),(0,s.jsx)("div",{style:{width:"70%",height:"100%",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"},children:(0,s.jsx)("div",{className:"PBData",style:{color:"white",height:"100%"},children:(0,s.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,s.jsx)("div",{style:{fontSize:"24px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",paddingTop:"10px"},children:"Preview Data"}),(0,s.jsxs)("table",{className:"large-2",style:{width:"100%",height:"25%",display:"table-cell",overflow:"scroll",marginBottom:"0px",borderBottom:"0.01em solid white"},children:[(0,s.jsx)("thead",{style:{background:"gray",position:"sticky",top:"0"},children:(0,s.jsx)("tr",{style:{},children:Z.map(((e,t)=>(0,s.jsx)("td",{style:{textAlign:"center"},children:e})))})}),(0,s.jsx)("tbody",{style:{},children:U.map(((e,t)=>(0,s.jsx)("tr",{style:{},children:Z.map(((t,n)=>(0,s.jsx)("td",{style:{textAlign:"center",padding:"10px"},children:e[t]})))})))})]}),(0,s.jsx)("div",{style:{fontSize:"20px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",paddingTop:"10px"},children:"Options"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",height:"60%",padding:"10px",justifyContent:"space-around"},children:[(0,s.jsxs)("div",{style:{width:"48%",border:"0.01em solid white"},children:[(0,s.jsx)("div",{style:{fontSize:"16px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",padding:"5px",borderBottom:"0.01em solid white"},children:"Create Data Field"}),(0,s.jsxs)(nt,{sx:{width:"100%"},style:{height:"86%"},children:[(0,s.jsx)(nt,{sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsxs)(_l,{value:b,onChange:(e,t)=>{x(t)},"aria-label":"basic tabs example",children:[(0,s.jsx)(zs.Z,{label:"From CSV",...vf(0),style:{color:"white",width:"50%"},onClick:()=>{je("csv")}}),(0,s.jsx)(zs.Z,{label:"Manual",...vf(1),style:{color:"white",width:"50%"},onClick:()=>{je("manual")}})]})}),(0,s.jsx)(yf,{value:b,index:0,children:(0,s.jsxs)("div",{className:"drawTab",style:{height:"395px",padding:"10px"},children:[(0,s.jsx)("div",{style:{display:"flex",height:"56%",width:"90%",transform:"translateX(5%)",marginBottom:"10px",borderRadius:"10px",border:"0.01em solid white",flexDirection:"column",padding:"27px"},children:Z.map(((e,t)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:(0,s.jsx)("div",{children:e})})})))}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:(0,s.jsxs)("label",{className:"csv",children:[(0,s.jsx)("input",{id:"Image",type:"file",onChange:e=>{const t=e.target.files[0];N(!0),M.readAsText(t,((e,t)=>{L.csv2geojson(t,{delimiter:"auto"},((e,t)=>{if(e)N(!1);else{W([]),W(t),V([]);const e=Object.keys(t.features[0].properties);q(e);t.features.map(((n,r)=>{const i=n.properties;e.reduce(((e,t,n)=>(e[t]=i[t],e)),{});D(100*r/t.features.length)}));N(!1)}}))}))}}),"From CSV"]})})]})}),(0,s.jsx)(yf,{value:b,index:1,children:(0,s.jsxs)("div",{className:"drawTab",style:{height:"395px",padding:"10px"},children:[(0,s.jsx)("div",{style:{display:"flex",width:"90%",transform:"translateX(5%)"},children:(0,s.jsx)("input",{type:"text",value:Re,onChange:e=>{var t;t=e.target.value,De(t)},placeholder:"Enter a new field name",style:{width:"100%",borderColor:"white"}})}),(0,s.jsx)("div",{style:{display:"flex",height:"45%",width:"90%",transform:"translateX(5%)",marginBottom:"10px",borderRadius:"10px",border:"0.01em solid white",flexDirection:"column",padding:"27px"},children:Oe.map(((e,t)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,s.jsx)("div",{children:e}),(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)("button",{style:{width:"100%"},children:"E"}),(0,s.jsx)("button",{style:{width:"100%"},children:"D"})]})]})})))}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[(0,s.jsx)("label",{className:"csv",style:{width:"30%"},onClick:()=>{Re&&Ne((e=>[...e,Re]))},children:"Add"}),(0,s.jsx)("label",{className:"csv",style:{width:"30%"},onClick:()=>{Ne([])},children:"Clear"}),(0,s.jsx)("label",{className:"csv",style:{width:"30%"},onClick:()=>{(()=>{const e={};Oe.forEach((t=>{const[n,r]=t.split(":");e[n]="Empty"}));const t={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[45,45]},properties:e}]};W([]),W(t),V([]);const n=Object.keys(t.features[0].properties);q(n),t.features.map((e=>{const t=e.properties,r=n.reduce(((e,n,r)=>(e[n]=t[n],e)),{});return En(r),r}))})()},children:"Accept"})]})]})})]})]}),(0,s.jsxs)("div",{style:{width:"48%",border:"0.01em solid white"},children:[(0,s.jsx)("div",{style:{fontSize:"16px",lineHeight:"45px",width:"100%",height:"50px",textAlign:"center",padding:"5px",borderBottom:"0.01em solid white"},children:"Properties"}),(0,s.jsx)("div",{style:{display:"flex",marginTop:"20px",width:"90%",transform:"translateX(5%)"},children:(0,s.jsx)("input",{type:"text",placeholder:"Enter a layer name",value:K,onChange:e=>{Y(e.target.value)},style:{width:"100%",borderColor:"white"}})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[(0,s.jsxs)("label",{className:"csv",children:[(0,s.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files;if(t&&t.length>0){const e=new FileReader;e.onload=()=>{Be(e.result)},e.readAsDataURL(t[0])}}}),"Layer Image"]}),(0,s.jsxs)("label",{className:"csv",children:[(0,s.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files;if(t&&t.length>0){const e=new FileReader;e.onload=()=>{qe(e.result)},e.readAsDataURL(t[0])}}}),"Marker Image"]})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",height:"30%"},children:[(0,s.jsx)("label",{className:"csv",children:ze&&(0,s.jsx)("img",{src:ze,alt:"Selected file",style:{height:"100%",width:"100%"}})}),(0,s.jsx)("label",{className:"csv",children:Ze&&(0,s.jsx)("img",{src:Ze,alt:"Selected file",style:{height:"100%",width:"100%"}})})]})]})]})]})})})]}),(0,s.jsx)("div",{ref:r,className:"map",style:{padding:"0px !important",height:"100%",width:"100%"},onMouseUp:_e,onMouseMove:be})]})};function wf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Sf(e){return!!e&&!!e[hm]}function Ef(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===dm}(e)||Array.isArray(e)||!!e[um]||!!(null===(t=e.constructor)||void 0===t?void 0:t[um])||Lf(e)||Mf(e))}function Af(e,t,n){void 0===n&&(n=!1),0===Tf(e)?(n?Object.keys:pm)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Tf(e){var t=e[hm];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Lf(e)?2:Mf(e)?3:0}function Cf(e,t){return 2===Tf(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kf(e,t){return 2===Tf(e)?e.get(t):e[t]}function If(e,t,n){var r=Tf(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Pf(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Lf(e){return am&&e instanceof Map}function Mf(e){return sm&&e instanceof Set}function Of(e){return e.o||e.t}function Nf(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=fm(e);delete t[hm];for(var n=pm(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Rf(e,t){return void 0===t&&(t=!1),Ff(e)||Sf(e)||!Ef(e)||(Tf(e)>1&&(e.set=e.add=e.clear=e.delete=Df),Object.freeze(e),t&&Af(e,(function(e,t){return Rf(t,!0)}),!0)),e}function Df(){wf(2)}function Ff(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function jf(e){var t=mm[e];return t||wf(18,e),t}function zf(e,t){mm[e]||(mm[e]=t)}function Bf(){return im}function Uf(e,t){t&&(jf("Patches"),e.u=[],e.s=[],e.v=t)}function Vf(e){Zf(e),e.p.forEach(Gf),e.p=null}function Zf(e){e===im&&(im=e.l)}function qf(e){return im={p:[],l:im,h:e,m:!0,_:0}}function Gf(e){var t=e[hm];0===t.i||1===t.i?t.j():t.O=!0}function Wf(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||jf("ES5").S(t,e,r),r?(n[hm].P&&(Vf(t),wf(4)),Ef(e)&&(e=Hf(t,e),t.l||Kf(t,e)),t.u&&jf("Patches").M(n[hm].t,e,t.u,t.s)):e=Hf(t,n,[]),Vf(t),t.u&&t.v(t.u,t.s),e!==cm?e:void 0}function Hf(e,t,n){if(Ff(t))return t;var r=t[hm];if(!r)return Af(t,(function(i,o){return Xf(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Kf(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Nf(r.k):r.o;Af(3===r.i?new Set(i):i,(function(t,o){return Xf(e,r,i,t,o,n)})),Kf(e,i,!1),n&&e.u&&jf("Patches").R(r,n,e.u,e.s)}return r.o}function Xf(e,t,n,r,i,o){if(Sf(i)){var a=Hf(e,i,o&&t&&3!==t.i&&!Cf(t.D,r)?o.concat(r):void 0);if(If(n,r,a),!Sf(a))return;e.m=!1}if(Ef(i)&&!Ff(i)){if(!e.h.F&&e._<1)return;Hf(e,i),t&&t.A.l||Kf(e,i)}}function Kf(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Rf(t,n)}function Yf(e,t){var n=e[hm];return(n?Of(n):e)[t]}function Jf(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Qf(e){e.P||(e.P=!0,e.l&&Qf(e.l))}function $f(e){e.o||(e.o=Nf(e.t))}function em(e,t,n){var r=Lf(t)?jf("MapSet").N(t,n):Mf(t)?jf("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Bf(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=gm;n&&(i=[r],o=ym);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):jf("ES5").J(t,n);return(n?n.A:Bf()).p.push(r),r}function tm(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Nf(e)}function nm(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[hm];return gm.get(t,e)},set:function(t){var n=this[hm];gm.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][hm];if(!i.P)switch(i.i){case 5:r(i)&&Qf(i);break;case 4:n(i)&&Qf(i)}}}function n(e){for(var t=e.t,n=e.k,r=pm(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==hm){var a=t[o];if(void 0===a&&!Cf(t,o))return!0;var s=n[o],l=s&&s[hm];if(l?l.t!==a:!Pf(s,a))return!0}}var c=!!t[hm];return r.length!==pm(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};zf("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=fm(n);delete o[hm];for(var a=pm(o),s=0;s<a.length;s++){var l=a[s];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:Bf(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,hm,{value:o,writable:!0}),i},S:function(e,n,i){i?Sf(n)&&n[hm].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[hm];if(n){var i=n.t,o=n.k,a=n.D,s=n.i;if(4===s)Af(o,(function(t){t!==hm&&(void 0!==i[t]||Cf(i,t)?a[t]||e(o[t]):(a[t]=!0,Qf(n)))})),Af(i,(function(e){void 0!==o[e]||Cf(o,e)||(a[e]=!1,Qf(n))}));else if(5===s){if(r(n)&&(Qf(n),a.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)a[l]=!1;else for(var c=i.length;c<o.length;c++)a[c]=!0;for(var u=Math.min(o.length,i.length),h=0;h<u;h++)o.hasOwnProperty(h)||(a[h]=!0),void 0===a[h]&&e(o[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var rm,im,om="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),am="undefined"!=typeof Map,sm="undefined"!=typeof Set,lm="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,cm=om?Symbol.for("immer-nothing"):((rm={})["immer-nothing"]=!0,rm),um=om?Symbol.for("immer-draftable"):"__$immer_draftable",hm=om?Symbol.for("immer-state"):"__$immer_state",dm=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),pm="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fm=Object.getOwnPropertyDescriptors||function(e){var t={};return pm(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},mm={},gm={get:function(e,t){if(t===hm)return e;var n=Of(e);if(!Cf(n,t))return function(e,t,n){var r,i=Jf(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Ef(r)?r:r===Yf(e.t,t)?($f(e),e.o[t]=em(e.A.h,r,e)):r},has:function(e,t){return t in Of(e)},ownKeys:function(e){return Reflect.ownKeys(Of(e))},set:function(e,t,n){var r=Jf(Of(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Yf(Of(e),t),o=null==i?void 0:i[hm];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Pf(n,i)&&(void 0!==n||Cf(e.t,t)))return!0;$f(e),Qf(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Yf(e.t,t)||t in e.t?(e.D[t]=!1,$f(e),Qf(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Of(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){wf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){wf(12)}},ym={};Af(gm,(function(e,t){ym[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ym.deleteProperty=function(e,t){return ym.set.call(this,e,t,void 0)},ym.set=function(e,t,n){return gm.set.call(this,e[0],t,n,e[0])};var vm=function(){function e(e){var t=this;this.g=lm,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&wf(6),void 0!==r&&"function"!=typeof r&&wf(7),Ef(e)){var s=qf(t),l=em(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?Vf(s):Zf(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return Uf(s,r),Wf(e,s)}),(function(e){throw Vf(s),e})):(Uf(s,r),Wf(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===cm&&(a=void 0),t.F&&Rf(a,!0),r){var u=[],h=[];jf("Patches").M(e,a,u,h),r(u,h)}return a}wf(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Ef(e)||wf(8),Sf(e)&&(e=function(e){return Sf(e)||wf(22,e),function e(t){if(!Ef(t))return t;var n,r=t[hm],i=Tf(t);if(r){if(!r.P&&(r.i<4||!jf("ES5").K(r)))return r.t;r.I=!0,n=tm(t,i),r.I=!1}else n=tm(t,i);return Af(n,(function(t,i){r&&kf(r.t,t)===i||If(n,t,e(i))})),3===i?new Set(n):n}(e)}(e));var t=qf(this),n=em(this,e,void 0);return n[hm].C=!0,Zf(t),n},t.finishDraft=function(e,t){var n=(e&&e[hm]).A;return Uf(n,t),Wf(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!lm&&wf(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=jf("Patches").$;return Sf(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),_m=new vm,bm=_m.produce;_m.produceWithPatches.bind(_m),_m.setAutoFreeze.bind(_m),_m.setUseProxies.bind(_m),_m.applyPatches.bind(_m),_m.createDraft.bind(_m),_m.finishDraft.bind(_m);const xm=bm;var wm=n(2167);function Sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sm(Object(n),!0).forEach((function(t){(0,wm.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Am(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Tm="function"===typeof Symbol&&Symbol.observable||"@@observable",Cm=function(){return Math.random().toString(36).substring(7).split("").join(".")},km={INIT:"@@redux/INIT"+Cm(),REPLACE:"@@redux/REPLACE"+Cm(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Cm()}};function Im(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Pm(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Am(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Am(1));return n(Pm)(e,t)}if("function"!==typeof e)throw new Error(Am(2));var i=e,o=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){if(l)throw new Error(Am(3));return o}function h(e){if("function"!==typeof e)throw new Error(Am(4));if(l)throw new Error(Am(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(Am(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function d(e){if(!Im(e))throw new Error(Am(7));if("undefined"===typeof e.type)throw new Error(Am(8));if(l)throw new Error(Am(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error(Am(10));i=e,d({type:km.REPLACE})}function f(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Am(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Tm]=function(){return this},e}return d({type:km.INIT}),(r={dispatch:d,subscribe:h,getState:u,replaceReducer:p})[Tm]=f,r}function Lm(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:km.INIT}))throw new Error(Am(12));if("undefined"===typeof n(void 0,{type:km.PROBE_UNKNOWN_ACTION()}))throw new Error(Am(13))}))}(n)}catch(s){o=s}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var l=a[s],c=n[l],u=e[l],h=c(u,t);if("undefined"===typeof h){t&&t.type;throw new Error(Am(14))}i[l]=h,r=r||h!==u}return(r=r||a.length!==Object.keys(e).length)?i:e}}function Mm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Om(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Am(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=Mm.apply(void 0,o)(n.dispatch),Em(Em({},n),{},{dispatch:r})}}}function Nm(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Rm=Nm();Rm.withExtraArgument=Nm;const Dm=Rm;var Fm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jm=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},zm=Object.defineProperty,Bm=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),Um=Object.prototype.hasOwnProperty,Vm=Object.prototype.propertyIsEnumerable,Zm=function(e,t,n){return t in e?zm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},qm=function(e,t){for(var n in t||(t={}))Um.call(t,n)&&Zm(e,n,t[n]);if(Bm)for(var r=0,i=Bm(t);r<i.length;r++){n=i[r];Vm.call(t,n)&&Zm(e,n,t[n])}return e},Gm="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Mm:Mm.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Wm(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Hm=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Fm(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,jm([void 0],e[0].concat(this)))):new(t.bind.apply(t,jm([void 0],e.concat(this))))},t}(Array);function Xm(e){return Ef(e)?xm(e,(function(){})):e}function Km(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Hm);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Dm.withExtraArgument(n.extraArgument)):r.push(Dm));0;return r}(e)}}function Ym(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return qm(qm({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Jm(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}Object.assign;var Qm="listenerMiddleware";Ym(Qm+"/add"),Ym(Qm+"/removeAll"),Ym(Qm+"/remove");nm();const $m=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Xm(e.initialState),i=e.reducers||{},o=Object.keys(i),a={},s={},l={};function c(){var t="function"===typeof e.extraReducers?Jm(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],a=void 0===o?[]:o,l=t[2],c=void 0===l?void 0:l,u=qm(qm({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"===typeof t?Jm(t):[t,n,r],a=o[0],s=o[1],l=o[2];if(function(e){return"function"===typeof e}(e))i=function(){return Xm(e())};else{var c=Xm(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var n=jm([a[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var r;if(Sf(e))return void 0===(r=n(e,t))?e:r;if(Ef(e))return xm(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return u.getInitialState=i,u}(r,u,a,c)}return o.forEach((function(e){var n,r,o=i[e],c=t+"/"+e;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,a[e]=n,s[c]=n,l[e]=r?Ym(c,r):Ym(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:a,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"appState",initialState:{appState:""},reducers:{setAppState:(e,t)=>{e.appState=t.payload}}}),{setAppState:eg}=$m.actions,tg=$m.reducer,ng=e=>{const n=M();return(0,t.useEffect)((()=>{e.state&&n(eg(e.state))}),[n,e]),(0,s.jsx)(s.Fragment,{children:e.children})},rg=e=>e.map(((e,t)=>e.index?(0,s.jsx)(Be,{index:!0,path:e.path,element:(0,s.jsx)(ng,{state:e.state,children:e.element})},t):(0,s.jsx)(Be,{path:e.path,element:(0,s.jsx)(ng,{state:e.child?void 0:e.state,children:e.element}),children:e.child&&rg(e.child)},t))),ig=rg([{index:!0,element:(0,s.jsx)(xf,{}),state:"home"}]),og=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ze,{})}),ag=(0,Ft.Z)((0,s.jsx)("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"}),"Dashboard"),sg=(0,Ft.Z)((0,s.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People"),lg=(0,Ft.Z)((0,s.jsx)("path",{d:"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z"}),"SupervisedUserCircle");const cg=t.createContext();function ug(e){return(0,dt.Z)("MuiTable",e)}(0,ht.Z)("MuiTable",["root","stickyHeader"]);const hg=["className","component","padding","size","stickyHeader"],dg=(0,lt.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,e.Z)({},n.typography.body2,{padding:n.spacing(2),color:(n.vars||n).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},r.stickyHeader&&{borderCollapse:"separate"})})),pg="table",fg=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiTable"}),{className:a,component:l=pg,padding:c="normal",size:u="medium",stickyHeader:h=!1}=o,d=(0,ot.Z)(o,hg),p=(0,e.Z)({},o,{component:l,padding:c,size:u,stickyHeader:h}),f=(e=>{const{classes:t,stickyHeader:n}=e,r={root:["root",n&&"stickyHeader"]};return(0,st.Z)(r,ug,t)})(p),m=t.useMemo((()=>({padding:c,size:u,stickyHeader:h})),[c,u,h]);return(0,s.jsx)(cg.Provider,{value:m,children:(0,s.jsx)(dg,(0,e.Z)({as:l,role:l===pg?null:"table",ref:r,className:(0,at.default)(f.root,a),ownerState:p},d))})})),mg=fg;const gg=t.createContext();function yg(e){return(0,dt.Z)("MuiTableHead",e)}(0,ht.Z)("MuiTableHead",["root"]);const vg=["className","component"],_g=(0,lt.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),bg={variant:"head"},xg="thead",wg=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiTableHead"}),{className:o,component:a=xg}=r,l=(0,ot.Z)(r,vg),c=(0,e.Z)({},r,{component:a}),u=(e=>{const{classes:t}=e;return(0,st.Z)({root:["root"]},yg,t)})(c);return(0,s.jsx)(gg.Provider,{value:bg,children:(0,s.jsx)(_g,(0,e.Z)({as:a,className:(0,at.default)(u.root,o),ref:n,role:a===xg?null:"rowgroup",ownerState:c},l))})}));function Sg(e){return(0,dt.Z)("MuiTableRow",e)}const Eg=(0,ht.Z)("MuiTableRow",["root","selected","hover","head","footer"]),Ag=["className","component","hover","selected"],Tg=(0,lt.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(Eg.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(Eg.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,ut.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}})),Cg="tr",kg=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiTableRow"}),{className:a,component:l=Cg,hover:c=!1,selected:u=!1}=o,h=(0,ot.Z)(o,Ag),d=t.useContext(gg),p=(0,e.Z)({},o,{component:l,hover:c,selected:u,head:d&&"head"===d.variant,footer:d&&"footer"===d.variant}),f=(e=>{const{classes:t,selected:n,hover:r,head:i,footer:o}=e,a={root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]};return(0,st.Z)(a,Sg,t)})(p);return(0,s.jsx)(Tg,(0,e.Z)({as:l,ref:r,className:(0,at.default)(f.root,a),role:l===Cg?null:"row",ownerState:p},h))})),Ig=kg;function Pg(e){return(0,dt.Z)("MuiTableCell",e)}const Lg=(0,ht.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Mg=["align","className","component","padding","scope","size","sortDirection","variant"],Og=(0,lt.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat((0,ct.Z)(n.size))],"normal"!==n.padding&&t["padding".concat((0,ct.Z)(n.padding))],"inherit"!==n.align&&t["align".concat((0,ct.Z)(n.align))],n.stickyHeader&&t.stickyHeader]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({},n.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:n.vars?"1px solid ".concat(n.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===n.palette.mode?(0,ut.$n)((0,ut.Fq)(n.palette.divider,1),.88):(0,ut._j)((0,ut.Fq)(n.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===r.variant&&{color:(n.vars||n).palette.text.primary,lineHeight:n.typography.pxToRem(24),fontWeight:n.typography.fontWeightMedium},"body"===r.variant&&{color:(n.vars||n).palette.text.primary},"footer"===r.variant&&{color:(n.vars||n).palette.text.secondary,lineHeight:n.typography.pxToRem(21),fontSize:n.typography.pxToRem(12)},"small"===r.size&&{padding:"6px 16px",["&.".concat(Lg.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===r.padding&&{width:48,padding:"0 0 0 4px"},"none"===r.padding&&{padding:0},"left"===r.align&&{textAlign:"left"},"center"===r.align&&{textAlign:"center"},"right"===r.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===r.align&&{textAlign:"justify"},r.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(n.vars||n).palette.background.default})})),Ng=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiTableCell"}),{align:a="inherit",className:l,component:c,padding:u,scope:h,size:d,sortDirection:p,variant:f}=o,m=(0,ot.Z)(o,Mg),g=t.useContext(cg),y=t.useContext(gg),v=y&&"head"===y.variant;let _;_=c||(v?"th":"td");let b=h;!b&&v&&(b="col");const x=f||y&&y.variant,w=(0,e.Z)({},o,{align:a,component:_,padding:u||(g&&g.padding?g.padding:"normal"),size:d||(g&&g.size?g.size:"medium"),sortDirection:p,stickyHeader:"head"===x&&g&&g.stickyHeader,variant:x}),S=(e=>{const{classes:t,variant:n,align:r,padding:i,size:o,stickyHeader:a}=e,s={root:["root",n,a&&"stickyHeader","inherit"!==r&&"align".concat((0,ct.Z)(r)),"normal"!==i&&"padding".concat((0,ct.Z)(i)),"size".concat((0,ct.Z)(o))]};return(0,st.Z)(s,Pg,t)})(w);let E=null;return p&&(E="asc"===p?"ascending":"descending"),(0,s.jsx)(Og,(0,e.Z)({as:_,ref:r,className:(0,at.default)(S.root,l),"aria-sort":E,scope:b,ownerState:w},m))})),Rg=Ng;function Dg(e){return(0,dt.Z)("MuiTableBody",e)}(0,ht.Z)("MuiTableBody",["root"]);const Fg=["className","component"],jg=(0,lt.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),zg={variant:"body"},Bg="tbody",Ug=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiTableBody"}),{className:o,component:a=Bg}=r,l=(0,ot.Z)(r,Fg),c=(0,e.Z)({},r,{component:a}),u=(e=>{const{classes:t}=e;return(0,st.Z)({root:["root"]},Dg,t)})(c);return(0,s.jsx)(gg.Provider,{value:zg,children:(0,s.jsx)(jg,(0,e.Z)({className:(0,at.default)(u.root,o),as:a,ref:n,role:a===Bg?null:"rowgroup",ownerState:c},l))})}));var Vg,Zg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},qg={},Gg=Gg||{},Wg=Zg||self;function Hg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kg="closure_uid_"+(1e9*Math.random()>>>0),Yg=0;function Jg(e,t,n){return e.call.apply(e.bind,arguments)}function Qg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $g(e,t,n){return($g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jg:Qg).apply(null,arguments)}function ey(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ty(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function ny(){this.s=this.s,this.o=this.o}ny.prototype.s=!1,ny.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Kg)&&e[Kg]||(e[Kg]=++Yg)}(this)},ny.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ry=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function iy(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function oy(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Hg(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ay(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ay.prototype.h=function(){this.defaultPrevented=!0};var sy=function(){if(!Wg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Wg.addEventListener("test",(()=>{}),t),Wg.removeEventListener("test",(()=>{}),t)}catch(vu){}return e}();function ly(e){return/^[\s\xa0]*$/.test(e)}function cy(){var e=Wg.navigator;return e&&(e=e.userAgent)?e:""}function uy(e){return-1!=cy().indexOf(e)}function hy(e){return hy[" "](e),e}hy[" "]=function(){};var dy,py,fy=uy("Opera"),my=uy("Trident")||uy("MSIE"),gy=uy("Edge"),yy=gy||my,vy=uy("Gecko")&&!(-1!=cy().toLowerCase().indexOf("webkit")&&!uy("Edge"))&&!(uy("Trident")||uy("MSIE"))&&!uy("Edge"),_y=-1!=cy().toLowerCase().indexOf("webkit")&&!uy("Edge");function by(){var e=Wg.document;return e?e.documentMode:void 0}e:{var xy="",wy=function(){var e=cy();return vy?/rv:([^\);]+)(\)|;)/.exec(e):gy?/Edge\/([\d\.]+)/.exec(e):my?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):_y?/WebKit\/(\S+)/.exec(e):fy?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(wy&&(xy=wy?wy[1]:""),my){var Sy=by();if(null!=Sy&&Sy>parseFloat(xy)){dy=String(Sy);break e}}dy=xy}if(Wg.document&&my){var Ey=by();py=Ey||(parseInt(dy,10)||void 0)}else py=void 0;var Ay=py;function Ty(e,t){if(ay.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vy){e:{try{hy(t.nodeName);var i=!0;break e}catch(Eh){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Cy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ty.$.h.call(this)}}ty(Ty,ay);var Cy={2:"touch",3:"pen",4:"mouse"};Ty.prototype.h=function(){Ty.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ky="closure_listenable_"+(1e6*Math.random()|0),Iy=0;function Py(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Iy,this.fa=this.ia=!1}function Ly(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function My(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Oy(e){const t={};for(const n in e)t[n]=e[n];return t}const Ny="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ry(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Ny.length;t++)n=Ny[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Dy(e){this.src=e,this.g={},this.h=0}function Fy(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=ry(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ly(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jy(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}Dy.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=jy(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Py(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var zy="closure_lm_"+(1e6*Math.random()|0),By={};function Uy(e,t,n,r,i){if(r&&r.once)return Zy(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Uy(e,t[o],n,r,i);return null}return n=Yy(n),e&&e[ky]?e.O(t,n,Xg(r)?!!r.capture:!!r,i):Vy(e,t,n,!1,r,i)}function Vy(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=Xg(i)?!!i.capture:!!i,s=Xy(e);if(s||(e[zy]=s=new Dy(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Hy;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)sy||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Wy(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zy(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Zy(e,t[o],n,r,i);return null}return n=Yy(n),e&&e[ky]?e.P(t,n,Xg(r)?!!r.capture:!!r,i):Vy(e,t,n,!0,r,i)}function qy(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)qy(e,t[o],n,r,i);else r=Xg(r)?!!r.capture:!!r,n=Yy(n),e&&e[ky]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=jy(o=e.g[t],n,r,i))&&(Ly(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Xy(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jy(t,n,r,i)),(n=-1<e?t[e]:null)&&Gy(n))}function Gy(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ky])Fy(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Wy(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Xy(t))?(Fy(n,e),0==n.h&&(n.src=null,t[zy]=null)):Ly(e)}}}function Wy(e){return e in By?By[e]:By[e]="on"+e}function Hy(e,t){if(e.fa)e=!0;else{t=new Ty(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Gy(e),e=n.call(r,t)}return e}function Xy(e){return(e=e[zy])instanceof Dy?e:null}var Ky="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yy(e){return"function"===typeof e?e:(e[Ky]||(e[Ky]=function(t){return e.handleEvent(t)}),e[Ky])}function Jy(){ny.call(this),this.i=new Dy(this),this.S=this,this.J=null}function Qy(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ay(t,e);else if(t instanceof ay)t.target=t.target||e;else{var i=t;Ry(t=new ay(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=$y(a,r,!0,t)&&i}if(i=$y(a=t.g=e,r,!0,t)&&i,i=$y(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=$y(a=t.g=n[o],r,!1,t)&&i}function $y(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.fa&&a.capture==n){var s=a.listener,l=a.la||a.src;a.ia&&Fy(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}ty(Jy,ny),Jy.prototype[ky]=!0,Jy.prototype.removeEventListener=function(e,t,n,r){qy(this,e,t,n,r)},Jy.prototype.N=function(){if(Jy.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ly(n[r]);delete t.g[e],t.h--}}this.J=null},Jy.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Jy.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ev=Wg.JSON.stringify;function tv(){var e=lv;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nv=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new rv),(e=>e.reset()));class rv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iv(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ov(e){Wg.setTimeout((()=>{throw e}),0)}let av,sv=!1,lv=new class{constructor(){this.h=this.g=null}add(e,t){const n=nv.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},cv=()=>{const e=Wg.Promise.resolve(void 0);av=()=>{e.then(uv)}};var uv=()=>{for(var e;e=tv();){try{e.h.call(e.g)}catch(vu){ov(vu)}var t=nv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}sv=!1};function hv(e,t){Jy.call(this),this.h=e||1,this.g=t||Wg,this.j=$g(this.qb,this),this.l=Date.now()}function dv(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function pv(e,t,n){if("function"===typeof e)n&&(e=$g(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$g(e.handleEvent,e)}return 2147483647<Number(t)?-1:Wg.setTimeout(e,t||0)}function fv(e){e.g=pv((()=>{e.g=null,e.i&&(e.i=!1,fv(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ty(hv,Jy),(Vg=hv.prototype).ga=!1,Vg.T=null,Vg.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Qy(this,"tick"),this.ga&&(dv(this),this.start()))}},Vg.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vg.N=function(){hv.$.N.call(this),dv(this),delete this.g};class mv extends ny{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fv(this)}N(){super.N(),this.g&&(Wg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gv(e){ny.call(this),this.h=e,this.g={}}ty(gv,ny);var yv=[];function vv(e,t,n,r){Array.isArray(n)||(n&&(yv[0]=n.toString()),n=yv);for(var i=0;i<n.length;i++){var o=Uy(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function _v(e){My(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gy(e)}),e),e.g={}}function bv(){this.g=!0}function xv(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return ev(n)}catch(du){return t}}(e,n)+(r?" "+r:"")}))}gv.prototype.N=function(){gv.$.N.call(this),_v(this)},gv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bv.prototype.Ea=function(){this.g=!1},bv.prototype.info=function(){};var wv={},Sv=null;function Ev(){return Sv=Sv||new Jy}function Av(e){ay.call(this,wv.Ta,e)}function Tv(e){const t=Ev();Qy(t,new Av(t))}function Cv(e,t){ay.call(this,wv.STAT_EVENT,e),this.stat=t}function kv(e){const t=Ev();Qy(t,new Cv(t,e))}function Iv(e,t){ay.call(this,wv.Ua,e),this.size=t}function Pv(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Wg.setTimeout((function(){e()}),t)}wv.Ta="serverreachability",ty(Av,ay),wv.STAT_EVENT="statevent",ty(Cv,ay),wv.Ua="timingevent",ty(Iv,ay);var Lv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Mv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ov(){}function Nv(e){return e.h||(e.h=e.i())}function Rv(){}Ov.prototype.h=null;var Dv,Fv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jv(){ay.call(this,"d")}function zv(){ay.call(this,"c")}function Bv(){}function Uv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new gv(this),this.P=Zv,e=yy?125:void 0,this.V=new hv(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Vv}function Vv(){this.i=null,this.g="",this.h=!1}ty(jv,ay),ty(zv,ay),ty(Bv,Ov),Bv.prototype.g=function(){return new XMLHttpRequest},Bv.prototype.i=function(){return{}},Dv=new Bv;var Zv=45e3,qv={},Gv={};function Wv(e,t,n){e.L=1,e.v=h_(a_(t)),e.s=n,e.S=!0,Hv(e,null)}function Hv(e,t){e.G=Date.now(),Jv(e),e.A=a_(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),E_(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Vv,e.g=wb(e.l,n?t:null,!e.s),0<e.O&&(e.M=new mv($g(e.Pa,e,e.g),e.O)),vv(e.U,e.g,"readystatechange",e.nb),t=e.I?Oy(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Tv(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Xv(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Kv(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Yv(e,n),r==Gv){4==t&&(e.o=4,kv(14),i=!1),xv(e.j,e.m,null,"[Incomplete Response]");break}if(r==qv){e.o=4,kv(15),xv(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}xv(e.j,e.m,r,null),n_(e,r)}Xv(e)&&r!=Gv&&r!=qv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,kv(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),fb(t),t.M=!0,kv(11))):(xv(e.j,e.m,n,"[Invalid Chunked Response]"),t_(e),e_(e))}function Yv(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Gv:(n=Number(t.substring(n,r)),isNaN(n)?qv:(r+=1)+n>t.length?Gv:(t=t.slice(r,r+n),e.C=r+n,t))}function Jv(e){e.Y=Date.now()+e.P,Qv(e,e.P)}function Qv(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pv($g(e.lb,e),t)}function $v(e){e.B&&(Wg.clearTimeout(e.B),e.B=null)}function e_(e){0==e.l.H||e.J||yb(e.l,e)}function t_(e){$v(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,dv(e.V),_v(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function n_(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||P_(n.i,e)))if(!e.K&&P_(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(kh){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;gb(n),ab(n)}pb(n),kv(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Pv($g(n.ib,n),6e3));if(1>=I_(n.i)&&n.oa){try{n.oa()}catch(kh){}n.oa=void 0}}else _b(n,11)}else if((e.K||n.g==e)&&gb(n),!ly(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(L_(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,u_(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=xb(r,r.J?r.pa:null,r.Y),a.K){M_(r.i,a);var s=a,l=r.L;l&&s.setTimeout(l),s.B&&($v(s),Jv(s)),r.g=a}else db(r);0<n.j.length&&lb(n)}else"stop"!=c[0]&&"close"!=c[0]||_b(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_b(n,7):ob(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Tv()}catch(kh){}}function r_(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Hg(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Hg(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Hg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Vg=Uv.prototype).setTimeout=function(e){this.P=e},Vg.nb=function(e){e=e.target;const t=this.M;t&&3==$_(e)?t.l():this.Pa(e)},Vg.Pa=function(e){try{if(e==this.g)e:{const u=$_(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||yy||this.g&&(this.h.h||this.g.ja()||eb(this.g)))){this.J||4!=u||7==t||Tv(),$v(this);var n=this.g.da();this.ca=n;t:if(Xv(this)){var r=eb(this.g);e="";var i=r.length,o=4==$_(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){t_(this),e_(this);var a="";break t}this.h.i=new Wg.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ly(s)){var c=s;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,kv(12),t_(this),e_(this);break e}xv(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,n_(this,n)}this.S?(Kv(this,u,a),yy&&this.i&&3==u&&(vv(this.U,this.V,"tick",this.mb),this.V.start())):(xv(this.j,this.m,a,null),n_(this,a)),4==u&&t_(this),this.i&&!this.J&&(4==u?yb(this.l,this):(this.i=!1,Jv(this)))}else(function(e){const t={};e=(e.g&&2<=$_(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ly(e[r]))continue;var n=iv(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,kv(12)):(this.o=0,kv(13)),t_(this),e_(this)}}}catch(u){}},Vg.mb=function(){if(this.g){var e=$_(this.g),t=this.g.ja();this.C<t.length&&($v(this),Kv(this,e,t),this.i&&4!=e&&Jv(this))}},Vg.cancel=function(){this.J=!0,t_(this)},Vg.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Tv(),kv(17)),t_(this),this.o=2,e_(this)):Qv(this,this.Y-e)};var i_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function o_(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof o_){this.h=e.h,s_(this,e.j),this.s=e.s,this.g=e.g,l_(this,e.m),this.l=e.l;var t=e.i,n=new b_;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),c_(this,n),this.o=e.o}else e&&(t=String(e).match(i_))?(this.h=!1,s_(this,t[1]||"",!0),this.s=d_(t[2]||""),this.g=d_(t[3]||"",!0),l_(this,t[4]),this.l=d_(t[5]||"",!0),c_(this,t[6]||"",!0),this.o=d_(t[7]||"")):(this.h=!1,this.i=new b_(null,this.h))}function a_(e){return new o_(e)}function s_(e,t,n){e.j=n?d_(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function l_(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function c_(e,t,n){t instanceof b_?(e.i=t,function(e,t){t&&!e.j&&(x_(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(w_(this,t),E_(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=p_(t,v_)),e.i=new b_(t,e.h))}function u_(e,t,n){e.i.set(t,n)}function h_(e){return u_(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function d_(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function p_(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,f_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function f_(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}o_.prototype.toString=function(){var e=[],t=this.j;t&&e.push(p_(t,m_,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(p_(t,m_,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(p_(n,"/"==n.charAt(0)?y_:g_,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",p_(n,__)),e.join("")};var m_=/[#\/\?@]/g,g_=/[#\?:]/g,y_=/[#\?]/g,v_=/[#\?@]/g,__=/#/g;function b_(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function x_(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function w_(e,t){x_(e),t=A_(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function S_(e,t){return x_(e),t=A_(e,t),e.g.has(t)}function E_(e,t,n){w_(e,t),0<n.length&&(e.i=null,e.g.set(A_(e,t),iy(n)),e.h+=n.length)}function A_(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vg=b_.prototype).add=function(e,t){x_(this),this.i=null,e=A_(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vg.forEach=function(e,t){x_(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Vg.ta=function(){x_(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Vg.Z=function(e){x_(this);let t=[];if("string"===typeof e)S_(this,e)&&(t=t.concat(this.g.get(A_(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Vg.set=function(e,t){return x_(this),this.i=null,S_(this,e=A_(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vg.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Vg.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};function T_(e){this.l=e||C_,Wg.PerformanceNavigationTiming?e=0<(e=Wg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Wg.g&&Wg.g.Ka&&Wg.g.Ka()&&Wg.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var C_=10;function k_(e){return!!e.h||!!e.g&&e.g.size>=e.j}function I_(e){return e.h?1:e.g?e.g.size:0}function P_(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function L_(e,t){e.g?e.g.add(t):e.h=t}function M_(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function O_(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return iy(e.i)}T_.prototype.cancel=function(){if(this.i=O_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};function N_(){this.g=new class{stringify(e){return Wg.JSON.stringify(e,void 0)}parse(e){return Wg.JSON.parse(e,void 0)}}}function R_(e,t,n){const r=n||"";try{r_(e,(function(e,n){let i=e;Xg(e)&&(i=ev(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function D_(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Eh){}}function F_(e){this.l=e.fc||null,this.j=e.ob||!1}function j_(e,t){Jy.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=z_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ty(F_,Ov),F_.prototype.g=function(){return new j_(this.l,this.j)},F_.prototype.i=function(e){return function(){return e}}({}),ty(j_,Jy);var z_=0;function B_(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function U_(e){e.readyState=4,e.l=null,e.j=null,e.A=null,V_(e)}function V_(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vg=j_.prototype).open=function(e,t){if(this.readyState!=z_)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,V_(this)},Vg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Wg).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Vg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,U_(this)),this.readyState=z_},Vg.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,V_(this)),this.g&&(this.readyState=3,V_(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Wg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;B_(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Vg.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?U_(this):V_(this),3==this.readyState&&B_(this)}},Vg.Za=function(e){this.g&&(this.response=this.responseText=e,U_(this))},Vg.Ya=function(e){this.g&&(this.response=e,U_(this))},Vg.ka=function(){this.g&&U_(this)},Vg.setRequestHeader=function(e,t){this.v.append(e,t)},Vg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vg.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(j_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Z_=Wg.JSON.parse;function q_(e){Jy.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=G_,this.L=this.M=!1}ty(q_,Jy);var G_="",W_=/^https?$/i,H_=["POST","PUT"];function X_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,K_(e),J_(e)}function K_(e){e.F||(e.F=!0,Qy(e,"complete"),Qy(e,"error"))}function Y_(e){if(e.h&&"undefined"!=typeof Gg&&(!e.C[1]||4!=$_(e)||2!=e.da()))if(e.v&&4==$_(e))pv(e.La,0,e);else if(Qy(e,"readystatechange"),4==$_(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(i_)[1]||null;!i&&Wg.self&&Wg.self.location&&(i=Wg.self.location.protocol.slice(0,-1)),r=!W_.test(i?i.toLowerCase():"")}n=r}if(n)Qy(e,"complete"),Qy(e,"success");else{e.m=6;try{var o=2<$_(e)?e.g.statusText:""}catch(du){o=""}e.j=o+" ["+e.da()+"]",K_(e)}}finally{J_(e)}}}function J_(e,t){if(e.g){Q_(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Qy(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Q_(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Wg.clearTimeout(e.A),e.A=null)}function $_(e){return e.g?e.g.readyState:0}function eb(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case G_:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ph){return null}}function tb(e){let t="";return My(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function nb(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=tb(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):u_(e,t,n))}function rb(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ib(e){this.Ga=0,this.j=[],this.l=new bv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rb("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rb("baseRetryDelayMs",5e3,e),this.hb=rb("retryDelaySeedMs",1e4,e),this.eb=rb("forwardChannelMaxRetries",2,e),this.xa=rb("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new T_(e&&e.concurrentRequestLimit),this.Ja=new N_,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ob(e){if(sb(e),3==e.H){var t=e.W++,n=a_(e.I);if(u_(n,"SID",e.K),u_(n,"RID",t),u_(n,"TYPE","terminate"),ub(e,n),(t=new Uv(e,e.l,t)).L=2,t.v=h_(a_(n)),n=!1,Wg.navigator&&Wg.navigator.sendBeacon)try{n=Wg.navigator.sendBeacon(t.v.toString(),"")}catch(Ah){}!n&&Wg.Image&&((new Image).src=t.v,n=!0),n||(t.g=wb(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Jv(t)}bb(e)}function ab(e){e.g&&(fb(e),e.g.cancel(),e.g=null)}function sb(e){ab(e),e.u&&(Wg.clearTimeout(e.u),e.u=null),gb(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Wg.clearTimeout(e.m),e.m=null)}function lb(e){if(!k_(e.i)&&!e.m){e.m=!0;var t=e.Na;av||cv(),sv||(av(),sv=!0),lv.add(t,e),e.C=0}}function cb(e,t){var n;n=t?t.m:e.W++;const r=a_(e.I);u_(r,"SID",e.K),u_(r,"RID",n),u_(r,"AID",e.V),ub(e,r),e.o&&e.s&&nb(r,e.o,e.s),n=new Uv(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=hb(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),L_(e.i,n),Wv(n,r,t)}function ub(e,t){e.na&&My(e.na,(function(e,n){u_(t,n,e)})),e.h&&r_({},(function(e,n){u_(t,n,e)}))}function hb(e,t,n){n=Math.min(e.j.length,n);var r=e.h?$g(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{R_(s,e,"req"+n+"_")}catch(Nh){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function db(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;av||cv(),sv||(av(),sv=!0),lv.add(t,e),e.A=0}}function pb(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Pv($g(e.Ma,e),vb(e,e.A)),e.A++,!0)}function fb(e){null!=e.B&&(Wg.clearTimeout(e.B),e.B=null)}function mb(e){e.g=new Uv(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=a_(e.wa);u_(t,"RID","rpc"),u_(t,"SID",e.K),u_(t,"AID",e.V),u_(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&u_(t,"TO",e.qa),u_(t,"TYPE","xmlhttp"),ub(e,t),e.o&&e.s&&nb(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=h_(a_(t)),n.s=null,n.S=!0,Hv(n,e)}function gb(e){null!=e.v&&(Wg.clearTimeout(e.v),e.v=null)}function yb(e,t){var n=null;if(e.g==t){gb(e),fb(e),e.g=null;var r=2}else{if(!P_(e.i,t))return;n=t.F,M_(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Qy(r=Ev(),new Iv(r,n)),lb(e)}else db(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(I_(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Pv($g(e.Na,e,t),vb(e,e.C)),e.C++,!0))}(e,t)||2==r&&pb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_b(e,5);break;case 4:_b(e,10);break;case 3:_b(e,6);break;default:_b(e,2)}}function vb(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function _b(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=$g(e.pb,e);n||(n=new o_("//www.google.com/images/cleardot.gif"),Wg.location&&"http"==Wg.location.protocol||s_(n,"https"),h_(n)),function(e,t){const n=new bv;if(Wg.Image){const r=new Image;r.onload=ey(D_,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ey(D_,n,r,"TestLoadImage: error",!1,t),r.onabort=ey(D_,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ey(D_,n,r,"TestLoadImage: timeout",!1,t),Wg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else kv(2);e.H=0,e.h&&e.h.za(t),bb(e),sb(e)}function bb(e){if(e.H=0,e.ma=[],e.h){const t=O_(e.i);0==t.length&&0==e.j.length||(oy(e.ma,t),oy(e.ma,e.j),e.i.i.length=0,iy(e.j),e.j.length=0),e.h.ya()}}function xb(e,t,n){var r=n instanceof o_?a_(n):new o_(n);if(""!=r.g)t&&(r.g=t+"."+r.g),l_(r,r.m);else{var i=Wg.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new o_(null);r&&s_(o,r),t&&(o.g=t),i&&l_(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&u_(r,n,t),u_(r,"VER",e.ra),ub(e,r),r}function wb(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new q_(new F_({ob:!0})):new q_(e.va)).Oa(e.J),t}function Sb(){}function Eb(){if(my&&!(10<=Number(Ay)))throw Error("Environmental error: no available transport.")}function Ab(e,t){Jy.call(this),this.g=new ib(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ly(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ly(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kb(this)}function Tb(e){jv.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cb(){zv.call(this),this.status=1}function kb(e){this.g=e}function Ib(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Pb(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Lb(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Vg=q_.prototype).Oa=function(e){this.M=e},Vg.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Dv.g(),this.C=this.u?Nv(this.u):Nv(Dv),this.g.onreadystatechange=$g(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Eh){return void X_(this,Eh)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Wg.FormData&&e instanceof Wg.FormData,!(0<=ry(H_,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Q_(this),0<this.B&&((this.L=function(e){return my&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$g(this.ua,this)):this.A=pv(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Eh){X_(this,Eh)}},Vg.ua=function(){"undefined"!=typeof Gg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qy(this,"timeout"),this.abort(8))},Vg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Qy(this,"complete"),Qy(this,"abort"),J_(this))},Vg.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),J_(this,!0)),q_.$.N.call(this)},Vg.La=function(){this.s||(this.G||this.v||this.l?Y_(this):this.kb())},Vg.kb=function(){Y_(this)},Vg.isActive=function(){return!!this.g},Vg.da=function(){try{return 2<$_(this)?this.g.status:-1}catch(fu){return-1}},Vg.ja=function(){try{return this.g?this.g.responseText:""}catch(fu){return""}},Vg.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Z_(t)}},Vg.Ia=function(){return this.m},Vg.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vg=ib.prototype).ra=8,Vg.H=1,Vg.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Uv(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Oy(o),Ry(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hb(this,i,t),u_(n=a_(this.I),"RID",e),u_(n,"CVER",22),this.F&&u_(n,"X-HTTP-Session-Id",this.F),ub(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(tb(o)))+"&"+t:this.o&&nb(n,this.o,o)),L_(this.i,i),this.bb&&u_(n,"TYPE","init"),this.P?(u_(n,"$req",t),u_(n,"SID","null"),i.aa=!0,Wv(i,n,null)):Wv(i,n,t),this.H=2}}else 3==this.H&&(e?cb(this,e):0==this.j.length||k_(this.i)||cb(this))},Vg.Ma=function(){if(this.u=null,mb(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Pv($g(this.jb,this),e)}},Vg.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kv(10),ab(this),mb(this))},Vg.ib=function(){null!=this.v&&(this.v=null,ab(this),pb(this),kv(19))},Vg.pb=function(e){e?(this.l.info("Successfully pinged google.com"),kv(2)):(this.l.info("Failed to ping google.com"),kv(1))},Vg.isActive=function(){return!!this.h&&this.h.isActive(this)},(Vg=Sb.prototype).Ba=function(){},Vg.Aa=function(){},Vg.za=function(){},Vg.ya=function(){},Vg.isActive=function(){return!0},Vg.Va=function(){},Eb.prototype.g=function(e,t){return new Ab(e,t)},ty(Ab,Jy),Ab.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;kv(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xb(e,null,e.Y),lb(e)},Ab.prototype.close=function(){ob(this.g)},Ab.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ev(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&lb(t)},Ab.prototype.N=function(){this.g.h=null,delete this.j,ob(this.g),delete this.g,Ab.$.N.call(this)},ty(Tb,jv),ty(Cb,zv),ty(kb,Sb),kb.prototype.Ba=function(){Qy(this.g,"a")},kb.prototype.Aa=function(e){Qy(this.g,new Tb(e))},kb.prototype.za=function(e){Qy(this.g,new Cb)},kb.prototype.ya=function(){Qy(this.g,"b")},ty(Ib,(function(){this.blockSize=-1})),Ib.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ib.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Pb(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Pb(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Pb(this,r),i=0;break}}this.h=i,this.i+=t},Ib.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Mb={};function Ob(e){return-128<=e&&128>e?function(e,t){var n=Mb;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Lb([0|e],0>e?-1:0)})):new Lb([0|e],0>e?-1:0)}function Nb(e){if(isNaN(e)||!isFinite(e))return Db;if(0>e)return Ub(Nb(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Rb;return new Lb(t,0)}var Rb=4294967296,Db=Ob(0),Fb=Ob(1),jb=Ob(16777216);function zb(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Bb(e){return-1==e.h}function Ub(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Lb(n,~e.h).add(Fb)}function Vb(e,t){return e.add(Ub(t))}function Zb(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function qb(e,t){this.g=e,this.h=t}function Gb(e,t){if(zb(t))throw Error("division by zero");if(zb(e))return new qb(Db,Db);if(Bb(e))return t=Gb(Ub(e),t),new qb(Ub(t.g),Ub(t.h));if(Bb(t))return t=Gb(e,Ub(t)),new qb(Ub(t.g),t.h);if(30<e.g.length){if(Bb(e)||Bb(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Fb,r=t;0>=r.X(e);)n=Wb(n),r=Wb(r);var i=Hb(n,1),o=Hb(r,1);for(r=Hb(r,2),n=Hb(n,2);!zb(r);){var a=o.add(r);0>=a.X(e)&&(i=i.add(n),o=a),r=Hb(r,1),n=Hb(n,1)}return t=Vb(e,i.R(t)),new qb(i,t)}for(i=Db;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(o=Nb(n)).R(t);Bb(a)||0<a.X(e);)a=(o=Nb(n-=r)).R(t);zb(o)&&(o=Fb),i=i.add(o),e=Vb(e,a)}return new qb(i,e)}function Wb(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Lb(n,e.h)}function Hb(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Lb(i,e.h)}(Vg=Lb.prototype).ea=function(){if(Bb(this))return-Ub(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Rb+r)*t,t*=Rb}return e},Vg.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(zb(this))return"0";if(Bb(this))return"-"+Ub(this).toString(e);for(var t=Nb(Math.pow(e,6)),n=this,r="";;){var i=Gb(n,t).g,o=((0<(n=Vb(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(zb(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Vg.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Vg.X=function(e){return Bb(e=Vb(this,e))?-1:zb(e)?0:1},Vg.abs=function(){return Bb(this)?Ub(this):this},Vg.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),a=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new Lb(n,-2147483648&n[n.length-1]?-1:0)},Vg.R=function(e){if(zb(this)||zb(e))return Db;if(Bb(this))return Bb(e)?Ub(this).R(Ub(e)):Ub(Ub(this).R(e));if(Bb(e))return Ub(this.R(Ub(e)));if(0>this.X(jb)&&0>e.X(jb))return Nb(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,a=65535&this.D(r),s=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,Zb(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Zb(n,2*r+2*i+1),n[2*r+2*i+1]+=a*s,Zb(n,2*r+2*i+1),n[2*r+2*i+2]+=o*s,Zb(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Lb(n,0)},Vg.gb=function(e){return Gb(this,e).h},Vg.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Lb(n,this.h&e.h)},Vg.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Lb(n,this.h|e.h)},Vg.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Lb(n,this.h^e.h)},Eb.prototype.createWebChannel=Eb.prototype.g,Ab.prototype.send=Ab.prototype.u,Ab.prototype.open=Ab.prototype.m,Ab.prototype.close=Ab.prototype.close,Lv.NO_ERROR=0,Lv.TIMEOUT=8,Lv.HTTP_ERROR=6,Mv.COMPLETE="complete",Rv.EventType=Fv,Fv.OPEN="a",Fv.CLOSE="b",Fv.ERROR="c",Fv.MESSAGE="d",Jy.prototype.listen=Jy.prototype.O,q_.prototype.listenOnce=q_.prototype.P,q_.prototype.getLastError=q_.prototype.Sa,q_.prototype.getLastErrorCode=q_.prototype.Ia,q_.prototype.getStatus=q_.prototype.da,q_.prototype.getResponseJson=q_.prototype.Wa,q_.prototype.getResponseText=q_.prototype.ja,q_.prototype.send=q_.prototype.ha,q_.prototype.setWithCredentials=q_.prototype.Oa,Ib.prototype.digest=Ib.prototype.l,Ib.prototype.reset=Ib.prototype.reset,Ib.prototype.update=Ib.prototype.j,Lb.prototype.add=Lb.prototype.add,Lb.prototype.multiply=Lb.prototype.R,Lb.prototype.modulo=Lb.prototype.gb,Lb.prototype.compare=Lb.prototype.X,Lb.prototype.toNumber=Lb.prototype.ea,Lb.prototype.toString=Lb.prototype.toString,Lb.prototype.getBits=Lb.prototype.D,Lb.fromNumber=Nb,Lb.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ub(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Nb(Math.pow(n,8)),i=Db,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),s=parseInt(t.substring(o,o+a),n);8>a?(a=Nb(Math.pow(n,a)),i=i.R(a).add(Nb(s))):i=(i=i.R(r)).add(Nb(s))}return i};var Xb=qg.createWebChannelTransport=function(){return new Eb},Kb=qg.getStatEventTarget=function(){return Ev()},Yb=qg.ErrorCode=Lv,Jb=qg.EventType=Mv,Qb=qg.Event=wv,$b=qg.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ex=qg.FetchXmlHttpFactory=F_,tx=qg.WebChannel=Rv,nx=qg.XhrIo=q_,rx=qg.Md5=Ib,ix=qg.Integer=Lb;const ox="@firebase/firestore";class ax{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ax.UNAUTHENTICATED=new ax(null),ax.GOOGLE_CREDENTIALS=new ax("google-credentials-uid"),ax.FIRST_PARTY=new ax("first-party-uid"),ax.MOCK_USER=new ax("mock-user");let sx="9.23.0";const lx=new zn("@firebase/firestore");function cx(){return lx.logLevel}function ux(e){if(lx.logLevel<=Nn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(px);lx.debug("Firestore (".concat(sx,"): ").concat(e),...i)}}function hx(e){if(lx.logLevel<=Nn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(px);lx.error("Firestore (".concat(sx,"): ").concat(e),...i)}}function dx(e){if(lx.logLevel<=Nn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(px);lx.warn("Firestore (".concat(sx,"): ").concat(e),...i)}}function px(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function fx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(sx,") INTERNAL ASSERTION FAILED: ")+e;throw hx(t),new Error(t)}function mx(e,t){e||fx()}function gx(e,t){return e}const yx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vx extends gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class _x{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class bx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ax.UNAUTHENTICATED)))}shutdown(){}}class wx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Sx{constructor(e){this.t=e,this.currentUser=ax.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new _x;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _x,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{ux("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ux("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _x)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ux("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mx("string"==typeof t.accessToken),new bx(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mx(null===e||"string"==typeof e),new ax(e)}}class Ex{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=ax.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ax{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ex(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(ax.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cx{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&ux("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,ux("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ux("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):ux("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(mx("string"==typeof e.token),this.T=e.token,new Tx(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function kx(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ix{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=kx(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Px(e,t){return e<t?-1:e>t?1:0}function Lx(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Mx{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vx(yx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vx(yx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vx(yx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vx(yx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mx.fromMillis(Date.now())}static fromDate(e){return Mx.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Mx(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Px(this.nanoseconds,e.nanoseconds):Px(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ox{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ox(e)}static min(){return new Ox(new Mx(0,0))}static max(){return new Ox(new Mx(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Nx{constructor(e,t,n){void 0===t?t=0:t>e.length&&fx(),void 0===n?n=e.length-t:n>e.length-t&&fx(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Nx.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nx?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rx extends Nx{construct(e,t,n){return new Rx(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new vx(yx.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Rx(e)}static emptyPath(){return new Rx([])}}const Dx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fx extends Nx{construct(e,t,n){return new Fx(e,t,n)}static isValidIdentifier(e){return Dx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fx.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fx(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new vx(yx.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new vx(yx.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new vx(yx.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new vx(yx.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fx(t)}static emptyPath(){return new Fx([])}}class jx{constructor(e){this.path=e}static fromPath(e){return new jx(Rx.fromString(e))}static fromName(e){return new jx(Rx.fromString(e).popFirst(5))}static empty(){return new jx(Rx.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rx.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rx.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jx(new Rx(e.slice()))}}class zx{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}zx.UNKNOWN_ID=-1;function Bx(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ox.fromTimestamp(1e9===r?new Mx(n+1,0):new Mx(n,r));return new Vx(i,jx.empty(),t)}function Ux(e){return new Vx(e.readTime,e.key,-1)}class Vx{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vx(Ox.min(),jx.empty(),-1)}static max(){return new Vx(Ox.max(),jx.empty(),-1)}}function Zx(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=jx.comparator(e.documentKey,t.documentKey),0!==n?n:Px(e.largestBatchId,t.largestBatchId))}const qx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wx(e){if(e.code!==yx.FAILED_PRECONDITION||e.message!==qx)throw e;ux("LocalStore","Unexpectedly lost primary lease")}class Hx{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fx(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Hx(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Hx?t:Hx.resolve(t)}catch(e){return Hx.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Hx.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Hx.reject(t)}static resolve(e){return new Hx(((t,n)=>{t(e)}))}static reject(e){return new Hx(((t,n)=>{n(e)}))}static waitFor(e){return new Hx(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Hx.resolve(!1);for(const n of e)t=t.next((e=>e?Hx.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Hx(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Hx(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Xx(e){return"IndexedDbTransactionError"===e.name}class Kx{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Yx(e){return null==e}function Jx(e){return 0===e&&1/e==-1/0}function Qx(e){return"number"==typeof e&&Number.isInteger(e)&&!Jx(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Kx.ct=-1;const $x=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ew=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tw=ew;function nw(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rw(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function iw(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ow{constructor(e,t){this.comparator=e,this.root=t||sw.EMPTY}insert(e,t){return new ow(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sw.BLACK,null,null))}remove(e){return new ow(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sw.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aw(this.root,e,this.comparator,!1)}getReverseIterator(){return new aw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aw(this.root,e,this.comparator,!0)}}class aw{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:sw.RED,this.left=null!=r?r:sw.EMPTY,this.right=null!=i?i:sw.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new sw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return sw.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return sw.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fx();if(this.right.isRed())throw fx();const e=this.left.check();if(e!==this.right.check())throw fx();return e+(this.isRed()?0:1)}}sw.EMPTY=null,sw.RED=!0,sw.BLACK=!1,sw.EMPTY=new class{constructor(){this.size=0}get key(){throw fx()}get value(){throw fx()}get color(){throw fx()}get left(){throw fx()}get right(){throw fx()}copy(e,t,n,r,i){return this}insert(e,t,n){return new sw(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lw{constructor(e){this.comparator=e,this.data=new ow(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cw(this.data.getIterator())}getIteratorFrom(e){return new cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof lw))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lw(this.comparator);return t.data=e,t}}class cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class uw{constructor(e){this.fields=e,e.sort(Fx.comparator)}static empty(){return new uw([])}unionWith(e){let t=new lw(Fx.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new uw(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lx(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dw{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hw("Invalid base64 string: "+e):e}}(e);return new dw(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new dw(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Px(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dw.EMPTY_BYTE_STRING=new dw("");const pw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fw(e){if(mx(!!e),"string"==typeof e){let t=0;const n=pw.exec(e);if(mx(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:mw(e.seconds),nanos:mw(e.nanos)}}function mw(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gw(e){return"string"==typeof e?dw.fromBase64String(e):dw.fromUint8Array(e)}function yw(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vw(e){const t=e.mapValue.fields.__previous_value__;return yw(t)?vw(t):t}function _w(e){const t=fw(e.mapValue.fields.__local_write_time__.timestampValue);return new Mx(t.seconds,t.nanos)}class bw{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class xw{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xw("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xw&&e.projectId===this.projectId&&e.database===this.database}}const ww={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yw(e)?4:Fw(e)?9007199254740991:10:fx()}function Ew(e,t){if(e===t)return!0;const n=Sw(e);if(n!==Sw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _w(e).isEqual(_w(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=fw(e.timestampValue),r=fw(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gw(e.bytesValue).isEqual(gw(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mw(e.geoPointValue.latitude)===mw(t.geoPointValue.latitude)&&mw(e.geoPointValue.longitude)===mw(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mw(e.integerValue)===mw(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mw(e.doubleValue),r=mw(t.doubleValue);return n===r?Jx(n)===Jx(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Lx(e.arrayValue.values||[],t.arrayValue.values||[],Ew);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(nw(n)!==nw(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ew(n[i],r[i])))return!1;return!0}(e,t);default:return fx()}}function Aw(e,t){return void 0!==(e.values||[]).find((e=>Ew(e,t)))}function Tw(e,t){if(e===t)return 0;const n=Sw(e),r=Sw(t);if(n!==r)return Px(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Px(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mw(e.integerValue||e.doubleValue),r=mw(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Cw(e.timestampValue,t.timestampValue);case 4:return Cw(_w(e),_w(t));case 5:return Px(e.stringValue,t.stringValue);case 6:return function(e,t){const n=gw(e),r=gw(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Px(n[i],r[i]);if(0!==e)return e}return Px(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Px(mw(e.latitude),mw(t.latitude));return 0!==n?n:Px(mw(e.longitude),mw(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Tw(n[i],r[i]);if(e)return e}return Px(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ww.mapValue&&t===ww.mapValue)return 0;if(e===ww.mapValue)return 1;if(t===ww.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Px(r[a],o[a]);if(0!==e)return e;const t=Tw(n[r[a]],i[o[a]]);if(0!==t)return t}return Px(r.length,o.length)}(e.mapValue,t.mapValue);default:throw fx()}}function Cw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Px(e,t);const n=fw(e),r=fw(t),i=Px(n.seconds,r.seconds);return 0!==i?i:Px(n.nanos,r.nanos)}function kw(e){return Iw(e)}function Iw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=fw(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gw(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,jx.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Iw(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Iw(e.fields[i]));return n+"}"}(e.mapValue):fx();var t,n}function Pw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Lw(e){return!!e&&"integerValue"in e}function Mw(e){return!!e&&"arrayValue"in e}function Ow(e){return!!e&&"nullValue"in e}function Nw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Rw(e){return!!e&&"mapValue"in e}function Dw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return rw(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Dw(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Dw(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Fw(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class jw{constructor(e){this.value=e}static empty(){return new jw({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Rw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dw(t)}setAll(e){let t=Fx.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Dw(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Rw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ew(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Rw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){rw(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new jw(Dw(this.value))}}function zw(e){const t=[];return rw(e.fields,((e,n)=>{const r=new Fx([e]);if(Rw(n)){const e=zw(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new uw(t)}class Bw{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bw(e,0,Ox.min(),Ox.min(),Ox.min(),jw.empty(),0)}static newFoundDocument(e,t,n,r){return new Bw(e,1,t,Ox.min(),n,r,0)}static newNoDocument(e,t){return new Bw(e,2,t,Ox.min(),Ox.min(),jw.empty(),0)}static newUnknownDocument(e,t){return new Bw(e,3,t,Ox.min(),Ox.min(),jw.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ox.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jw.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jw.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ox.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bw&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bw(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Uw{constructor(e,t){this.position=e,this.inclusive=t}}function Vw(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?jx.comparator(jx.fromName(a.referenceValue),n.key):Tw(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Zw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ew(e.position[n],t.position[n]))return!1;return!0}class qw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Gw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ww{}class Hw extends Ww{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new tS(e,t,n):"array-contains"===t?new oS(e,n):"in"===t?new aS(e,n):"not-in"===t?new sS(e,n):"array-contains-any"===t?new lS(e,n):new Hw(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new nS(e,n):new rS(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tw(t,this.value)):null!==t&&Sw(this.value)===Sw(t)&&this.matchesComparison(Tw(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fx()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Xw extends Ww{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Xw(e,t)}matches(e){return Kw(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Kw(e){return"and"===e.op}function Yw(e){return Jw(e)&&Kw(e)}function Jw(e){for(const t of e.filters)if(t instanceof Xw)return!1;return!0}function Qw(e){if(e instanceof Hw)return e.field.canonicalString()+e.op.toString()+kw(e.value);if(Yw(e))return e.filters.map((e=>Qw(e))).join(",");{const t=e.filters.map((e=>Qw(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function $w(e,t){return e instanceof Hw?function(e,t){return t instanceof Hw&&e.op===t.op&&e.field.isEqual(t.field)&&Ew(e.value,t.value)}(e,t):e instanceof Xw?function(e,t){return t instanceof Xw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&$w(n,t.filters[r])),!0)}(e,t):void fx()}function eS(e){return e instanceof Hw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(kw(e.value))}(e):e instanceof Xw?function(e){return e.op.toString()+" {"+e.getFilters().map(eS).join(" ,")+"}"}(e):"Filter"}class tS extends Hw{constructor(e,t,n){super(e,t,n),this.key=jx.fromName(n.referenceValue)}matches(e){const t=jx.comparator(e.key,this.key);return this.matchesComparison(t)}}class nS extends Hw{constructor(e,t){super(e,"in",t),this.keys=iS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rS extends Hw{constructor(e,t){super(e,"not-in",t),this.keys=iS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iS(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>jx.fromName(e.referenceValue)))}class oS extends Hw{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mw(t)&&Aw(t.arrayValue,this.value)}}class aS extends Hw{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Aw(this.value.arrayValue,t)}}class sS extends Hw{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Aw(this.value.arrayValue,t)}}class lS extends Hw{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mw(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Aw(this.value.arrayValue,e)))}}class cS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function uS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new cS(e,t,n,r,i,o,a)}function hS(e){const t=gx(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Qw(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Yx(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>kw(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>kw(e))).join(",")),t.dt=e}return t.dt}function dS(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Gw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$w(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zw(e.startAt,t.startAt)&&Zw(e.endAt,t.endAt)}function pS(e){return jx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class fS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}}function mS(e,t,n,r,i,o,a,s){return new fS(e,t,n,r,i,o,a,s)}function gS(e){return new fS(e)}function yS(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vS(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function _S(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function bS(e){return null!==e.collectionGroup}function xS(e){const t=gx(e);if(null===t.wt){t.wt=[];const e=_S(t),n=vS(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new qw(e)),t.wt.push(new qw(Fx.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new qw(Fx.keyField(),e))}}}return t.wt}function wS(e){const t=gx(e);if(!t._t)if("F"===t.limitType)t._t=uS(t.path,t.collectionGroup,xS(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of xS(t)){const t="desc"===i.dir?"asc":"desc";e.push(new qw(i.field,t))}const n=t.endAt?new Uw(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Uw(t.startAt.position,t.startAt.inclusive):null;t._t=uS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function SS(e,t){t.getFirstInequalityField(),_S(e);const n=e.filters.concat([t]);return new fS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ES(e,t,n){return new fS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function AS(e,t){return dS(wS(e),wS(t))&&e.limitType===t.limitType}function TS(e){return"".concat(hS(wS(e)),"|lt:").concat(e.limitType)}function CS(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>eS(e))).join(", "),"]")),Yx(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>kw(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>kw(e))).join(",")),"Target(".concat(t,")")}(wS(e)),"; limitType=").concat(e.limitType,")")}function kS(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):jx.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of xS(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Vw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xS(e),t))&&!(e.endAt&&!function(e,t,n){const r=Vw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xS(e),t))}(e,t)}function IS(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function PS(e){return(t,n)=>{let r=!1;for(const i of xS(e)){const e=LS(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function LS(e,t,n){const r=e.field.isKeyField()?jx.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tw(r,i):fx()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fx()}}class MS{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rw(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return iw(this.inner)}size(){return this.innerSize}}const OS=new ow(jx.comparator);function NS(){return OS}const RS=new ow(jx.comparator);function DS(){let e=RS;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function FS(e){let t=RS;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function jS(){return BS()}function zS(){return BS()}function BS(){return new MS((e=>e.toString()),((e,t)=>e.isEqual(t)))}const US=new ow(jx.comparator),VS=new lw(jx.comparator);function ZS(){let e=VS;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const qS=new lw(Px);function GS(){return qS}function WS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jx(t)?"-0":t}}function HS(e){return{integerValue:""+e}}function XS(e,t){return Qx(t)?HS(t):WS(e,t)}class KS{constructor(){this._=void 0}}function YS(e,t,n){return e instanceof $S?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yw(t)&&(t=vw(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof eE?tE(e,t):e instanceof nE?rE(e,t):function(e,t){const n=QS(e,t),r=oE(n)+oE(e.gt);return Lw(n)&&Lw(e.gt)?HS(r):WS(e.serializer,r)}(e,t)}function JS(e,t,n){return e instanceof eE?tE(e,t):e instanceof nE?rE(e,t):n}function QS(e,t){return e instanceof iE?Lw(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class $S extends KS{}class eE extends KS{constructor(e){super(),this.elements=e}}function tE(e,t){const n=aE(t);for(const r of e.elements)n.some((e=>Ew(e,r)))||n.push(r);return{arrayValue:{values:n}}}class nE extends KS{constructor(e){super(),this.elements=e}}function rE(e,t){let n=aE(t);for(const r of e.elements)n=n.filter((e=>!Ew(e,r)));return{arrayValue:{values:n}}}class iE extends KS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function oE(e){return mw(e.integerValue||e.doubleValue)}function aE(e){return Mw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class sE{constructor(e,t){this.version=e,this.transformResults=t}}class lE{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lE}static exists(e){return new lE(void 0,e)}static updateTime(e){return new lE(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class uE{}function hE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new xE(e.key,lE.none()):new gE(e.key,e.data,lE.none());{const n=e.data,r=jw.empty();let i=new lw(Fx.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new yE(e.key,r,new uw(i.toArray()),lE.none())}}function dE(e,t,n){e instanceof gE?function(e,t,n){const r=e.value.clone(),i=_E(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yE?function(e,t,n){if(!cE(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=_E(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function pE(e,t,n,r){return e instanceof gE?function(e,t,n,r){if(!cE(e.precondition,t))return n;const i=e.value.clone(),o=bE(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof yE?function(e,t,n,r){if(!cE(e.precondition,t))return n;const i=bE(e.fieldTransforms,r,t),o=t.data;return o.setAll(vE(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return cE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function fE(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=QS(r.transform,e||null);null!=i&&(null===n&&(n=jw.empty()),n.set(r.field,i))}return n||null}function mE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Lx(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof eE&&t instanceof eE||e instanceof nE&&t instanceof nE?Lx(e.elements,t.elements,Ew):e instanceof iE&&t instanceof iE?Ew(e.gt,t.gt):e instanceof $S&&t instanceof $S}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gE extends uE{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yE extends uE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function vE(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function _E(e,t,n){const r=new Map;mx(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,JS(a,s,n[i]))}return r}function bE(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,YS(e,o,t))}return r}class xE extends uE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wE extends uE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SE{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&dE(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=pE(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=pE(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=zS();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=hE(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Ox.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ZS())}isEqual(e){return this.batchId===e.batchId&&Lx(this.mutations,e.mutations,((e,t)=>mE(e,t)))&&Lx(this.baseMutations,e.baseMutations,((e,t)=>mE(e,t)))}}class EE{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){mx(e.mutations.length===n.length);let r=US;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new EE(e,t,n,r)}}class AE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class TE{constructor(e,t){this.count=e,this.unchangedNames=t}}var CE,kE;function IE(e){switch(e){default:return fx();case yx.CANCELLED:case yx.UNKNOWN:case yx.DEADLINE_EXCEEDED:case yx.RESOURCE_EXHAUSTED:case yx.INTERNAL:case yx.UNAVAILABLE:case yx.UNAUTHENTICATED:return!1;case yx.INVALID_ARGUMENT:case yx.NOT_FOUND:case yx.ALREADY_EXISTS:case yx.PERMISSION_DENIED:case yx.FAILED_PRECONDITION:case yx.ABORTED:case yx.OUT_OF_RANGE:case yx.UNIMPLEMENTED:case yx.DATA_LOSS:return!0}}function PE(e){if(void 0===e)return hx("GRPC error has no .code"),yx.UNKNOWN;switch(e){case CE.OK:return yx.OK;case CE.CANCELLED:return yx.CANCELLED;case CE.UNKNOWN:return yx.UNKNOWN;case CE.DEADLINE_EXCEEDED:return yx.DEADLINE_EXCEEDED;case CE.RESOURCE_EXHAUSTED:return yx.RESOURCE_EXHAUSTED;case CE.INTERNAL:return yx.INTERNAL;case CE.UNAVAILABLE:return yx.UNAVAILABLE;case CE.UNAUTHENTICATED:return yx.UNAUTHENTICATED;case CE.INVALID_ARGUMENT:return yx.INVALID_ARGUMENT;case CE.NOT_FOUND:return yx.NOT_FOUND;case CE.ALREADY_EXISTS:return yx.ALREADY_EXISTS;case CE.PERMISSION_DENIED:return yx.PERMISSION_DENIED;case CE.FAILED_PRECONDITION:return yx.FAILED_PRECONDITION;case CE.ABORTED:return yx.ABORTED;case CE.OUT_OF_RANGE:return yx.OUT_OF_RANGE;case CE.UNIMPLEMENTED:return yx.UNIMPLEMENTED;case CE.DATA_LOSS:return yx.DATA_LOSS;default:return fx()}}(kE=CE||(CE={}))[kE.OK=0]="OK",kE[kE.CANCELLED=1]="CANCELLED",kE[kE.UNKNOWN=2]="UNKNOWN",kE[kE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kE[kE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kE[kE.NOT_FOUND=5]="NOT_FOUND",kE[kE.ALREADY_EXISTS=6]="ALREADY_EXISTS",kE[kE.PERMISSION_DENIED=7]="PERMISSION_DENIED",kE[kE.UNAUTHENTICATED=16]="UNAUTHENTICATED",kE[kE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kE[kE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kE[kE.ABORTED=10]="ABORTED",kE[kE.OUT_OF_RANGE=11]="OUT_OF_RANGE",kE[kE.UNIMPLEMENTED=12]="UNIMPLEMENTED",kE[kE.INTERNAL=13]="INTERNAL",kE[kE.UNAVAILABLE=14]="UNAVAILABLE",kE[kE.DATA_LOSS=15]="DATA_LOSS";class LE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ME}static getOrCreateInstance(){return null===ME&&(ME=new LE),ME}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let ME=null;function OE(){return new TextEncoder}const NE=new ix([4294967295,4294967295],0);function RE(e){const t=OE().encode(e),n=new rx;return n.update(t),new Uint8Array(n.digest())}function DE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ix([n,r],0),new ix([i,o],0)]}class FE{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new jE("Invalid padding: ".concat(t));if(n<0)throw new jE("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new jE("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new jE("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=ix.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(ix.fromNumber(n)));return 1===r.compare(NE)&&(r=new ix([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=RE(e),[n,r]=DE(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new FE(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.It)return;const t=RE(e),[n,r]=DE(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class jE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zE{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,BE.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zE(Ox.min(),r,new ow(Px),NS(),ZS())}}class BE{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new BE(n,t,ZS(),ZS(),ZS())}}class UE{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class VE{constructor(e,t){this.targetId=e,this.Vt=t}}class ZE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dw.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class qE{constructor(){this.St=0,this.Dt=HE(),this.Ct=dw.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ZS(),t=ZS(),n=ZS();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fx()}})),new BE(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=HE()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class GE{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=NS(),this.zt=WE(),this.Wt=new ow(Px)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:fx()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(pS(o))if(0===r){const e=new jx(o.path);this.Yt(n,e,Bw.newNoDocument(e,Ox.min()))}else mx(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=LE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,a,s,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(o=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let s,l;try{s=gw(i).toUint8Array()}catch(e){if(e instanceof hw)return dx("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new FE(s,o,a)}catch(e){return dx(e instanceof jE?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&pS(i.target)){const t=new jx(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Bw.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=ZS();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new zE(e,t,this.Wt,this.jt,n);return this.jt=NS(),this.zt=WE(),this.Wt=new ow(Px),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new qE,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new lw(Px),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ux("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new qE),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function WE(){return new ow(jx.comparator)}function HE(){return new ow(jx.comparator)}const XE={asc:"ASCENDING",desc:"DESCENDING"},KE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YE={and:"AND",or:"OR"};class JE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function QE(e,t){return e.useProto3Json||Yx(t)?t:{value:t}}function $E(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function eA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tA(e,t){return $E(e,t.toTimestamp())}function nA(e){return mx(!!e),Ox.fromTimestamp(function(e){const t=fw(e);return new Mx(t.seconds,t.nanos)}(e))}function rA(e,t){return function(e){return new Rx(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function iA(e){const t=Rx.fromString(e);return mx(EA(t)),t}function oA(e,t){return rA(e.databaseId,t.path)}function aA(e,t){const n=iA(t);if(n.get(1)!==e.databaseId.projectId)throw new vx(yx.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vx(yx.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new jx(uA(n))}function sA(e,t){return rA(e.databaseId,t)}function lA(e){const t=iA(e);return 4===t.length?Rx.emptyPath():uA(t)}function cA(e){return new Rx(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function uA(e){return mx(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function hA(e,t,n){return{name:oA(e,t),fields:n.value.mapValue.fields}}function dA(e,t){let n;if(t instanceof gE)n={update:hA(e,t.key,t.value)};else if(t instanceof xE)n={delete:oA(e,t.key)};else if(t instanceof yE)n={update:hA(e,t.key,t.data),updateMask:SA(t.fieldMask)};else{if(!(t instanceof wE))return fx();n={verify:oA(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof $S)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof eE)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof iE)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw fx()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:tA(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fx()}(e,t.precondition)),n}function pA(e,t){return{documents:[sA(e,t.path)]}}function fA(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=sA(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=sA(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return wA(Xw.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:bA(e.field),direction:yA(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=QE(e,t.limit);var s;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(s=t.startAt).inclusive,values:s.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function mA(e){let t=lA(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mx(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=gA(e);return t instanceof Xw&&Yw(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((e=>function(e){return new qw(xA(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Yx(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Uw(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Uw(n,t)}(n.endAt)),mS(t,i,a,o,s,"F",l,c)}function gA(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xA(e.unaryFilter.field);return Hw.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=xA(e.unaryFilter.field);return Hw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xA(e.unaryFilter.field);return Hw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xA(e.unaryFilter.field);return Hw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fx()}}(e):void 0!==e.fieldFilter?function(e){return Hw.create(xA(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fx()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xw.create(e.compositeFilter.filters.map((e=>gA(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fx()}}(e.compositeFilter.op))}(e):fx()}function yA(e){return XE[e]}function vA(e){return KE[e]}function _A(e){return YE[e]}function bA(e){return{fieldPath:e.canonicalString()}}function xA(e){return Fx.fromServerFormat(e.fieldPath)}function wA(e){return e instanceof Hw?function(e){if("=="===e.op){if(Nw(e.value))return{unaryFilter:{field:bA(e.field),op:"IS_NAN"}};if(Ow(e.value))return{unaryFilter:{field:bA(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nw(e.value))return{unaryFilter:{field:bA(e.field),op:"IS_NOT_NAN"}};if(Ow(e.value))return{unaryFilter:{field:bA(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bA(e.field),op:vA(e.op),value:e.value}}}(e):e instanceof Xw?function(e){const t=e.getFilters().map((e=>wA(e)));return 1===t.length?t[0]:{compositeFilter:{op:_A(e.op),filters:t}}}(e):fx()}function SA(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function EA(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class AA{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ox.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ox.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dw.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new AA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new AA(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new AA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new AA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class TA{constructor(e){this.fe=e}}function CA(e){const t=mA({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ES(t,t.limit,"L"):t}class kA{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mw(e.integerValue));else if("doubleValue"in e){const n=mw(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Jx(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(gw(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Fw(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):fx()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),jx.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}kA.Ve=new kA;class IA{constructor(){this.rn=new PA}addToCollectionParentIndex(e,t){return this.rn.add(t),Hx.resolve()}getCollectionParents(e,t){return Hx.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Hx.resolve()}deleteFieldIndex(e,t){return Hx.resolve()}getDocumentsMatchingTarget(e,t){return Hx.resolve(null)}getIndexType(e,t){return Hx.resolve(0)}getFieldIndexes(e,t){return Hx.resolve([])}getNextCollectionGroupToUpdate(e){return Hx.resolve(null)}getMinOffset(e,t){return Hx.resolve(Vx.min())}getMinOffsetFromCollectionGroup(e,t){return Hx.resolve(Vx.min())}updateCollectionGroup(e,t,n){return Hx.resolve()}updateIndexEntries(e,t){return Hx.resolve()}}class PA{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lw(Rx.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new lw(Rx.comparator)).toArray()}}new Uint8Array(0);class LA{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new LA(e,LA.DEFAULT_COLLECTION_PERCENTILE,LA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}LA.DEFAULT_COLLECTION_PERCENTILE=10,LA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LA.DEFAULT=new LA(41943040,LA.DEFAULT_COLLECTION_PERCENTILE,LA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LA.DISABLED=new LA(-1,0,0);class MA{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new MA(0)}static Mn(){return new MA(-1)}}class OA{constructor(){this.changes=new MS((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bw.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Hx.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class RA{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&pE(n.mutation,e,uw.empty(),Mx.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ZS()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ZS();const r=jS();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=DS();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=jS();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ZS())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=NS();const o=BS(),a=BS();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof yE)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),pE(a.mutation,t,a.mutation.getFieldMask(),Mx.now())):o.set(t.key,uw.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new NA(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=BS();let r=new ow(((e,t)=>e-t)),i=ZS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||uw.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||ZS()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=zS();l.forEach((e=>{if(!i.has(e)){const r=hE(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return Hx.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return jx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Hx.resolve(jS());let a=-1,s=i;return o.next((t=>Hx.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Hx.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,ZS()))).next((e=>({batchId:a,changes:FS(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new jx(t)).next((e=>{let t=DS();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=DS();return this.indexManager.getCollectionParents(e,r).next((o=>Hx.forEach(o,(o=>{const a=function(e,t){return new fS(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Bw.newInvalidDocument(r)))}));let n=DS();return e.forEach(((e,i)=>{const o=r.get(e);void 0!==o&&pE(o.mutation,i,uw.empty(),Mx.now()),kS(t,i)&&(n=n.insert(e,i))})),n}))}}class DA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Hx.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:nA(n.createTime)}),Hx.resolve()}getNamedQuery(e,t){return Hx.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:CA(e.bundledQuery),readTime:nA(e.readTime)}}(t)),Hx.resolve()}}class FA{constructor(){this.overlays=new ow(jx.comparator),this.ls=new Map}getOverlay(e,t){return Hx.resolve(this.overlays.get(t))}getOverlays(e,t){const n=jS();return Hx.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Hx.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Hx.resolve()}getOverlaysForCollection(e,t,n){const r=jS(),i=t.length+1,o=new jx(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Hx.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ow(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=jS(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=jS(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Hx.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new AE(t,n));let i=this.ls.get(t);void 0===i&&(i=ZS(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class jA{constructor(){this.fs=new lw(zA.ds),this.ws=new lw(zA._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new zA(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new zA(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new jx(new Rx([])),n=new zA(t,e),r=new zA(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new jx(new Rx([])),n=new zA(t,e),r=new zA(t,e+1);let i=ZS();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new zA(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class zA{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return jx.comparator(e.key,t.key)||Px(e.As,t.As)}static _s(e,t){return Px(e.As,t.As)||jx.comparator(e.key,t.key)}}class BA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new lw(zA.ds)}checkEmpty(e){return Hx.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SE(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new zA(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Hx.resolve(o)}lookupMutationBatch(e,t){return Hx.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Hx.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Hx.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Hx.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new zA(t,0),r=new zA(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Hx.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lw(Px);return t.forEach((e=>{const t=new zA(e,0),r=new zA(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Hx.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;jx.isDocumentKey(i)||(i=i.child(""));const o=new zA(new jx(i),0);let a=new lw(Px);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)}),o),Hx.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){mx(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Hx.forEach(t.mutations,(r=>{const i=new zA(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new zA(t,0),r=this.Rs.firstAfterOrEqual(n);return Hx.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Hx.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UA{constructor(e){this.Ds=e,this.docs=new ow(jx.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Hx.resolve(n?n.document.mutableCopy():Bw.newInvalidDocument(t))}getEntries(e,t){let n=NS();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Bw.newInvalidDocument(e))})),Hx.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=NS();const o=t.path,a=new jx(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Zx(Ux(a),n)<=0||(r.has(a.key)||kS(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Hx.resolve(i)}getAllFromCollectionGroup(e,t,n,r){fx()}Cs(e,t){return Hx.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new VA(this)}getSize(e){return Hx.resolve(this.size)}}class VA extends OA{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Hx.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ZA{constructor(e){this.persistence=e,this.xs=new MS((e=>hS(e)),dS),this.lastRemoteSnapshotVersion=Ox.min(),this.highestTargetId=0,this.Ns=0,this.ks=new jA,this.targetCount=0,this.Ms=MA.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Hx.resolve()}getLastRemoteSnapshotVersion(e){return Hx.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Hx.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Hx.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Hx.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new MA(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Hx.resolve()}updateTargetData(e,t){return this.Fn(t),Hx.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Hx.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Hx.waitFor(i).next((()=>r))}getTargetCount(e){return Hx.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Hx.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Hx.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Hx.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Hx.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Hx.resolve(n)}containsKey(e,t){return Hx.resolve(this.ks.containsKey(t))}}class qA{constructor(e,t){this.$s={},this.overlays={},this.Os=new Kx(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ZA(this),this.indexManager=new IA,this.remoteDocumentCache=function(e){return new UA(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new TA(t),this.qs=new DA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new BA(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){ux("MemoryPersistence","Starting transaction:",e);const r=new GA(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Hx.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class GA extends Gx{constructor(e){super(),this.currentSequenceNumber=e}}class WA{constructor(e){this.persistence=e,this.Qs=new jA,this.js=null}static zs(e){return new WA(e)}get Ws(){if(this.js)return this.js;throw fx()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Hx.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Hx.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Hx.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hx.forEach(this.Ws,(n=>{const r=jx.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Ox.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Hx.or([()=>Hx.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class HA{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=ZS(),r=ZS();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new HA(e,t.fromCache,n,r)}}class XA{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(yS(t))return Hx.resolve(null);let n=wS(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ES(t,null,"F"),n=wS(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ZS(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,ES(t,null,"F")):this.Wi(e,o,t,n)}))))})))))}Gi(e,t,n,r){return yS(t)||r.isEqual(Ox.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(cx()<=Nn.DEBUG&&ux("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),CS(t)),this.Wi(e,o,t,Bx(r,-1)))}))}ji(e,t){let n=new lw(PS(e));return t.forEach(((t,r)=>{kS(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return cx()<=Nn.DEBUG&&ux("QueryEngine","Using full collection scan to execute query:",CS(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vx.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class KA{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new ow(Px),this.Yi=new MS((e=>hS(e)),dS),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RA(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function YA(e,t,n,r){return new KA(e,t,n,r)}async function JA(e,t){const n=gx(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=ZS();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({er:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function QA(e){const t=gx(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function $A(e,t,n){let r=ZS(),i=ZS();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=NS();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Ox.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ux("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{nr:r,sr:i}}))}function eT(e,t){const n=gx(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function tT(e,t){const n=gx(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Hx.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new AA(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function nT(e,t,n){const r=gx(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Xx(e))throw e;ux("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function rT(e,t,n){const r=gx(e);let i=Ox.min(),o=ZS();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=gx(e),i=r.Yi.get(n);return void 0!==i?Hx.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,wS(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Ox.min(),n?o:ZS()))).next((e=>(iT(r,IS(t),e),{documents:e,ir:o})))))}function iT(e,t,n){let r=e.Xi.get(t)||Ox.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class oT{constructor(){this.activeTargetIds=GS()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aT{constructor(){this.Hr=new oT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new oT,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sT{Yr(e){}shutdown(){}}class lT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ux("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ux("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let cT=null;function uT(){return null===cT?cT=268435456+Math.round(2147483648*Math.random()):cT++,"0x"+cT.toString(16)}const hT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pT="WebChannelConnection";class fT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=uT(),a=this.To(e,t);ux("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={};return this.Eo(s,r,i),this.Ao(e,a,s,n).then((t=>(ux("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw dx("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t}))}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sx,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=hT[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=uT();return new Promise(((o,a)=>{const s=new nx;s.setWithCredentials(!0),s.listenOnce(Jb.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Yb.NO_ERROR:const t=s.getResponseJson();ux(pT,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Yb.TIMEOUT:ux(pT,"RPC '".concat(e,"' ").concat(i," timed out")),a(new vx(yx.DEADLINE_EXCEEDED,"Request time out"));break;case Yb.HTTP_ERROR:const n=s.getStatus();if(ux(pT,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(yx).indexOf(t)>=0?t:yx.UNKNOWN}(t.status);a(new vx(e,t.message))}else a(new vx(yx.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new vx(yx.UNAVAILABLE,"Connection failed."));break;default:fx()}}finally{ux(pT,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);ux(pT,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=uT(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xb(),a=Kb(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.xmlHttpFactory=new ex({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");ux(pT,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);let h=!1,d=!1;const p=new dT({ro:t=>{d?ux(pT,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ux(pT,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),ux(pT,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,tx.EventType.OPEN,(()=>{d||ux(pT,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),f(u,tx.EventType.CLOSE,(()=>{d||(d=!0,ux(pT,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.wo())})),f(u,tx.EventType.ERROR,(t=>{d||(d=!0,dx(pT,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),p.wo(new vx(yx.UNAVAILABLE,"The operation could not be completed")))})),f(u,tx.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];mx(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){ux(pT,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=CE[e];if(void 0!==t)return PE(t)}(t),i=a.message;void 0===n&&(n=yx.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,p.wo(new vx(n,i)),u.close()}else ux(pT,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p._o(i)}})),f(a,Qb.STAT_EVENT,(t=>{t.stat===$b.PROXY?ux(pT,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$b.NOPROXY&&ux(pT,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{p.fo()}),0),p}}function mT(){return"undefined"!=typeof document?document:null}function gT(e){return new JE(e,!0)}class yT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&ux("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class vT{constructor(e,t,n,r,i,o,a,s){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yT(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===yx.RESOURCE_EXHAUSTED?(hx(t.toString()),hx("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===yx.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new vx(yx.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return ux("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(ux("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _T extends vT{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fx()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(mx(void 0===t||"string"==typeof t),dw.fromBase64String(t||"")):(mx(void 0===t||t instanceof Uint8Array),dw.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?yx.UNKNOWN:PE(e.code);return new vx(t,e.message||"")}(a);n=new ZE(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=aA(e,r.document.name),o=nA(r.document.updateTime),a=r.document.createTime?nA(r.document.createTime):Ox.min(),s=new jw({mapValue:{fields:r.document.fields}}),l=Bw.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new UE(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=aA(e,r.document),o=r.readTime?nA(r.readTime):Ox.min(),a=Bw.newNoDocument(i,o),s=r.removedTargetIds||[];n=new UE([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=aA(e,r.document),o=r.removedTargetIds||[];n=new UE([],o,i,null)}else{if(!("filter"in t))return fx();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new TE(r,i),a=e.targetId;n=new VE(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ox.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ox.min():t.readTime?nA(t.readTime):Ox.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=cA(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=pS(r)?{documents:pA(e,r)}:{query:fA(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=eA(e,t.resumeToken);const r=QE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ox.min())>0){n.readTime=$E(e,t.snapshotVersion.toTimestamp());const r=QE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fx()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=cA(this.serializer),t.removeTarget=e,this.Wo(t)}}class bT extends vT{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(mx(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(mx(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?nA(e.updateTime):nA(t);return n.isEqual(Ox.min())&&(n=nA(t)),new sE(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=nA(e.commitTime);return this.listener.cu(n,t)}return mx(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=cA(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>dA(this.serializer,e)))};this.Wo(t)}}class xT extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new vx(yx.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yx.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vx(yx.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,a]=i;return this.connection.vo(e,t,n,o,a,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yx.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vx(yx.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class wT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(hx(t),this.mu=!1):ux("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ST{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{MT(this)&&(ux("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=gx(e);t.vu.add(4),await AT(t),t.bu.set("Unknown"),t.vu.delete(4),await ET(t)}(this))}))})),this.bu=new wT(n,r)}}async function ET(e){if(MT(e))for(const t of e.Ru)await t(!0)}async function AT(e){for(const t of e.Ru)await t(!1)}function TT(e,t){const n=gx(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),LT(n)?PT(n):YT(n).Ko()&&kT(n,t))}function CT(e,t){const n=gx(e),r=YT(n);n.Au.delete(t),r.Ko()&&IT(n,t),0===n.Au.size&&(r.Ko()?r.jo():MT(n)&&n.bu.set("Unknown"))}function kT(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ox.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}YT(e).su(t)}function IT(e,t){e.Vu.qt(t),YT(e).iu(t)}function PT(e){e.Vu=new GE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),YT(e).start(),e.bu.gu()}function LT(e){return MT(e)&&!YT(e).Uo()&&e.Au.size>0}function MT(e){return 0===gx(e).vu.size}function OT(e){e.Vu=void 0}async function NT(e){e.Au.forEach(((t,n)=>{kT(e,t)}))}async function RT(e,t){OT(e),LT(e)?(e.bu.Iu(t),PT(e)):e.bu.set("Unknown")}async function DT(e,t,n){if(e.bu.set("Online"),t instanceof ZE&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){ux("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await FT(e,n)}else if(t instanceof UE?e.Vu.Ht(t):t instanceof VE?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Ox.min()))try{const t=await QA(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(dw.EMPTY_BYTE_STRING,r.snapshotVersion)),IT(e,t);const i=new AA(r.target,t,n,r.sequenceNumber);kT(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ux("RemoteStore","Failed to raise snapshot:",t),await FT(e,t)}}async function FT(e,t,n){if(!Xx(t))throw t;e.vu.add(1),await AT(e),e.bu.set("Offline"),n||(n=()=>QA(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ux("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await ET(e)}))}function jT(e,t){return t().catch((n=>FT(e,n,t)))}async function zT(e){const t=gx(e),n=JT(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;BT(t);)try{const e=await eT(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,UT(t,e)}catch(e){await FT(t,e)}VT(t)&&ZT(t)}function BT(e){return MT(e)&&e.Eu.length<10}function UT(e,t){e.Eu.push(t);const n=JT(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function VT(e){return MT(e)&&!JT(e).Uo()&&e.Eu.length>0}function ZT(e){JT(e).start()}async function qT(e){JT(e).hu()}async function GT(e){const t=JT(e);for(const n of e.Eu)t.uu(n.mutations)}async function WT(e,t,n){const r=e.Eu.shift(),i=EE.from(r,t,n);await jT(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await zT(e)}async function HT(e,t){t&&JT(e).ou&&await async function(e,t){if(IE(n=t.code)&&n!==yx.ABORTED){const n=e.Eu.shift();JT(e).Qo(),await jT(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await zT(e)}var n}(e,t),VT(e)&&ZT(e)}async function XT(e,t){const n=gx(e);n.asyncQueue.verifyOperationInProgress(),ux("RemoteStore","RemoteStore received new credentials");const r=MT(n);n.vu.add(3),await AT(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await ET(n)}async function KT(e,t){const n=gx(e);t?(n.vu.delete(2),await ET(n)):t||(n.vu.add(2),await AT(n),n.bu.set("Unknown"))}function YT(e){return e.Su||(e.Su=function(e,t,n){const r=gx(e);return r.fu(),new _T(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:NT.bind(null,e),ao:RT.bind(null,e),nu:DT.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),LT(e)?PT(e):e.bu.set("Unknown")):(await e.Su.stop(),OT(e))}))),e.Su}function JT(e){return e.Du||(e.Du=function(e,t,n){const r=gx(e);return r.fu(),new bT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:qT.bind(null,e),ao:HT.bind(null,e),au:GT.bind(null,e),cu:WT.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await zT(e)):(await e.Du.stop(),e.Eu.length>0&&(ux("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class QT{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new _x,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new QT(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vx(yx.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $T(e,t){if(hx("AsyncQueue","".concat(t,": ").concat(e)),Xx(e))return new vx(yx.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class eC{constructor(e){this.comparator=e?(t,n)=>e(t,n)||jx.comparator(t.key,n.key):(e,t)=>jx.comparator(e.key,t.key),this.keyedMap=DS(),this.sortedSet=new ow(this.comparator)}static emptySet(e){return new eC(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eC))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new eC;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class tC{constructor(){this.Cu=new ow(jx.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):fx():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class nC{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new nC(e,t,eC.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&AS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class rC{constructor(){this.Nu=void 0,this.listeners=[]}}class iC{constructor(){this.queries=new MS((e=>TS(e)),AS),this.onlineState="Unknown",this.ku=new Set}}async function oC(e,t){const n=gx(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new rC),i)try{o.Nu=await n.onListen(r)}catch(e){const n=$T(e,"Initialization of query '".concat(CS(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&cC(n)}async function aC(e,t){const n=gx(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function sC(e,t){const n=gx(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&cC(n)}function lC(e,t,n){const r=gx(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function cC(e){e.ku.forEach((e=>{e.next()}))}class uC{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new nC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=nC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class hC{constructor(e){this.key=e}}class dC{constructor(e){this.key=e}}class pC{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ZS(),this.mutatedKeys=ZS(),this.tc=PS(e),this.ec=new eC(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new tC,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=kS(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.rc(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.tc(u,s)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(a=!0)),p&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:a,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fx()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,s=a!==this.Xu;return this.Xu=a,0!==i.length||s?{snapshot:new nC(this.query,e.ec,r,i,e.mutatedKeys,0===a,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new tC,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ZS(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new dC(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new hC(n))})),t}hc(e){this.Yu=e.ir,this.Zu=ZS();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return nC.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class fC{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class mC{constructor(e){this.key=e,this.fc=!1}}class gC{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new MS((e=>TS(e)),AS),this._c=new Map,this.mc=new Set,this.gc=new ow(jx.comparator),this.yc=new Map,this.Ic=new jA,this.Tc={},this.Ec=new Map,this.Ac=MA.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function yC(e,t){const n=RC(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await tT(n.localStore,wS(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await vC(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&TT(n.remoteStore,e)}return i}async function vC(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await rT(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o);return IC(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const o=await rT(e.localStore,t,!0),a=new pC(t,o.ir),s=a.sc(o.documents),l=BE.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);IC(e,n,c.cc);const u=new fC(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function _C(e,t){const n=gx(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!AS(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await nT(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),CT(n.remoteStore,r.targetId),CC(n,r.targetId)})).catch(Wx)):(CC(n,r.targetId),await nT(n.localStore,r.targetId,!0))}async function bC(e,t){const n=gx(e);try{const e=await function(e,t){const n=gx(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];t.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Bs.addMatchingKeys(e,o.addedDocuments,s))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(dw.EMPTY_BYTE_STRING,Ox.min()).withLastLimboFreeSnapshotVersion(Ox.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&a.push(n.Bs.updateTargetData(e,c))}));let s=NS(),l=ZS();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push($A(e,o,t.documentUpdates).next((e=>{s=e.nr,l=e.sr}))),!r.isEqual(Ox.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Hx.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(mx(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?mx(r.fc):e.removedDocuments.size>0&&(mx(r.fc),r.fc=!1))})),await MC(n,e,t)}catch(e){await Wx(e)}}function xC(e,t,n){const r=gx(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=gx(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&cC(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wC(e,t,n){const r=gx(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new ow(jx.comparator);e=e.insert(o,Bw.newNoDocument(o,Ox.min()));const n=ZS().add(o),i=new zE(Ox.min(),new Map,new ow(Px),e,n);await bC(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),LC(r)}else await nT(r.localStore,t,!1).then((()=>CC(r,t,n))).catch(Wx)}async function SC(e,t){const n=gx(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gx(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Hx.resolve();return o.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);mx(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ZS();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);TC(n,r,null),AC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await MC(n,e)}catch(e){await Wx(e)}}async function EC(e,t,n){const r=gx(e);try{const e=await function(e,t){const n=gx(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(mx(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);TC(r,t,n),AC(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await MC(r,e)}catch(n){await Wx(n)}}function AC(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function TC(e,t,n){const r=gx(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function CC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||kC(e,t)}))}function kC(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(CT(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),LC(e))}function IC(e,t,n){for(const r of n)r instanceof hC?(e.Ic.addReference(r.key,t),PC(e,r)):r instanceof dC?(ux("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||kC(e,r.key)):fx()}function PC(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(ux("SyncEngine","New document in limbo: "+n),e.mc.add(r),LC(e))}function LC(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new jx(Rx.fromString(t)),r=e.Ac.next();e.yc.set(r,new mC(n)),e.gc=e.gc.insert(n,r),TT(e.remoteStore,new AA(wS(gS(n.path)),r,"TargetPurposeLimboResolution",Kx.ct))}}async function MC(e,t,n){const r=gx(e),i=[],o=[],a=[];r.wc.isEmpty()||(r.wc.forEach(((e,s)=>{a.push(r.Rc(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=HA.Li(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.dc.nu(i),await async function(e,t){const n=gx(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Hx.forEach(t,(t=>Hx.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Hx.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Xx(e))throw e;ux("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function OC(e,t){const n=gx(e);if(!n.currentUser.isEqual(t)){ux("SyncEngine","User change. New user:",t.toKey());const e=await JA(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new vx(yx.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await MC(n,e.er)}}function NC(e,t){const n=gx(e),r=n.yc.get(t);if(r&&r.fc)return ZS().add(r.key);{let e=ZS();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function RC(e){const t=gx(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wC.bind(null,t),t.dc.nu=sC.bind(null,t.eventManager),t.dc.Pc=lC.bind(null,t.eventManager),t}function DC(e){const t=gx(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=SC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=EC.bind(null,t),t}class FC{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=gT(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return YA(this.persistence,new XA,e.initialUser,this.serializer)}createPersistence(e){return new qA(WA.zs,this.serializer)}createSharedClientState(e){return new aT}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xC(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=OC.bind(null,this.syncEngine),await KT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new iC}createDatastore(e){const t=gT(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new fT(r));var r;return function(e,t,n,r){return new xT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>xC(this.syncEngine,e,0),o=lT.D()?new lT:new sT,new ST(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new gC(e,t,n,r,i,o);return a&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=gx(e);ux("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await AT(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class zC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):hx("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class BC{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ax.UNAUTHENTICATED,this.clientId=Ix.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ux("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ux("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vx(yx.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _x;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$T(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function UC(e,t){e.asyncQueue.verifyOperationInProgress(),ux("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await JA(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function VC(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qC(e);ux("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>XT(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>XT(t.remoteStore,n))),e._onlineComponents=t}function ZC(e){return"FirebaseError"===e.name?e.code===yx.FAILED_PRECONDITION||e.code===yx.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function qC(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ux("FirestoreClient","Using user provided OfflineComponentProvider");try{await UC(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ZC(n))throw n;dx("Error using user provided cache. Falling back to memory cache: "+n),await UC(e,new FC)}}else ux("FirestoreClient","Using default OfflineComponentProvider"),await UC(e,new FC);return e._offlineComponents}async function GC(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ux("FirestoreClient","Using user provided OnlineComponentProvider"),await VC(e,e._uninitializedComponentsProvider._online)):(ux("FirestoreClient","Using default OnlineComponentProvider"),await VC(e,new jC))),e._onlineComponents}function WC(e){return GC(e).then((e=>e.syncEngine))}async function HC(e){const t=await GC(e),n=t.eventManager;return n.onListen=yC.bind(null,t.syncEngine),n.onUnlisten=_C.bind(null,t.syncEngine),n}function XC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new _x;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new zC({next:n=>{t.enqueueAndForget((()=>aC(e,a))),n.fromCache&&"server"===r.source?i.reject(new vx(yx.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new uC(n,o,{includeMetadataChanges:!0,Ku:!0});return oC(e,a)}(await HC(e),e.asyncQueue,t,n,r))),r.promise}function KC(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const YC=new Map;function JC(e,t,n){if(!n)throw new vx(yx.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function QC(e){if(!jx.isDocumentKey(e))throw new vx(yx.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function $C(e){if(jx.isDocumentKey(e))throw new vx(yx.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ek(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":fx()}function tk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vx(yx.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ek(e);throw new vx(yx.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class nk{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new vx(yx.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vx(yx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new vx(yx.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KC(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new vx(yx.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new vx(yx.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new vx(yx.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class rk{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vx(yx.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vx(yx.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nk(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xx;switch(e.type){case"firstParty":return new Ax(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vx(yx.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YC.get(e);t&&(ux("ComponentProvider","Removing Datastore"),YC.delete(e),t.terminate())}(this),Promise.resolve()}}class ik{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ak(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ik(this.firestore,e,this._key)}}class ok{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ok(this.firestore,e,this._query)}}class ak extends ok{constructor(e,t,n){super(e,t,gS(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ik(this.firestore,null,new jx(e))}withConverter(e){return new ak(this.firestore,e,this._path)}}function sk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=kn(e),1===arguments.length&&(t=Ix.A()),JC("doc","path",t),e instanceof rk){const n=Rx.fromString(t,...r);return QC(n),new ik(e,null,new jx(n))}{if(!(e instanceof ik||e instanceof ak))throw new vx(yx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Rx.fromString(t,...r));return QC(n),new ik(e.firestore,e instanceof ak?e.converter:null,new jx(n))}}class lk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yT(this,"async_queue_retry"),this.Xc=()=>{const e=mT();e&&ux("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=mT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=mT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new _x;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(Ef){if(!Xx(Ef))throw Ef;ux("AsyncQueue","Operation failed with retryable error: "+Ef)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hx("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=QT.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&fx()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class ck extends rk{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new lk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dk(this),this._firestoreClient.terminate()}}function uk(e,t){const n="string"==typeof e?e:t||"(default)",r=dr("object"==typeof e?e:yr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=sn("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=tk(e,rk))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&dx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ax.MOCK_USER;else{t=hn(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new vx(yx.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ax(o)}e._authCredentials=new wx(new bx(t,n))}}(r,...e)}return r}function hk(e){return e._firestoreClient||dk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dk(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new bw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,KC(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new BC(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class pk{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pk(dw.fromBase64String(e))}catch(e){throw new vx(yx.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new pk(dw.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fk{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new vx(yx.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fx(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mk{constructor(e){this._methodName=e}}class gk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vx(yx.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vx(yx.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Px(this._lat,e._lat)||Px(this._long,e._long)}}const yk=/^__.*__$/;class vk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new yE(e,this.data,this.fieldMask,t,this.fieldTransforms):new gE(e,this.data,t,this.fieldTransforms)}}class _k{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new yE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fx()}}class xk{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new xk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Dk(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(bk(this.ca)&&yk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class wk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||gT(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new xk({ca:e,methodName:t,ga:n,path:Fx.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sk(e){const t=e._freezeSettings(),n=gT(e._databaseId);return new wk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ek(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(o.merge||o.mergeFields?2:0,t,n,i);Mk("Data must be an object, but it was:",a,r);const s=Pk(r,a);let l,c;if(o.merge)l=new uw(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Ok(t,r,n);if(!a.contains(i))throw new vx(yx.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Fk(e,i)||e.push(i)}l=new uw(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new vk(new jw(s),l,c)}class Ak extends mk{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ak}}function Tk(e,t,n,r){const i=e.ya(1,t,n);Mk("Data must be an object, but it was:",i,r);const o=[],a=jw.empty();rw(r,((e,r)=>{const s=Rk(t,e,n);r=kn(r);const l=i.da(s);if(r instanceof Ak)o.push(s);else{const e=Ik(r,l);null!=e&&(o.push(s),a.set(s,e))}}));const s=new uw(o);return new _k(a,s,i.fieldTransforms)}function Ck(e,t,n,r,i,o){const a=e.ya(1,t,n),s=[Ok(t,r,n)],l=[i];if(o.length%2!=0)throw new vx(yx.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)s.push(Ok(t,o[d])),l.push(o[d+1]);const c=[],u=jw.empty();for(let d=s.length-1;d>=0;--d)if(!Fk(c,s[d])){const e=s[d];let t=l[d];t=kn(t);const n=a.da(e);if(t instanceof Ak)c.push(e);else{const r=Ik(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new uw(c);return new _k(u,h,a.fieldTransforms)}function kk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ik(n,e.ya(r?4:3,t))}function Ik(e,t){if(Lk(e=kn(e)))return Mk("Unsupported field value:",t,e),Pk(e,t);if(e instanceof mk)return function(e,t){if(!bk(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ik(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=kn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return XS(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Mx.fromDate(e);return{timestampValue:$E(t.serializer,n)}}if(e instanceof Mx){const n=new Mx(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$E(t.serializer,n)}}if(e instanceof gk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pk)return{bytesValue:eA(t.serializer,e._byteString)};if(e instanceof ik){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:rA(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(ek(e)))}(e,t)}function Pk(e,t){const n={};return iw(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rw(e,((e,r)=>{const i=Ik(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Lk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mx||e instanceof gk||e instanceof pk||e instanceof ik||e instanceof mk)}function Mk(e,t,n){if(!Lk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ek(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Ok(e,t,n){if((t=kn(t))instanceof fk)return t._internalPath;if("string"==typeof t)return Rk(e,t);throw Dk("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nk=new RegExp("[~\\*/\\[\\]]");function Rk(e,t,n){if(t.search(Nk)>=0)throw Dk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new fk(...t.split("."))._internalPath}catch(mu){throw Dk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Dk(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new vx(yx.INVALID_ARGUMENT,s+e+l)}function Fk(e,t){return e.some((e=>e.isEqual(t)))}class jk{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ik(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zk extends jk{data(){return super.data()}}function Bk(e,t){return"string"==typeof t?Rk(e,t):t instanceof fk?t._internalPath:t._delegate._internalPath}function Uk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vx(yx.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vk{}class Zk extends Vk{}class qk extends Zk{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new qk(e,t,n)}_apply(e){const t=this._parse(e);return Xk(e._query,t),new ok(e.firestore,e.converter,SS(e._query,t))}_parse(e){const t=Sk(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new vx(yx.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Hk(a,o);const t=[];for(const n of a)t.push(Wk(r,e,n));s={arrayValue:{values:t}}}else s=Wk(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Hk(a,o),s=kk(n,"where",a,"in"===o||"not-in"===o);return Hw.create(i,o,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Gk extends Vk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gk(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Xw.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Xk(n,i),n=SS(n,i)}(e._query,t),new ok(e.firestore,e.converter,SS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Wk(e,t,n){if("string"==typeof(n=kn(n))){if(""===n)throw new vx(yx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(t)&&-1!==n.indexOf("/"))throw new vx(yx.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Rx.fromString(n));if(!jx.isDocumentKey(r))throw new vx(yx.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Pw(e,new jx(r))}if(n instanceof ik)return Pw(e,n._key);throw new vx(yx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ek(n),"."))}function Hk(e,t){if(!Array.isArray(e)||0===e.length)throw new vx(yx.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Xk(e,t){if(t.isInequality()){const n=_S(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new vx(yx.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=vS(e);null!==i&&Kk(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new vx(yx.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new vx(yx.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Kk(e,t,n){if(!n.isEqual(t))throw new vx(yx.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Yk{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Sw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mw(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fx()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return rw(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new gk(mw(e.latitude),mw(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=vw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_w(e));default:return null}}convertTimestamp(e){const t=fw(e);return new Mx(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Rx.fromString(e);mx(EA(n));const r=new xw(n.get(1),n.get(3)),i=new jx(n.popFirst(5));return r.isEqual(t)||hx("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Jk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $k extends jk{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new eI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Bk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class eI extends $k{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class tI{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qk(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new eI(this._firestore,this._userDataWriter,n.key,n,new Qk(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vx(yx.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new eI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qk(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new eI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:nI(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function nI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fx()}}class rI extends Yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new pk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ik(this.firestore,null,t)}}function iI(e,t,n){e=tk(e,ik);const r=tk(e.firestore,ck),i=Jk(e.converter,t,n);return oI(r,[Ek(Sk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,lE.none())])}function oI(e,t){return function(e,t){const n=new _x;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=DC(e);try{const e=await function(e,t){const n=gx(e),r=Mx.now(),i=t.reduce(((e,t)=>e.add(t.key)),ZS());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=NS(),l=ZS();return n.Zi.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{o=i;const a=[];for(const e of t){const t=fE(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new yE(e.key,t,zw(t.value.mapValue),lE.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:FS(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new ow(Px)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await MC(r,e.changes),await zT(r.remoteStore)}catch(e){const t=$T(e,"Failed to persist write");n.reject(t)}}(await WC(e),t,n))),n.promise}(hk(e),t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];sx="9.23.0",hr(new In("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new ck(new Sx(e.getProvider("auth-internal")),new Cx(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vx(yx.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xw(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),vr(ox,"3.13.0",e),vr(ox,"3.13.0","esm2017")}();vr("firebase","9.23.0","app");function aI(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function sI(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((e=>sI(e)));if("function"===typeof e||"object"===typeof e)return aI(e,(e=>sI(e)));throw new Error("Data cannot be encoded in JSON: "+e)}function lI(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((e=>lI(e))):"function"===typeof e||"object"===typeof e?aI(e,(e=>lI(e))):e}const cI="functions",uI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hI extends gn{constructor(e,t,n){super("".concat(cI,"/").concat(e),t||""),this.details=n}}class dI{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((e=>this.auth=e),(()=>{})),this.messaging||t.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||n.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const pI="us-central1";class fI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pI,o=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new dI(t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(i);this.customDomain=e.origin,this.region=pI}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function mI(e,t,n){return r=>function(e,t,n,r){const i=e._url(t);return yI(e,i,n,r)}(e,t,r,n||{})}async function gI(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(a){return{status:0,json:null}}let o=null;try{o=await i.json()}catch(a){}return{status:i.status,json:o}}async function yI(e,t,n,r){const i={data:n=sI(n)},o={},a=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(o.Authorization="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),null!==a.appCheckToken&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const s=function(e){let t=null;return{promise:new Promise(((n,r)=>{t=setTimeout((()=>{r(new hI("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),l=await Promise.race([gI(t,i,o,e.fetchImpl),s.promise,e.cancelAllRequests]);if(s.cancel(),!l)throw new hI("cancelled","Firebase Functions instance was deleted.");const c=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!uI[t])return new hI("internal","internal");r=uI[t],i=t}const o=e.message;"string"===typeof o&&(i=o),n=e.details,void 0!==n&&(n=lI(n))}}catch(o){}return"ok"===r?null:new hI(r,i,n)}(l.status,l.json);if(c)throw c;if(!l.json)throw new hI("internal","Response is not valid JSON object.");let u=l.json.data;if("undefined"===typeof u&&(u=l.json.result),"undefined"===typeof u)throw new hI("internal","Response is missing data field.");return{data:lI(u)}}const vI="@firebase/functions",_I="0.10.0";function bI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pI;const n=dr(kn(e),cI),r=n.getImmediate({identifier:t}),i=sn("functions");return i&&xI(r,...i),r}function xI(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(kn(e),t,n)}function wI(e,t,n){return mI(kn(e),t,n)}!function(e,t){hr(new In(cI,((t,n)=>{let{instanceIdentifier:r}=n;const i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("messaging-internal"),s=t.getProvider("app-check-internal");return new fI(i,o,a,s,r,e)}),"PUBLIC").setMultipleInstances(!0)),vr(vI,_I,t),vr(vI,_I,"esm2017")}(fetch.bind(self));var SI=n(5211),EI=n(2094),AI=n(5954),TI=n(1997),CI=n(7219),kI=n(1001);function II(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const PI=t.createContext();function LI(){return t.useContext(PI)}function MI(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function OI(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(MI(e.value)&&""!==e.value||t&&MI(e.defaultValue)&&""!==e.defaultValue)}function NI(e){return(0,dt.Z)("MuiInputBase",e)}const RI=(0,ht.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),DI=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],FI=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,ct.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},jI=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},zI=(0,lt.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:FI})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(RI.disabled)]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},r.multiline&&(0,e.Z)({padding:"4px 0 5px"},"small"===r.size&&{paddingTop:1}),r.fullWidth&&{width:"100%"})})),BI=(0,lt.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:jI})((t=>{let{theme:n,ownerState:r}=t;const i="light"===n.palette.mode,o=(0,e.Z)({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),a={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,e.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(RI.formControl," &")]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(RI.disabled)]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),UI=(0,s.jsx)(l,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),VI=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:l,autoFocus:c,className:u,components:h={},componentsProps:d={},defaultValue:p,disabled:f,disableInjectingGlobalStyles:m,endAdornment:g,fullWidth:y=!1,id:v,inputComponent:_="input",inputProps:b={},inputRef:x,maxRows:w,minRows:S,multiline:E=!1,name:A,onBlur:T,onChange:C,onClick:k,onFocus:I,onKeyDown:P,onKeyUp:L,placeholder:M,readOnly:O,renderSuffix:N,rows:R,startAdornment:D,type:F="text",value:j}=o,z=(0,ot.Z)(o,DI),B=null!=b.value?b.value:j,{current:U}=t.useRef(null!=B),V=t.useRef(),Z=t.useCallback((e=>{0}),[]),q=(0,Up.Z)(V,x,b.ref,Z),[G,W]=t.useState(!1),H=LI();const X=II({props:o,muiFormControl:H,states:["color","disabled","error","hiddenLabel","size","required","filled"]});X.focused=H?H.focused:G,t.useEffect((()=>{!H&&f&&G&&(W(!1),T&&T())}),[H,f,G,T]);const K=H&&H.onFilled,Y=H&&H.onEmpty,J=t.useCallback((e=>{OI(e)?K&&K():Y&&Y()}),[K,Y]);(0,Bp.Z)((()=>{U&&J({value:B})}),[B,J,U]);t.useEffect((()=>{J(V.current)}),[]);let Q=_,$=b;E&&"input"===Q&&($=R?(0,e.Z)({type:void 0,minRows:R,maxRows:R},$):(0,e.Z)({type:void 0,maxRows:w,minRows:S},$),Q=kI.Z);t.useEffect((()=>{H&&H.setAdornedStart(Boolean(D))}),[H,D]);const ee=(0,e.Z)({},o,{color:X.color||"primary",disabled:X.disabled,endAdornment:g,error:X.error,focused:X.focused,formControl:H,fullWidth:y,hiddenLabel:X.hiddenLabel,multiline:E,size:X.size,startAdornment:D,type:F}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:p,type:f}=e,m={root:["root","color".concat((0,ct.Z)(n)),r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===d&&"sizeSmall",u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]};return(0,st.Z)(m,NI,t)})(ee),ne=h.Root||zI,re=d.root||{},ie=h.Input||BI;return $=(0,e.Z)({},$,d.input),(0,s.jsxs)(t.Fragment,{children:[!m&&UI,(0,s.jsxs)(ne,(0,e.Z)({},re,!(0,jp.Z)(ne)&&{ownerState:(0,e.Z)({},ee,re.ownerState)},{ref:r,onClick:e=>{V.current&&e.currentTarget===e.target&&V.current.focus(),k&&k(e)}},z,{className:(0,at.default)(te.root,re.className,u),children:[D,(0,s.jsx)(PI.Provider,{value:null,children:(0,s.jsx)(ie,(0,e.Z)({ownerState:ee,"aria-invalid":X.error,"aria-describedby":a,autoComplete:l,autoFocus:c,defaultValue:p,disabled:X.disabled,id:v,onAnimationStart:e=>{J("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:A,placeholder:M,readOnly:O,required:X.required,rows:R,value:B,onKeyDown:P,onKeyUp:L,type:F},$,!(0,jp.Z)(ie)&&{as:Q,ownerState:(0,e.Z)({},ee,$.ownerState)},{ref:q,className:(0,at.default)(te.input,$.className),onBlur:e=>{T&&T(e),b.onBlur&&b.onBlur(e),H&&H.onBlur?H.onBlur(e):W(!1)},onChange:function(e){if(!U){const t=e.target||V.current;if(null==t)throw new Error((0,CI.Z)(1));J({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.onChange&&b.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{X.disabled?e.stopPropagation():(I&&I(e),b.onFocus&&b.onFocus(e),H&&H.onFocus?H.onFocus(e):W(!0))}}))}),g,N?N((0,e.Z)({},X,{startAdornment:D})):null]}))]})})),ZI=VI;const qI=(0,ht.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function GI(e){return(0,dt.Z)("MuiListItemIcon",e)}const WI=(0,ht.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);function HI(e){return(0,dt.Z)("MuiMenuItem",e)}const XI=(0,ht.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),KI=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],YI=(0,lt.ZP)(Wt.Z,{shouldForwardProp:e=>(0,lt.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(XI.selected)]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity),["&.".concat(XI.focusVisible)]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},["&.".concat(XI.selected,":hover")]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}},["&.".concat(XI.focusVisible)]:{backgroundColor:(n.vars||n).palette.action.focus},["&.".concat(XI.disabled)]:{opacity:(n.vars||n).palette.action.disabledOpacity},["& + .".concat(qI.root)]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},["& + .".concat(qI.inset)]:{marginLeft:52},["& .".concat(of.root)]:{marginTop:0,marginBottom:0},["& .".concat(of.inset)]:{paddingLeft:36},["& .".concat(WI.root)]:{minWidth:36}},!r.dense&&{[n.breakpoints.up("sm")]:{minHeight:"auto"}},r.dense&&(0,e.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,{["& .".concat(WI.root," svg")]:{fontSize:"1.25rem"}}))})),JI=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiMenuItem"}),{autoFocus:a=!1,component:l="li",dense:c=!1,divider:u=!1,disableGutters:h=!1,focusVisibleClassName:d,role:p="menuitem",tabIndex:f,className:m}=o,g=(0,ot.Z)(o,KI),y=t.useContext(Op),v=t.useMemo((()=>({dense:c||y.dense||!1,disableGutters:h})),[y.dense,c,h]),_=t.useRef(null);(0,Bp.Z)((()=>{a&&_.current&&_.current.focus()}),[a]);const b=(0,e.Z)({},o,{dense:v.dense,divider:u,disableGutters:h}),x=(t=>{const{disabled:n,dense:r,divider:i,disableGutters:o,selected:a,classes:s}=t,l={root:["root",r&&"dense",n&&"disabled",!o&&"gutters",i&&"divider",a&&"selected"]},c=(0,st.Z)(l,HI,s);return(0,e.Z)({},s,c)})(o),w=(0,Up.Z)(_,r);let S;return o.disabled||(S=void 0!==f?f:-1),(0,s.jsx)(Op.Provider,{value:v,children:(0,s.jsx)(YI,(0,e.Z)({ref:w,role:p,tabIndex:S,component:l,focusVisibleClassName:(0,at.default)(x.focusVisible,d),className:(0,at.default)(x.root,m)},g,{ownerState:b,classes:x}))})}));var QI=n(3019);const $I=n(1194).Z,eP=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function tP(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function nP(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function rP(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function iP(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&rP(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const oP=t.forwardRef((function(n,r){const{actions:i,autoFocus:o=!1,autoFocusItem:a=!1,children:l,className:c,disabledItemsFocusable:u=!1,disableListWrap:h=!1,onKeyDown:d,variant:p="selectedMenu"}=n,f=(0,ot.Z)(n,eP),m=t.useRef(null),g=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Bp.Z)((()=>{o&&m.current.focus()}),[o]),t.useImperativeHandle(i,(()=>({adjustStyleForScrollbar:(e,t)=>{const n=!m.current.style.width;if(e.clientHeight<m.current.clientHeight&&n){const n="".concat($I((0,sl.Z)(e)),"px");m.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,m.current.style.width="calc(100% + ".concat(n,")")}return m.current}})),[]);const y=(0,Up.Z)(m,r);let v=-1;t.Children.forEach(l,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===p&&e.props.selected||-1===v)&&(v=n))}));const _=t.Children.map(l,((e,n)=>{if(n===v){const n={};return a&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===p&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,s.jsx)(Fp,(0,e.Z)({role:"menu",ref:y,className:c,onKeyDown:e=>{const t=m.current,n=e.key,r=(0,sl.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),iP(t,r,h,u,tP);else if("ArrowUp"===n)e.preventDefault(),iP(t,r,h,u,nP);else if("Home"===n)e.preventDefault(),iP(t,null,h,u,tP);else if("End"===n)e.preventDefault(),iP(t,null,h,u,nP);else if(1===n.length){const i=g.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&rP(r,i);i.previousKeyMatched&&(s||iP(t,r,!1,u,tP,i))?e.preventDefault():i.previousKeyMatched=!1}d&&d(e)},tabIndex:o?0:-1},f,{children:_}))})),aP=oP;var sP=n(1721);const lP=!1;var cP=n(10),uP="unmounted",hP="exited",dP="entering",pP="entered",fP="exiting",mP=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=hP,r.appearStatus=dP):i=pP:i=t.unmountOnExit||t.mountOnEnter?uP:hP,r.state={status:i},r.nextCallback=null,r}(0,sP.Z)(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===uP?{status:hP}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==dP&&n!==pP&&(t=dP):n!==dP&&n!==pP||(t=fP)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===dP){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:m.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===hP&&this.setState({status:uP})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[m.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||lP?this.safeSetState({status:pP},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:dP},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:pP},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:m.findDOMNode(this);t&&!lP?(this.props.onExit(r),this.safeSetState({status:fP},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:hP},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:hP},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:m.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===uP)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,ot.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(cP.Z.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function gP(){}mP.contextType=cP.Z,mP.propTypes={},mP.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gP,onEntering:gP,onEntered:gP,onExit:gP,onExiting:gP,onExited:gP},mP.UNMOUNTED=uP,mP.EXITED=hP,mP.ENTERING=dP,mP.ENTERED=pP,mP.EXITING=fP;const yP=mP,vP=e=>e.scrollTop;function _P(e,t){var n,r;const{timeout:i,easing:o,style:a={}}=e;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=a.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:a.transitionDelay}}const bP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function xP(e){return"scale(".concat(e,", ").concat(e**2,")")}const wP={entering:{opacity:1,transform:xP(1)},entered:{opacity:1,transform:"none"}},SP="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),EP=t.forwardRef((function(n,r){const{addEndListener:i,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:m,style:g,timeout:y="auto",TransitionComponent:v=yP}=n,_=(0,ot.Z)(n,bP),b=t.useRef(),x=t.useRef(),w=Us(),S=t.useRef(null),E=(0,Up.Z)(S,a.ref,r),A=e=>t=>{if(e){const n=S.current;void 0===t?e(n):e(n,t)}},T=A(d),C=A(((e,t)=>{vP(e);const{duration:n,delay:r,easing:i}=_P({style:g,timeout:y,easing:l},{mode:"enter"});let o;"auto"===y?(o=w.transitions.getAutoHeightDuration(e.clientHeight),x.current=o):o=n,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:SP?o:.666*o,delay:r,easing:i})].join(","),u&&u(e,t)})),k=A(h),I=A(m),P=A((e=>{const{duration:t,delay:n,easing:r}=_P({style:g,timeout:y,easing:l},{mode:"exit"});let i;"auto"===y?(i=w.transitions.getAutoHeightDuration(e.clientHeight),x.current=i):i=t,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:SP?i:.666*i,delay:SP?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=xP(.75),p&&p(e)})),L=A(f);return t.useEffect((()=>()=>{clearTimeout(b.current)}),[]),(0,s.jsx)(v,(0,e.Z)({appear:o,in:c,nodeRef:S,onEnter:C,onEntered:k,onEntering:T,onExit:P,onExited:L,onExiting:I,addEndListener:e=>{"auto"===y&&(b.current=setTimeout(e,x.current||0)),i&&i(S.current,e)},timeout:"auto"===y?null:y},_,{children:(n,r)=>t.cloneElement(a,(0,e.Z)({style:(0,e.Z)({opacity:0,transform:xP(.75),visibility:"exited"!==n||c?void 0:"hidden"},wP[n],g,a.props.style),ref:E},r))}))}));EP.muiSupportAuto=!0;const AP=EP;var TP=n(6280),CP=n(3107);const kP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],IP={entering:{opacity:1},entered:{opacity:1}},PP=t.forwardRef((function(n,r){const i=Us(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:a,appear:l=!0,children:c,easing:u,in:h,onEnter:d,onEntered:p,onEntering:f,onExit:m,onExited:g,onExiting:y,style:v,timeout:_=o,TransitionComponent:b=yP}=n,x=(0,ot.Z)(n,kP),w=t.useRef(null),S=(0,Up.Z)(w,c.ref,r),E=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},A=E(f),T=E(((e,t)=>{vP(e);const n=_P({style:v,timeout:_,easing:u},{mode:"enter"});e.style.webkitTransition=i.transitions.create("opacity",n),e.style.transition=i.transitions.create("opacity",n),d&&d(e,t)})),C=E(p),k=E(y),I=E((e=>{const t=_P({style:v,timeout:_,easing:u},{mode:"exit"});e.style.webkitTransition=i.transitions.create("opacity",t),e.style.transition=i.transitions.create("opacity",t),m&&m(e)})),P=E(g);return(0,s.jsx)(b,(0,e.Z)({appear:l,in:h,nodeRef:w,onEnter:T,onEntered:C,onEntering:A,onExit:I,onExited:P,onExiting:k,addEndListener:e=>{a&&a(w.current,e)},timeout:_},x,{children:(n,r)=>t.cloneElement(c,(0,e.Z)({style:(0,e.Z)({opacity:0,visibility:"exited"!==n||h?void 0:"hidden"},IP[n],v,c.props.style),ref:S},r))}))})),LP=PP;function MP(e){return(0,dt.Z)("MuiBackdrop",e)}(0,ht.Z)("MuiBackdrop",["root","invisible"]);const OP=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],NP=(0,lt.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((t=>{let{ownerState:n}=t;return(0,e.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})})),RP=t.forwardRef((function(t,n){var r,o;const a=(0,i.Z)({props:t,name:"MuiBackdrop"}),{children:l,component:c="div",components:u={},componentsProps:h={},className:d,invisible:p=!1,open:f,transitionDuration:m,TransitionComponent:g=LP}=a,y=(0,ot.Z)(a,OP),v=(0,e.Z)({},a,{component:c,invisible:p}),_=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,st.Z)(r,MP,t)})(v);return(0,s.jsx)(g,(0,e.Z)({in:f,timeout:m},y,{children:(0,s.jsx)(NP,{"aria-hidden":!0,as:null!=(r=u.Root)?r:c,className:(0,at.default)(_.root,d),ownerState:(0,e.Z)({},v,null==(o=h.root)?void 0:o.ownerState),classes:_,ref:n,children:l})}))})),DP=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],FP=(0,lt.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!r.open&&r.exited&&{visibility:"hidden"})})),jP=(0,lt.ZP)(RP,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),zP=t.forwardRef((function(n,r){var o,a,l,c,u,h;const d=(0,i.Z)({name:"MuiModal",props:n}),{BackdropComponent:p=jP,BackdropProps:f,closeAfterTransition:m=!1,children:g,component:y,components:v={},componentsProps:_={},disableAutoFocus:b=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:w=!1,disablePortal:S=!1,disableRestoreFocus:E=!1,disableScrollLock:A=!1,hideBackdrop:T=!1,keepMounted:C=!1,slotProps:k,slots:I,theme:P}=d,L=(0,ot.Z)(d,DP),[M,O]=t.useState(!0),N={closeAfterTransition:m,disableAutoFocus:b,disableEnforceFocus:x,disableEscapeKeyDown:w,disablePortal:S,disableRestoreFocus:E,disableScrollLock:A,hideBackdrop:T,keepMounted:C},R=(0,e.Z)({},d,N,{exited:M}),D=(e=>e.classes)(R),F=null!=(o=null!=(a=null==I?void 0:I.root)?a:v.Root)?o:FP,j=null!=(l=null!=(c=null==I?void 0:I.backdrop)?c:v.Backdrop)?l:p,z=null!=(u=null==k?void 0:k.root)?u:_.root,B=null!=(h=null==k?void 0:k.backdrop)?h:_.backdrop;return(0,s.jsx)(TP.Z,(0,e.Z)({slots:{root:F,backdrop:j},slotProps:{root:()=>(0,e.Z)({},(0,CP.Z)(z,R),!(0,jp.Z)(F)&&{as:y,theme:P}),backdrop:()=>(0,e.Z)({},f,(0,CP.Z)(B,R))},onTransitionEnter:()=>O(!1),onTransitionExited:()=>O(!0),ref:r},L,{classes:D},N,{children:g}))}));function BP(e){return(0,dt.Z)("MuiPopover",e)}(0,ht.Z)("MuiPopover",["root","paper"]);const UP=["onEntering"],VP=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function ZP(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function qP(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function GP(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function WP(e){return"function"===typeof e?e():e}const HP=(0,lt.ZP)(zP,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),XP=(0,lt.ZP)(vt,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),KP=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:h="anchorEl",children:d,className:p,container:f,elevation:m=8,marginThreshold:g=16,open:y,PaperProps:v={},transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:b=AP,transitionDuration:x="auto",TransitionProps:{onEntering:w}={}}=o,S=(0,ot.Z)(o.TransitionProps,UP),E=(0,ot.Z)(o,VP),A=t.useRef(),T=(0,Up.Z)(A,v.ref),C=(0,e.Z)({},o,{anchorOrigin:c,anchorReference:h,elevation:m,marginThreshold:g,PaperProps:v,transformOrigin:_,TransitionComponent:b,transitionDuration:x,TransitionProps:S}),k=(e=>{const{classes:t}=e;return(0,st.Z)({root:["root"],paper:["paper"]},BP,t)})(C),I=t.useCallback((()=>{if("anchorPosition"===h)return u;const e=WP(l),t=(e&&1===e.nodeType?e:(0,sl.Z)(A.current).body).getBoundingClientRect();return{top:t.top+ZP(t,c.vertical),left:t.left+qP(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,h]),P=t.useCallback((e=>({vertical:ZP(e,_.vertical),horizontal:qP(e,_.horizontal)})),[_.horizontal,_.vertical]),L=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=P(t);if("none"===h)return{top:null,left:null,transformOrigin:GP(n)};const r=I();let i=r.top-n.vertical,o=r.left-n.horizontal;const a=i+t.height,s=o+t.width,c=(0,Ws.Z)(WP(l)),u=c.innerHeight-g,d=c.innerWidth-g;if(i<g){const e=i-g;i-=e,n.vertical+=e}else if(a>u){const e=a-u;i-=e,n.vertical+=e}if(o<g){const e=o-g;o-=e,n.horizontal+=e}else if(s>d){const e=s-d;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:GP(n)}}),[l,h,I,P,g]),[M,O]=t.useState(y),N=t.useCallback((()=>{const e=A.current;if(!e)return;const t=L(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,O(!0)}),[L]);t.useEffect((()=>{y&&N()})),t.useImperativeHandle(a,(()=>y?{updatePosition:()=>{N()}}:null),[y,N]),t.useEffect((()=>{if(!y)return;const e=(0,Vs.Z)((()=>{N()})),t=(0,Ws.Z)(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,y,N]);let R=x;"auto"!==x||b.muiSupportAuto||(R=void 0);const D=f||(l?(0,sl.Z)(WP(l)).body:void 0);return(0,s.jsx)(HP,(0,e.Z)({BackdropProps:{invisible:!0},className:(0,at.default)(k.root,p),container:D,open:y,ref:r,ownerState:C},E,{children:(0,s.jsx)(b,(0,e.Z)({appear:!0,in:y,onEntering:(e,t)=>{w&&w(e,t),N()},onExited:()=>{O(!1)},timeout:R},S,{children:(0,s.jsx)(XP,(0,e.Z)({elevation:m},v,{ref:T,className:(0,at.default)(k.paper,v.className)},M?void 0:{style:(0,e.Z)({},v.style,{opacity:0})},{ownerState:C,children:d}))}))}))}));function YP(e){return(0,dt.Z)("MuiMenu",e)}(0,ht.Z)("MuiMenu",["root","paper","list"]);const JP=["onEntering"],QP=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],$P={vertical:"top",horizontal:"right"},eL={vertical:"top",horizontal:"left"},tL=(0,lt.ZP)(KP,{shouldForwardProp:e=>(0,lt.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nL=(0,lt.ZP)(vt,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),rL=(0,lt.ZP)(aP,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),iL=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiMenu"}),{autoFocus:a=!0,children:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:h,open:d,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:y="selectedMenu"}=o,v=(0,ot.Z)(o.TransitionProps,JP),_=(0,ot.Z)(o,QP),b=Us(),x="rtl"===b.direction,w=(0,e.Z)({},o,{autoFocus:a,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:v,variant:y}),S=(e=>{const{classes:t}=e;return(0,st.Z)({root:["root"],paper:["paper"],list:["list"]},YP,t)})(w),E=a&&!c&&d,A=t.useRef(null);let T=-1;return t.Children.map(l,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===T)&&(T=n))})),(0,s.jsx)(tL,(0,e.Z)({classes:f,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?$P:eL,PaperProps:(0,e.Z)({component:nL},p,{classes:(0,e.Z)({},p.classes,{root:S.paper})}),className:S.root,open:d,ref:r,transitionDuration:m,TransitionProps:(0,e.Z)({onEntering:(e,t)=>{A.current&&A.current.adjustStyleForScrollbar(e,b),g&&g(e,t)}},v),ownerState:w},_,{children:(0,s.jsx)(rL,(0,e.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:A,autoFocus:a&&(-1===T||c),autoFocusItem:E,variant:y},u,{className:(0,at.default)(S.list,u.className),children:l}))}))})),oL=iL;function aL(e){return(0,dt.Z)("MuiNativeSelect",e)}const sL=(0,ht.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),lL=["className","disabled","IconComponent","inputRef","variant"],cL=t=>{let{ownerState:n,theme:r}=t;return(0,e.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},["&.".concat(sL.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:r.palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:r.shape.borderRadius,"&:focus":{borderRadius:r.shape.borderRadius},"&&&":{paddingRight:32}})},uL=(0,lt.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:lt.FO,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{["&.".concat(sL.multiple)]:t.multiple}]}})(cL),hL=t=>{let{ownerState:n,theme:r}=t;return(0,e.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:r.palette.action.active,["&.".concat(sL.disabled)]:{color:r.palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},"filled"===n.variant&&{right:7},"outlined"===n.variant&&{right:7})},dL=(0,lt.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,ct.Z)(n.variant))],n.open&&t.iconOpen]}})(hL),pL=t.forwardRef((function(n,r){const{className:i,disabled:o,IconComponent:a,inputRef:l,variant:c="standard"}=n,u=(0,ot.Z)(n,lL),h=(0,e.Z)({},n,{disabled:o,variant:c}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o}=e,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,ct.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,st.Z)(a,aL,t)})(h);return(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(uL,(0,e.Z)({ownerState:h,className:(0,at.default)(d.select,i),disabled:o,ref:l||r},u)),n.multiple?null:(0,s.jsx)(dL,{as:a,ownerState:h,className:d.icon})]})})),fL=pL;var mL=n(6716);function gL(e){return(0,dt.Z)("MuiSelect",e)}const yL=(0,ht.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var vL;const _L=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],bL=(0,lt.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(yL.select)]:t.select},{["&.".concat(yL.select)]:t[n.variant]},{["&.".concat(yL.multiple)]:t.multiple}]}})(cL,{["&.".concat(yL.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),xL=(0,lt.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,ct.Z)(n.variant))],n.open&&t.iconOpen]}})(hL),wL=(0,lt.ZP)("input",{shouldForwardProp:e=>(0,lt.Dz)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function SL(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function EL(e){return null==e||"string"===typeof e&&!e.trim()}const AL=t.forwardRef((function(n,r){const{"aria-describedby":i,"aria-label":o,autoFocus:a,autoWidth:l,children:c,className:u,defaultOpen:h,defaultValue:d,disabled:p,displayEmpty:f,IconComponent:m,inputRef:g,labelId:y,MenuProps:v={},multiple:_,name:b,onBlur:x,onChange:w,onClose:S,onFocus:E,onOpen:A,open:T,readOnly:C,renderValue:k,SelectDisplayProps:I={},tabIndex:P,value:L,variant:M="standard"}=n,O=(0,ot.Z)(n,_L),[N,R]=(0,mL.Z)({controlled:L,default:d,name:"Select"}),[D,F]=(0,mL.Z)({controlled:T,default:h,name:"Select"}),j=t.useRef(null),z=t.useRef(null),[B,U]=t.useState(null),{current:V}=t.useRef(null!=T),[Z,q]=t.useState(),G=(0,Up.Z)(r,g),W=t.useCallback((e=>{z.current=e,e&&U(e)}),[]);t.useImperativeHandle(G,(()=>({focus:()=>{z.current.focus()},node:j.current,value:N})),[N]),t.useEffect((()=>{h&&D&&B&&!V&&(q(l?null:B.clientWidth),z.current.focus())}),[B,l]),t.useEffect((()=>{a&&z.current.focus()}),[a]),t.useEffect((()=>{if(!y)return;const e=(0,sl.Z)(z.current).getElementById(y);if(e){const t=()=>{getSelection().isCollapsed&&z.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[y]);const H=(e,t)=>{e?A&&A(t):S&&S(t),V||(q(l?null:B.clientWidth),F(e))},X=t.Children.toArray(c),K=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(_){n=Array.isArray(N)?N.slice():[];const t=N.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),N!==n&&(R(n),w)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:b}}),w(i,e)}_||H(!1,t)}},Y=null!==B&&D;let J,Q;delete O["aria-invalid"];const $=[];let ee=!1,te=!1;(OI({value:N})||f)&&(k?J=k(N):ee=!0);const ne=X.map(((e,n,r)=>{if(!t.isValidElement(e))return null;let i;if(_){if(!Array.isArray(N))throw new Error((0,CI.Z)(2));i=N.some((t=>SL(t,e.props.value))),i&&ee&&$.push(e.props.children)}else i=SL(N,e.props.value),i&&ee&&(Q=e.props.children);if(i&&(te=!0),void 0===e.props.value)return t.cloneElement(e,{"aria-readonly":!0,role:"option"});return t.cloneElement(e,{"aria-selected":i?"true":"false",onClick:K(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:void 0===r[0].props.value||!0===r[0].props.disabled?(()=>{if(N)return i;const t=r.find((e=>void 0!==e.props.value&&!0!==e.props.disabled));return e===t||i})():i,value:void 0,"data-value":e.props.value})}));ee&&(J=_?0===$.length?null:$.reduce(((e,t,n)=>(e.push(t),n<$.length-1&&e.push(", "),e)),[]):Q);let re,ie=Z;!l&&V&&B&&(ie=B.clientWidth),re="undefined"!==typeof P?P:p?null:0;const oe=I.id||(b?"mui-component-select-".concat(b):void 0),ae=(0,e.Z)({},n,{variant:M,value:N,open:Y}),se=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o}=e,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,ct.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,st.Z)(a,gL,t)})(ae);return(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(bL,(0,e.Z)({ref:W,tabIndex:re,role:"button","aria-disabled":p?"true":void 0,"aria-expanded":Y?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[y,oe].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!C){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),H(!0,e))}},onMouseDown:p||C?null:e=>{0===e.button&&(e.preventDefault(),z.current.focus(),H(!0,e))},onBlur:e=>{!Y&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:N,name:b}}),x(e))},onFocus:E},I,{ownerState:ae,className:(0,at.default)(I.className,se.select,u),id:oe,children:EL(J)?vL||(vL=(0,s.jsx)("span",{className:"notranslate",children:"\u200b"})):J})),(0,s.jsx)(wL,(0,e.Z)({value:Array.isArray(N)?N.join(","):N,name:b,ref:j,"aria-hidden":!0,onChange:e=>{const t=X.map((e=>e.props.value)).indexOf(e.target.value);if(-1===t)return;const n=X[t];R(n.props.value),w&&w(e,n)},tabIndex:-1,disabled:p,className:se.nativeInput,autoFocus:a,ownerState:ae},O)),(0,s.jsx)(xL,{as:m,className:se.icon,ownerState:ae}),(0,s.jsx)(oL,(0,e.Z)({id:"menu-".concat(b||""),anchorEl:B,open:Y,onClose:e=>{H(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:(0,e.Z)({"aria-labelledby":y,role:"listbox",disableListWrap:!0},v.MenuListProps),PaperProps:(0,e.Z)({},v.PaperProps,{style:(0,e.Z)({minWidth:ie},null!=v.PaperProps?v.PaperProps.style:null)}),children:ne}))]})})),TL=AL,CL=(0,Ft.Z)((0,s.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function kL(e){return(0,dt.Z)("MuiInput",e)}const IL=(0,e.Z)({},RI,(0,ht.Z)("MuiInput",["root","underline","input"])),PL=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],LL=(0,lt.ZP)(zI,{shouldForwardProp:e=>(0,lt.FO)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...FI(e,t),!n.disableUnderline&&t.underline]}})((t=>{let{theme:n,ownerState:r}=t;let i="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i="rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")")),(0,e.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat((n.vars||n).palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(IL.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(IL.error,":after")]:{borderBottomColor:(n.vars||n).palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(IL.disabled,"):before")]:{borderBottom:"2px solid ".concat((n.vars||n).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(IL.disabled,":before")]:{borderBottomStyle:"dotted"}})})),ML=(0,lt.ZP)(BI,{name:"MuiInput",slot:"Input",overridesResolver:jI})({}),OL=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiInput"}),{disableUnderline:o,components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:h=!1,type:d="text"}=r,p=(0,ot.Z)(r,PL),f=(t=>{const{classes:n,disableUnderline:r}=t,i={root:["root",!r&&"underline"],input:["input"]},o=(0,st.Z)(i,kL,n);return(0,e.Z)({},n,o)})(r),m={root:{ownerState:{disableUnderline:o}}},g=l?(0,QI.Z)(l,m):m;return(0,s.jsx)(ZI,(0,e.Z)({components:(0,e.Z)({Root:LL,Input:ML},a),componentsProps:g,fullWidth:c,inputComponent:u,multiline:h,ref:n,type:d},p,{classes:f}))}));OL.muiName="Input";const NL=OL;function RL(e){return(0,dt.Z)("MuiFilledInput",e)}const DL=(0,e.Z)({},RI,(0,ht.Z)("MuiFilledInput",["root","underline","input"])),FL=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],jL=(0,lt.ZP)(zI,{shouldForwardProp:e=>(0,lt.FO)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...FI(e,t),!n.disableUnderline&&t.underline]}})((t=>{let{theme:n,ownerState:r}=t;var i;const o="light"===n.palette.mode,a=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,e.Z)({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:s}},["&.".concat(DL.focused)]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:s},["&.".concat(DL.disabled)]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:c}},!r.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat(null==(i=(n.vars||n).palette[r.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(DL.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(DL.error,":after")]:{borderBottomColor:(n.vars||n).palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")"):a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(DL.disabled,"):before")]:{borderBottom:"1px solid ".concat((n.vars||n).palette.text.primary)},["&.".concat(DL.disabled,":before")]:{borderBottomStyle:"dotted"}},r.startAdornment&&{paddingLeft:12},r.endAdornment&&{paddingRight:12},r.multiline&&(0,e.Z)({padding:"25px 12px 8px"},"small"===r.size&&{paddingTop:21,paddingBottom:4},r.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),zL=(0,lt.ZP)(BI,{name:"MuiFilledInput",slot:"Input",overridesResolver:jI})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===n.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===n.palette.mode?null:"#fff",caretColor:"light"===n.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===r.size&&{paddingTop:21,paddingBottom:4},r.hiddenLabel&&{paddingTop:16,paddingBottom:17},r.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},r.startAdornment&&{paddingLeft:0},r.endAdornment&&{paddingRight:0},r.hiddenLabel&&"small"===r.size&&{paddingTop:8,paddingBottom:9})})),BL=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiFilledInput"}),{components:o={},componentsProps:a,fullWidth:l=!1,inputComponent:c="input",multiline:u=!1,type:h="text"}=r,d=(0,ot.Z)(r,FL),p=(0,e.Z)({},r,{fullWidth:l,inputComponent:c,multiline:u,type:h}),f=(t=>{const{classes:n,disableUnderline:r}=t,i={root:["root",!r&&"underline"],input:["input"]},o=(0,st.Z)(i,RL,n);return(0,e.Z)({},n,o)})(r),m={root:{ownerState:p},input:{ownerState:p}},g=a?(0,QI.Z)(a,m):m;return(0,s.jsx)(ZI,(0,e.Z)({components:(0,e.Z)({Root:jL,Input:zL},o),componentsProps:g,fullWidth:l,inputComponent:c,multiline:u,ref:n,type:h},d,{classes:f}))}));BL.muiName="Input";const UL=BL;var VL;const ZL=["children","classes","className","label","notched"],qL=(0,lt.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),GL=(0,lt.ZP)("legend")((t=>{let{ownerState:n,theme:r}=t;return(0,e.Z)({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:r.transitions.create("width",{duration:150,easing:r.transitions.easing.easeOut})},n.withLabel&&(0,e.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:r.transitions.create("max-width",{duration:50,easing:r.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:r.transitions.create("max-width",{duration:100,easing:r.transitions.easing.easeOut,delay:50})}))}));function WL(e){return(0,dt.Z)("MuiOutlinedInput",e)}const HL=(0,e.Z)({},RI,(0,ht.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),XL=["components","fullWidth","inputComponent","label","multiline","notched","type"],KL=(0,lt.ZP)(zI,{shouldForwardProp:e=>(0,lt.FO)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:FI})((t=>{let{theme:n,ownerState:r}=t;const i="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,e.Z)({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,["&:hover .".concat(HL.notchedOutline)]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(HL.notchedOutline)]:{borderColor:n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(HL.focused," .").concat(HL.notchedOutline)]:{borderColor:(n.vars||n).palette[r.color].main,borderWidth:2},["&.".concat(HL.error," .").concat(HL.notchedOutline)]:{borderColor:(n.vars||n).palette.error.main},["&.".concat(HL.disabled," .").concat(HL.notchedOutline)]:{borderColor:(n.vars||n).palette.action.disabled}},r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,e.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),YL=(0,lt.ZP)((function(t){const{className:n,label:r,notched:i}=t,o=(0,ot.Z)(t,ZL),a=null!=r&&""!==r,l=(0,e.Z)({},t,{notched:i,withLabel:a});return(0,s.jsx)(qL,(0,e.Z)({"aria-hidden":!0,className:n,ownerState:l},o,{children:(0,s.jsx)(GL,{ownerState:l,children:a?(0,s.jsx)("span",{children:r}):VL||(VL=(0,s.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),JL=(0,lt.ZP)(BI,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:jI})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===n.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===n.palette.mode?null:"#fff",caretColor:"light"===n.palette.mode?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===r.size&&{padding:"8.5px 14px"},r.multiline&&{padding:0},r.startAdornment&&{paddingLeft:0},r.endAdornment&&{paddingRight:0})})),QL=t.forwardRef((function(n,r){var o;const a=(0,i.Z)({props:n,name:"MuiOutlinedInput"}),{components:l={},fullWidth:c=!1,inputComponent:u="input",label:h,multiline:d=!1,notched:p,type:f="text"}=a,m=(0,ot.Z)(a,XL),g=(t=>{const{classes:n}=t,r=(0,st.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},WL,n);return(0,e.Z)({},n,r)})(a),y=LI(),v=II({props:a,muiFormControl:y,states:["required"]}),_=(0,e.Z)({},a,{color:v.color||"primary",disabled:v.disabled,error:v.error,focused:v.focused,formControl:y,fullWidth:c,hiddenLabel:v.hiddenLabel,multiline:d,size:v.size,type:f});return(0,s.jsx)(ZI,(0,e.Z)({components:(0,e.Z)({Root:KL,Input:JL},l),renderSuffix:e=>(0,s.jsx)(YL,{ownerState:_,className:g.notchedOutline,label:null!=h&&""!==h&&v.required?o||(o=(0,s.jsxs)(t.Fragment,{children:[h,"\xa0","*"]})):h,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:c,inputComponent:u,multiline:d,ref:r,type:f},m,{classes:(0,e.Z)({},g,{notchedOutline:null})}))}));QL.muiName="Input";const $L=QL;var eM,tM;const nM=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],rM={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,lt.FO)(e)&&"variant"!==e,slot:"Root"},iM=(0,lt.ZP)(NL,rM)(""),oM=(0,lt.ZP)($L,rM)(""),aM=(0,lt.ZP)(UL,rM)(""),sM=t.forwardRef((function(n,r){const o=(0,i.Z)({name:"MuiSelect",props:n}),{autoWidth:a=!1,children:l,classes:c={},className:u,defaultOpen:h=!1,displayEmpty:d=!1,IconComponent:p=CL,id:f,input:m,inputProps:g,label:y,labelId:v,MenuProps:_,multiple:b=!1,native:x=!1,onClose:w,onOpen:S,open:E,renderValue:A,SelectDisplayProps:T,variant:C="outlined"}=o,k=(0,ot.Z)(o,nM),I=x?fL:TL,P=II({props:o,muiFormControl:LI(),states:["variant"]}).variant||C,L=m||{standard:eM||(eM=(0,s.jsx)(iM,{})),outlined:(0,s.jsx)(oM,{label:y}),filled:tM||(tM=(0,s.jsx)(aM,{}))}[P],M=(e=>{const{classes:t}=e;return t})((0,e.Z)({},o,{variant:P,classes:c})),O=(0,Up.Z)(r,L.ref);return(0,s.jsx)(t.Fragment,{children:t.cloneElement(L,(0,e.Z)({inputComponent:I,inputProps:(0,e.Z)({children:l,IconComponent:p,variant:P,type:void 0,multiple:b},x?{id:f}:{autoWidth:a,defaultOpen:h,displayEmpty:d,labelId:v,MenuProps:_,onClose:w,onOpen:S,open:E,renderValue:A,SelectDisplayProps:(0,e.Z)({id:f},T)},g,{classes:g?(0,QI.Z)(M,g.classes):M},m?m.props.inputProps:{})},b&&x&&"outlined"===P?{notched:!0}:{},{ref:O,className:(0,at.default)(L.props.className,u)},!m&&{variant:P},k))})}));sM.muiName="Select";const lM=sM,cM=(0,Ft.Z)((0,s.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),uM=(0,Ft.Z)((0,s.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage");var hM,dM,pM,fM,mM,gM,yM,vM;const _M=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],bM=t.forwardRef((function(t,n){const{backIconButtonProps:r,count:i,getItemAriaLabel:o,nextIconButtonProps:a,onPageChange:l,page:c,rowsPerPage:u,showFirstButton:h,showLastButton:d}=t,p=(0,ot.Z)(t,_M),f=Us();return(0,s.jsxs)("div",(0,e.Z)({ref:n},p,{children:[h&&(0,s.jsx)(Jt,{onClick:e=>{l(e,0)},disabled:0===c,"aria-label":o("first",c),title:o("first",c),children:"rtl"===f.direction?hM||(hM=(0,s.jsx)(cM,{})):dM||(dM=(0,s.jsx)(uM,{}))}),(0,s.jsx)(Jt,(0,e.Z)({onClick:e=>{l(e,c-1)},disabled:0===c,color:"inherit","aria-label":o("previous",c),title:o("previous",c)},r,{children:"rtl"===f.direction?pM||(pM=(0,s.jsx)(Ys,{})):fM||(fM=(0,s.jsx)(Ks,{}))})),(0,s.jsx)(Jt,(0,e.Z)({onClick:e=>{l(e,c+1)},disabled:-1!==i&&c>=Math.ceil(i/u)-1,color:"inherit","aria-label":o("next",c),title:o("next",c)},a,{children:"rtl"===f.direction?mM||(mM=(0,s.jsx)(Ks,{})):gM||(gM=(0,s.jsx)(Ys,{}))})),d&&(0,s.jsx)(Jt,{onClick:e=>{l(e,Math.max(0,Math.ceil(i/u)-1))},disabled:c>=Math.ceil(i/u)-1,"aria-label":o("last",c),title:o("last",c),children:"rtl"===f.direction?yM||(yM=(0,s.jsx)(uM,{})):vM||(vM=(0,s.jsx)(cM,{}))})]}))}));var xM=n(8677);function wM(e){return(0,dt.Z)("MuiTablePagination",e)}const SM=(0,ht.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var EM;const AM=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],TM=(0,lt.ZP)(Rg,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}}})),CM=(0,lt.ZP)(kt,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(t,n)=>(0,e.Z)({["& .".concat(SM.actions)]:n.actions},n.toolbar)})((e=>{let{theme:t}=e;return{minHeight:52,paddingRight:2,["".concat(t.breakpoints.up("xs")," and (orientation: landscape)")]:{minHeight:52},[t.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},["& .".concat(SM.actions)]:{flexShrink:0,marginLeft:20}}})),kM=(0,lt.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),IM=(0,lt.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})((t=>{let{theme:n}=t;return(0,e.Z)({},n.typography.body2,{flexShrink:0})})),PM=(0,lt.ZP)(lM,{name:"MuiTablePagination",slot:"Select",overridesResolver:(t,n)=>(0,e.Z)({["& .".concat(SM.selectIcon)]:n.selectIcon,["& .".concat(SM.select)]:n.select},n.input,n.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,["& .".concat(SM.select)]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),LM=(0,lt.ZP)(JI,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),MM=(0,lt.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})((t=>{let{theme:n}=t;return(0,e.Z)({},n.typography.body2,{flexShrink:0})}));function OM(e){let{from:t,to:n,count:r}=e;return"".concat(t,"\u2013").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))}function NM(e){return"Go to ".concat(e," page")}const RM=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiTablePagination"}),{ActionsComponent:a=bM,backIconButtonProps:l,className:c,colSpan:u,component:h=Rg,count:d,getItemAriaLabel:p=NM,labelDisplayedRows:f=OM,labelRowsPerPage:m="Rows per page:",nextIconButtonProps:g,onPageChange:y,onRowsPerPageChange:v,page:_,rowsPerPage:b,rowsPerPageOptions:x=[10,25,50,100],SelectProps:w={},showFirstButton:S=!1,showLastButton:E=!1}=o,A=(0,ot.Z)(o,AM),T=o,C=(e=>{const{classes:t}=e;return(0,st.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},wM,t)})(T),k=w.native?"option":LM;let I;h!==Rg&&"td"!==h||(I=u||1e3);const P=(0,xM.Z)(w.id),L=(0,xM.Z)(w.labelId);return(0,s.jsx)(TM,(0,e.Z)({colSpan:I,ref:r,as:h,ownerState:T,className:(0,at.default)(C.root,c)},A,{children:(0,s.jsxs)(CM,{className:C.toolbar,children:[(0,s.jsx)(kM,{className:C.spacer}),x.length>1&&(0,s.jsx)(IM,{className:C.selectLabel,id:L,children:m}),x.length>1&&(0,s.jsx)(PM,(0,e.Z)({variant:"standard"},!w.variant&&{input:EM||(EM=(0,s.jsx)(ZI,{}))},{value:b,onChange:v,id:P,labelId:L},w,{classes:(0,e.Z)({},w.classes,{root:(0,at.default)(C.input,C.selectRoot,(w.classes||{}).root),select:(0,at.default)(C.select,(w.classes||{}).select),icon:(0,at.default)(C.selectIcon,(w.classes||{}).icon)}),children:x.map((n=>(0,t.createElement)(k,(0,e.Z)({},!(0,jp.Z)(k)&&{ownerState:T},{className:C.menuItem,key:n.label?n.label:n,value:n.value?n.value:n}),n.label?n.label:n)))})),(0,s.jsx)(MM,{className:C.displayedRows,children:f({from:0===d?0:_*b+1,to:-1===d?(_+1)*b:-1===b?d:Math.min(d,(_+1)*b),count:-1===d?-1:d,page:_})}),(0,s.jsx)(a,{className:C.actions,backIconButtonProps:l,count:d,nextIconButtonProps:g,onPageChange:y,page:_,rowsPerPage:b,showFirstButton:S,showLastButton:E,getItemAriaLabel:p})]})}))})),DM=e=>{let{message:t,isVisible:n,onOkPressed:r,onCancelPressed:i}=e;return(0,s.jsx)("div",{style:{display:n?"block":"none",position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.3)",zIndex:9999},children:(0,s.jsxs)("div",{style:{backgroundColor:"#fff",padding:"30px",borderRadius:"10px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"90%"},children:[(0,s.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"50px"},children:t}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"flex-end"},children:[(0,s.jsx)("button",{style:{borderRadius:"5px",backgroundColor:"#6c757d",color:"#fff",fontWeight:"bold",cursor:"pointer",height:"35px"},onClick:i,children:"Cancel"}),(0,s.jsx)("button",{style:{borderRadius:"5px",backgroundColor:"#007bff",color:"#fff",fontWeight:"bold",cursor:"pointer",height:"35px"},onClick:r,children:"OK"})]})]})})},FM=e=>{let{visible:n,data:r,onSave:i,onCancel:o}=e;const[a,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)(""),[p,f]=(0,t.useState)("");return(0,t.useEffect)((()=>{console.log("wel"),l(r.firstName),u(r.lastName),d(r.email),f(r.phone)}),[n]),n?(0,s.jsx)("div",{className:"modal",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("h2",{style:{textAlign:"center"},children:"Edit User"}),(0,s.jsxs)("div",{style:{width:"100%",padding:"5%",margin:"0px"},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"first-name",children:"First Name:"}),(0,s.jsx)("input",{id:"first-name",name:"first-name",value:a,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"last-name",children:"Last Name:"}),(0,s.jsx)("input",{id:"last-name",name:"last-name",value:c,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:h,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"Phone Number:"}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",value:p,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{className:"btn-primary",onClick:()=>{i({firstName:a,lastName:c,email:h,phone:p}),l(""),u(""),d(""),f("")},children:"Save"}),(0,s.jsx)("button",{className:"btn-secondary",onClick:o,children:"Cancel"})]})]})]})}):null},jM=e=>{let{visible:n,onSave:r,onCancel:i}=e;const[o,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[d,p]=(0,t.useState)("");return n?(0,s.jsx)("div",{className:"modal",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("h2",{style:{textAlign:"center"},children:"Add New User"}),(0,s.jsxs)("form",{style:{width:"100%",padding:"5%",margin:"0px"},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"first-name",children:"First Name:"}),(0,s.jsx)("input",{id:"first-name",name:"first-name",value:o,onChange:e=>a(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"last-name",children:"Last Name:"}),(0,s.jsx)("input",{id:"last-name",name:"last-name",value:l,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:u,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"Phone Number:"}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",value:d,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{className:"btn-primary",onClick:()=>{r({firstName:o,lastName:l,email:u,phone:d}),a(""),c(""),h(""),p("")},children:"Save"}),(0,s.jsx)("button",{className:"btn-secondary",onClick:i,children:"Cancel"})]})]})]})}):null};const zM=function(e){let{message:n,visible:r,color:i,onClose:o}=e;return(0,t.useEffect)((()=>{if(r){const e=setTimeout((()=>{o()}),3e3);return()=>clearTimeout(e)}}),[r,o]),(0,s.jsx)("div",{className:"alert ".concat(r?"visible":""),style:{position:"absolute",zIndex:"10",top:"5%",width:"20%",marginLeft:"40%",textAlign:"center",backgroundColor:i},children:n})};const BM=function(){const e=uk(),n=Ha(),r=bI(yr()),i=wI(r,"deleteUser"),o=wI(r,"updateUser"),a=(wI(r,"setAdmin"),wI(r,"sendMail")),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),[d,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[g,y]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:""}),[v,_]=(0,t.useState)(!1),[b,x]=(0,t.useState)(""),[w,S]=(0,t.useState)(""),[E,A]=(0,t.useState)(0),[T,C]=(0,t.useState)(5),[k,I]=(0,t.useState)([]),P=async()=>{const t=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Vk&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Gk)).length,n=e.filter((e=>e instanceof qk)).length;if(t>1||t>0&&n>0)throw new vx(yx.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=kn(e),JC("collection","path",t),e instanceof rk){const n=Rx.fromString(t,...r);return $C(n),new ak(e,null,n)}{if(!(e instanceof ik||e instanceof ak))throw new vx(yx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Rx.fromString(t,...r));return $C(n),new ak(e.firestore,null,n)}}(e,"users")),n=await function(e){e=tk(e,ok);const t=tk(e.firestore,ck),n=hk(t),r=new rI(t);return Uk(e._query),XC(n,e._query).then((n=>new tI(t,r,e,n)))}(t),r=[];n.forEach((e=>{r.push(e.data())}));I(r),console.log("???")},L=t=>{!function(e){oI(tk(e.firestore,ck),[new xE(e._key,lE.none())])}(sk(e,"users",t)),i(t).then((e=>{console.log("delete account successfully")})),O()},M=async t=>{const n=sk(e,"users",l);await function(e,t,n){e=tk(e,ik);const r=tk(e.firestore,ck),i=Sk(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=kn(t))||t instanceof fk?Ck(i,"updateDoc",e._key,t,n,s):Tk(i,"updateDoc",e._key,t),oI(r,[o.toMutation(e._key,lE.exists(!0))])}(n,{email:t.email,phone:t.phone,fristName:t.firstName,lastName:t.lastName,uid:l}),o({uid:l,data:t}).then((e=>{console.log(e)}))},O=()=>{P()};return(0,t.useEffect)((()=>{P()}),[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Dt,{style:{textAlign:"center",fontSize:"40px",marginBottom:"10px"},children:"User Table"}),(0,s.jsxs)("div",{style:{float:"right"},children:[(0,s.jsx)(Jt,{style:{width:"50px"},onClick:()=>{p(!0)},children:(0,s.jsx)(SI.Z,{})}),(0,s.jsx)(Jt,{style:{width:"50px"},onClick:O,children:(0,s.jsx)(EI.Z,{})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(DM,{message:"Are you sure you want to delete this User?",isVisible:u,onOkPressed:()=>{h(!1),L(l)},onCancelPressed:()=>{h(!1)}})}),(0,s.jsx)("div",{children:(0,s.jsx)(jM,{visible:d,onSave:t=>{console.log(t),Ao(n,t.email,"123456").then((n=>{const r=n.user;Co(r,{displayName:"".concat(t.firstName," ").concat(t.lastName)}).then((()=>{console.log("Profile updated")})).catch((e=>{console.log("Profile update Error")})),iI(sk(e,"users",r.uid),{fristName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,uid:r.uid}),To(r).then((()=>{console.log("Verification Email sent")})),a({email:t.email,title:"Welcome to Argos Geospatial-Intelligence Tool",content:"Dear ".concat(t.firstName," ").concat(t.lastName,",\n\nWe're delighted to welcome you to the Argos Geospatial-Intelligence Tool community! \n Your account has been successfully created and you now have full access to our wide range of powerful geospatial tools and capabilities. \n We value your trust and commitment and we're excited to support your work. Thank you for choosing Argos Geospatial-Intelligence Tool, and here's to making the world a more connected and understood place.\n\nBest regards,\n\nArgos Geospatial-Intelligence Team")}).then((e=>{}))})).catch((e=>{e.code;const t=e.message;console.log(t),_(!0),S("#f44336"),"auth/email-already-in-use"===e.code?x("An account with this email already exists. Please add a different email address."):(console.log(e),x(e.message))})),p(!1),O()},onCancel:()=>{p(!1)}})}),(0,s.jsx)("div",{children:(0,s.jsx)(FM,{visible:f,data:g,onSave:async e=>{M(e),m(!1),O()},onCancel:()=>{m(!1)}})}),(0,s.jsx)(zM,{message:b,visible:v,color:w,onClose:function(){_(!1)}}),(0,s.jsxs)(mg,{children:[(0,s.jsx)(wg,{style:{background:"#233044"},children:(0,s.jsxs)(Ig,{children:[(0,s.jsx)(Rg,{style:{color:"white"},children:"Avatar"}),(0,s.jsx)(Rg,{style:{color:"white"},children:"Email"}),(0,s.jsx)(Rg,{style:{color:"white"},children:"Phone"}),(0,s.jsx)(Rg,{style:{color:"white"},children:"Name"}),(0,s.jsx)(Rg,{style:{color:"white"},children:"Action"})]})}),(0,s.jsx)(Ug,{children:(T>0?k.slice(E*T,E*T+T):k).map((e=>(0,s.jsxs)(Ig,{children:[(0,s.jsx)(Rg,{children:(0,s.jsx)(Gt,{alt:"User Avatar",src:e.avatar})}),(0,s.jsx)(Rg,{children:e.email}),(0,s.jsx)(Rg,{children:e.phone}),(0,s.jsx)(Rg,{children:e.fristName+" "+e.lastName}),(0,s.jsxs)(Rg,{children:[(0,s.jsx)(Jt,{onClick:()=>{const t={firstName:e.fristName,lastName:e.lastName,email:e.email,phone:e.phone};c(e.uid),y(t),m(!0)},children:(0,s.jsx)(AI.Z,{})}),(0,s.jsx)(Jt,{onClick:()=>{c(e.uid),h(!0)},children:(0,s.jsx)(TI.Z,{})})]})]},e.id)))})]}),(0,s.jsx)(RM,{component:"div",count:k.length,page:E,onPageChange:(e,t)=>{A(t)},rowsPerPage:T,onRowsPerPageChange:e=>{C(parseInt(e.target.value,10)),A(0)},rowsPerPageOptions:[5,10,25],labelRowsPerPage:"Rows per page"})]})},UM=e=>(0,s.jsx)("div",{style:{padding:"30px",marginTop:"5%"},children:(0,s.jsx)(BM,{})}),VM=e=>(0,s.jsx)("div",{children:"membership"}),ZM=[{index:!0,element:(0,s.jsx)(og,{}),state:"home"},{path:"/dashboard",element:(0,s.jsx)(og,{}),state:"dashboard",sidebarProps:{displayText:"DashBoard",icon:(0,s.jsx)(ag,{})}},{path:"/Users",element:(0,s.jsx)(UM,{}),state:"Users",sidebarProps:{displayText:"Users",icon:(0,s.jsx)(sg,{})}},{path:"/membership",element:(0,s.jsx)(VM,{}),state:"membership",sidebarProps:{displayText:"Memberships",icon:(0,s.jsx)(lg,{})}}],qM=e=>e.map(((e,t)=>e.index?(0,s.jsx)(Be,{index:!0,path:e.path,element:(0,s.jsx)(ng,{state:e.state,children:e.element})},t):(0,s.jsx)(Be,{path:e.path,element:(0,s.jsx)(ng,{state:e.child?void 0:e.state,children:e.element}),children:e.child&&qM(e.child)},t))),GM=qM(ZM),WM=()=>{const e=Ha(),n=ke(),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[d,p]=(0,t.useState)(!1);bI(yr());function f(e,t,r){(function(e,t,n){return So(kn(e),so.credential(t,n))})(e,t,r).then((e=>{oi(e.user).then((e=>{console.log(e);const t=e.claims.admin;n(t?"/":"/map")})),p(!0),h("#4CAF50")})).catch((e=>{e.code,e.message;p(!0),h("#f44336"),c("Login Falid! Incorrect credential")}))}function m(e,t){(async function(e,t,n){var r;const i=qi(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Ui(i,o,"getOobCode",!0);n&&Eo(i,e,n),await eo(i,e)}else n&&Eo(i,o,n),await eo(i,o).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Ui(i,o,"getOobCode",!0);n&&Eo(i,e,n),await eo(i,e)}}))})(e,t).then((()=>{alert("Password reset email sent!")})).catch((e=>{e.code,e.message}))}return(0,s.jsx)("div",{className:"vh-100",children:(0,s.jsx)("div",{className:"container-fluid",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-sm-6 text-black",style:{zIndex:"10"},children:(0,s.jsx)("div",{className:"d-flex align-items-center h-custom-2 px-5 ms-xl-4 mt-5 pt-5 pt-xl-0 mt-xl-n5",children:(0,s.jsxs)("form",{style:{width:"23rem"},onSubmit:e=>{e.preventDefault()},children:[(0,s.jsx)("h3",{className:"fw-normal mb-3 pb-3",style:{letterSpacing:"1px",color:"white"},children:"Log in"}),(0,s.jsx)("div",{className:"form-outline mb-4",children:(0,s.jsx)("input",{type:"email",id:"form2Example18",className:"form-control form-control-lg",placeholder:"Email address",value:r,onChange:e=>{i(e.target.value)}})}),(0,s.jsx)("div",{className:"form-outline mb-4",children:(0,s.jsx)("input",{type:"password",id:"form2Example28",className:"form-control form-control-lg",placeholder:"password",value:o,onChange:e=>{a(e.target.value)}})}),(0,s.jsx)("div",{className:"pt-1 mb-4",children:(0,s.jsx)("button",{className:"btn btn-info btn-lg btn-block",style:{color:"white",width:"100%"},onClick:()=>{f(e,r,o)},children:"Login"})}),(0,s.jsx)("p",{className:"small mb-5 pb-lg-2",children:(0,s.jsx)("a",{className:" nav-link",href:"#!",style:{color:"white",border:"none"},onClick:()=>{m(e,r)},children:"Forgot password?"})}),(0,s.jsxs)("p",{style:{color:"white"},children:["Don't have an account?"," ",(0,s.jsx)("a",{href:"/signup",className:"link-info nav-link",style:{border:"none"},children:"Register here"})]})]})})}),(0,s.jsx)(zM,{message:l,visible:d,color:u,onClose:function(){p(!1)}}),(0,s.jsx)("div",{className:"col-sm-12 px-0 d-none d-sm-block",style:{position:"absolute"},children:(0,s.jsx)("img",{src:"/login.jpg",alt:"Login image",className:"w-100 vh-100",style:{objectFit:"cover",objectPosition:"left"}})})]})})})},HM=()=>{const e=Ha(),n=uk(),r=ke(),i=wI(bI(yr()),"sendMail"),[o,a]=(0,t.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[d,p]=(0,t.useState)(!1);const f=()=>{const e={firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""};let t=!0;return m.match(/^[a-zA-Z]+$/)||(e.firstName="First name must contain only letters",t=!1),y.match(/^[a-zA-Z]+$/)||(e.lastName="Last name must contain only letters",t=!1),_.match(/^\S+@\S+\.\S+$/)||(e.email="Please enter a valid email address",t=!1),A.match(/^[0-9]+$/)||(e.phone="Phone number must contain only numbers",t=!1),x.length<8?(e.password="Password must be at least 8 characters long",t=!1):x.match(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/)||(e.password="Password must contain at least one letter, one number, and one special character",t=!1),x!==S&&(e.confirmPassword="Passwords do not match",t=!1),a(e),t};const[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)(""),[_,b]=(0,t.useState)(""),[x,w]=(0,t.useState)(""),[S,E]=(0,t.useState)(""),[A,T]=(0,t.useState)(""),[C,k]=(0,t.useState)("");return(0,s.jsx)("div",{className:"vh-100",children:(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-sm-6 text-black",style:{zIndex:"10"},children:(0,s.jsx)("div",{className:"d-flex align-items-center h-custom-2 px-5 ms-xl-4 mt-5 pt-5 pt-xl-0 mt-xl-n5",children:(0,s.jsxs)("form",{style:{width:"23rem"},onSubmit:async e=>{e.preventDefault()},children:[(0,s.jsx)("h3",{className:"fw-normal mb-3 pb-3",style:{letterSpacing:"1px",color:"white"},children:"Sign Up"}),(0,s.jsxs)("div",{className:"form-outline mb-4 d-flex",children:[(0,s.jsxs)("div",{className:" me-3",children:[(0,s.jsx)("input",{type:"",id:"form2Example22",className:"form-control form-control-lg mb-3 ",placeholder:"First Name",value:m,onChange:e=>{g(e.target.value)}}),o.firstName&&(0,s.jsx)("div",{className:"error",children:o.firstName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"",id:"form2Example23",className:"form-control form-control-lg mb-3",placeholder:"Last Name",value:y,onChange:e=>{v(e.target.value)}}),o.lastName&&(0,s.jsx)("div",{className:"error",children:o.lastName})]})]}),(0,s.jsxs)("div",{className:"form-outline mb-4",children:[(0,s.jsx)("input",{type:"email",id:"form2Example18",className:"form-control form-control-lg",placeholder:"Email address",value:_,onChange:e=>{b(e.target.value)}}),o.email&&(0,s.jsx)("div",{className:"error",children:o.email})]}),(0,s.jsxs)("div",{className:"form-outline mb-4",children:[(0,s.jsx)("input",{type:"phone",id:"form2Example20",className:"form-control form-control-lg",placeholder:"Phone Number",value:A,onChange:e=>{T(e.target.value)}}),o.phone&&(0,s.jsx)("div",{className:"error",children:o.phone})]}),(0,s.jsxs)("div",{className:"form-outline mb-4",children:[(0,s.jsx)("input",{type:"password",id:"form2Example28",className:"form-control form-control-lg",placeholder:"password",value:x,onChange:e=>{w(e.target.value)}}),o.password&&(0,s.jsx)("div",{className:"error",children:o.password})]}),(0,s.jsxs)("div",{className:"form-outline mb-4",children:[(0,s.jsx)("input",{type:"password",id:"form2Example29",className:"form-control form-control-lg",placeholder:"confirm password",value:S,onChange:e=>{E(e.target.value)}}),o.confirmPassword&&(0,s.jsx)("div",{className:"error",children:o.confirmPassword})]}),(0,s.jsx)("div",{className:"pt-1 mb-4",children:(0,s.jsx)("button",{className:"btn btn-info btn-lg btn-block",style:{color:"white",width:"100%"},onClick:()=>{!function(e,t,o){f()&&Ao(e,t,o).then((async e=>{const o=e.user;Co(o,{displayName:"".concat(m," ").concat(y)}).then((()=>{console.log("Profile updated")})).catch((e=>{console.log("Profile update Error")})),iI(sk(n,"users",o.uid),{fristName:m,lastName:y,email:t,phone:A,uid:o.uid}),To(o).then((()=>{console.log("Verification Email sent")})),i({email:t,title:"Welcome to Argos Geospatial-Intelligence Tool",content:"Dear ".concat(m," ").concat(y,",\n\nWe're delighted to welcome you to the Argos Geospatial-Intelligence Tool community! \n Your account has been successfully created and you now have full access to our wide range of powerful geospatial tools and capabilities. \n We value your trust and commitment and we're excited to support your work. Thank you for choosing Argos Geospatial-Intelligence Tool, and here's to making the world a more connected and understood place.\n\nBest regards,\n\nArgos Geospatial-Intelligence Team")}).then((e=>{})),r("/signin")})).catch((e=>{e.code;const t=e.message;console.log(t),p(!0),h("#f44336"),"auth/email-already-in-use"===e.code?c("An account with this email already exists. Please sign in or use a different email address."):c(e.message)}))}(e,_,x)},children:"Sign Up"})})]})})}),(0,s.jsx)("div",{className:"col-sm-12 px-0 d-none d-sm-block",style:{position:"absolute"},children:(0,s.jsx)("img",{src:"/login.jpg",alt:"Login image",className:"w-100 vh-100",style:{objectFit:"cover",objectPosition:"left"}})})]}),(0,s.jsx)(zM,{message:l,visible:d,color:u,onClose:function(){p(!1)}})]})})};let XM,KM;const YM=new WeakMap,JM=new WeakMap,QM=new WeakMap,$M=new WeakMap,eO=new WeakMap;let tO={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return JM.get(e);if("objectStoreNames"===t)return e.objectStoreNames||QM.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return iO(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function nO(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(KM||(KM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(oO(this),n),iO(YM.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return iO(e.apply(oO(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(oO(this),t,...r);return QM.set(o,t.sort?t.sort():[t]),iO(o)}}function rO(e){return"function"===typeof e?nO(e):(e instanceof IDBTransaction&&function(e){if(JM.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));JM.set(e,t)}(e),t=e,(XM||(XM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,tO):e);var t}function iO(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(iO(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&YM.set(t,e)})).catch((()=>{})),eO.set(t,e),t}(e);if($M.has(e))return $M.get(e);const t=rO(e);return t!==e&&($M.set(e,t),eO.set(t,e)),t}const oO=e=>eO.get(e);const aO=["get","getKey","getAll","getAllKeys","count"],sO=["put","add","delete","clear"],lO=new Map;function cO(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(lO.get(t))return lO.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=sO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!aO.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return lO.set(t,o),o}!function(e){tO=e(tO)}((e=>({...e,get:(t,n,r)=>cO(t,n)||e.get(t,n,r),has:(t,n)=>!!cO(t,n)||e.has(t,n)})));const uO="@firebase/installations",hO="0.6.4",dO=1e4,pO="w:".concat(hO),fO="FIS_v2",mO=36e5,gO=new yn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yO(e){return e instanceof gn&&e.code.includes("request-failed")}function vO(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function _O(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function bO(e,t){const n=(await t.json()).error;return gO.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function xO(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wO(e,t){let{refreshToken:n}=t;const r=xO(e);return r.append("Authorization",function(e){return"".concat(fO," ").concat(e)}(n)),r}async function SO(e){const t=await e();return t.status>=500&&t.status<600?e():t}function EO(e){return new Promise((t=>{setTimeout(t,e)}))}const AO=/^[cdef][\w-]{21}$/;function TO(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return AO.test(t)?t:""}catch(Iu){return""}}function CO(e){return"".concat(e.appName,"!").concat(e.appId)}const kO=new Map;function IO(e,t){const n=CO(e);PO(n,t),function(e,t){const n=MO();n&&n.postMessage({key:e,fid:t});OO()}(n,t)}function PO(e,t){const n=kO.get(e);if(n)for(const r of n)r(t)}let LO=null;function MO(){return!LO&&"BroadcastChannel"in self&&(LO=new BroadcastChannel("[Firebase] FID Change"),LO.onmessage=e=>{PO(e.data.key,e.data.fid)}),LO}function OO(){0===kO.size&&LO&&(LO.close(),LO=null)}const NO="firebase-installations-store";let RO=null;function DO(){return RO||(RO=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=iO(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(iO(a.result),e.oldVersion,e.newVersion,iO(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(NO)}})),RO}async function FO(e,t){const n=CO(e),r=(await DO()).transaction(NO,"readwrite"),i=r.objectStore(NO),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||IO(e,t.fid),t}async function jO(e){const t=CO(e),n=(await DO()).transaction(NO,"readwrite");await n.objectStore(NO).delete(t),await n.done}async function zO(e,t){const n=CO(e),r=(await DO()).transaction(NO,"readwrite"),i=r.objectStore(NO),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||IO(e,a.fid),a}async function BO(e){let t;const n=await zO(e.appConfig,(n=>{const r=function(e){return ZO(e||{fid:TO(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(gO.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=vO(n),a=xO(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:fO,appId:n.appId,sdkVersion:pO},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await SO((()=>fetch(o,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:_O(e.authToken)}}throw await bO("Create Installation",u)}(e,t);return FO(e.appConfig,n)}catch(n){throw yO(n)&&409===n.customData.serverCode?await jO(e.appConfig):await FO(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:UO(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function UO(e){let t=await VO(e.appConfig);for(;1===t.registrationStatus;)await EO(100),t=await VO(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await BO(e);return n||t}return t}function VO(e){return zO(e,(e=>{if(!e)throw gO.create("installation-not-found");return ZO(e)}))}function ZO(e){return 1===(t=e).registrationStatus&&t.registrationTime+dO<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function qO(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(vO(e),"/").concat(n,"/authTokens:generate")}(n,t),o=wO(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:pO,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},c=await SO((()=>fetch(i,l)));if(c.ok){return _O(await c.json())}throw await bO("Generate Auth Token",c)}async function GO(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await zO(e.appConfig,(r=>{if(!KO(r))throw gO.create("not-registered");const i=r.authToken;if(!n&&YO(i))return r;if(1===i.requestStatus)return t=WO(e,n),r;{if(!navigator.onLine)throw gO.create("app-offline");const n=JO(r);return t=XO(e,n),n}})),i=t?await t:r.authToken;return i}async function WO(e,t){let n=await HO(e.appConfig);for(;1===n.authToken.requestStatus;)await EO(100),n=await HO(e.appConfig);const r=n.authToken;return 0===r.requestStatus?GO(e,t):r}function HO(e){return zO(e,(e=>{if(!KO(e))throw gO.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+dO<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}async function XO(e,t){try{const n=await qO(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await FO(e.appConfig,r),n}catch(n){if(!yO(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await FO(e.appConfig,n)}else await jO(e.appConfig);throw n}}function KO(e){return void 0!==e&&2===e.registrationStatus}function YO(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+mO}(e)}function JO(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}async function QO(e){const{registrationPromise:t}=await BO(e);t&&await t}function $O(e){return gO.create("missing-app-config-values",{valueName:e})}const eN="installations",tN=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw $O("App Configuration");if(!e.name)throw $O("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw $O(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:dr(t,"heartbeat"),_delete:()=>Promise.resolve()}},nN=e=>{const t=dr(e.getProvider("app").getImmediate(),eN).getImmediate(),n={getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await BO(t);return r?r.catch(console.error):GO(t).catch(console.error),n.fid}(t),getToken:e=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await QO(n);return(await GO(n,t)).token}(t,e)};return n};hr(new In(eN,tN,"PUBLIC")),hr(new In("installations-internal",nN,"PRIVATE")),vr(uO,hO),vr(uO,hO,"esm2017");const rN="analytics",iN="https://www.googletagmanager.com/gtag/js",oN=new zn("@firebase/analytics"),aN=new yn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function sN(e){if(!e.startsWith(iN)){const t=aN.create("invalid-gtag-resource",{gtagURL:e});return oN.warn(t.message),""}return e}function lN(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function cN(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:sN}),r=document.createElement("script"),i="".concat(iN,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}async function uN(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await lN(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(s){oN.error(s)}e("config",i,o)}async function hN(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await lN(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(o){oN.error(o)}}function dN(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return async function(i){try{for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if("event"===i){const[r,i]=a;await hN(e,t,n,r,i)}else if("config"===i){const[i,o]=a;await uN(e,t,n,r,i,o)}else if("consent"===i){const[t]=a;e("consent","update",t)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){oN.error(l)}}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}const pN=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function fN(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function mN(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:fN(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(s){}throw aN.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}async function gN(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pN;var a;const{appId:s,measurementId:l}=e;try{await yN(n,r)}catch(c){if(l)return oN.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:s,measurementId:l};throw c}try{const t=await mN(e);return o.deleteThrottleMetadata(s),t}catch(c){const t=c;if(!vN(t)){if(o.deleteThrottleMetadata(s),l)return oN.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:s,measurementId:l};throw c}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?Cn(i,o.intervalMillis,30):Cn(i,o.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return o.setThrottleMetadata(s,u),oN.debug("Calling attemptFetch again in ".concat(r," millis")),gN(e,u,n,o)}}function yN(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(o),r(aN.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function vN(e){if(!(e instanceof gn)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class _N{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let bN,xN;function wN(e){xN=e}function SN(e){bN=e}async function EN(e,t,n,r,i,o,a){var s;const l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pN,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw aN.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw aN.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new _N;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),gN({appId:r,apiKey:i,measurementId:o},a,s,t)}(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&oN.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>oN.error(e))),t.push(l);const c=async function(){if(!fn())return oN.warn(aN.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await mn()}catch(e){return oN.warn(aN.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(iN)&&n.src.includes(e))return n;return null})(o)||cN(o,u.measurementId),xN&&(i("consent","default",xN),wN(void 0)),i("js",new Date);const d=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",u.measurementId,d),bN&&(i("set",bN),SN(void 0)),u.measurementId}class AN{constructor(e){this.app=e}_delete(){return delete TN[this.app.options.appId],Promise.resolve()}}let TN={},CN=[];const kN={};let IN,PN,LN="dataLayer",MN="gtag",ON=!1;function NN(){const e=[];if(pn()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=aN.create("invalid-analytics-context",{errorInfo:t});oN.warn(n.message)}}function RN(e,t,n){NN();const r=e.options.appId;if(!r)throw aN.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw aN.create("no-api-key");oN.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=TN[r])throw aN.create("already-exists",{id:r});if(!ON){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(LN);const{wrappedGtag:e,gtagCore:t}=dN(TN,CN,kN,LN,MN);PN=e,IN=t,ON=!0}TN[r]=EN(e,CN,kN,t,IN,LN,n);return new AN(e)}function DN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=dr(e,rN);if(n.isInitialized()){const e=n.getImmediate();if(_n(t,n.getOptions()))return e;throw aN.create("already-initialized")}const r=n.initialize({options:t});return r}function FN(e,t,n,r){e=kn(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(PN,TN[e.app.options.appId],t,n,r).catch((e=>oN.error(e)))}const jN="@firebase/analytics",zN="0.10.0";hr(new In(rN,((e,t)=>{let{options:n}=t;return RN(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),hr(new In("analytics-internal",(function(e){try{const t=e.getProvider(rN).getImmediate();return{logEvent:(e,n,r)=>FN(t,e,n,r)}}catch(t){throw aN.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),vr(jN,zN),vr(jN,zN,"esm2017");const BN=gr({apiKey:"AIzaSyDCGCdyoAU_aDpqvd1GbwYrz9tzeQEIsUw",authDomain:"argos-a8807.firebaseapp.com",databaseURL:"https://argos-a8807-default-rtdb.firebaseio.com",projectId:"argos-a8807",storageBucket:"argos-a8807.appspot.com",messagingSenderId:"1057758476555",appId:"1:1057758476555:web:afbf1a80682262ed254a0e",measurementId:"G-NXM2E9K7EN"});uk(BN),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr();e=kn(e);const t=dr(e,rN);t.isInitialized()?t.getImmediate():DN(e)}(BN);const UN=function(e){let{component:n,...r}=e;const[i,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!0),h=Ha();return(0,t.useEffect)((()=>{const e=function(e,t,n,r){return kn(e).onAuthStateChanged(t,n,r)}(h,(e=>{e?(console.log(e),l(!0)):l(!1),u(!1)}));return e}),[]),c?(0,s.jsx)("div",{}):(0,s.jsx)(s.Fragment,{children:a?(0,s.jsx)(ze,{}):(0,s.jsx)(je,{to:"/signin"})})},VN=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ZN(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,Ws.Z)(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const e=o.getComputedStyle(t);a=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const e=a.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?"translateX(".concat(i?i.right+s-r.left:o.innerWidth+s-r.left,"px)"):"right"===e?"translateX(-".concat(i?r.right-i.left-s:r.left+r.width-s,"px)"):"up"===e?"translateY(".concat(i?i.bottom+l-r.top:o.innerHeight+l-r.top,"px)"):"translateY(-".concat(i?r.top-i.top+r.height-l:r.top+r.height-l,"px)")}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const qN=t.forwardRef((function(n,r){const i=Us(),o={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:l,appear:c=!0,children:u,container:h,direction:d="down",easing:p=o,in:f,onEnter:m,onEntered:g,onEntering:y,onExit:v,onExited:_,onExiting:b,style:x,timeout:w=a,TransitionComponent:S=yP}=n,E=(0,ot.Z)(n,VN),A=t.useRef(null),T=(0,Up.Z)(u.ref,A,r),C=e=>t=>{e&&(void 0===t?e(A.current):e(A.current,t))},k=C(((e,t)=>{ZN(d,e,h),vP(e),m&&m(e,t)})),I=C(((t,n)=>{const r=_P({timeout:w,style:x,easing:p},{mode:"enter"});t.style.webkitTransition=i.transitions.create("-webkit-transform",(0,e.Z)({},r)),t.style.transition=i.transitions.create("transform",(0,e.Z)({},r)),t.style.webkitTransform="none",t.style.transform="none",y&&y(t,n)})),P=C(g),L=C(b),M=C((e=>{const t=_P({timeout:w,style:x,easing:p},{mode:"exit"});e.style.webkitTransition=i.transitions.create("-webkit-transform",t),e.style.transition=i.transitions.create("transform",t),ZN(d,e,h),v&&v(e)})),O=C((e=>{e.style.webkitTransition="",e.style.transition="",_&&_(e)})),N=t.useCallback((()=>{A.current&&ZN(d,A.current,h)}),[d,h]);return t.useEffect((()=>{if(f||"down"===d||"right"===d)return;const e=(0,Vs.Z)((()=>{A.current&&ZN(d,A.current,h)})),t=(0,Ws.Z)(A.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[d,f,h]),t.useEffect((()=>{f||N()}),[f,N]),(0,s.jsx)(S,(0,e.Z)({nodeRef:A,onEnter:k,onEntered:P,onEntering:I,onExit:M,onExited:O,onExiting:L,addEndListener:e=>{l&&l(A.current,e)},appear:c,in:f,timeout:w},E,{children:(n,r)=>t.cloneElement(u,(0,e.Z)({ref:T,style:(0,e.Z)({visibility:"exited"!==n||f?void 0:"hidden"},x,u.props.style)},r))}))})),GN=qN;function WN(e){return(0,dt.Z)("MuiDrawer",e)}(0,ht.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const HN=["BackdropProps"],XN=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],KN=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},YN=(0,lt.ZP)(zP,{name:"MuiDrawer",slot:"Root",overridesResolver:KN})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}})),JN=(0,lt.ZP)("div",{shouldForwardProp:lt.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:KN})({flex:"0 0 auto"}),QN=(0,lt.ZP)(vt,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["paperAnchor".concat((0,ct.Z)(n.anchor))],"temporary"!==n.variant&&t["paperAnchorDocked".concat((0,ct.Z)(n.anchor))]]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(n.vars||n).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===r.anchor&&{left:0},"top"===r.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===r.anchor&&{right:0},"bottom"===r.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===r.anchor&&"temporary"!==r.variant&&{borderRight:"1px solid ".concat((n.vars||n).palette.divider)},"top"===r.anchor&&"temporary"!==r.variant&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider)},"right"===r.anchor&&"temporary"!==r.variant&&{borderLeft:"1px solid ".concat((n.vars||n).palette.divider)},"bottom"===r.anchor&&"temporary"!==r.variant&&{borderTop:"1px solid ".concat((n.vars||n).palette.divider)})})),$N={left:"right",right:"left",top:"down",bottom:"up"};const eR=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiDrawer"}),a=Us(),l={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{anchor:c="left",BackdropProps:u,children:h,className:d,elevation:p=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:m}={},onClose:g,open:y=!1,PaperProps:v={},SlideProps:_,TransitionComponent:b=GN,transitionDuration:x=l,variant:w="temporary"}=o,S=(0,ot.Z)(o.ModalProps,HN),E=(0,ot.Z)(o,XN),A=t.useRef(!1);t.useEffect((()=>{A.current=!0}),[]);const T=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?$N[t]:t}(a,c),C=c,k=(0,e.Z)({},o,{anchor:C,elevation:p,open:y,variant:w},E),I=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,ct.Z)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,ct.Z)(n))]};return(0,st.Z)(i,WN,t)})(k),P=(0,s.jsx)(QN,(0,e.Z)({elevation:"temporary"===w?p:0,square:!0},v,{className:(0,at.default)(I.paper,v.className),ownerState:k,children:h}));if("permanent"===w)return(0,s.jsx)(JN,(0,e.Z)({className:(0,at.default)(I.root,I.docked,d),ownerState:k,ref:r},E,{children:P}));const L=(0,s.jsx)(b,(0,e.Z)({in:y,direction:$N[T],timeout:x,appear:A.current},_,{children:P}));return"persistent"===w?(0,s.jsx)(JN,(0,e.Z)({className:(0,at.default)(I.root,I.docked,d),ownerState:k,ref:r},E,{children:L})):(0,s.jsx)(YN,(0,e.Z)({BackdropProps:(0,e.Z)({},u,m,{transitionDuration:x}),className:(0,at.default)(I.root,I.modal,d),open:y,ownerState:k,onClose:g,hideBackdrop:f,ref:r},E,S,{children:L}))})),tR=eR;var nR=n(4929),rR=n(6886);const iR=["component","direction","spacing","divider","children"];function oR(e,n){const r=t.Children.toArray(e).filter(Boolean);return r.reduce(((e,i,o)=>(e.push(i),o<r.length-1&&e.push(t.cloneElement(n,{key:"separator-".concat(o)})),e)),[])}const aR=(0,lt.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})((t=>{let{ownerState:n,theme:r}=t,i=(0,e.Z)({display:"flex",flexDirection:"column"},(0,nR.k9)({theme:r},(0,nR.P$)({values:n.direction,breakpoints:r.breakpoints.values}),(e=>({flexDirection:e}))));if(n.spacing){const e=(0,rR.hB)(r),t=Object.keys(r.breakpoints.values).reduce(((e,t)=>(("object"===typeof n.spacing&&null!=n.spacing[t]||"object"===typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e)),{}),o=(0,nR.P$)({values:n.direction,base:t}),a=(0,nR.P$)({values:n.spacing,base:t});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const s=(t,r)=>{return{"& > :not(style) + :not(style)":{margin:0,["margin".concat((i=r?o[r]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,rR.NA)(e,t)}};var i};i=(0,QI.Z)(i,(0,nR.k9)({theme:r},a,s))}return i=(0,nR.dt)(r.breakpoints,i),i})),sR=t.forwardRef((function(t,n){const r=(0,i.Z)({props:t,name:"MuiStack"}),o=(0,It.Z)(r),{component:a="div",direction:l="column",spacing:c=0,divider:u,children:h}=o,d=(0,ot.Z)(o,iR),p={direction:l,spacing:c};return(0,s.jsx)(aR,(0,e.Z)({as:a,ownerState:p,ref:n},d,{children:u?oR(h,u):h}))})),lR=sR,cR=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],uR=(0,lt.ZP)(Wt.Z,{shouldForwardProp:e=>(0,lt.FO)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Gp.selected)]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity),["&.".concat(Gp.focusVisible)]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},["&.".concat(Gp.selected,":hover")]:{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,ut.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}},["&.".concat(Gp.focusVisible)]:{backgroundColor:(n.vars||n).palette.action.focus},["&.".concat(Gp.disabled)]:{opacity:(n.vars||n).palette.action.disabledOpacity}},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},"flex-start"===r.alignItems&&{alignItems:"flex-start"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.dense&&{paddingTop:4,paddingBottom:4})})),hR=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiListItemButton"}),{alignItems:a="center",autoFocus:l=!1,component:c="div",children:u,dense:h=!1,disableGutters:d=!1,divider:p=!1,focusVisibleClassName:f,selected:m=!1,className:g}=o,y=(0,ot.Z)(o,cR),v=t.useContext(Op),_=t.useMemo((()=>({dense:h||v.dense||!1,alignItems:a,disableGutters:d})),[a,v.dense,h,d]),b=t.useRef(null);(0,Bp.Z)((()=>{l&&b.current&&b.current.focus()}),[l]);const x=(0,e.Z)({},o,{alignItems:a,dense:_.dense,disableGutters:d,divider:p,selected:m}),w=(t=>{const{alignItems:n,classes:r,dense:i,disabled:o,disableGutters:a,divider:s,selected:l}=t,c={root:["root",i&&"dense",!a&&"gutters",s&&"divider",o&&"disabled","flex-start"===n&&"alignItemsFlexStart",l&&"selected"]},u=(0,st.Z)(c,qp,r);return(0,e.Z)({},r,u)})(x),S=(0,Up.Z)(b,r);return(0,s.jsx)(Op.Provider,{value:_,children:(0,s.jsx)(uR,(0,e.Z)({ref:S,href:y.href||y.to,component:(y.href||y.to)&&"div"===c?"a":c,focusVisibleClassName:(0,at.default)(w.focusVisible,f),ownerState:x,className:(0,at.default)(w.root,g)},y,{classes:w,children:u}))})})),dR=["className"],pR=(0,lt.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({minWidth:56,color:(n.vars||n).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===r.alignItems&&{marginTop:8})})),fR=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiListItemIcon"}),{className:a}=o,l=(0,ot.Z)(o,dR),c=t.useContext(Op),u=(0,e.Z)({},o,{alignItems:c.alignItems}),h=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,st.Z)(r,GI,n)})(u);return(0,s.jsx)(pR,(0,e.Z)({className:(0,at.default)(h.root,a),ownerState:u,ref:r},l))})),mR=e=>{let{item:t}=e;const{appState:n}=S((e=>e.appState));return t.sidebarProps&&t.path?(0,s.jsxs)(hR,{component:Ye,to:t.path,sx:{"&: hover":{backgroundColor:rt.sidebar.hoverBg},backgroundColor:n===t.state?rt.sidebar.activeBg:"unset",paddingY:"12px",paddingX:"24px"},children:[(0,s.jsx)(fR,{sx:{color:rt.sidebar.color},children:t.sidebarProps.icon&&t.sidebarProps.icon}),t.sidebarProps.displayText]}):null};var gR=n(4965);function yR(e){return(0,dt.Z)("MuiCollapse",e)}(0,ht.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const vR=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],_R=(0,lt.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((t=>{let{theme:n,ownerState:r}=t;return(0,e.Z)({height:0,overflow:"hidden",transition:n.transitions.create("height")},"horizontal"===r.orientation&&{height:"auto",width:0,transition:n.transitions.create("width")},"entered"===r.state&&(0,e.Z)({height:"auto",overflow:"visible"},"horizontal"===r.orientation&&{width:"auto"}),"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&{visibility:"hidden"})})),bR=(0,lt.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((t=>{let{ownerState:n}=t;return(0,e.Z)({display:"flex",width:"100%"},"horizontal"===n.orientation&&{width:"auto",height:"100%"})})),xR=(0,lt.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((t=>{let{ownerState:n}=t;return(0,e.Z)({width:"100%"},"horizontal"===n.orientation&&{width:"auto",height:"100%"})})),wR=t.forwardRef((function(n,r){const o=(0,i.Z)({props:n,name:"MuiCollapse"}),{addEndListener:a,children:l,className:c,collapsedSize:u="0px",component:h,easing:d,in:p,onEnter:f,onEntered:m,onEntering:g,onExit:y,onExited:v,onExiting:_,orientation:b="vertical",style:x,timeout:w=gR.x9.standard,TransitionComponent:S=yP}=o,E=(0,ot.Z)(o,vR),A=(0,e.Z)({},o,{orientation:b,collapsedSize:u}),T=(e=>{const{orientation:t,classes:n}=e,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,st.Z)(r,yR,n)})(A),C=Us(),k=t.useRef(),I=t.useRef(null),P=t.useRef(),L="number"===typeof u?"".concat(u,"px"):u,M="horizontal"===b,O=M?"width":"height";t.useEffect((()=>()=>{clearTimeout(k.current)}),[]);const N=t.useRef(null),R=(0,Up.Z)(r,N),D=e=>t=>{if(e){const n=N.current;void 0===t?e(n):e(n,t)}},F=()=>I.current?I.current[M?"clientWidth":"clientHeight"]:0,j=D(((e,t)=>{I.current&&M&&(I.current.style.position="absolute"),e.style[O]=L,f&&f(e,t)})),z=D(((e,t)=>{const n=F();I.current&&M&&(I.current.style.position="");const{duration:r,easing:i}=_P({style:x,timeout:w,easing:d},{mode:"enter"});if("auto"===w){const t=C.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(t,"ms"),P.current=t}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[O]="".concat(n,"px"),e.style.transitionTimingFunction=i,g&&g(e,t)})),B=D(((e,t)=>{e.style[O]="auto",m&&m(e,t)})),U=D((e=>{e.style[O]="".concat(F(),"px"),y&&y(e)})),V=D(v),Z=D((e=>{const t=F(),{duration:n,easing:r}=_P({style:x,timeout:w,easing:d},{mode:"exit"});if("auto"===w){const n=C.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),P.current=n}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[O]=L,e.style.transitionTimingFunction=r,_&&_(e)}));return(0,s.jsx)(S,(0,e.Z)({in:p,onEnter:j,onEntered:B,onEntering:z,onExit:U,onExited:V,onExiting:Z,addEndListener:e=>{"auto"===w&&(k.current=setTimeout(e,P.current||0)),a&&a(N.current,e)},nodeRef:N,timeout:"auto"===w?null:w},E,{children:(t,n)=>(0,s.jsx)(_R,(0,e.Z)({as:h,className:(0,at.default)(T.root,c,{entered:T.entered,exited:!p&&"0px"===L&&T.hidden}[t]),style:(0,e.Z)({[M?"minWidth":"minHeight"]:L},x),ownerState:(0,e.Z)({},A,{state:t}),ref:R},n,{children:(0,s.jsx)(bR,{ownerState:(0,e.Z)({},A,{state:t}),className:T.wrapper,ref:I,children:(0,s.jsx)(xR,{ownerState:(0,e.Z)({},A,{state:t}),className:T.wrapperInner,children:l})})}))}))}));wR.muiSupportAuto=!0;const SR=wR;var ER=n(4107),AR=n(7205);const TR=e=>{var n;let{item:r}=e;const[i,o]=(0,t.useState)(!1),{appState:a}=S((e=>e.appState));return(0,t.useEffect)((()=>{a.includes(r.state)&&o(!0)}),[a,r]),r.sidebarProps?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(hR,{onClick:()=>o(!i),sx:{"&: hover":{backgroundColor:rt.sidebar.hoverBg},paddingY:"12px",paddingX:"24px"},children:[(0,s.jsx)(fR,{sx:{color:rt.sidebar.color},children:r.sidebarProps.icon&&r.sidebarProps.icon}),(0,s.jsx)(lf,{disableTypography:!0,primary:(0,s.jsx)(Dt,{children:r.sidebarProps.displayText})}),i?(0,s.jsx)(ER.Z,{}):(0,s.jsx)(AR.Z,{})]}),(0,s.jsx)(SR,{in:i,timeout:"auto",children:(0,s.jsx)(Fp,{children:null===(n=r.child)||void 0===n?void 0:n.map(((e,t)=>e.sidebarProps?e.child?(0,s.jsx)(TR,{item:e},t):(0,s.jsx)(mR,{item:e},t):null))})})]}):null},CR=TR,kR=()=>(0,s.jsx)(tR,{variant:"permanent",style:{borderRight:"0.01em solid white"},sx:{width:it.sidebar.width,flexShrink:0,"& .MuiDrawer-paper":{width:it.sidebar.width,boxSizing:"border-box",borderRight:"0px",backgroundColor:rt.sidebar.bg,color:rt.sidebar.color}},children:(0,s.jsxs)(Fp,{disablePadding:!0,style:{borderRight:"0.01em solid white"},children:[(0,s.jsx)(kt,{sx:{marginBottom:"20px"},children:(0,s.jsx)(lR,{sx:{width:"100%"},direction:"row",justifyContent:"center",children:(0,s.jsx)(Gt,{src:Ka.images.logo,style:{height:"60px",width:"60px",marginTop:"30px",borderRadius:"30px"}})})}),ZM.map(((e,t)=>e.sidebarProps?e.child?(0,s.jsx)(CR,{item:e},t):(0,s.jsx)(mR,{item:e},t):null))]})}),IR=()=>{const e=Ha();return(0,s.jsxs)(St,{style:{background:"transparent"},sx:{width:"calc(100%)",boxShadow:"unset",backgroundColor:"black",color:"white",minHeight:"0px"},children:[(0,s.jsx)(kt,{style:{background:"#233044"}}),(0,s.jsx)(Gt,{style:{width:"40px",height:"40px",borderRadius:"20px",position:"absolute",marginTop:"12px",marginLeft:"90%"},alt:"Remy Sharp"}),(0,s.jsx)(Dt,{variant:"h6",style:{color:"white",position:"absolute",marginTop:"20px",marginLeft:"93%",fontSize:"16px"},children:"Admin"}),(0,s.jsx)(Jt,{style:{position:"absolute",marginTop:"8px",marginLeft:"97%",width:"30px"},onClick:()=>{!function(e){Po(e).then((()=>{console.log("Sign-out successful.")})).catch((e=>{}))}(e)},children:(0,s.jsx)("img",{src:Ka.images.logout,alt:"Button label",style:{width:"30px",height:"30px"}})})]})},PR=()=>(0,s.jsxs)(nt,{sx:{display:"flex"},children:[(0,s.jsx)(IR,{}),(0,s.jsx)(nt,{component:"nav",sx:{width:it.sidebar.width,flexShrink:0},children:(0,s.jsx)(kR,{})}),(0,s.jsx)(nt,{component:"main",style:{padding:"0px"},sx:{flexGrow:1,p:3,width:"calc(100% - ".concat(it.sidebar.width,")"),minHeight:"100vh",backgroundColor:rt.mainBg},children:(0,s.jsx)(ze,{})})]});const LR=function(){return(0,s.jsx)(Ke,{children:(0,s.jsxs)(Ve,{children:[(0,s.jsx)(Be,{path:"/signin",element:(0,s.jsx)(WM,{})}),(0,s.jsx)(Be,{path:"/signup",element:(0,s.jsx)(HM,{})}),(0,s.jsx)(Be,{element:(0,s.jsx)(UN,{}),children:(0,s.jsx)(Be,{path:"/map",element:(0,s.jsx)(Ja,{}),children:ig})}),(0,s.jsx)(Be,{element:(0,s.jsx)(UN,{}),children:(0,s.jsx)(Be,{path:"/",element:(0,s.jsx)(PR,{}),children:GM})})]})})},MR=function(e){var t,n=Km(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,l=r.devTools,c=void 0===l||l,u=r.preloadedState,h=void 0===u?void 0:u,d=r.enhancers,p=void 0===d?void 0:d;if("function"===typeof o)t=o;else{if(!Wm(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Lm(o)}var f=s;"function"===typeof f&&(f=f(n));var m=Om.apply(void 0,f),g=Mm;c&&(g=Gm(qm({trace:!1},"object"===typeof c&&c)));var y=[m];return Array.isArray(p)?y=jm([m],p):"function"===typeof p&&(y=p(y)),Pm(t,h,g.apply(void 0,y))}({reducer:{appState:tg}}),OR=e=>{e&&e instanceof Function&&n.e(27).then(n.bind(n,4027)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)}))};d.createRoot(document.getElementById("root")).render((0,s.jsx)(t.StrictMode,{children:(0,s.jsxs)(k,{store:MR,children:[(0,s.jsx)(h,{}),(0,s.jsx)(LR,{})]})})),OR()})()})();